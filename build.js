!function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return r(n?n:e)},u,u.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){var i=e("vigour-js/value"),r=(e("vigour-js/util/config"),e("vigour-js/browser/cases")),o=window.location;t.exports=n=new i({send:{apiDefer:function(e,t){if(this.body||this.address||this.subject){var n=this.body&&this.body.val,i=this.subject&&this.subject.val,a=this.address&&this.address.val,s=this;if(r.android&&window.cordova&&window.plugins.socialsharing)window.plugins.socialsharing.shareViaEmail(n,i,a?[a]:[],null,null,null,function(t){e("success"),this.$empty("loading")},function(t){s.type=t,e("error"),this.$empty("loading")});else{if(redirect="mailto:"+(a||"")+"?subject="+(i||"")+"&body="+(n||""),r.android)o.replace(redirect);else{{o.href}o.href=redirect}e("success"),this.$empty("loading")}}else e(!0)}},share:{apiDefer:function(e,t){var n=this._parent;this.val===!0||t[0]===!0?(n.send.once(function(t){e(t)}),n.send.val={address:this.address.val,body:this.body.val,subject:this.subject.val,val:!0}):e(!0)}}})},{"vigour-js/browser/cases":202,"vigour-js/util/config":306,"vigour-js/value":327}],2:[function(e,t,n){{var i,r=e("vigour-js/value"),o=e("vigour-js/util/config");e("vigour-js/value/flags/process")}t.exports=n=new r({api:{defer:function(e,t){if(t[0]!==!0||i)return!0;if(window.cordova&&!i)i=!0,e();else{if(t[0]!==!0||i)return!0;var n=document.createElement("script"),r=this,a=n.onerror=function(){r.clearCache(),r.val=t[0]="error",e()};n.src=o.facebook.web,n.id="facebook-jssdk",window.fbAsyncInit=function(){try{window.FB.init({appId:o.facebook.id,xfbml:!0,version:"v2.1"}),i=!0,e()}catch(t){r.type=t.message,a()}},document.getElementsByTagName("head")[0].appendChild(n)}}}}),n._name="facebook",e("./login"),e("./share")},{"./login":3,"./share":4,"vigour-js/util/config":306,"vigour-js/value":327,"vigour-js/value/flags/process":324}],3:[function(e,t,n){{var i=(e("vigour-js/value"),e("vigour-js/util/config"),e("vigour-js/util"),e("./index.js")),r=e("vigour-js/browser/ua");e("vigour-js/browser/network/url"),e("vigour-js/app/")}i.val={login:{apiDefer:function(e,t){var n=this;t[0]!==!0?(e("error"),this.type="type"):!window.cordova||"windows"===r.platform&&"phone"===r.device?window.FB.login(function(t){"connected"===t.status?(n.set("token",t.authResponse.accessToken),n.set("id",t.authResponse.userID),e("success")):(n.type=t,e("error"))},{scope:"public_profile,email"}):facebookConnectPlugin.login(["public_profile","email"],function(t){"connected"===t.status?n.token&&n.token.val===t.authResponse.accessToken?e("error"):(n.set("token",t.authResponse.accessToken),n.set("id",t.authResponse.userID),e("success")):(n.type=t,e("error"))},function(t){n.type=t,e("error")})}}}},{"./index.js":2,"vigour-js/app/":174,"vigour-js/browser/network/url":232,"vigour-js/browser/ua":233,"vigour-js/util":315,"vigour-js/util/config":306,"vigour-js/value":327}],4:[function(e,t,n){{var i,r=(e("vigour-js/value"),e("vigour-js/util/config"),e("vigour-js/util"),e("./index.js")),o=e("vigour-js/browser/cases"),a=(e("vigour-js/browser/network/url"),e("vigour-js/browser/ua"));e("vigour-js/app/")}r.val={share:{apiDefer:function(e,t){var n=this,r=this.url&&this.url.val;r?window.cordova?"windows"===a.platform&&"phone"===a.device?window.plugins.socialsharing.share(null,this.title&&this.title.val,null,this.url&&this.url.val,function(t){e("success")},function(r){r&&(i?i.call(n,e,t):(n.type="no cordovaFallback",e("error")))}):window.plugins.socialsharing.shareViaFacebook(null,null,this.url?this.url.val:null,function(t){e("success")},function(r){r&&(i?i.call(n,e,t):(n.type="no cordovaFallback",e("error")))}):(console.log("FB.ui"),FB.ui({method:"share",href:r},function(t){!t||t&&t.error_code?(t&&4201==t.error_code&&(n.type="cancelled"),e("error")):e("success")})):e(!0)}}},window.cordova&&!function(){i=function(e,t){function n(){window.facebookConnectPlugin.showDialog({method:"share",href:r,link:r},function(t){"string"!=typeof t?e("success"):~t.indexOf("User cancelled")&&(a.type="cancelled",e("error"))},function(t){"string"==typeof t&&t.indexOf("User cancelled")&&(a.type="cancelled"),e("error")})}function i(){window.facebookConnectPlugin.login(["public_profile"],n,function(t){a.type="login",e("error")})}var r=this.url&&this.url.val,a=this;o.android?window.facebookConnectPlugin.getLoginStatus(function(e){"connected"===e.status?n():i()},i):n()}}()},{"./index.js":2,"vigour-js/app/":174,"vigour-js/browser/cases":202,"vigour-js/browser/network/url":232,"vigour-js/browser/ua":233,"vigour-js/util":315,"vigour-js/util/config":306,"vigour-js/value":327}],5:[function(e,t,n){n.login=e("./login"),n.verify=e("./verify"),n.register=e("./register"),n.facebook=e("./facebook"),n.email=e("./email"),n.network=e("./network"),n.password=e("./password"),n.mobile=e("./mobile"),n.user=e("./user"),n.purchase=e("./purchase"),n.receipt=e("./receipt"),n.url=e("./url"),n.player=e("./player"),n.price=e("./purchase/pricing")},{"./email":1,"./facebook":2,"./login":6,"./mobile":7,"./network":8,"./password":9,"./player":10,"./purchase":11,"./purchase/pricing":12,"./receipt":13,"./register":14,"./url":22,"./user":23,"./verify":25}],6:[function(e,t,n){{var i=e("vigour-js/util/config"),r=e("vigour-js/value"),o=e("./util"),a=i.api.url;e("vigour-js/value/flags/process")}t.exports=n=new r({ajax:{condition:function(e,t){return this.email&&this.password?(e.url=a+"api/v1/sessions.json",e.data={user:{email:this.email.val,password:this.password.val,app_version:window["package"].version}},!0):this.region&&this.facebook&&this.facebook.token?(e.url=a+"api/v2/sessions.json",e.data={auth_method:1,user:{oauth_token:this.facebook.token.val,accept_data_protection_tcs:!0,accept_mtv_country_tcs_for:this.region.val,app_version:window["package"].version}},!0):void 0},headers:{appVersion:3},method:"POST",encode:"json",defer:function(e,t,n,i){!n&&i&&i.success?(this.set("token",i.authentication_token),e("success")):(this.type=n?n.message:o.findError(i),e("error"),this.$empty(["loading","region"]))}}}),n._name="_mtvlogin"},{"./util":24,"vigour-js/util/config":306,"vigour-js/value":327,"vigour-js/value/flags/process":324}],7:[function(e,t,n){var i=e("vigour-js/util/config"),r=e("vigour-js/value"),o=e("./util"),a=i.api.url;t.exports=n=new r({verify:{ajax:{url:a+"api/v2/mbl_verifications.json",encode:"json",method:"POST",headers:{Accept:"*/*",redirectUrl:i.packer.domain+"/?m=$data"},data:function(e,t){return this.token&&this.token.val&&this.phonenumber&&this.phonenumber.val&&this.country&&this.country.val?{auth_token:this.token.val,user:{mobile_number:Number(this.phonenumber.val),mobile_country_prefix:Number(this.country.val),app_version:window["package"].version}}:void 0},defer:function(e,t,n,i){!n&&i&&i.valid?e("success"):(this.type=n?n.message:o.findError(i),e("error"),this.$empty(["loading","token"]))}}},sms:{ajax:{url:function(e,t){return"string"==typeof t&&a+"api/v2/mblconfirmation/"+t+".json"},method:"GET",defer:function(e,t,n,i){i.success?(this.set("token",i.authentication_token),e("success")):(this.type=n?n.message:o.findError(i),e("error"))}}},available:{ajax:{url:function(){var e=this._val instanceof r?this._val:this;if("string"==typeof e.val){var t=a+"api/v1/utt_info/c153f28d950ae49a/"+e.val;return this._cached=e.val,t}},defer:function(e,t,n,i){var o=this._val instanceof r?this._val:this;o.val!==this._cached?(e(!0),this._update()):i&&i.success?(this.set("transform",i&&i.country_info&&i.country_info.mbl_available&&!0||!1),e()):e(!0)}}}})},{"./util":24,"vigour-js/util/config":306,"vigour-js/value":327}],8:[function(e,t,n){var i=e("vigour-js/value");t.exports=n=new i,window.cordova&&(document.addEventListener("offline",function(){n.val=!1},!1),document.addEventListener("online",function(){n.val=navigator.connection.type},!1))},{"vigour-js/value":327}],9:[function(e,t,n){var i=e("vigour-js/util/config"),r=e("vigour-js/value"),o=e("./util"),a=(e("vigour-js/browser/cases"),i.api.url);t.exports=n=new r({reset:{ajax:{url:function(e,t){return t="string"==typeof t?t:this.token&&this.token.val,"string"==typeof t&&a+"api/v1/password_resets/"+t+".json"},data:function(e,t){return this.password&&this.password.val&&{user:{password:this.password.val,password_confirmation:this.password.val,app_version:window["package"].version}}},encode:"json",method:"PUT",defer:function(e,t,n,i){i.success?(this.set("token",i.authentication_token),e("success")):(this.type=n?n.message:o.findError(i),e("error"))}}},forgot:{ajax:{url:a+"api/v1/password_resets.json",method:"POST",encode:"uri",headers:{appVersion:3,redirectUrl:i.packer.domain+"/?reset=$data"},data:function(e,t){return"string"==typeof t?{email:t}:void 0},defer:function(e,t,n,i){i.success?e("success"):(this.type=n?n.message:o.findError(i),e("error"))}}}}),n._name="password"},{"./util":24,"vigour-js/browser/cases":202,"vigour-js/util/config":306,"vigour-js/value":327}],10:[function(e,t,n){var i,r=e("vigour-js/util/config"),o=e("vigour-js/value");t.exports=n=new o({api:{defer:function(t,n){if(n[0]!==!0||i)return!0;i=!0,window.$=e("zepto-browserify").$,window.jQuery=$;{var o=this,a=document.createElement("script");a.onerror=function(e){o.type="script",o.clearCache(),o.val=n[0]="error",t()}}a.onload=function(){t("success")},a.src=r.player.web,a.id="player-script",this._parent.debug=r.player.debug,this._parent.settings=r.player.settings,document.getElementsByTagName("head")[0].appendChild(a)}},apiDefer:function(e,t){e("success")}})},{"vigour-js/util/config":306,"vigour-js/value":327,"zepto-browserify":331}],11:[function(e,t,n){var i=e("vigour-js/util/config"),r=e("vigour-js/value"),o=(e("../util"),i.api.url,e("vigour-js/browser/cases"));t.exports=n=new r({apiDefer:function(e){function t(t,i){if(console.log("callback"),i&&(t=null),t)n.type=t,console.error("xxx3ls //"),e("error");else{console.log(t,i);try{localStorage.setItem("receiptData",JSON.stringify(i))}catch(r){n.type=r,e("error"),console.log("ls //")}console.log("xxxls //xxx"),n.set("packageName",i.packageName),n.set("subscriptionId",i.productId),console.error("xxx2ls //",i.purchaseToken),n.set("token",i.purchaseToken),e("success")}n.subscription&&(n.subscription.val=!1),n.product&&(n.product.val=!1)}var n=this;if(this.subscription&&this.subscription.val&&console.log("sub",this.subscription.val),this.product&&this.product.val&&console.log("prod",this.product.val),window.Store){var i=this.subscription&&this.subscription.val||this.product&&this.product.val;console.log("Product:"),console.log(i),i?o.ios?(console.error("attempt to buy"),Store.buy(i,function(t,i){if(console.log("buy:error",t),console.log("buy:response",i),i&&(t=null),t)n.type=t.description,e("error");else{try{localStorage.setItem("receiptData",JSON.stringify(i))}catch(r){n.type=r,e("error")}n.set("token",window.atob(i.restoreTransaction?i.restoreTransaction.transactionReceipt:i.completeTransaction.transactionReceipt)),e("success")}n.subscription&&(n.subscription.val=!1),n.product&&(n.product.val=!1)})):o.windowsMobile?Store.buy(i,function(t,i){if(i&&(t=null),t)n.type=t,e("error");else{try{localStorage.setItem("receiptData",JSON.stringify(i))}catch(r){n.type=r,e("error")}i.purchaseResults&&"Succeeded"===i.purchaseResults.status?(n.set("token",i.purchaseResults.receiptXml),n.set("transactionId",i.purchaseResults.transactionId),e("success")):(n.type=i.purchaseResults,e("error"))}n.subscription&&(n.subscription.val=!1),n.product&&(n.product.val=!1)}):(console.log("start android buy"),this.subscription&&this.subscription.val?(console.log("call Store.subscribe"),Store.subscribe(i,t)):(console.log("Store.buy"),Store.buy(i,t))):(console.log("whats this?"),e(!0),this.subscription&&(this.subscription.val=!1),this.product&&(this.product.val=!1))}else this.type="no store available",e("error"),this.subscription&&(this.subscription.val=!1),this.product&&(this.product.val=!1)}}),n._name="purchase"},{"../util":24,"vigour-js/browser/cases":202,"vigour-js/util/config":306,"vigour-js/value":327}],12:[function(e,t,n){function i(e){var t=e.split("=")[1];return d[t]||t}function r(e){for(var t=e.length-1;t>=0;t--){var n=p&&p[e[t]];n?f[e[t]]=e[t]=n.replace("$region",(s.region.val||"").toLowerCase()):e.splice(t,1)}}function o(e){for(var t in f)if(f[t]===e)return t}var a=e("vigour-js/browser/cases"),s=e("vigour-js/app"),c=e("vigour-js/util/config"),l=e("vigour-js/browser/ua"),u=e("vigour-js/value"),p=c.store[l.platform],f={},d={EUR:"€",PLN:"zł",RON:"Lei"};t.exports=n=function(e){e?e instanceof Array||(e=[e]):e=["single","yearly","monthly"],r(e),!n._fetching&&window.cordova&&window.Store&&e.length&&(console.log("====> Store.fetch",e),n._fetching=!0,Store.fetch(e,function(e,t){n._fetching=null;try{console.log("====> fetch returns "+JSON.stringify(t,null,2))}catch(r){console.log("====> fetch returns. Impossible to stringify data")}if(e||!t)return console.error(e),n.single._fetching=null,n.monthly._fetching=null,void(n.yearly._fetching=null);var s,c,l,u,p=t.validProducts;if(a.ios)for(u=p.length-1;u>=0;u--)s=p[u],c=s.productIdentifier,l=o(c),n[l]?n[l].val=i(s.priceLocale)+s.price:console.error("can not find type ",l);else for(u=p.length-1;u>=0;u--){s=p[u];for(l in f)c=f[l],s[c]?n[l].val=s[c].price:console.error("can not find type ",l)}}))},n.single=new u({val:function(){this._fetching||n(),this._fetching=!0}}),n.monthly=new u({val:function(){this._fetching||n(),this._fetching=!0}}),n.yearly=new u({val:function(){this._fetching||n(),this._fetching=!0}})},{"vigour-js/app":174,"vigour-js/browser/cases":202,"vigour-js/browser/ua":233,"vigour-js/util/config":306,"vigour-js/value":327}],13:[function(e,t,n){function i(){var e;o&&(clearTimeout(o),o=null),e=h+.08*d,h=6e4>=e?e:0,o=setTimeout(function(){o=null,r()},e)}function r(){function e(){t&&(console.log("resetting auth token"),n.token.val=t)}var t,i=localStorage.getItem(f);if(!i)return!0;t=n.token&&n.token._val,n.once("success",e).once("error",e);try{console.log("Resending receipt data to backend",i),n.val=JSON.parse(i)}catch(r){console.error("Can't JSON.parse receipt data stored in local storage")}}var o,a=e("vigour-js/util/config"),s=e("vigour-js/value"),c=e("./util"),l=a.api.url,u=e("vigour-js/browser/cases"),p=e("vigour-js/util/encode64.js"),f="receiptData",d=1e4,h=0;t.exports=n=new s({ajax:{url:l+"api/v2/subscriptions",encode:"json",method:"POST",headers:{Accept:"*/*"},data:function(e,t){var n;if(this.token&&this.token.val&&this.receipt&&this.receipt.val){try{localStorage.setItem(f,JSON.stringify(this.raw))}catch(r){this.type=r,update("error")}if(u.ios)n={receipt:this.receipt.val,vendor:"apple"},this.episodeId&&(n.episode=this.episodeId.val);else if(u.android){if(!this.packageName)return void console.error(" add a packagename for android!");n={packageName:this.packageName.val,token:this.receipt.val,vendor:"google"},this.episodeId&&(n.episode=this.episodeId.val),this.subscriptionId&&(n.subscriptionId=this.subscriptionId.val)}else u.windowsMobile&&(n={receipt:p.encode(this.receipt.val),vendor:"microsoft"},this.episodeId&&(n.episode=this.episodeId.val));n&&(n.auth_token=this.token.val,i())}return n},defer:function(e,t,n,i){localStorage.removeItem(f),!n&&i&&i.success?(h=0,e("success")):(this.type=n?n.message:c.findError(i),e("error"),this.$empty("loading"))}}}),n._name="receipt",u["native"]&&(document.addEventListener("resume",r,!1),r())},{"./util":24,"vigour-js/browser/cases":202,"vigour-js/util/config":306,"vigour-js/util/encode64.js":311,"vigour-js/value":327}],14:[function(e,t,n){var i=e("vigour-js/util/config"),r=e("vigour-js/value"),o=e("vigour-js/browser/cases"),a=e("./util"),s=i.api.url;t.exports=n=new r({ajax:{url:s+"api/v1/users.json",headers:{appVersion:3,redirectUrl:i.packer.domain+"/?e=$data"},method:"POST",encode:"json",data:function(){if(this.email&&this.password){var e=o.iphone&&"iphone"||o.android&&"android",t={user:{email:this.email.val,password:this.password.val,password_confirmation:this.password.val,accept_data_protection_tcs:!0,accept_mtv_country_tcs_for:this.region.val,app_version:window["package"].version}};return this.gender&&(t.user.gender=this.gender.val),this.newsletter&&(t.user.accept_newsletter=this.newsletter.val),this.age&&this.age.min_age&&(t.user.min_age=this.age.min_age.val,t.user.max_age=this.age.max_age.val),e&&(t.user.device_type=e),t}},defer:function(e,t,n,i){!n&&i&&i.success?e("success"):(this.type=n?n.message:a.findError(i),e("error"),this.$empty("region"))}}}),n._name="register"},{"./util":24,"vigour-js/browser/cases":202,"vigour-js/util/config":306,"vigour-js/value":327}],15:[function(e,t,n){var i=e("./map"),r=e("vigour-js/browser/ua"),o=e("vigour-js/util/config"),a=e("./omniture"),s=e("vigour-js/browser/cases"),c=e("vigour-js/app/");t.exports=function(e,t,n){var l,u,p,f,d=a.user,h=window["package"],v=d&&d.data&&d.data.from.cloud&&d.data.from,g=d?d.role.val:0,m=new Date,y=h?h.repository&&h.repository.branch:"master",_=v&&v._name||"not available";"userData"===_&&(_="unregistered"),"master"===y&&(y="dev"),t?(l=0,u="prop"):(l=1,u="eVar"),g=0===g?"free":1===g?"premium":2===g?"mtv mobile":3===g?"trial":"unregistered","ios"===r.platform&&(f="phone"===r.device?"iPhone":"iPad"),p={branch:y,title:e,version:window["package"]&&window["package"].version,role:g,device:f||r.platform+" "+r.device,region:o.region.val,lang:o.language.val,weekDay:i.weekDays[m.getDay()],hour:m.getHours()||24,age:v&&v.get&&v.get("birthday",!1).val||"not available",gender:v&&v.get&&v.get("gender",!1).val||"not available","native":window.cordova||"tv"===r.device||"cast"===r.device?"native":"web",userId:_||"unregistered",connected:String(s.$hasReceiver.val)||"none",secondscreen:String(!s.$isActive.val)||"none",devicesPresent:String(s.$hasDevices.val)||"none",loginStyle:s.$isLoggedIn.val&&v?v.facebook_id&&v.facebook_id.val?"facebook":"email":"none",network:c.network.val||"not available",networkOperator:"not available"},n||(p.title="none");for(var b in p)a[u+i.vars[b][l]]=p[b]}},{"./map":19,"./omniture":20,"vigour-js/app/":174,"vigour-js/browser/cases":202,"vigour-js/browser/ua":233,"vigour-js/util/config":306}],16:[function(e,t,n){e("./omniture"),e("vigour-js/util/config"),e("./pagename"),e("./context")(function(e,t,n,i,r){e.GoogleAnalyticsObject=n,e[n]||(e[n]=function(){(e[n].q=e[n].q||[]).push(arguments)}),e[n].l=+new Date,i=t.createElement("script"),r=t.scripts[0],i.src="https://www.google-analytics.com/analytics.js",r.parentNode.insertBefore(i,r)}(window,document,"ga"));ga("create","UA-43955457-3","none"),t.exports=window.ga},{"./context":15,"./omniture":20,"./pagename":21,"vigour-js/util/config":306}],17:[function(e,t,n){function i(e){var t=d.token.val,n=c.api.url+"api/v1/users/"+t+"/activities",i={activity:{action:"watch",resource_type:"episode",resource_id:e,repository:"sensei",environment:"production"}};t&&f({url:n,method:"POST",headers:{accept:"application/json"},encode:"json",data:i,error:function(e){console.error("POST",n,i,e)}})}function r(){var e=d.token.val,t="UNKNOWN",n="UNKNOWN",i=c.api.url+"/api/v1/users/"+e+"/activities",r={activity:{action:"share",resource_type:t,resource_id:n,repository:"sensei",environment:"production"}};console.log("auth_token",e),console.log("url",i),console.log("resourceType",t),console.log("media_id",n),console.log("payload",r)}var o=e("./omniture"),a=e("vigour-js/browser/events/util").postpone,s=e("vigour-js/browser/ua"),c=e("vigour-js/util/config"),l=(e("vigour-js/browser/network/url"),e("vigour-js/util"),e("./map")),c=e("vigour-js/util/config"),u=e("./context"),p=e("./pagename"),f=e("vigour-js/browser/network/ajax"),d=(e("../facebook/share"),e("../../app/user"));e("./ga"),n.omniture=o,o.account=c.omniture;var h=a(function(){o.tl.apply(this,arguments),delete o.events},1e3);n.setSearchProp=a(function(e){e&&(o["prop"+l.vars.search[0]]=e)},1e3);var v;n.video=function(e,t,n){if(n||(n=t),t.from&&(n=t.from._cachedPath),"string"==typeof n){var r,a="videoPlay"===e||"videoPause"===e?e:"",s={videostart:[0,.1],video25:[.25,.26],video50:[.5,.51],video75:[.75,.76],videofinished:[.9,.95]};if(e=-1*e,!a)for(var c in s)if(e>s[c][0]&&e<s[c][1]){if(a=c,r=a+n,v&&a+n===v)return;v=a+n;break}if(a&&t.from._parent._parent){var f=p(t.from._parent._parent._parent._cachedPath),d="video > "+f.name;u(f.title,!1,!0),d.split(">").length<7&&(d+=" > seasons 1 > episodes 1"),d+=(" : "+t.get("title","").val).toLowerCase(),o["eVar"+l.vars.videoName[1]]=d,o.events="event"+l.events[a],"videostart"===a&&i(t.id.val),o.tl(!0,"o",a)}}},n.event=a(function(e,t,n,i){o.events="event"+l.events[e],u(),"upgradeMtvFailed"===e&&(o["eVar"+l.events.mtvMobileFailed]=t),"search"===e&&h(!0,"o",e),o.tl(!0,"o",e),delete o.events,"sharingFacebookSucces"===e&&(console.log("sharingFacebookSucces",this),r())},1e3),n.popup=a(function(e){if(e){var t="desktop"===s.device?"web":s.platform,n=c.region.val+" > "+t+" > ";u(e,!0,!1),o.pageName=(n+"other > "+e).toLowerCase(),o.t()}},1e3),n.pageView=a(function(e){if(e.from&&(e=e.from._cachedPath),"string"==typeof e){var t=p(e),n=t.title;o.pageName=t.name.toLowerCase(),u(n,!0,~e.lastIndexOf(".")),o.t(),ga("set",{title:t.name}),ga("send","pageview")}},1e3)},{"../../app/user":39,"../facebook/share":4,"./context":15,"./ga":16,"./map":19,"./omniture":20,"./pagename":21,"vigour-js/browser/events/util":222,"vigour-js/browser/network/ajax":223,"vigour-js/browser/network/url":232,"vigour-js/browser/ua":233,"vigour-js/util":315,"vigour-js/util/config":306}],18:[function(e,t,n){function i(){var e=this;e.version="1.4.1";var t=window;t.s_c_in||(t.s_c_il=[],t.s_c_in=0),e._il=t.s_c_il,e._in=t.s_c_in,e._il[e._in]=e,t.s_c_in++,e._c="s_c";var n=t.sb;n||(n=null);var i,r,o=t;try{for(i=o.parent,r=o.location;i&&i.location&&r&&""+i.location!=""+r&&o.location&&""+i.location!=""+o.location&&i.location.host==r.host;)o=i,i=o.parent}catch(a){}e.eb=function(e){try{console.log(e)}catch(t){}},e.ta=function(e){return""+parseInt(e)==""+e},e.replace=function(e,t,n){return!e||e.indexOf(t)<0?e:e.split(t).join(n)},e.escape=function(t){var n,i;if(!t)return t;for(t=encodeURIComponent(t),n=0;7>n;n++)i="+~!*()'".substring(n,n+1),t.indexOf(i)>=0&&(t=e.replace(t,i,"%"+i.charCodeAt(0).toString(16).toUpperCase()));return t},e.unescape=function(t){if(!t)return t;t=t.indexOf("+")>=0?e.replace(t,"+"," "):t;try{return decodeURIComponent(t)}catch(n){}return unescape(t)},e.Va=function(){var n,i=t.location.hostname,r=e.fpCookieDomainPeriods;if(r||(r=e.cookieDomainPeriods),i&&!e.cookieDomain&&!/^[0-9.]+$/.test(i)&&(r=r?parseInt(r):2,r=r>2?r:2,n=i.lastIndexOf("."),n>=0)){for(;n>=0&&r>1;)n=i.lastIndexOf(".",n-1),r--;e.cookieDomain=n>0?i.substring(n):i}return e.cookieDomain},e.c_r=e.cookieRead=function(t){t=e.escape(t);var n=" "+e.d.cookie,i=n.indexOf(" "+t+"="),r=0>i?i:n.indexOf(";",i);return t=0>i?"":e.unescape(n.substring(i+2+t.length,0>r?n.length:r)),"[[B]]"!=t?t:""},e.c_w=e.cookieWrite=function(t,n,i){var r,o=e.Va(),a=e.cookieLifetime;return n=""+n,a=a?(""+a).toUpperCase():"",i&&"SESSION"!=a&&"NONE"!=a&&((r=""!=n?parseInt(a?a:0):-60)?(i=new Date,i.setTime(i.getTime()+1e3*r)):1==i&&(i=new Date,r=i.getYear(),i.setYear(r+5+(1900>r?1900:0)))),t&&"NONE"!=a?(e.d.cookie=t+"="+e.escape(""!=n?n:"[[B]]")+"; path=/;"+(i&&"SESSION"!=a?" expires="+i.toGMTString()+";":"")+(o?" domain="+o+";":""),e.cookieRead(t)==n):0},e.C=[],e.B=function(t,n,i){if(e.ma)return 0;e.maxDelay||(e.maxDelay=250);var r=0,o=(new Date).getTime()+e.maxDelay,a=e.d.qb,s=["webkitvisibilitychange","visibilitychange"];if(a||(a=e.d.rb),a&&"prerender"==a){if(!e.X)for(e.X=1,i=0;i<s.length;i++)e.d.addEventListener(s[i],function(){var t=e.d.qb;t||(t=e.d.rb),"visible"==t&&(e.X=0,e.delayReady())});r=1,o=0}else i||e.q("_d")&&(r=1);return r&&(e.C.push({m:t,a:n,t:o}),e.X||setTimeout(e.delayReady,e.maxDelay)),r},e.delayReady=function(){var t,n=(new Date).getTime(),i=0;for(e.q("_d")&&(i=1);e.C.length>0;){if(t=e.C.shift(),i&&!t.t&&t.t>n){e.C.unshift(t),setTimeout(e.delayReady,parseInt(e.maxDelay/2));break}e.ma=1,e[t.m].apply(e,t.a),e.ma=0}},e.setAccount=e.sa=function(t){var n,i;if(!e.B("setAccount",arguments))if(e.account=t,e.allAccounts)for(n=e.allAccounts.concat(t.split(",")),e.allAccounts=[],n.sort(),i=0;i<n.length;i++)(0==i||n[i-1]!=n[i])&&e.allAccounts.push(n[i]);else e.allAccounts=t.split(",")},e.foreachVar=function(t,n){var i,r,o,a,s="";for(o=r="",e.lightProfileID?(i=e.H,(s=e.lightTrackVars)&&(s=","+s+","+e.ba.join(",")+",")):(i=e.c,(e.pe||e.linkType)&&(s=e.linkTrackVars,r=e.linkTrackEvents,e.pe&&(o=e.pe.substring(0,1).toUpperCase()+e.pe.substring(1),e[o])&&(s=e[o].pb,r=e[o].ob)),s&&(s=","+s+","+e.z.join(",")+","),r&&s&&(s+=",events,")),n&&(n=","+n+","),r=0;r<i.length;r++)o=i[r],(a=e[o])&&(!s||s.indexOf(","+o+",")>=0)&&(!n||n.indexOf(","+o+",")>=0)&&t(o,a)},e.J=function(t,n,i,r,o){var a,s,c,l,u="",p=0;if("contextData"==t&&(t="c"),n){for(a in n)if(!Object.prototype[a]&&(!o||a.substring(0,o.length)==o)&&n[a]&&(!i||i.indexOf(","+(r?r+".":"")+a+",")>=0)){if(c=!1,p)for(s=0;s<p.length;s++)a.substring(0,p[s].length)==p[s]&&(c=!0);if(!c&&(""==u&&(u+="&"+t+"."),s=n[a],o&&(a=a.substring(o.length)),a.length>0))if(c=a.indexOf("."),c>0)s=a.substring(0,c),c=(o?o:"")+s+".",p||(p=[]),p.push(c),u+=e.J(s,n,i,r,c);else if("boolean"==typeof s&&(s=s?"true":"false"),s){if("retrieveLightData"==r&&o.indexOf(".contextData.")<0)switch(c=a.substring(0,4),l=a.substring(4),a){case"transactionID":a="xact";break;case"channel":a="ch";break;case"campaign":a="v0";break;default:e.ta(l)&&("prop"==c?a="c"+l:"eVar"==c?a="v"+l:"list"==c?a="l"+l:"hier"==c&&(a="h"+l,s=s.substring(0,255)))}u+="&"+e.escape(a)+"="+e.escape(s)}}""!=u&&(u+="&."+t)}return u},e.Xa=function(){var t,n,i,r,o,a,s,c,l="",u="",p="",f=n="";for(e.lightProfileID?(t=e.H,(u=e.lightTrackVars)&&(u=","+u+","+e.ba.join(",")+",")):(t=e.c,(e.pe||e.linkType)&&(u=e.linkTrackVars,p=e.linkTrackEvents,e.pe&&(n=e.pe.substring(0,1).toUpperCase()+e.pe.substring(1),e[n])&&(u=e[n].pb,p=e[n].ob)),u&&(u=","+u+","+e.z.join(",")+","),p&&(p=","+p+",",u&&(u+=",events,")),e.events2&&(f+=(""!=f?",":"")+e.events2)),e.AudienceManagement&&e.AudienceManagement.isReady()&&(l+=e.J("d",e.AudienceManagement.getEventCallConfigParams())),n=0;n<t.length;n++){if(r=t[n],o=e[r],i=r.substring(0,4),a=r.substring(4),!o&&"events"==r&&f&&(o=f,f=""),o&&(!u||u.indexOf(","+r+",")>=0)){switch(r){case"supplementalDataID":r="sdid";break;case"timestamp":r="ts";break;case"dynamicVariablePrefix":r="D";break;case"visitorID":r="vid";break;case"marketingCloudVisitorID":r="mid";break;case"analyticsVisitorID":r="aid";break;case"audienceManagerLocationHint":r="aamlh";break;case"audienceManagerBlob":r="aamb";break;case"authState":r="as";break;case"pageURL":r="g",o.length>255&&(e.pageURLRest=o.substring(255),o=o.substring(0,255));break;case"pageURLRest":r="-g";break;case"referrer":r="r";break;case"vmk":case"visitorMigrationKey":r="vmt";break;case"visitorMigrationServer":r="vmf",e.ssl&&e.visitorMigrationServerSecure&&(o="");break;case"visitorMigrationServerSecure":r="vmf",!e.ssl&&e.visitorMigrationServer&&(o="");break;case"charSet":r="ce";break;case"visitorNamespace":r="ns";break;case"cookieDomainPeriods":r="cdp";break;case"cookieLifetime":r="cl";break;case"variableProvider":r="vvp";break;case"currencyCode":r="cc";break;case"channel":r="ch";break;case"transactionID":r="xact";break;case"campaign":r="v0";break;case"latitude":r="lat";break;case"longitude":r="lon";break;case"resolution":r="s";break;case"colorDepth":r="c";break;case"javascriptVersion":r="j";break;case"javaEnabled":r="v";break;case"cookiesEnabled":r="k";break;case"browserWidth":r="bw";break;case"browserHeight":r="bh";break;case"connectionType":r="ct";break;case"homepage":r="hp";break;case"events":if(f&&(o+=(""!=o?",":"")+f),p)for(a=o.split(","),o="",i=0;i<a.length;i++)s=a[i],c=s.indexOf("="),c>=0&&(s=s.substring(0,c)),c=s.indexOf(":"),c>=0&&(s=s.substring(0,c)),p.indexOf(","+s+",")>=0&&(o+=(o?",":"")+a[i]);break;case"events2":o="";break;case"contextData":l+=e.J("c",e[r],u,r),o="";break;case"lightProfileID":r="mtp";break;case"lightStoreForSeconds":r="mtss",e.lightProfileID||(o="");break;case"lightIncrementBy":r="mti",e.lightProfileID||(o="");break;case"retrieveLightProfiles":r="mtsr";break;case"deleteLightProfiles":r="mtsd";break;case"retrieveLightData":e.retrieveLightProfiles&&(l+=e.J("mts",e[r],u,r)),o="";break;default:e.ta(a)&&("prop"==i?r="c"+a:"eVar"==i?r="v"+a:"list"==i?r="l"+a:"hier"==i&&(r="h"+a,o=o.substring(0,255)))}o&&(l+="&"+r+"="+("pev"!=r.substring(0,3)?e.escape(o):o))}"pev3"==r&&e.g&&(l+=e.g)}return l},e.u=function(e){var t=e.tagName;return""+e.wb!="undefined"||""+e.ib!="undefined"&&"HTML"!=(""+e.ib).toUpperCase()?"":(t=t&&t.toUpperCase?t.toUpperCase():"","SHAPE"==t&&(t=""),t&&(("INPUT"==t||"BUTTON"==t)&&e.type&&e.type.toUpperCase?t=e.type.toUpperCase():!t&&e.href&&(t="A")),t)},e.oa=function(e){var t,n,i,r=e.href?e.href:"";return t=r.indexOf(":"),n=r.indexOf("?"),i=r.indexOf("/"),r&&(0>t||n>=0&&t>n||i>=0&&t>i)&&(n=e.protocol&&e.protocol.length>1?e.protocol:l.protocol?l.protocol:"",t=l.pathname.lastIndexOf("/"),r=(n?n+"//":"")+(e.host?e.host:l.host?l.host:"")+("/"!=h.substring(0,1)?l.pathname.substring(0,0>t?0:t)+"/":"")+r),r},e.D=function(t){var n,i,r=e.u(t),o="",a=0;return r&&(n=t.protocol,i=t.onclick,!t.href||"A"!=r&&"AREA"!=r||i&&n&&!(n.toLowerCase().indexOf("javascript")<0)?i?(o=e.replace(e.replace(e.replace(e.replace(""+i,"\r",""),"\n",""),"	","")," ",""),a=2):"INPUT"==r||"SUBMIT"==r?(t.value?o=t.value:t.innerText?o=t.innerText:t.textContent&&(o=t.textContent),a=3):t.src&&"IMAGE"==r&&(o=t.src):o=e.oa(t),o)?{id:o.substring(0,100),type:a}:0},e.tb=function(t){for(var n=e.u(t),i=e.D(t);t&&!i&&"BODY"!=n;)(t=t.parentElement?t.parentElement:t.parentNode)&&(n=e.u(t),i=e.D(t));return i&&"BODY"!=n||(t=0),t&&(n=t.onclick?""+t.onclick:"",n.indexOf(".tl(")>=0||n.indexOf(".trackLink(")>=0)&&(t=0),t},e.hb=function(){var n,i,r,o,a=e.linkObject,s=e.linkType,c=e.linkURL;if(e.ca=1,a||(e.ca=0,a=e.clickObject),a){for(n=e.u(a),i=e.D(a);a&&!i&&"BODY"!=n;)(a=a.parentElement?a.parentElement:a.parentNode)&&(n=e.u(a),i=e.D(a));if(i&&"BODY"!=n||(a=0),a){var l=a.onclick?""+a.onclick:"";(l.indexOf(".tl(")>=0||l.indexOf(".trackLink(")>=0)&&(a=0)}}else e.ca=1;if(!c&&a&&(c=e.oa(a)),c&&!e.linkLeaveQueryString&&(r=c.indexOf("?"),r>=0&&(c=c.substring(0,r))),!s&&c){var u,p=0,f=0;if(e.trackDownloadLinks&&e.linkDownloadFileTypes)for(l=c.toLowerCase(),r=l.indexOf("?"),o=l.indexOf("#"),r>=0?o>=0&&r>o&&(r=o):r=o,r>=0&&(l=l.substring(0,r)),r=e.linkDownloadFileTypes.toLowerCase().split(","),o=0;o<r.length;o++)(u=r[o])&&l.substring(l.length-(u.length+1))=="."+u&&(s="d");if(e.trackExternalLinks&&!s&&(l=c.toLowerCase(),e.ra(l))&&(e.linkInternalFilters||(e.linkInternalFilters=t.location.hostname),r=0,e.linkExternalFilters?(r=e.linkExternalFilters.toLowerCase().split(","),p=1):e.linkInternalFilters&&(r=e.linkInternalFilters.toLowerCase().split(",")),r)){for(o=0;o<r.length;o++)u=r[o],l.indexOf(u)>=0&&(f=1);f?p&&(s="e"):p||(s="e")}}e.linkObject=a,e.linkURL=c,e.linkType=s,(e.trackClickMap||e.trackInlineStats)&&(e.g="",a&&(s=e.pageName,c=1,a=a.sourceIndex,s||(s=e.pageURL,c=0),t.s_objectID&&(i.id=t.s_objectID,a=i.type=1),s&&i&&i.id&&n&&(e.g="&pid="+e.escape(s.substring(0,255))+(c?"&pidt="+c:"")+"&oid="+e.escape(i.id.substring(0,100))+(i.type?"&oidt="+i.type:"")+"&ot="+n+(a?"&oi="+a:""))))},e.Ya=function(){var t=e.ca,n=e.linkType,i=e.linkURL,r=e.linkName;if(n&&(i||r)&&(n=n.toLowerCase(),"d"!=n&&"e"!=n&&(n="o"),e.pe="lnk_"+n,e.pev1=i?e.escape(i):"",e.pev2=r?e.escape(r):"",t=1),e.abort&&(t=0),e.trackClickMap||e.trackInlineStats){n={},i=0;var o,a,s,c=e.cookieRead("s_sq"),l=c?c.split("&"):0;if(c=0,l)for(o=0;o<l.length;o++)a=l[o].split("="),r=e.unescape(a[0]).split(","),a=e.unescape(a[1]),n[a]=r;if(r=e.account.split(","),t||e.g){t&&!e.g&&(c=1);for(a in n)if(!Object.prototype[a])for(o=0;o<r.length;o++)for(c&&(s=n[a].join(","),
s==e.account&&(e.g+=("&"!=a.charAt(0)?"&":"")+a,n[a]=[],i=1)),l=0;l<n[a].length;l++)s=n[a][l],s==r[o]&&(c&&(e.g+="&u="+e.escape(s)+("&"!=a.charAt(0)?"&":"")+a+"&u=0"),n[a].splice(l,1),i=1);if(t||(i=1),i){c="",o=2,!t&&e.g&&(c=e.escape(r.join(","))+"="+e.escape(e.g),o=1);for(a in n)!Object.prototype[a]&&o>0&&n[a].length>0&&(c+=(c?"&":"")+e.escape(n[a].join(","))+"="+e.escape(a),o--);e.cookieWrite("s_sq",c)}}}return t},e.Za=function(){if(!e.nb){var t,n,i=new Date,r=o.location,a=n=t="",s="",c="",l="1.2",u=e.cookieWrite("s_cc","true",0)?"Y":"N",p="",f="";if(i.setUTCDate&&(l="1.3",0..toPrecision&&(l="1.5",i=[],i.forEach))){l="1.6",n=0,t={};try{n=new Iterator(t),n.next&&(l="1.7",i.reduce&&(l="1.8",l.trim&&(l="1.8.1",Date.parse&&(l="1.8.2",Object.create&&(l="1.8.5")))))}catch(d){}}t=screen.width+"x"+screen.height,a=navigator.javaEnabled()?"Y":"N",n=screen.pixelDepth?screen.pixelDepth:screen.colorDepth,s=e.w.innerWidth?e.w.innerWidth:e.d.documentElement.offsetWidth,c=e.w.innerHeight?e.w.innerHeight:e.d.documentElement.offsetHeight;try{e.b.addBehavior("#default#homePage"),p=e.b.ub(r)?"Y":"N"}catch(h){}try{e.b.addBehavior("#default#clientCaps"),f=e.b.connectionType}catch(v){}e.resolution=t,e.colorDepth=n,e.javascriptVersion=l,e.javaEnabled=a,e.cookiesEnabled=u,e.browserWidth=s,e.browserHeight=c,e.connectionType=f,e.homepage=p,e.nb=1}},e.I={},e.loadModule=function(n,i){var r=e.I[n];if(!r){r=t["AppMeasurement_Module_"+n]?new t["AppMeasurement_Module_"+n](e):{},e.I[n]=e[n]=r,r.Fa=function(){return r.Ja},r.Ka=function(t){(r.Ja=t)&&(e[n+"_onLoad"]=t,e.B(n+"_onLoad",[e,r],1)||t(e,r))};try{Object.defineProperty?Object.defineProperty(r,"onLoad",{get:r.Fa,set:r.Ka}):r._olc=1}catch(o){r._olc=1}}i&&(e[n+"_onLoad"]=i,e.B(n+"_onLoad",[e,r],1)||i(e,r))},e.q=function(t){var n,i;for(n in e.I)if(!Object.prototype[n]&&(i=e.I[n])&&(i._olc&&i.onLoad&&(i._olc=0,i.onLoad(e,i)),i[t]&&i[t]()))return 1;return 0},e.bb=function(){var t=Math.floor(1e13*Math.random()),n=e.visitorSampling,i=e.visitorSamplingGroup;i="s_vsn_"+(e.visitorNamespace?e.visitorNamespace:e.account)+(i?"_"+i:"");var r=e.cookieRead(i);if(n){if(r&&(r=parseInt(r)),!r){if(!e.cookieWrite(i,t))return 0;r=t}if(r%1e4>v)return 0}return 1},e.K=function(t,n){var i,r,o,a,s,c;for(i=0;2>i;i++)for(r=i>0?e.ia:e.c,o=0;o<r.length;o++)if(a=r[o],(s=t[a])||t["!"+a]){if(!n&&("contextData"==a||"retrieveLightData"==a)&&e[a])for(c in e[a])s[c]||(s[c]=e[a][c]);e[a]=s}},e.Aa=function(t,n){var i,r,o,a;for(i=0;2>i;i++)for(r=i>0?e.ia:e.c,o=0;o<r.length;o++)a=r[o],t[a]=e[a],!n&&!t[a]&&(t["!"+a]=1)},e.Ua=function(e){var t,n,i,r,o,a,s=0,c="",l="";if(e&&e.length>255&&(t=""+e,n=t.indexOf("?"),n>0&&(a=t.substring(n+1),t=t.substring(0,n),r=t.toLowerCase(),i=0,"http://"==r.substring(0,7)?i+=7:"https://"==r.substring(0,8)&&(i+=8),n=r.indexOf("/",i),n>0&&(r=r.substring(i,n),o=t.substring(n),t=t.substring(0,n),r.indexOf("google")>=0?s=",q,ie,start,search_key,word,kw,cd,":r.indexOf("yahoo.co")>=0&&(s=",p,ei,"),s&&a)))){if((e=a.split("&"))&&e.length>1){for(i=0;i<e.length;i++)r=e[i],n=r.indexOf("="),n>0&&s.indexOf(","+r.substring(0,n)+",")>=0?c+=(c?"&":"")+r:l+=(l?"&":"")+r;c&&l?a=c+"&"+l:l=""}n=253-(a.length-l.length)-t.length,e=t+(n>0?o.substring(0,n):"")+"?"+a}return e},e.U=!1,e.O=!1,e.Ia=function(t){e.marketingCloudVisitorID=t,e.O=!0,e.k()},e.R=!1,e.L=!1,e.Ca=function(t){e.analyticsVisitorID=t,e.L=!0,e.k()},e.T=!1,e.N=!1,e.Ea=function(t){e.audienceManagerLocationHint=t,e.N=!0,e.k()},e.S=!1,e.M=!1,e.Da=function(t){e.audienceManagerBlob=t,e.M=!0,e.k()},e.isReadyToTrack=function(){var t=!0,n=e.visitor;return n&&n.isAllowed()&&(!e.U&&!e.marketingCloudVisitorID&&n.getMarketingCloudVisitorID&&(e.U=!0,e.marketingCloudVisitorID=n.getMarketingCloudVisitorID([e,e.Ia]),e.marketingCloudVisitorID)&&(e.O=!0),!e.R&&!e.analyticsVisitorID&&n.getAnalyticsVisitorID&&(e.R=!0,e.analyticsVisitorID=n.getAnalyticsVisitorID([e,e.Ca]),e.analyticsVisitorID)&&(e.L=!0),!e.T&&!e.audienceManagerLocationHint&&n.getAudienceManagerLocationHint&&(e.T=!0,e.audienceManagerLocationHint=n.getAudienceManagerLocationHint([e,e.Ea]),e.audienceManagerLocationHint)&&(e.N=!0),!e.S&&!e.audienceManagerBlob&&n.getAudienceManagerBlob&&(e.S=!0,e.audienceManagerBlob=n.getAudienceManagerBlob([e,e.Da]),e.audienceManagerBlob)&&(e.M=!0),(e.U&&!e.O&&!e.marketingCloudVisitorID||e.R&&!e.L&&!e.analyticsVisitorID||e.T&&!e.N&&!e.audienceManagerLocationHint||e.S&&!e.M&&!e.audienceManagerBlob)&&(t=!1)),t},e.j=n,e.l=0,e.callbackWhenReadyToTrack=function(t,i,r){var o;o={},o.Oa=t,o.Na=i,o.La=r,e.j==n&&(e.j=[]),e.j.push(o),0==e.l&&(e.l=setInterval(e.k,100))},e.k=function(){var t;if(e.isReadyToTrack()&&(e.l&&(clearInterval(e.l),e.l=0),e.j!=n))for(;e.j.length>0;)t=e.j.shift(),t.Na.apply(t.Oa,t.La)},e.Ga=function(t){var i,r,o=n,a=n;if(!e.isReadyToTrack()){if(i=[],t!=n)for(r in o={},t)o[r]=t[r];return a={},e.Aa(a,!0),i.push(o),i.push(a),e.callbackWhenReadyToTrack(e,e.track,i),!0}return!1},e.Wa=function(){var t,n=e.cookieRead("s_fid"),i="",r="";t=8;var o=4;if(!n||n.indexOf("-")<0){for(n=0;16>n;n++)t=Math.floor(Math.random()*t),i+="0123456789ABCDEF".substring(t,t+1),t=Math.floor(Math.random()*o),r+="0123456789ABCDEF".substring(t,t+1),t=o=16;n=i+"-"+r}return e.cookieWrite("s_fid",n,1)||(n=0),n},e.t=e.track=function(n,i){var r,a=new Date,s="s"+Math.floor(a.getTime()/108e5)%10+Math.floor(1e13*Math.random()),c=a.getYear();c="t="+e.escape(a.getDate()+"/"+a.getMonth()+"/"+(1900>c?c+1900:c)+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()+" "+a.getDay()+" "+a.getTimezoneOffset()),e.visitor&&(e.visitor.getAuthState&&(e.authState=e.visitor.getAuthState()),!e.supplementalDataID&&e.visitor.getSupplementalDataID&&(e.supplementalDataID=e.visitor.getSupplementalDataID("AppMeasurement:"+e._in,e.expectSupplementalData?!1:!0))),e.q("_s"),e.B("track",arguments)||(e.Ga(n)||(i&&e.K(i),n&&(r={},e.Aa(r,0),e.K(n)),e.bb()&&(e.analyticsVisitorID||e.marketingCloudVisitorID||(e.fid=e.Wa()),e.hb(),e.usePlugins&&e.doPlugins&&e.doPlugins(e),e.account&&(e.abort||(e.trackOffline&&!e.timestamp&&(e.timestamp=Math.floor(a.getTime()/1e3)),a=t.location,e.pageURL||(e.pageURL=a.href?a.href:a),e.referrer||e.Ba||(e.referrer=o.document.referrer,e.Ba=1),e.referrer=e.Ua(e.referrer),e.q("_g")),e.Ya()&&!e.abort&&(e.Za(),c+=e.Xa(),e.gb(s,c),e.q("_t"),e.referrer=""))),n&&e.K(r,1)),e.abort=e.supplementalDataID=e.timestamp=e.pageURLRest=e.linkObject=e.clickObject=e.linkURL=e.linkName=e.linkType=t.vb=e.pe=e.pev1=e.pev2=e.pev3=e.g=0)},e.tl=e.trackLink=function(t,n,i,r,o){return e.linkObject=t,e.linkType=n,e.linkName=i,o&&(e.i=t,e.p=o),e.track(r)},e.trackLight=function(t,n,i,r){return e.lightProfileID=t,e.lightStoreForSeconds=n,e.lightIncrementBy=i,e.track(r)},e.clearVars=function(){var t,n;for(t=0;t<e.c.length;t++)n=e.c[t],("prop"==n.substring(0,4)||"eVar"==n.substring(0,4)||"hier"==n.substring(0,4)||"list"==n.substring(0,4)||"channel"==n||"events"==n||"eventList"==n||"products"==n||"productList"==n||"purchaseID"==n||"transactionID"==n||"state"==n||"zip"==n||"campaign"==n)&&(e[n]=void 0)},e.tagContainerMarker="",e.gb=function(t,n){var i,r=e.trackingServer;i="";var o=e.dc,a="sc.",s=e.visitorNamespace;r?e.trackingServerSecure&&e.ssl&&(r=e.trackingServerSecure):(s||(s=e.account,r=s.indexOf(","),r>=0&&(s=s.substring(0,r)),s=s.replace(/[^A-Za-z0-9]/g,"")),i||(i="2o7.net"),o=o?(""+o).toLowerCase():"d1","2o7.net"==i&&("d1"==o?o="112":"d2"==o&&(o="122"),a=""),r=s+"."+o+"."+a+i),i=e.ssl?"https://":"http://",o=e.AudienceManagement&&e.AudienceManagement.isReady(),i+=r+"/b/ss/"+e.account+"/"+(e.mobile?"5.":"")+(o?"10":"1")+"/JS-"+e.version+(e.mb?"T":"")+(e.tagContainerMarker?"-"+e.tagContainerMarker:"")+"/"+t+"?AQB=1&ndh=1&pf=1&"+(o?"callback=s_c_il["+e._in+"].AudienceManagement.passData&":"")+n+"&AQE=1",e.Sa(i),e.Y()},e.Sa=function(t){e.e||e.$a(),e.e.push(t),e.aa=e.r(),e.za()},e.$a=function(){e.e=e.cb(),e.e||(e.e=[])},e.cb=function(){var n,i;if(e.fa()){try{(i=t.localStorage.getItem(e.da()))&&(n=t.JSON.parse(i))}catch(r){}return n}},e.fa=function(){var n=!0;return e.trackOffline&&e.offlineFilename&&t.localStorage&&t.JSON||(n=!1),n},e.pa=function(){var t=0;return e.e&&(t=e.e.length),e.v&&t++,t},e.Y=function(){if(!e.v)if(e.qa=n,e.ea)e.aa>e.G&&e.xa(e.e),e.ha(500);else{var t=e.Ma();t>0?e.ha(t):(t=e.na())&&(e.v=1,e.fb(t),e.jb(t))}},e.ha=function(t){e.qa||(t||(t=0),e.qa=setTimeout(e.Y,t))},e.Ma=function(){var t;return!e.trackOffline||e.offlineThrottleDelay<=0?0:(t=e.r()-e.wa,e.offlineThrottleDelay<t?0:e.offlineThrottleDelay-t)},e.na=function(){return e.e.length>0?e.e.shift():void 0},e.fb=function(t){if(e.debugTracking){var n="AppMeasurement Debug: "+t;t=t.split("&");var i;for(i=0;i<t.length;i++)n+="\n	"+e.unescape(t[i]);e.eb(n)}},e.Ha=function(){return e.marketingCloudVisitorID||e.analyticsVisitorID},e.Q=!1;var s;try{s=JSON.parse('{"x":"y"}')}catch(c){s=null}s&&"y"==s.x?(e.Q=!0,e.P=function(e){return JSON.parse(e)}):t.$&&t.$.parseJSON?(e.P=function(e){return t.$.parseJSON(e)},e.Q=!0):e.P=function(){return null},e.jb=function(n){var i,r,o;if(e.Ha()&&n.length>2047&&("undefined"!=typeof XMLHttpRequest&&(i=new XMLHttpRequest,"withCredentials"in i?r=1:i=0),!i&&"undefined"!=typeof XDomainRequest&&(i=new XDomainRequest,r=2),i&&e.AudienceManagement&&e.AudienceManagement.isReady())&&(e.Q?i.ja=!0:i=0),!i&&e.ab&&(n=n.substring(0,2047)),!i&&e.d.createElement&&e.AudienceManagement&&e.AudienceManagement.isReady()&&(i=e.d.createElement("SCRIPT"))&&"async"in i&&((o=(o=e.d.getElementsByTagName("HEAD"))&&o[0]?o[0]:e.d.body)?(i.type="text/javascript",i.setAttribute("async","async"),r=3):i=0),i||(i=new Image,i.alt=""),i.la=function(){try{e.ga&&(clearTimeout(e.ga),e.ga=0),i.timeout&&(clearTimeout(i.timeout),i.timeout=0)}catch(t){}},i.onload=i.lb=function(){if(i.la(),e.Ra(),e.V(),e.v=0,e.Y(),i.ja){i.ja=!1;try{var t=e.P(i.responseText);AudienceManagement.passData(t)}catch(n){}}},i.onabort=i.onerror=i.Ta=function(){i.la(),(e.trackOffline||e.ea)&&e.v&&e.e.unshift(e.Qa),e.v=0,e.aa>e.G&&e.xa(e.e),e.V(),e.ha(500)},i.onreadystatechange=function(){4==i.readyState&&(200==i.status?i.lb():i.Ta())},e.wa=e.r(),1==r||2==r){var a=n.indexOf("?");o=n.substring(0,a),a=n.substring(a+1),a=a.replace(/&callback=[a-zA-Z0-9_.\[\]]+/,""),1==r?(i.open("POST",o,!0),i.send(a)):2==r&&(i.open("POST",o),i.send(a))}else if(i.src=n,3==r){if(e.ua)try{o.removeChild(e.ua)}catch(s){}o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),e.ua=e.Pa}i.abort&&(e.ga=setTimeout(i.abort,5e3)),e.Qa=n,e.Pa=t["s_i_"+e.replace(e.account,",","_")]=i,(e.useForcedLinkTracking&&e.A||e.p)&&(e.forcedLinkTrackingTimeout||(e.forcedLinkTrackingTimeout=250),e.W=setTimeout(e.V,e.forcedLinkTrackingTimeout))},e.Ra=function(){if(e.fa()&&!(e.va>e.G))try{t.localStorage.removeItem(e.da()),e.va=e.r()}catch(n){}},e.xa=function(n){if(e.fa()){e.za();try{t.localStorage.setItem(e.da(),t.JSON.stringify(n)),e.G=e.r()}catch(i){}}},e.za=function(){if(e.trackOffline)for((!e.offlineLimit||e.offlineLimit<=0)&&(e.offlineLimit=10);e.e.length>e.offlineLimit;)e.na()},e.forceOffline=function(){e.ea=!0},e.forceOnline=function(){e.ea=!1},e.da=function(){return e.offlineFilename+"-"+e.visitorNamespace+e.account},e.r=function(){return(new Date).getTime()},e.ra=function(e){return e=e.toLowerCase(),0!=e.indexOf("#")&&0!=e.indexOf("about:")&&0!=e.indexOf("opera:")&&0!=e.indexOf("javascript:")?!0:!1},e.setTagContainer=function(t){var n,i,r;for(e.mb=t,n=0;n<e._il.length;n++)if((i=e._il[n])&&"s_l"==i._c&&i.tagContainerName==t){if(e.K(i),i.lmq)for(n=0;n<i.lmq.length;n++)r=i.lmq[n],e.loadModule(r.n);if(i.ml)for(r in i.ml)if(e[r])for(n in t=e[r],r=i.ml[r])!Object.prototype[n]&&("function"!=typeof r[n]||(""+r[n]).indexOf("s_c_il")<0)&&(t[n]=r[n]);if(i.mmq)for(n=0;n<i.mmq.length;n++)r=i.mmq[n],e[r.m]&&(t=e[r.m],t[r.f]&&"function"==typeof t[r.f]&&(r.a?t[r.f].apply(t,r.a):t[r.f].apply(t)));if(i.tq)for(n=0;n<i.tq.length;n++)e.track(i.tq[n]);i.s=e;break}},e.Util={urlEncode:e.escape,urlDecode:e.unescape,cookieRead:e.cookieRead,cookieWrite:e.cookieWrite,getQueryParam:function(n,i,r){var o;return i||(i=e.pageURL?e.pageURL:t.location),r||(r="&"),n&&i&&(i=""+i,o=i.indexOf("?"),o>=0&&(i=r+i.substring(o+1)+r,o=i.indexOf(r+n+"="),o>=0&&(i=i.substring(o+r.length+n.length+1),o=i.indexOf(r),o>=0&&(i=i.substring(0,o)),i.length>0)))?e.unescape(i):""}},e.z=["supplementalDataID","timestamp","dynamicVariablePrefix","visitorID","marketingCloudVisitorID","analyticsVisitorID","audienceManagerLocationHint","authState","fid","vmk","visitorMigrationKey","visitorMigrationServer","visitorMigrationServerSecure","charSet","visitorNamespace","cookieDomainPeriods","fpCookieDomainPeriods","cookieLifetime","pageName","pageURL","referrer","contextData","currencyCode","lightProfileID","lightStoreForSeconds","lightIncrementBy","retrieveLightProfiles","deleteLightProfiles","retrieveLightData","pe","pev1","pev2","pev3","pageURLRest"],e.c=e.z.concat(["purchaseID","variableProvider","channel","server","pageType","transactionID","campaign","state","zip","events","events2","products","audienceManagerBlob","tnt"]),e.ba=["timestamp","charSet","visitorNamespace","cookieDomainPeriods","cookieLifetime","contextData","lightProfileID","lightStoreForSeconds","lightIncrementBy"],e.H=e.ba.slice(0),e.ia=["account","allAccounts","debugTracking","visitor","trackOffline","offlineLimit","offlineThrottleDelay","offlineFilename","usePlugins","doPlugins","configURL","visitorSampling","visitorSamplingGroup","linkObject","clickObject","linkURL","linkName","linkType","trackDownloadLinks","trackExternalLinks","trackClickMap","trackInlineStats","linkLeaveQueryString","linkTrackVars","linkTrackEvents","linkDownloadFileTypes","linkExternalFilters","linkInternalFilters","useForcedLinkTracking","forcedLinkTrackingTimeout","trackingServer","trackingServerSecure","ssl","abort","mobile","dc","lightTrackVars","maxDelay","expectSupplementalData","AudienceManagement"];for(i=0;250>=i;i++)76>i&&(e.c.push("prop"+i),e.H.push("prop"+i)),e.c.push("eVar"+i),e.H.push("eVar"+i),6>i&&e.c.push("hier"+i),4>i&&e.c.push("list"+i);i=["latitude","longitude","resolution","colorDepth","javascriptVersion","javaEnabled","cookiesEnabled","browserWidth","browserHeight","connectionType","homepage"],e.c=e.c.concat(i),e.z=e.z.concat(i),e.ssl=t.location.protocol.toLowerCase().indexOf("https")>=0,e.charSet="UTF-8",e.contextData={},e.offlineThrottleDelay=0,e.offlineFilename="AppMeasurement.offline",e.wa=0,e.aa=0,e.G=0,e.va=0,e.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx",e.w=t,e.d=t.document;try{e.ab="Microsoft Internet Explorer"==navigator.appName}catch(u){}e.V=function(){e.W&&(t.clearTimeout(e.W),e.W=n),e.i&&e.A&&e.i.dispatchEvent(e.A),e.p&&("function"==typeof e.p?e.p():e.i&&e.i.href&&(e.d.location=e.i.href)),e.i=e.A=e.p=0},e.ya=function(){e.b=e.d.body,e.b?(e.o=function(n){var i,r,o,a,s;if(!(e.d&&e.d.getElementById("cppXYctnr")||n&&n["s_fe_"+e._in])){if(e.ka){if(!e.useForcedLinkTracking)return e.b.removeEventListener("click",e.o,!0),void(e.ka=e.useForcedLinkTracking=0);e.b.removeEventListener("click",e.o,!1)}else e.useForcedLinkTracking=0;e.clickObject=n.srcElement?n.srcElement:n.target;try{if(!e.clickObject||e.F&&e.F==e.clickObject||!(e.clickObject.tagName||e.clickObject.parentElement||e.clickObject.parentNode))e.clickObject=0;else{var c=e.F=e.clickObject;if(e.Z&&(clearTimeout(e.Z),e.Z=0),e.Z=setTimeout(function(){e.F==c&&(e.F=0)},1e4),o=e.pa(),e.track(),o<e.pa()&&e.useForcedLinkTracking&&n.target){for(a=n.target;a&&a!=e.b&&"A"!=a.tagName.toUpperCase()&&"AREA"!=a.tagName.toUpperCase();)a=a.parentNode;if(a&&(s=a.href,e.ra(s)||(s=0),r=a.target,n.target.dispatchEvent&&s&&(!r||"_self"==r||"_top"==r||"_parent"==r||t.name&&r==t.name))){try{i=e.d.createEvent("MouseEvents")}catch(l){i=new t.MouseEvent}if(i){try{i.initMouseEvent("click",n.bubbles,n.cancelable,n.view,n.detail,n.screenX,n.screenY,n.clientX,n.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,n.relatedTarget)}catch(u){i=0}i&&(i["s_fe_"+e._in]=i.s_fe=1,n.stopPropagation(),n.kb&&n.kb(),n.preventDefault(),e.i=n.target,e.A=i)}}}}}catch(p){e.clickObject=0}}},e.b&&e.b.attachEvent?e.b.attachEvent("onclick",e.o):e.b&&e.b.addEventListener&&(navigator&&(navigator.userAgent.indexOf("WebKit")>=0&&e.d.createEvent||navigator.userAgent.indexOf("Firefox/2")>=0&&t.MouseEvent)&&(e.ka=1,e.useForcedLinkTracking=1,e.b.addEventListener("click",e.o,!0)),e.b.addEventListener("click",e.o,!1))):setTimeout(e.ya,30)},e.ya()}function r(e){var t,n,r,o,a,s=window.s_c_il,c=e.split(","),l=0;if(s)for(n=0;!l&&n<s.length;){if(t=s[n],"s_c"==t._c&&(t.account||t.oun))if(t.account&&t.account==e)l=1;else for(r=t.account?t.account:t.oun,r=t.allAccounts?t.allAccounts:r.split(","),o=0;o<c.length;o++)for(a=0;a<r.length;a++)c[o]==r[a]&&(l=1);n++}return l||(t=new i),t.setAccount?t.setAccount(e):t.sa&&t.sa(e),t}function o(){var e,t,n,i=window,o=i.s_giq;if(o)for(e=0;e<o.length;e++)t=o[e],n=r(t.oun),n.setAccount(t.un),n.setTagContainer(t.tagContainerName);i.s_giq=0}i.getInstance=r,window.s_objectID||(window.s_objectID=0),o(),window.AppMeasurement=i},{}],19:[function(e,t,n){n.vars={branch:[13,13],title:[49,49],version:[3,3],role:[4,4],device:[5,5],region:[6,6],lang:[7,7],age:[19,19],gender:[20,20],weekDay:[8,8],hour:[9,9],"native":[21,21],userId:[10,10],connected:[16,16],network:[11,11],networkOperator:[12,12],secondscreen:[17,17],devicesPresent:[18,18],search:[14,14],mtvMobileFailed:[null,22],loginStyle:[15,15],teaserCollection:[null,23],teaserClicked:[null,24],videoName:[null,33],franchiseName:[49,49],subscriptionFailure:[null,25]},n.events={appstart:8,menu:9,enable3g:10,disable3g:11,favoAdded:12,favoRemoved:13,sharingFacebookStart:34,sharingFacebookSucces:35,swipeUp:32,swipeDown:33,sharingEmailStart:16,sharingEmailSucces:17,search:18,upgradeMonthFailed:26,upgradeMonthSucces:25,upgradeAnFailed:28,upgradeAnSucces:27,upgradeMtvFailed:30,upgradeMtvSucces:29,loginSucces:23,loginFailed:24,signupSucces:21,signupFailed:22,introSkipped:20,introCompleted:19,teaserClick:31,videofinished:76,videoPlay:6,videoPause:7,videostart:15,video25:2,video50:3,video75:4,purchaseFailed:35,receiptFailed:36},n.weekDays=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"]},{}],20:[function(e,t,n){e("./lib/AppMeasurement.js"),e("./map");t.exports=new AppMeasurement},{"./lib/AppMeasurement.js":18,"./map":19}],21:[function(e,t,n){{var i=e("./omniture"),r=(e("vigour-js/browser/events/util").postpone,e("vigour-js/browser/ua")),o=e("vigour-js/util/config"),a=e("vigour-js/browser/network/url"),o=(e("vigour-js/util"),e("./map"),e("vigour-js/util/config"));e("./context")}t.exports=function(e){"string"!=typeof e&&(e="");var t,n,s,c,l=i.user,u=l.cloud,p=e.split("."),f="desktop"===r.device?"web":r.platform,d=o.region.val+" > "+f+" > ";return p.length>1?(n=p[4],~e.indexOf("shows")?(t=u.data.get(e).checkParent("_parent._name","shows").get("title","").val,p[4]=t,p[6]&&p[6]++,p[8]&&p[8]++):(t=u.data.get(e+".title","").val,p[4]=t),p[4]||(s=a.val&&a.val.match(/\-(.*?)$/),s&&s[1]?(c=s[1].indexOf("/"),t=p[4]=-1!==c?s[1].slice(0,c):s[1]):p[4]=n),d+=~e.indexOf(".channels.")?"tv > "+p.slice(4).join(" > "):p.slice(3).join(" > ")):d+=e,{current:e,name:d,title:t}}},{"./context":15,"./map":19,"./omniture":20,"vigour-js/browser/events/util":222,"vigour-js/browser/network/url":232,"vigour-js/browser/ua":233,"vigour-js/util":315,"vigour-js/util/config":306}],22:[function(e,t,n){var i=e("vigour-js/value"),r=e("vigour-js/browser/cases");t.exports=n=new i({apiDefer:function(e,t){if(this.clearCache(),"string"!=typeof this.val)e(!0);else if(r["native"])navigator.app&&navigator.app.loadUrl?(navigator.app.loadUrl(this.val,{openExternal:!0}),e("success")):r.windowsMobile?(window.open(this.val,"_system"),e("success")):r.ios?(window.open(this.val,"_system"),e("success")):(this.type="can not find navigator.app.loadUrl",e("error"));else{var n=window.open(this.val,this.val);n.focus(),e("success")}}}),n._name="_urlApi"},{"vigour-js/browser/cases":202,"vigour-js/value":327}],23:[function(e,t,n){{var i=e("vigour-js/util/config"),r=e("vigour-js/value"),o=(e("./util"),e("vigour-js/browser/cases"),i.api.url);e("vigour-js/value/flags/process")}t.exports=n=new r({newsletter:{ajax:{url:function(e,t){return this._parent.token&&this._parent.token.val?o+"api/v1/users/"+this._parent.token.val+".json":void 0},method:"PUT",encode:"json",data:function(e,t){return this.clearCache(),(this.val===!0||this.val===!1)&&{user:{accept_newsletter:this.val,app_version:window["package"].version}}}}},role:{poll:!1,ajax:{url:function(e,t){return this._parent.token&&this._parent.token.val&&o+"api/v1/users/"+this._parent.token.val+".json"},defer:function(e,t,n,i){i.user?(this.val=t[0]=i.user.role,e()):e(!0)}}}}),n.role.poll.on(function(e){e===!0&&(e=1e3),e>0?(this._d&&clearInterval(this._id),this._id=setInterval(function(){n.role._update()},e)):(clearInterval(this._id),this._d=null)}),n._name="userApi"},{"./util":24,"vigour-js/browser/cases":202,"vigour-js/util/config":306,"vigour-js/value":327,"vigour-js/value/flags/process":324}],24:[function(e,t,n){var i=(e("vigour-js/util/config"),{emailExists:"Email has already been taken",invalid:"Username or password is invalid",expired:"Your confirmation link expired. Please sign up again using the app.",mobileTimeout:"Timeout error",terms:"MTV country terms and conditions must be accepted",email:"Email can't be blank",password:"Password can't be blank",privacy:"Data protection terms and conditions must be accepted",numberExists:"Mobile number has already been taken",subscription:"Subscription is not verified",resetTokenExpired:"Outdated password reset token.",invalidPasswordToken:"Invalid password reset token.",invalidEmail:"Email is invalid"});n.findError=function(e){if(e){var t=e&&e.errors;if(e.error_message)for(var n in i)if(e.error_message===i[n])return n;if(t instanceof Array)for(var r,o=t.length;r=t[--o];)for(var n in i)if(r.description===i[n])return n;return"invalid"}}},{"vigour-js/util/config":306}],25:[function(e,t,n){var i=e("vigour-js/util/config"),r=e("vigour-js/value"),o=e("./util"),a=(e("vigour-js/browser/cases"),i.api.url);t.exports=n=new r({email:{ajax:{url:function(e,t){return"string"==typeof t&&a+"api/v2/confirmations/"+t+".json"},method:"GET",defer:function(e,t,n,i){i.success?(this.set("token",i.authentication_token),e("success")):(this.type=n?n.message:o.findError(i),e("error"))}}}}),n._name="verify"},{"./util":24,"vigour-js/browser/cases":202,"vigour-js/util/config":306,"vigour-js/value":327}],26:[function(e,t,n){t.exports=n=e("vigour-js/util/config");var i=(e("vigour-js/util"),e("vigour-js/browser/ua"),e("vigour-js/browser/cases")),r=e("vigour-js/value");if(n.language=new r,n.region=new r,"webtranslateit"===n.dictionary)n.dictionary=function(e){return"https://webtranslateit.com/api/projects/"+n.webtranslateit.token+"/files/"+n.webtranslateit.files[e]+"/locales/"+e};else{var o=n.dictionary;n.dictionary=function(e){return o.replace("$language",e)}}var a,s;if("production"===n.cloud&&(a=i.tv?"http://":"https://",s="https://"===a?443:80,n.cloud="production"===n.cloud?new r({val:n.region,transform:function(e,t){return"PL"===t&&(t="po"),t?a+t.toLowerCase()+"-hubs.mtvplay.tv:"+s:!1}}):a+(n.regionOverride||"nl").toLowerCase()+"-hubs.mtvplay.tv:"+s),n.player&&"production"===n.player.settings.ads.viralSID){var c;c=i.tv?"mtvplaytv/smarttv":i["native"]?"mtvplaytv/app":"mtvplaytv/web",n.player.settings.ads.viralSID=c}},{"vigour-js/browser/cases":202,"vigour-js/browser/ua":233,"vigour-js/util":315,"vigour-js/util/config":306,"vigour-js/value":327}],27:[function(e,t,n){var i,r=t.exports=e("vigour-js/app").inject(e("vigour-js/app/content"),e("vigour-js/app/user")),o=r.config=e("./config"),a=e("vigour-js/value"),s=r.cases,c=e("./user"),l=(e("vigour-js/data"),e("vigour-js/browser/animation/raf"),e("vigour-js/browser/ua"),e("vigour-js/util"));r.cloud={api:{auth:o.api.url+"api/v1/users/"},url:o.cloud},r.state.val={"default":"first"},r.frame=e("vigour-js/browser/animation/frame"),r.ua=e("vigour-js/browser/ua"),r.util=e("./util"),r.versionData.on(function(){r.notification.val="appUpgrade"}),r.telCode=new a({"default":{val:r.region,transform:function(e,t){return t&&t.toLowerCase()}}}),s.$storeAvailable=new a(s["native"]&&(s.ios||s.android||s.windowsMobile)),s.hasMobile=new a({val:function(){return l.checkArray(o.mtvmobile,r.region.val.toLowerCase())!==!1?!0:!1},listen:r.region}),e("./intro"),e("./localisation"),i=r.api=e("../api"),i.user.val={token:c.token,newsletter:c.accept_newsletter},e("./login"),e("./share"),e("./register"),e("./upgrade"),e("./playback"),e("./popup"),e("./tracking"),e("./init")},{"../api":5,"./config":26,"./init":28,"./intro":29,"./localisation":30,"./login":31,"./playback":32,"./popup":33,"./register":34,"./share":35,"./tracking":37,"./upgrade":38,"./user":39,"./util":40,"vigour-js/app":174,"vigour-js/app/content":172,"vigour-js/app/user":182,"vigour-js/browser/animation/frame":198,"vigour-js/browser/animation/raf":200,"vigour-js/browser/ua":233,"vigour-js/data":236,"vigour-js/util":315,"vigour-js/value":327}],28:[function(e,t,n){var i=e("vigour-js/app"),r=i.user,o=i.cases,a=e("promise");i.css={addClass:"preload"},!o.chromecast&&!o.tv||r.token.val||(r.token=!0),i.region.is(function(){return"string"==typeof this.val}).then(function(){return i.cloud.connected.is(!0)}).then(function(){return r.token.val===!0?new a(function(e){var t=r.data.is("loaded"),n=setTimeout(function(){a.reject(t),e()},500);t.done(function(){clearTimeout(n),e()})}):r.token.val?r.data.is("loaded"):void 0}).then(function(){return i.ready.val=!0,o.chromecast||r.$execUrl("discover"),i.content.is("loaded")}).done(function(){i.css={removeClass:"preload"},window.clearPackerLoader&&window.clearPackerLoader(),o.touch&&(i.node.style.backgroundColor="black")})},{promise:165,"vigour-js/app":174}],29:[function(e,t,n){var i=t.exports=e("vigour-js/app"),r=i.cases;r["native"]&&!localStorage.getItem("haveSeenIntro")&&i.ready.on(!0,function(){setTimeout(function(){i.popup.val="intro"},1e3),localStorage.setItem("haveSeenIntro",!0)})},{"vigour-js/app":174}],30:[function(e,t,n){var i=e("vigour-js/app"),r=i.config=e("./config"),o=(i.cases,e("vigour-js/app/dictionary")),a=e("vigour-js/util"),s=e("vigour-js/browser/ua");i.dictionary=o,i.region.val=r.regionOverride?{ajax:r.geo,transform:function(e,t){return r.regionOverride||0}}:{responseData:function(e,t){var n=this.country_code&&this.country_code.val;return a.checkArray(r.availableRegions,n),a.checkArray(r.availableRegions,n)!==!1&&n},ajax:r.geo,transform:function(e,t){return t&&"string"==typeof t&&"error"!==t&&a.checkArray(r.availableRegions,t)!==!1?t:r.defaultRegion||("lg"===s.platform&&"tv"===s.device?"DE":0)}},r.language.val=i.language,r.region.val=i.region,i.dictionary.val={ajax:function(e,t){if(this.val){if(this._cached===this.val)return;return this._cached=this.val,this.val&&r.dictionary(this.val)}},val:i.language}},{"./config":26,"vigour-js/app":174,"vigour-js/app/dictionary":173,"vigour-js/browser/ua":233,"vigour-js/util":315}],31:[function(e,t,n){var i=e("./config"),r=(e("vigour-js/app/dictionary"),e("vigour-js/app/")),o=r.user,a=e("../api");a.user.role.val={token:r.user.token},a.login.val={region:i.region},a.user.role.on(function(){o.role.$userOrigin.cloud&&(o.role.$userOrigin=a.user.role.val)}),o.token.on(function(){o.token.val||(a.login.$empty(["loading","region"]),r.state.val="empty",r.state.val="first")}).on(function(){a.user.role.poll.val=o.token.val?6e5:!1}),a.login.on("error",function(){a.timeout||(r.notification.type=this.type,r.notification.val="loginError")}).on("success",function(){if(r.notification.val="loginSuccess",this.facebook&&this.facebook.token&&this.facebook.token.val){var e=this.facebook.token.val,t=this.facebook.id.val;o.token.once(function(n){this.val&&(o.FB_token.$userOrigin=e,o.facebook_id.$userOrigin=t)})}o.token=this.token.val,("login"===r.popup.val||"loginEmail"===r.popup.val||"register"===r.popup.val)&&(r.popup.val=!1)}).loading.on(function(e){e!==!0||a.timeout?"login"===r.loading.val&&(r.loading.val=!1):r.loading.val="login"}),a.facebook.login.on("success",function(e){a.login.val={facebook:{token:this.token.val,id:this.id.val}}}).on("error",function(){r.notification.val="facebookError"}).loading.on(r.loading)},{"../api":5,"./config":26,"vigour-js/app/":174,"vigour-js/app/dictionary":173}],32:[function(e,t,n){var i=e("vigour-js/app"),r=(i.config=e("./config"),e("vigour-js/value")),o=i.cases,a=i.user;o.$playing=i.playing,o.$isFullscreen=new r({val:function(){return"player"===i.state.val},listen:i.state}),o.$isPlayingAd=new r,o.$isLoadingVideo=new r({val:!1,defer:function(e){var t=this;this._timer&&(clearTimeout(this._timer),this._timer=null),this._val&&(this._timer=setTimeout(function(){t.val=!1,t._timer=null},2e3)),e()}}),o.$isOnChannel=new r,i.wifiOnly=new r({val:localStorage.getItem("wifiOnly")||!1,defer:function(e){this._val?localStorage.setItem("wifiOnly",!0):localStorage.removeItem("wifiOnly"),e()}}),i.restrictPlayback.val={val:i.wifiOnly,transform:function(e,t){return t&&o["native"]&&"wifi"!==api.network.val?!0:!1}},i.playing.on(function(e){if(o.$isLoggedIn.val&&e===!0){var t=i.user.navigation.media.from;if("channels"!==t._parent._name){var n=i.user.usage.from.get(t._contentPath),r=n._parent._parent._parent._parent;r&&r.set("media",t)}}}),i.playing.val={defer:function(e,t){var n=a.navigation.media.from,r=n&&n.access&&n.access.val,s=n&&n.id&&n.id.val,c=3===a.role.val;t[0]===!0&&i.wifiOnly.val&&i.api.network.val?(this.val=t[0]=!1,i.notification.from.val="enable4g"):t[0]===!0&&r&&this.val&&(o.$isLoggedIn.val?"channels"!==n._parent._name||!c&&o.$isUpgraded.val?(!o.$isUpgraded.val&&!a.purchases.$userOrigin[s]||"channels"===n._parent._name&&c||c&&2===r)&&(this.val=t[0]=!1,i.popup.from.data=n,i.popup.from.val="roadblockMedia"):(this.val=t[0]=!1,i.popup.from.val="upgrade"):(this.val=t[0]=!1,i.popup.from.val="roadblock")),e()}}},{"./config":26,"vigour-js/app":174,"vigour-js/value":327}],33:[function(e,t,n){var i=e("vigour-js/app"),r=i.cases;i.popup.val={defer:function(e,t){var n=t[0];r.windows&&r["native"]&&"share"===t[0]?(i.api.facebook.share.val={val:!0,url:!0},this._val=t[0]=!1):"upgrade"!==n||r.hasMobile.val||r.$storeAvailable.val?"devices"!==n||r.$isLoggedIn.val||(this._val=t[0]="roadblock"):this._val=t[0]="roadblockUpgrade",e()}}},{"vigour-js/app":174}],34:[function(e,t,n){var i=e("./config"),r=(e("vigour-js/app/dictionary"),e("vigour-js/app/")),o=r.user,a=e("../api"),s=e("vigour-js/browser/cases");a.register.val={age:{defer:function(e,t){var n=t[0];!n||n.defer?e(!0):(1==n?this.val={min_age:1,max_age:20}:2==n?this.val={min_age:20,max_age:30}:3==n&&(this.val={min_age:30,max_age:40}),e())}},region:i.region},a.register.on("error",function(){r.notification.type=this.type,r.notification.val="registerError"}).on("success",function(){if(r.notification.val="registerSuccess",r.popup.val=!1,this.email&&this.email.val)var e=this.email.val,t=this.password.val;a.timeout&&clearInterval(a.timeout),s["native"]&&(a.timeout=setInterval(function(){a.login.val={email:e,password:t}},500),a.login.once("success",function(){clearInterval(a.timeout),a.timeout=!1,s.hasMobile.val&&(r.popup.val="getStarted")}))}).loading.on(r.loading),a.verify.email.on("success",function(e){(s.phone||s.tablet)&&(r.popup.val="getApp"),o.token.val=this.token.val,r.notification.val="verifyEmailSuccess"}).on("error",function(e){r.notification.type=this.type,r.notification.val="verifyEmailError"}).loading.on(r.loading),r.url.params.on(function(e){this.e&&(a.verify.email.val=this.e.val,this.val="")}),a.password.forgot.on("success",function(){r.notification.val="passwordForgot",r.popup.val=!1}).on("error",function(){r.notification.type=this.type,r.notification.val="passwordForgotError"}).loading.on(r.loading),a.password.reset.on("success",function(){r.notification.val="passwordResetSuccess",r.popup.val=!1,o.token.val=this.token.val}).on("error",function(){r.notification.type=this.type,r.notification.val="passwordResetError"}).loading.on(r.loading),r.url.params.on(function(e){this.reset&&(a.password.reset.val={
token:this.reset.val},r.popup.from.val="passwordReset",this.val="")})},{"../api":5,"./config":26,"vigour-js/app/":174,"vigour-js/app/dictionary":173,"vigour-js/browser/cases":202}],35:[function(e,t,n){var i=e("./config"),r=e("vigour-js/app/dictionary"),o=e("vigour-js/app/"),a=e("vigour-js/object"),s=o.user,c=e("../api");c.facebook.share.val={url:{transform:function(e,t){if(!t)return!1;var n,r,o,c,l=t instanceof a?t.from:s.navigation.media.from,u=s.$parse(l),p=i.packer.url+u.url,f=l,d="";return f&&u.title&&(u.episode<10&&(u.episode="0"+u.episode),n=u.season+u.episode,r=u.title?"og:title="+encodeURIComponent((u.show.title.val?u.show.title.val+(n?"#"+n:"")+" | ":"")+u.title+" - MTV Play")+"&":"",o=f.img?"og:image="+encodeURIComponent(f.img.val)+"&":"",c=f.description?"og:description="+encodeURIComponent(f.description.val):"",d="?"+r+o+c),p+d},init:o.ready}},c.facebook.share.on("success",function(){}).on("error",function(){o.notification.type=this.type,o.notification.val="shareError",c.facebook.share.url.val=!1,c.facebook.share.$empty(["url","loading"])}).loading.on(o.loading),c.email.share.val={address:"",subject:r.get("text.mailShare.title"),body:function(e,t){var n=s.$parse(s.navigation.media).url,e=n&&n.replace(/&/g,"and");return e?"http://mtvplay.tv/#/"+e:!1}}},{"../api":5,"./config":26,"vigour-js/app/":174,"vigour-js/app/dictionary":173,"vigour-js/object":303}],36:[function(e,t,n){var i=(e("vigour-js/util/config"),e("vigour-js/app/")),r=e("vigour-js/value"),o=i.user,a=e("vigour-js/data");t.exports=n=o.spotlight=new r({transform:function(e,t){return this._parent.map&&this._parent.map[t]},defer:function(e,t){if(this.clearCache(),this.val||0===this.val&&i.cases.$isLoggedIn.val){var n=o.data.from.get("spotlight_sub.list.0"),r=this;this.selected&&this.selected.from!==n&&(this.selected.remove(),this.selected=null),this.selected||(this.set("selected",new a(n,{subscription:{time:!0,title:!0,text:!0,img:!0,mtvid:!0}})),this.selected.on(function(e){{var t,n=this.from.title&&this.from.title.val;this.from.mtvid&&this.from.mtvid.val}n&&i.cases.$isLoggedIn.val&&this.from.mtvid&&(hashed=this.from.mtvid.val,t=o.notification_stamp.from,t.val&&t.val===hashed||(t.val=hashed,r._update("success")))}),this.selected._update.apply(this.selected,t))}"success"===t[0]?e():e(!0)}}),n.map={0:"spotlight_sub",1:"spotlight_sub",2:"spotlight_mbl"},n.val=o.role},{"vigour-js/app/":174,"vigour-js/data":236,"vigour-js/util/config":306,"vigour-js/value":327}],37:[function(e,t,n){function i(){var e;return e="player"===r.state.val?r.state.video.val:r.user.navigation.media.from,e&&e.val===!1?void 0:e}var r=e("./index"),o=e("../api/tracking"),a=e("../api"),s=e("vigour-js/value");r.mediaTime=new s,o.omniture.user=r.user,r.popup.on(function(){o.popup(this.val)}),r.user.navigation.page.on(function(){o.pageView(this.val)}),r.user.navigation.show.on(function(){o.pageView(this.val)}),r.user.navigation.media.on(function(){o.pageView(this.val)}),r.user.navigation.season.on(function(){o.pageView(this.val)}),r.popup.on("intro",function(){r.popup.once(function(e){o.event(e===!1?"introSkipped":"introCompleted",!0)})}),a.login.on("success",function(){o.event("loginSucces",!0)}).on("error",function(){o.event("loginFailed",!0)}),a.register.on("success",function(){o.event("signupSucces",!0)}).on("error",function(){o.event("signupFailed",!0)}),a.facebook.share.on(function(){o.event("sharingFacebookStart",!0)}).on("success",function(){o.event("sharingFacebookSucces",!0)}),a.email.share.on(function(){o.event("sharingEmailStart",!0)}).on("success",function(){o.event("sharingEmailSucces",!0)}),r.user.search.on(function(){r.user.search.val&&"string"==typeof r.user.search.val&&o.event("search",r.user.search.val)}),a.mobile.verify.on("error",function(){o.event("upgradeMtvFailed")}),r.menu.on(function(){this.val&&o.event("menu",this.val)}),r.ready.once(!0,function(){o.event("appstart",!0)}),r.notification.on("favourite",function(){o.event("favoAdded",!0)}).on("unFavourite",function(){o.event("favoRemoved",!0)}),r.user.receiver.media.on(function(e){this.from&&"media"===this.from._name||o.event(e?"swipeUp":"swipeDown",this.from&&this.from._cachedPath)}),a.purchase.on("success",function(){o.event("monthly"===this.subscription.val?"upgradeMonthSucces":"upgradeAnSucces",!0)}).on("error",function(){o.event("monthly"===this.subscription.val?"upgradeMonthError":"upgradeAnError",!0)}),a.mobile.sms.on("success",function(e){o.event("upgradeMtvSucces",!0)}).on("error",function(e){o.event("upgradeMtvFailed",!0)}),r.mediaTime.on(function(e){var t=i();e&&e>0||t&&o.video(e,t)}),r.playing.on(function(e){var t=i();t&&o.video(e?"videoPlay":"videoPause",t)})},{"../api":5,"../api/tracking":17,"./index":27,"vigour-js/value":327}],38:[function(e,t,n){function i(e,t){if(t){var n=r.store[c.platform],i=n&&n[t];if(i)return i.replace("$region",(o.region.val||"").toLowerCase())}return 0}var r=e("./config"),o=e("vigour-js/app/"),a=o.user,s=e("../api"),c=e("vigour-js/browser/ua");s.mobile.verify.val={token:a.token},s.mobile.verify.on("success",function(e){2!==a.role.val?(s.user.role.poll.val=500,o.loading.val=!0,a.role.once(function(){o.notification.val="mobileUpgradeSuccess",s.user.role.poll.val=!1,o.loading.val=!1})):s.user.role.poll.val=!1,o.popup.val=!1,o.notification.val="mobileVerifySuccess"}).on("error",function(e){o.notification.val="mobileVerifyError"}).loading.on(o.loading),s.mobile.sms.on("success",function(e){a.token.val=this.token.val,o.notification.val="mobileUpgraded"}).on("error",function(e){o.notification.val="mobileUpgradeError"}).loading.on(o.loading),o.url.params.on(function(e){this.m&&(s.mobile.sms.val=this.m.val,this.val="")}),s.purchase.val={subscription:{transform:i},product:{transform:function(e,t){var n=t?i(e,"single"):0;return n}}},s.purchase.on(function(e){console.log("SUB LISTENER!",this.subscription.val,e)}).on("success",function(){var e={receipt:this.token.val};if(this.packageName&&(e.packageName=this.packageName.val),this.subscriptionId&&(e.subscriptionId=this.subscriptionId.val),this.product.val){if(!this.product.from.cloud)throw new Error("trying to buy something else then an episode");console.error(" doing it! ",this.product.from),this.product.from.get("id").is("loaded",function(){e.episodeId=this.val,console.error(" going to receipt! ",e),s.receipt.val=e})}else s.receipt.val=e}).on("error",function(){o.notification.type=this.type,o.notification.val="purchaseError"}).loading.on(o.loading),s.receipt.val={token:a.token},s.receipt.on("success",function(){var e=this.episodeId&&this.episodeId.val;console.log(" receipt success id:",e),e?(a.purchases.$userOrigin.set(e,!0),o.popup.val=!1,o.notification.val="singleEpisodePurchased"):(o.notification.val="upgraded",o.user.role.$userOrigin=1,o.popup.val="profile")}).on("error",function(){o.notification.type=this.type,o.notification.val="purchaseError"}).loading.on(o.loading)},{"../api":5,"./config":26,"vigour-js/app/":174,"vigour-js/browser/ua":233}],39:[function(e,t,n){var i=e("vigour-js/app"),r=i.cases,o=e("vigour-js/value"),a=i.config,s=(e("vigour-js/browser/animation/raf"),t.exports=i.user.inject(e("vigour-js/app/user/token"),e("vigour-js/app/user/usage"),e("vigour-js/app/user/navigation"),e("vigour-js/app/user/multiscreen"),e("vigour-js/app/user/multiscreen/cast"),e("vigour-js/app/user/url")));s.set({profilepic:!1,first_name:!1,email:!1,language:!1,role:!1,highlight:!1,carousel:!1,search:!1,accept_newsletter:!1,FB_token:!1,scroll:!1,facebook_id:!1,url:e("vigour-js/browser/network/url"),localStorageToken:a.api.type+"userToken"}),s.extend({name:"purchases",mock:{purchases:{}},subscription:{purchases:{$:!0}},on:{mock:function(){this.purchases=this.mockdata.purchases},user:function(){this.purchases=this.data.from.get("purchases",{})}}}),r.$isActive.on(function(){"player"!==i.state.val&&(i.state.val=this.val?"first":"second")}),i.language.val=i.user.language,i.content.on("self",function(e,t){var n=i.state.val;i.state.val="empty",i.state.val=n}),s.spotlight=e("./spotlight"),s.spotlight.on(function(e){i.popup.from.data=s.spotlight.selected.from,i.popup.from.val="article"}),s.role.set("text",{val:s.role,transform:function(e,t){return a.roles[t]||""}}),r.$isUpgraded=new o({val:s.role,transform:function(e,t){return t>0?!0:0}}),s.receiver.media.on(function(){r.$isReceiver.val&&(this.val?(i.state.clearCache(),i.state._ignoreValue=!0,i.state.val={val:"player",video:this.from},i.state._ignoreValue=null):i.state.val=r.$isActive.val?"first":"second")}),r.$isReceiver.on(function(){this.val?(i.volume.val=s.receiver.volume,i.playing.val=s.receiver.playing,s.receiver.media.clearCache(),s.receiver.media._update()):(i.volume.val=i.volume.from.val||1,i.playing.val=i.playing.from.val,i.state.val=r.$isActive.val?"first":"second")}),r.$isReceiver.on(function(){i.css.val=this.val?{addClass:"isReceiver"}:{removeClass:"isReceiver"}})},{"./spotlight":36,"vigour-js/app":174,"vigour-js/app/user/multiscreen":186,"vigour-js/app/user/multiscreen/cast":185,"vigour-js/app/user/navigation":187,"vigour-js/app/user/token":190,"vigour-js/app/user/url":192,"vigour-js/app/user/usage":193,"vigour-js/browser/animation/raf":200,"vigour-js/browser/network/url":232,"vigour-js/value":327}],40:[function(e,t,n){var i=e("vigour-js/app/"),r=e("vigour-js/browser/cases"),o=r.phone?"play":"playAlt";n.access=function(e,t){if(t){var n=3===i.user.role.val,a=t.id&&t.id.val,s=t&&!(t._parent&&"channels"===t._parent._name&&3===i.user.role.val)&&(!e||r.$isUpgraded.val&&(!n||n&&2>e));return i.user.purchases.$userOrigin[a]&&(s=!0),s?o:"lockedContent"}}},{"vigour-js/app/":174,"vigour-js/browser/cases":202}],41:[function(e,t,n){e("./style.less");{var i,r=e("vigour-js/app/ui/element"),o=e("../icon");e("vigour-js/util")}t.exports=n=new r({node:"button",css:"ui-button",text:"this is a button",righticon:new o({icon:"arrowright"})}).Class,i=new r({css:function(){return"ui-switch"+(this.switchOn&&this.switchOn.val===!0?" ui-switch-on":"")},btn:{}}),i.extend({switchOn:function(e){this.css="ui-switch"+(e.val&&e.val===!0?" ui-switch-on":"")}}),n.Switcher=i.Class},{"../icon":93,"./style.less":42,"vigour-js/app/ui/element":176,"vigour-js/util":315}],42:[function(e,t,n){},{}],43:[function(e,t,n){function i(e){return["mtvData",o.region.val,o.language.val,"channels",e].join(".")}var r=e("vigour-js/data"),o=e("vigour-js/app/"),a=e("vigour-js/util/config"),s=e("vigour-js/browser/network/ajax"),c=new r,l=[];t.exports=n=function(e,t){if(~l.indexOf(e))return void(t&&t());var i=n.getDate(),r=o.region.val.toLowerCase()+"/channels/"+e+"/"+i;return c[i]||(c.empty,c.set(i,{})),c[i][r]&&c[i][r].val||(c[i].set(r,!1),s({url:"https://api.mtvnn.com/v2/airings.json/?channel_id="+e+"&filter=today&bust="+~~(1e6*Math.random()),headers:{Accept:"*/*"},iframe:a.epg,method:"GET",complete:function(n){if(n instanceof Array){var o=[];n.forEach(function(e,t){if(n[t+1]){var i=e.airing;i.duration=n[t+1].airing.minutes_since_midnight-i.minutes_since_midnight,i.endtime=i.minutes_since_midnight+i.duration,o.push(i)}}),c[i].set(r,o)}else l.push(e),c[i][r].removeListener(),t&&t()},error:function(n){l.push(e),t&&t()}})),c[i][r]},n.now=function(e,t){function i(){var e=this.minutes_since_midnight.val,t=e+this.duration.val;return s>=e&&t>s?(o?o.val=this:o=this,void(a&&c.removeListener(a))):void 0}var o,a,s=n.minutesSinceMidnight(),c=n(e);if(c){if(c.val)c.each(i);else{var o=new r;a=function l(){this.each(i),c.removeListener(l)},c.addListener(a)}return o}},n.anyNow=function(e){if("channels"===e._name){var t=e.keys,o=t.length,a=this;if(!o)return;for(this._findNow=new r,o--;o>=0;o--){var s=e[t[o]].epgid;if(void 0!==s){this.model=!1;var c=n.now(s.val);c&&(c.title?(this.data=c,this._link=i(t[o])):(this._findNow[o]=c,this._findNow[o]._index=t[o],this._findNow[o].addListener(function(){void 0!==this._index&&(a.model=!1,a.data=this.from.val,a._link=i(this._index),setTimeout(function(){a._findNow&&a._findNow.remove()}))})))}}}},n.getDate=function(e){e||(e="-");var t=new Date,n=t.getDate(),i=t.getMonth()+1,r=t.getFullYear();return 10>n&&(n="0"+n),10>i&&(i="0"+i),r+e+i+e+n},n.minutesSinceMidnight=function(){var e=new Date,t=new Date(e),n=t-e.setHours(0,0,0,0);return n/6e4},n.clockTime=function(e,t){var n=~~(t/60),i=~~(t%60);return n>23?n-=24:10>n&&(n="0"+n),10>i&&(i="0"+i),n+":"+i}},{"vigour-js/app/":174,"vigour-js/browser/network/ajax":223,"vigour-js/data":236,"vigour-js/util/config":306}],44:[function(e,t,n){var i=(e("vigour-js/app/ui/element"),e("../overview")),r=e("../../icon"),o=e("vigour-js/app/"),a=new i.Items({pageheader:{"text.dictionary":"text.nav.channels"},collection:{data:"channels",element:i.Item.Tv?new i.Item.Tv:new i.Item({righticon:new r({on:{data:"id"},icon:{data:"access",transform:function(e,t){var n=o.util.access(t,this.data);return"lockedContent"===n?"lockedContentAlt":"arrowright"},listen:o.user.role}}),events:{click:function(){this.checkParent("on.media",!0).$userOrigin=this.data.from}}})},model:{complete:function(){this.parent.node.scrollTop||(this.parent.node.scrollTop=1),this.model=!1}}});t.exports=new i({items:a}).Class},{"../../icon":93,"../overview":62,"vigour-js/app/":174,"vigour-js/app/ui/element":176}],45:[function(e,t,n){function i(e){clearTimeout(s),s=setTimeout(function(){e._pos!==-e.children.length+1?e._pos-1:0;i(e)},5e3)}function r(e){if(!e._i)for(var t=e.parent.children,n=t.length-1;n>=0;)t[n]._i=n--;return e._i}function o(e,t,n){var i=120,r=10,o=this.children.length,s=this._pos||(this._pos=0),l=s;Math.abs(n.x)>r?(n.x<0&&!(t.x>i)&&(l=Math.max(s-1,-o+1)),n.x>0&&!(t.x<-i)&&(l=Math.min(s+1,0))):(t.x<-i&&(l=Math.max(s-1,-o+1)),t.x>i&&(l=Math.min(s+1,0))),this.x._e&&(this.x={_esub:this.x._e._val}),c=!1,a(this,l)}function a(e,t){{var n=e._pos||(e._pos=0),r=e.parent.dotholder.dots;(r||e.parent.parent.parent.parent.topbar.txt.dotholder.dots).children}t!==n&&(e.data.carousel.from=t,e._pos=t),r&&s&&i(e)}e("./style.less");var s,c,l=e("vigour-js/app/ui/element"),u=(e("vigour-js/app/dictionary"),e("../../img")),p=e("../../icon"),f=e("../../text").Title,d=e("vigour-js/app/"),h=e("vigour-js/browser/cases"),v=(e("vigour-js/util/config"),e("vigour-js/browser/animation/frame"),new l({img:new u.Carousel({teaser:{title:new f},background:{range:100},events:{active:"clicked",click:function(){var e,t,n=this.data,i=n.type&&n.type.val,r=n.link&&n.link.val;"Article"===i?r?d.api.url.val=r:(d.popup.from.data=n.from,d.popup.from.val="article"):r&&(r=r.split("."),e="shows"===r[3],t="episodes"===r[r.length-2],t?(linkdata=d.content.from.get(r.slice(3)),d.user.navigation.media.$userOrigin.val=linkdata,d.state.val={val:"player",video:linkdata}):e&&(d.user.navigation.show.$userOrigin=d.content.from.get(r.slice(3))))}}}),model:{subscription:{link:!0,type:!0}}})),g=new l({css:"ui-roll",x:{data:"carousel",transform:function(e,t){return isNaN(t)&&(t=t._val||0),this._pos=t,t*this.node.offsetWidth||0},animation:{time:{val:36,phone:18},easing:"outCubic"},listen:d.w},collection:{data:"marquee",element:v},touch:{events:{grab:{x:!0,pass:function(e,t){return Math.abs(t.x)>Math.abs(t.y)?(c=!0,!0):void 0},up:o}}},model:{complete:function(){var e=this;e.x._p=!0,window.requestAnimationFrame(function(){e.x&&(e.x.update(),e.x._p=null)}),this.model={complete:null}}}}),m=new l({css:"ui-car-buttons",prevBtn:new p({icon:"leftnav",events:{click:function(){var e=this.parent.parent.roll,t=e._pos;0>t&&a(e,t+1)}}}),nextBtn:new p({icon:"rightnav",events:{click:function(){var e=this.parent.parent.roll,t=0|e._pos;t-1>-e.children.length&&a(e,t-1)}}})}),y=new l({css:"ui-dots",collection:{data:"marquee",element:new l({events:{click:function(){a(this.checkParent("roll",!0),-r(this))}}})}});y.extend({dotFocus:function(e){for(var t=-e.val||0,n=this.children,i=n.length-1;i>=0;i--){var r=n[i];r.css=i===t?"dot-focus":!1}}});var _=new l({on:{$remove:{defer:function(e){clearTimeout(s)}}},tablet:{bgTeaser:{}},roll:g,"desktop.buttons":m,dotholder:{dots:new y.Class({dotFocus:{data:"carousel"}})}});h.tablet&&(_.h={val:d.w,multiply:9/16,max:{val:d.h,multiply:.5}}),t.exports=n=_,n.Dots=y.Class,n.Buttons=m.Class,n.Roll=g.Class},{"../../icon":93,"../../img":95,"../../text":159,"./style.less":48,"vigour-js/app/":174,"vigour-js/app/dictionary":173,"vigour-js/app/ui/element":176,"vigour-js/browser/animation/frame":198,"vigour-js/browser/cases":202,"vigour-js/util/config":306}],46:[function(e,t,n){e("./style.less");var i=e("vigour-js/app/ui/element"),r=(e("vigour-js/app/"),e("./carousel")),o=(e("../../icon"),e("vigour-js/browser/cases")),a=(e("../../item"),e("./lists")),s=new i({css:"first-discover",x:{translate:!0},carousel:new r.Class,touch:{scrollbar:"y",on:{$render:{defer:function(e){var t=this._parent._caller;n.scrollTop&&window.requestAnimationFrame(function(){t._node&&(t.node.scrollTop=n.scrollTop||o.touch&&1)}),e()}}},model:{complete:function(){this.node.scrollTop=n.scrollTop||o.touch&&1,this.model={complete:null}}}},lists:a,"events.scroll":function(){var e=this.node,t=n.scrollTop=e.scrollTop;if(o.$hasReceiver.val){var i=e.getBoundingClientRect();this.data.scroll.$userOrigin=t/(e.scrollHeight-i.height)}}});t.exports=s.Class},{"../../icon":93,"../../item":97,"./carousel":45,"./lists":47,"./style.less":48,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202}],47:[function(e,t,n){function i(){{var e=this.data.link.val;this.parent.header&&this.parent.header.text.val||this.parent.parent.header&&this.parent.parent.header.text.val}e&&(e=e.split(".").splice(3),this._stayActive=!0,~e.indexOf("episodes")?this.checkParent("on.media",!0).$userOrigin=this.checkParent("on.content",!0).from.get(e):this.checkParent("on.show",!0).$userOrigin=this.checkParent("on.content",!0).from.get(e))}var r=e("vigour-js/app/"),o=e("vigour-js/browser/cases"),a=(e("vigour-js/app/dictionary"),e("vigour-js/app/ui/element")),s=e("../../icon"),c=e("../../img"),l=e("../../item"),u=e("../../text"),p=e("../../epg_temp"),f=(u.Title,l.TitleSubtitle),d=o.phone?150:220,h=new a({x:{translate:!0},img:new c({h:{val:152,phone:100},w:{val:220,phone:150}}),txt:new f}),v=new h.Class({model:{subscription:{link:!0}},events:{active:"ui-item-clicked",click:i}}),g=new a({css:"list",on:{$render:{defer:function(e){var t=this._parent._caller,n=t.scroller.children.length;t.display=n?"block":"none",e()}}},header:{},scroller:{css:"preload",scrollbar:"x",x:{translate:!0},y:{translate:!0},collection:{data:!0,element:v},touch:{events:{scroll:function(){this.css=""}}}},"model.complete":function(){if(this.scroller){var e=this.scroller.children.length;this.display=e?"block":"none"}}}).Class;t.exports=new a({action:new l({ontv:{text:"on tv"},program:{text:{data:"title"}},arrow:new s({icon:"arrowright"}),events:{active:"action-clicked",click:function(){this._link&&(this._stayActive=!0,this.checkParent("on.media",!0).$userOrigin=r.cloud.data.get(this._link))}},model:{subscription:{$:{epgid:!0}},val:function(e){e.channels&&p.anyNow.call(this,e.channels)}}}),allshows:{"text.dictionary":"text.nav.allShows",events:{active:"ui-item-clicked",click:function(){this._stayActive=!0,this.checkParent("on.page",!0).$userOrigin="shows"}}},watched:new g({css:"list watched",header:{text:{dictionary:"text.showsYouWatch"}},scroller:{collection:{data:"watched",element:new v.Class({events:{active:"ui-item-clicked",click:function(){r.user.navigation.media.$userOrigin=this.data.media.from}},model:function(e){var t=e.media&&e.media.from._contentPath;t&&(this.img.cover.data=r.user.usage.from.get(t),this.txt.subtitle.data=e.media.from,this.model=!1)},img:{background:{data:"show.img"},cover:{model:{inherit:!1},desktop:{percentage:{text:{data:"time",transform:function(e,t){var n=Math.floor(100*t);return n?Math.abs(n)+"%":""}}}},bar:{y:{tablet:147,phone:95},w:{data:"time",transform:function(e,t){return isNaN(t)?0:Math.abs(t)*d}}}}},txt:{title:{text:{data:"show.title"}},subtitle:new u.Subtitle({model:{inherit:!1}})}})}}}),releases:new g({header:{text:{dictionary:"text.newReleases"}},scroller:{collection:{data:"releases",element:new v.Class({txt:{title:{text:{data:"show.title"}}}}),desktop:{element:new l.Large({info:{txt:{title:{text:{data:"show.title"}}}},model:{subscription:{link:!0}},events:{active:"ui-item-clicked",click:i}})}}}}),recommended:new g({header:{text:{dictionary:"text.recommended"}},scroller:{collection:{data:"recommended"}}}),free:new g({header:{text:{dictionary:"text.free"}},scroller:{collection:{data:"free",element:new v.Class({txt:{title:{text:{data:"show.title"}},subtitle:{text:{data:"title"}}}})}}})})},{"../../epg_temp":43,"../../icon":93,"../../img":95,"../../item":97,"../../text":159,"vigour-js/app/":174,"vigour-js/app/dictionary":173,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202}],48:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],49:[function(e,t,n){e("./style.less");var i=e("vigour-js/app/ui/element"),r=e("vigour-js/data"),o=e("vigour-js/app/"),a=e("../../icon"),s=e("../../item"),c=e("../../player/seekbar"),l=e("../../epg_temp"),u=(e("vigour-js/browser/cases"),e("vigour-js/value")),p=l.clockTime,f=l.minutesSinceMidnight,d=(new u({val:360,phone:o.w,sub:30}),new i({holder:{txt:new s.TitleSubtitle({subcontainer:{subtitle:{text:{data:"minutes_since_midnight",transform:p}},seekbar:{text:" - ",css:"subtitle"},endtime:{css:"subtitle",text:{data:"endtime",transform:p}}}})},border:{}}).Class);t.exports=n=new i({message:{icon:new a({icon:"empty"})},container:{list:{touch:{scrollbar:"y",h:{val:o.h,sub:{val:40,iosFull:60,add:{phone:{val:o.w,divide:16/9}}}}},collection:{data:!0,element:new d,filter:{condition:{endtime:{$gt:f}}}},model:{complete:function(){var e=this,t=this.children[0],n=this.parent.parent.message;if(!t)return n.icon.icon="warning",void(n.text={dictionary:"text.noEPG"});n.icon.icon="",n.text="";var i=t.data.minutes_since_midnight.val,o=t.data.endtime.val,a=t.data.duration.val,s=~~(6e4*(o-f()))+3e3,l=t.holder.txt.subcontainer.seekbar;if(!l.seek&&a){t.set({"holder.txt.subcontainer.seekbar":new c({seek:{w:{data:"time"}},button:!1,data:new r({time:(f()-i)/a})})}),this._interval&&clearInterval(this._interval);var e=this;this._interval=setInterval(function(){if(t&&t.holder&&t.holder.txt){var n=f()-i;t.holder.txt.subcontainer.seekbar.data.time.val=n/a}else clearInterval(e._interval),e._interval=null},1e3)}s>0&&(this._timer&&clearTimeout(this._timer),this._timer=setTimeout(function(){e.updateData(),e._timer=null},s+2e3))}}},model:{inherit:!1}},phone:{position:"absolute"},model:{field:"media",subscription:{epgid:!0},val:function(e){var t,n=e.epgid&&e.epgid.val;void 0!==n&&(t=l(n),this.container.data=t,this.model=!1)}}}).Class,n.base.container.list.setSetting({name:"remove",remove:function(){this._timer&&clearTimeout(this._timer),this._interval&&clearInterval(this._interval)}})},{"../../epg_temp":43,"../../icon":93,"../../item":97,"../../player/seekbar":109,"./style.less":50,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202,"vigour-js/data":236,"vigour-js/value":327}],50:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],51:[function(e,t,n){e("./style.less");var i=e("../../icon"),r=e("vigour-js/browser/cases"),o=e("vigour-js/app/");t.exports=new i({icon:{data:"showusage.favourite",transform:function(e,t){return!t||"true"!==t&&t!==!0?(this.css="ui-icon","favoriteadd"):(this.css="ui-icon favorited","favorite")}},"events.click":function(){if(r.$isLoggedIn.val){var e=this.data.showusage.$userOrigin;e.val=e.favourite&&e.favourite.val?{favourite:!1}:{favourite:!0}}else o.popup.from.val="roadblock"}}).Class},{"../../icon":93,"./style.less":52,"vigour-js/app/":174,"vigour-js/browser/cases":202}],52:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],53:[function(e,t,n){function i(e){var t=this._parent,n=t._caller,i=this.$userOrigin;return i.val?(n.miniplayer||(n.miniplayer=new v({on:{usage:t.usage.from,msmedia:i,volume:t.volume.from},data:{media:i,mediausage:t.usage.from.get(i.from._contentPath),volume:t.volume.from},play:{icon:t.play},y:p.phone&&"channels"===i.from._parent._name?24:0}),n.add(n.miniplayer,p.phone&&"topmenu")),void e()):!0}function r(t,n){var i=this._parent._caller;if(this.val&&!i.popupWindow){d||(d=e("../popup"));var r=new d({name:"popupWindow",on:{user:u.user,language:u.user.language,token:u.user.token,newsletter:u.user.newsletter,overlay:u.overlay,loading:u.loading,popup:u.popup}});i.add(r,i.notification),i.popupWindow.on.popup._update()}t()}function o(e,t){var n=this._parent._caller;this.val&&!n.notification&&(n.set({notification:new h({on:{notification:u.notification}})}),n.notification.on.notification._update()),e()}function a(e,t){var n=this._parent._caller,i=n.loader,r=n.cancel,o=n.checkParent("on.overlay",!0),a=this;this.clearCache(),n._cancelTimer&&(clearTimeout(n._cancelTimer),n._cancelTimer=null),this.val?(o.val||(o.from.val="loading"),i||(n.set({loader:new g}),n._cancelTimer=setTimeout(function(){n.set({cancel:{btn:{text:"cancel"},events:{click:function(){a.from.val=!1}}}}),n._cancelTimer=null},8e3))):this.val||(r&&r.remove(),i&&i.remove(),"loading"===o.val&&(o.from.val=!1)),e()}function s(e){var t=this._parent._caller;t._cancelTimer&&clearTimeout(t._cancelTimer),e()}e("./style.less");var c,l=e("vigour-js/app/ui/element"),u=e("vigour-js/app/"),p=e("vigour-js/browser/cases"),f=e("./menu");if(p.tv)c=e("./tv"),t.exports=n=new l({css:"first-state",sidemenu:new f.Sidemenu,w:{parent:"w"},h:{parent:"h"},switcher:new c({position:"absolute",h:{parent:"h"}})}).Class;else{var d,h=e("./notification"),c=e("./switcher"),v=e("./miniplayer"),g=(e("../player"),e("./watch"),e("../loader")),m=e("vigour-js/browser/events/util").postpone,y=m(function(e,t){e.topbar&&(e.topbar.display=t?"block":"none",e.switcher.y=t?40:0,e._block=!0,e.w.update())},100);t.exports=n=p.phone?new l({css:"first-state",on:{popup:{defer:r},notification:{defer:o},loading:{defer:a},$remove:{defer:s},$render:{defer:function(e){var t=this._parent._caller,n=t.section;n.on.msmedia._update(),t.on.popup._update(t.on.popup.val),e()}}},w:{parent:"w"},h:{parent:"h"},section:{on:{msmedia:{init:i}},w:{parent:"w"},h:{parent:"h"},switcher:new c({position:"absolute",y:f.Topbar.base.h,h:{parent:"h",sub:f.Topbar.base.h}}),topmenu:new f.Topmenu({on:{menu:u.menu}}),topbar:new f.Topbar({display:{desktop:"none"}})}}).Class:new l({css:"first-state",on:{state:{defer:function(e){var t=this.from.val,n=this._parent._caller,c=n.section;"first"!==t||n.w||(n.set({on:{popup:{defer:r},notification:{defer:o},loading:{defer:a},$remove:{defer:s},fullscreen:{val:p.$isFullscreen,defer:function(e){var t=this._parent._caller.section;t.x._p=!0,window.requestAnimationFrame(function(){t&&t.x&&(t.x._p=null)}),e()}}},w:{parent:"w"},h:{parent:"h"},sidemenu:new f.Sidemenu({data:u.user.navigation}),section:{on:{msmedia:{init:i}},x:{val:p.tablet?{val:0,$isFullscreen:0}:{val:200,$isFullscreen:0},animation:{time:18,easing:"outCubic"}},w:{parent:"w",desktop:{sub:{self:"x"}}},h:{parent:"h"},switcher:{position:"absolute","touch.y":f.Topbar.base.h,h:{parent:"h",sub:{touch:f.Topbar.base.h}}}}}),c.on.msmedia._update(),n.on.popup._update(n.on.popup.val),p.desktop&&(c.x._p=!0,c.x={val:u.w,defer:function(e,t){t[0]?(this._p=!0,e(),this._p=null):e()},transform:function(e,t){if(p.$isFullscreen.val)return 0;var n=u.w.val<1300;return this._block?this._block=null:y(this,n),n&&!u.menu.val?0:200}},c.x._p=null)),c.x._p=!0,window.requestAnimationFrame(function(){c.x&&(c.x._p=null)}),e()}},$parent:{defer:function(e){this._parent.state._update(),e()}}},sidemenu:{},section:{x:{translate:!0},switcher:new c,topbar:new f.Topbar({display:{desktop:"none"}})}}).Class,n.base.set({overlay:{display:"none","events.click":function(){var e=this.parent.on.loading,t=this.parent.on.popup;e.val||(t.from=!1)}},on:{overlay:{defer:function(e,t){var n=this.from;return n?(n.val?this._parent._caller.overlay.display.val="block":n.val||(this._parent._caller.overlay.display.val="none"),void e()):!0}}}})}},{"../loader":99,"../player":104,"../popup":120,"./menu":55,"./miniplayer":57,"./notification":60,"./style.less":74,"./switcher":75,"./tv":81,"./watch":91,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202,"vigour-js/browser/events/util":222}],54:[function(e,t,n){var i=e("vigour-js/app/ui/element"),r=(e("../../item"),e("../../img"),e("../../icon")),o=(e("../../text"),e("vigour-js/app/")),a=e("../../loader"),s=new i({css:"relative-size",text:o.user.devices.$length,display:"relative",opacity:{val:0,$isLoggedIn:1}}).Class;t.exports=n=new i({content:new r({icon:"cast",scale:{val:1,animation:{start:1,time:18,easing:"outCubic",done:function(){this.scale.val=1}}},display:"block",number:new s,css:{$hasReceiver:"ui-icon hasReceiver"},opacity:{val:.5,$hasDevices:{val:.5,$isLoggedIn:1}},"events.click":function(e){e.prevent=!0;var t=this.checkParent("on.popup",!0);t.from="devices"}}),css:"ui-icon cast","!$connected":{content:{display:"none"},loader:new a.Simple}}).Class},{"../../icon":93,"../../img":95,"../../item":97,"../../loader":99,"../../text":159,"vigour-js/app/":174,"vigour-js/app/ui/element":176}],55:[function(e,t,n){function i(e){return c.phone?function(){this.checkParent("topmenu",!0).hide(),l.user.navigation.page.$userOrigin=e}:c.tablet?function(){this.checkParent("section",!0).x=0,l.user.navigation.page.$userOrigin=e}:function(){l.user.navigation.page.$userOrigin=e}}function r(e){if(e.prevent=!0,c.touch){var t=this._d,n=void 0===t||t&&!t.__t;if(n)if(c.phone){var i=this.checkParent("topmenu",!0);i.toggle()}else{var r=this.checkParent("section",!0),o=r.x.val,a=this.parent.caret,s="closeMenu";o?(r.x=0,a.rotate=-90):(r.x=200,a.rotate=90,r.node.style.pointerEvents="none",l.addEvent("click",function(e){r.x=0,a.rotate=-90,l.removeEvent(!1,s),r.node.style.pointerEvents="auto"},s))}else this.checkParent("switcher",!0).back()}else{var r=this.checkParent("section",!0),o=r.x.val,a=this.parent.caret,s="closeMenu";o?(l.menu.val=!1,r.x.update(),a.rotate=-90):(l.menu.val=!0,a.rotate=90,r.x.update(),r.node.style.pointerEvents="none",l.addEvent("click",function(e){l.menu.val=!1,r.x.update(),a.rotate=-90,l.removeEvent(!1,s),r.node.style.pointerEvents="auto"},s))}}e("./style.less");var o=e("vigour-js/app/ui/element"),a=(e("../../item"),e("../../img"),e("../../icon")),s=e("../../text"),c=e("vigour-js/browser/cases"),l=e("vigour-js/app/"),u=e("./casticon"),p=new s.Title({"events.click":function(){{var e=this.checkParent("on.popup",!0).from;l.user}e.data=l.content.get([this._name,"list","0"]),e.val="article"},css:"term"}).Class,f=new o({append:[new o({tv:{text:{data:"page",transform:function(e,t){return t===this.name&&"menu"===l.focusState.val&&this.$focus(),"menu"!==l.focusState.val&&this._$focused&&this.$focus(!1,!0),""},listen:l.focusState},css:"menu-item"},events:{arrowUp:function(){this.$prev.val&&this.$prev.val.events.click._val.call(this.$prev.val)},arrowRight:function(){"settings"!==this.name&&(l.focusState.from.val="grid")},$focus:function(e){if(e){var t,n=this.parent&&this.parent.children;if(n){for(var i=n.length-1;i>=0;i--)t=n[i],t!==this&&(t.css.val="menu-item");this.css.val="menu-item current"}}},arrowDown:function(){this.$next.val&&this.$next.val.events.click._val.call(this.$next.val)}},"!tv":{css:{data:"page",transform:function(e,t){var n="menu-item",i=n+" current";return"string"==typeof t?t===this.name?i:n:"shows"===this.name?i:n}},lefticon:new a},title:{}}).Class,{name:"discover","!tv.lefticon.icon":"discover","title.text.dictionary":"text.nav.discover","events.click":i("discover")},{name:"shows","!tv.lefticon.icon":"shows","title.text.dictionary":"text.nav.shows","events.click":i("shows")},{name:"channels","!tv.lefticon.icon":"tv","title.text.dictionary":"text.nav.television","events.click":i("channels")},{name:"settings","!tv.lefticon.icon":"settings","title.text.dictionary":c.tv?"text.account.signin.title":"text.nav.settings","tv.display":{val:"table",$isLoggedIn:"none"},"events.click":function(){if(c.tv){this.$focus(!0);var e=this.checkParent("switcher",!0);

e&&e.on.signin.update()}else this.checkParent("on.popup",!0).from.val="settings"}}]}).Class;n.Sidemenu=new o({css:c.tv?{val:l.focusState,transform:function(e,t){var n="menu"!==t?" unfocus":"";return"first-menu first-sidemenu"+n}}:"first-menu first-sidemenu","!tv.logo":new a({icon:"logo"}),items:new f({y:{tv:l.h.val/5-28}}),"!tv.bottom":{button:{display:{val:"block",tv:"none",$isUpgraded:"none"},css:"register",text:{dictionary:{val:"text.account.signup.title",$isLoggedIn:"text.upgrade"}},"events.click":function(){var e=this.checkParent("on.popup",!0);e.from=c.$isLoggedIn.val?!c.$isUpgraded.val&&"upgrade":"register"}},login:{css:"button",display:{val:"block",$isLoggedIn:"none"},text:{dictionary:"text.account.signin.title"},"events.click":function(){var e=this.checkParent("on.popup",!0);e.from="login"}},profile:{"!tv.icon":new a({y:-34,icon:{val:"profile",transform:{val:function(e,t){return l.user.profilepic.val?"empty":void 0},listen:l.user.profilepic}}}),img:{background:{val:l.user.profilepic,display:{val:function(){return l.user.profilepic.val?"block":"none"},listen:l.user.profilepic}}},"events.click":function(){this.checkParent("on.popup",!0).from.val="profile"}},"!tv.cast":new u({opacity:{"!phone":{"!$isLoggedIn":0}}})},"!tv.terms":{display:{val:function(){return l.h.val<=600?"none":"block"},listen:l.h},imprint:new p({"text.dictionary":"text.imprint"}),privacy:new p({"text.dictionary":"text.privacy"}),terms:new p({"text.dictionary":"text.terms"})}}).Class,n.Topbar=new o({css:"first-menu first-topbar",on:{page:{defer:function(e,t){var n=this._parent._caller,i=this.from.val,r="first-menu first-topbar toplevel";"discover"===i?(n.css=r+" logo",n.holder.title.text.val={transform:""}):(n.css=r,n.holder.title.text.val={transform:!1}),n.data={title:i,icon:i},e()}},show:{defer:function(e,t){{var n=this._parent._caller;n.parent.topmenu}n.holder.title.text.val={transform:!1},n.data=this.from.val,n.css="first-menu first-topbar",e()}},media:{defer:function(e,t){{var n=this._parent._caller;n.parent.topmenu}n.holder.title.text.val={transform:!1},n.data=this.from.val,n.css="first-menu first-topbar",e()}},$parent:function(e,t){e()}},h:{val:40,iosFull:60},holder:{lefticon:new a({icon:c.desktop?"menu":{data:"title",transform:c.phone?function(e,t){var n=this._d,i=n&&!n.__t;return void 0===n?"menu":i?"channels"===t?"tv":t:"arrowleft"}:function(e,t){var n=this._d,i=n&&!n.__t;return i?"menu":"arrowleft"}},"events.click":r}),caret:new a({icon:"dropdown","!phone":{rotate:-90},"events.click":r}),title:{text:{data:"title","default":""}},righticon:new u},"events.click":function(e){e.prevent=!0;var t=this._d,n=void 0===t||t&&!t.__t;if(n&&c.touch){var i=this.holder.lefticon;i.events.click._val.call(i,e)}}}).Class,n.Topmenu=new o({css:"first-menu first-topmenu",position:"absolute",h:{parent:"h",sub:n.Topbar.base.h},on:{menu:{defer:function(e,t){var n=this._parent._caller;this.clearCache(),this.val?n.show():n.hide(),e()}},$render:{defer:function(e){this._parent.menu._update(),e()}}},y:{translate:!0,val:-l.h.val,add:n.Topbar.base.h},bottom:{position:"absolute",y:256,h:{parent:"h",sub:256},terms:{imprint:new p({"text.dictionary":"text.imprint"}),privacy:new p({"text.dictionary":"text.privacy"}),terms:new p({"text.dictionary":"text.terms"})}},top:{items:new f,account:{css:"menu-item",left:{css:{val:"profile",$isUpgraded:"$isUpgraded"},picture:{display:{val:"none",$isLoggedIn:"block"},icon:new a({icon:{val:"profile",transform:{val:function(e,t){return l.user.profilepic.val?"empty":void 0},listen:l.user.profilepic}}}),img:{background:{val:l.user.profilepic,display:{val:function(){return l.user.profilepic.val?"block":"none"},listen:l.user.profilepic}}}},text:{dictionary:{val:"text.account.signin.title",$isLoggedIn:"text.profile"}},"events.click":function(){var e=this.checkParent("on.popup",!0);e.from=c.$isLoggedIn.val?"profile":"login"}},right:{css:{val:"register",$isLoggedIn:"upgrade"},display:{val:"table-cell",$isUpgraded:"none"},text:{dictionary:{val:"text.account.signup.title",$isLoggedIn:"text.upgrade"}},"events.click":function(){var e=this.checkParent("on.popup",!0);e.from=c.$isLoggedIn.val?"upgrade":"register"}}}}}).Class,n.Topmenu.base.define({hide:function(){this.y=-this.h.val,this.parent.topbar.holder?this.parent.topbar.holder.caret.rotate=0:console.error("!ERROR this.parent.topbar.holder.caret",this)},show:function(){this.y=0,this.parent.topbar.holder.caret.rotate=180},toggle:function(){var e=this.y.val<0;e?this.show():this.hide()}})},{"../../icon":93,"../../img":95,"../../item":97,"../../text":159,"./casticon":54,"./style.less":56,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202}],56:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],57:[function(e,t,n){function i(e){var t=this.node.getBoundingClientRect(),n=t.left,i=(e.x-n)/(t.right-n);a.user.receiver.volume.from.val=i>1?1:0>i?0:i}e("./style.less");var r=e("../../icon"),o=e("../../img"),a=e("vigour-js/app/"),s=e("vigour-js/app/ui/element"),c=e("../../player/controls"),l=e("../../player/volume"),u=e("vigour-js/browser/cases"),p=new r({icon:{val:!1,transform:function(e,t){return t?"pause":"play"}},"events.click":function(e){e.prevent=!0;var t=this.checkParent("on.play",!0).from;t.val=t.val?!1:!0}});t.exports=new s({css:"mini-player",position:"absolute",on:{msmedia:{defer:function(e){var t=this._parent,n=t._caller,i=this.$userOrigin,r=i.val&&"channels"===i.from._parent._name;if(i.val&&(n.data={media:i,mediausage:t.usage.from.get(i.from._contentPath),volume:t.volume.from}),n.y=i.val?u.phone&&r?24:0:u.phone?82:58,!u.phone){var o=n.controls.node.style;r?(o.visibility="hidden",o.pointerEvents="none"):(o.visibility="visible",o.pointerEvents="auto ")}e()}}},y:{translate:!0,val:u.phone?82:58,animation:{time:18,easing:"outCubic"},transform:function(e,t){return u.$hasReceiver.val?t:u.phone?82:58},listen:u.$hasReceiver},clickable:{img:new o({background:{data:"media.img"},h:58,w:{val:115,phone:58}}),info:{title:{text:{data:"media.show.title","default":{dictionary:"text.nowOnTv"}}},subtitle:{text:{data:"media.title"}}},events:{click:function(){var e=this.parent.data.media.from,t=this.checkParent("on.navigation._val",!0);t.media.$userOrigin=e}}},phone:{slider:new r({icon:"volume","events.click":function(e){e.prevent=!0;var t=this.checkParent("section",!0);t.volumepopup?t.volumepopup.remove():t.set({volumepopup:{h:a.h,modal:{css:"move-in",title:{text:"volume"},bar:{css:"ui-seekbar",bg:{},seek:{w:{data:"volume",transform:function(e,t){return t=isNaN(t)||!t&&0!==t?1:t,100*Math.abs(t)+"%"}},data:a.user.receiver},button:{},events:{down:i,drag:i,up:i}},done:{text:"done",events:{click:function(){t.volumepopup.remove()}}},events:{click:function(e){e.prevent=!0}}},events:{click:function(){t.volumepopup.remove()}}}})}})},play:p,controls:new c,"!phone":{volume:new l({bars:{data:"volume"}})},model:{subscription:{epgid:!0}}}).Class},{"../../icon":93,"../../img":95,"../../player/controls":102,"../../player/volume":113,"./style.less":58,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202}],58:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],59:[function(e,t,n){t.exports={timeout:1e4,map:{favourite:{lefticon:{icon:"favoriteadd",css:{addClass:"favorite"}},css:{addClass:"success"},txt:{title:{text:{dictionary:"text.favoriteAdded"}}}},unfavourite:{lefticon:{icon:"favoriteremove",css:{addClass:"unfavorite"}},css:{addClass:"error"},txt:{title:{text:{dictionary:"text.favoriteRemoved"}}}},loginSuccess:{lefticon:{icon:"right"},css:{addClass:"success"},txt:{title:{text:{dictionary:"text.account.signin.success"}}}},loginError:{lefticon:{icon:"wrong"},css:{addClass:"error"},txt:{title:{text:{dictionary:"text.account.signin.wrong"}}}},facebookError:{lefticon:{icon:"facebook"},css:{addClass:"error"},txt:{title:{text:{dictionary:"text.account.signin.facebookError"}}}},registerSuccess:{lefticon:{icon:"email"},css:{addClass:""},duration:5e5,txt:{title:{text:{dictionary:"text.verifyEmail.title"}},subtitle:{text:{dictionary:"text.verifyEmail.subtitle"}}}},email:{"txt.title.text.dictionary":"text.account.invalid.email"},emailExists:{"txt.title.text.dictionary":"text.account.signup.already"},registerError:{"txt.title.text.dictionary":"text.account.signin.wrong"},registerErrorExists:{"txt.title.text.dictionary":"text.account.signup.already"},registerErrorInvalid:{"txt.title.text.dictionary":"text.account.signin.wrong"},blankEmail:{"txt.title.text.dictionary":"text.account.signin.wrong"},password:{"txt.title.text.dictionary":"text.account.passwordResetError"},passwordShort:{"txt.title.text.dictionary":"text.account.invalid.password"},noMatchPassword:{"txt.title.text.dictionary":"text.noMatchPassword"},verifyEmailSuccess:{lefticon:{icon:"email"},css:{addClass:"success"},duration:5e5,txt:{title:{text:{dictionary:"text.account.verifyEmailSuccess.title"}},subtitle:{text:{dictionary:"text.account.verifyEmailSuccess.subtitle"}}}},verifyEmailError:{lefticon:{icon:"wrong"},css:{addClass:"error"},txt:{title:{text:{dictionary:"text.account.verifyEmailError"}}}},appUpgrade:{lefticon:{icon:"warning"},duration:5e8,txt:{title:{text:{dictionary:"text.versionAvailable"}},"events.click":function(e){window.location.reload()}}},enable4g:{txt:{title:{text:{dictionary:"modal.warning.cellular.title"}},subtitle:{text:{dictionary:"modal.warning.cellular.subtitle"}}}},passwordForgot:{"txt.title.text.dictionary":"text.account.forgot.success"},passwordForgotError:{"txt.title.text.dictionary":"text.account.forgot.wrong"},passwordReset:{"txt.title.text.dictionary":"text.account.passwordReset"},passwordResetError:{"txt.title.text.dictionary":"text.account.passwordResetError"},invalidPasswordToken:{"txt.title.text.dictionary":"text.account.passwordResetError"},resetTokenExpired:{"txt.title.text.dictionary":"text.account.passwordResetError"},shareSuccess:{"txt.title.text.dictionary":"share.success"},shareError:{"txt.title.text.dictionary":"share.failed"},mobileUpgradeSuccess:{"txt.title.text.dictionary":"text.hoorayMobileTitle"},mobileUpgradeError:{"txt.title.text.dictionary":"modal.warning.unabletoverify"},mobileVerifySuccess:{"txt.title.text.dictionary":"text.verifysuccess"},mobileVerifyError:{"txt.title.text.dictionary":"text.verifyfail"},invalidNumber:{"txt.title.text.dictionary":"text.verifyfail"},numberExists:{"txt.title.text.dictionary":"text.verifytaken"},purchaseError:{"txt.title.text.dictionary":"text.account.purchaseError"},$isUpgraded:{"txt.title.text.dictionary":"text.upgradedMessage"},subscription:{"txt.title.text.dictionary":"text.account.purchaseError"},singleEpisodePurchased:{"txt.title.text.dictionary":"singleEpisodePurchased"},invalid:{lefticon:{icon:"wrong"},css:{addClass:"error"},txt:{title:{text:{dictionary:"text.invalidEntry"}}}},expired:{"txt.title.text.dictionary":"text.invalidEntry"},terms:{"txt.title.text.dictionary":"text.invalidEntry"},privacy:{"txt.title.text.dictionary":"text.invalidEntry"},invalidEmail:{"txt.title.text.dictionary":"text.account.forgot.wrong"},mobileTimeout:{"txt.title.text.dictionary":"text.mobileTimeout"}}}},{}],60:[function(e,t,n){e("./style.less");var i=e("../../icon"),r=e("../../item"),o=e("vigour-js/app/ui/switcher"),a=e("./config"),s=e("vigour-js/browser/cases"),c=a.map,l=new r({on:{$remove:{defer:function(e){var t=this._parent._caller;t._timer&&clearTimeout(t._timer),e()}}},position:"absolute",y:{val:40,iosFull:64,animation:{start:0,time:18,easing:"outCubic",complete:function(){var e=this.duration;if(e){var t=this;this._timer&&clearTimeout(this._timer),this._timer=setTimeout(function(){t&&t.parent&&(t.parent.remove(),t.css={addClass:"fade-out"}),this._timer=null},e)}}}},lefticon:new i({icon:"warning"}),txt:{title:{text:""},subtitle:{text:{val:"",defer:function(e){this._caller.display=this._val?"block":"none",e()}}}},"events.click":function(){var e=this.checkParent("on.notification",!0).from;e.val=!1},righticon:new i({icon:"close",events:{click:function(e){e.prevent=!0;var t=this.checkParent("on.notification",!0).from;t.val=!1}}})}).Class;t.exports=new o({css:"first-notification",y:{val:-40,iosFull:-64},iosFull:{},on:{notification:{defer:function(e,t){var n,i=this._parent._caller,r=this.from,o=r.val;if("appUpgrade"===o&&!s["native"])return void e();if(t[0]===!1){var u=i.node.childNodes[i.node.childNodes.length-1].base;u.css={addClass:"fade-out"},u._timer=setTimeout(function(){i.remove()},500)}else n=r.type,n&&(o=n,r.type=null),i.transition={element:l,$params:c[o]||{txt:{title:{text:o}}},$options:{force:!0,duration:c[o]&&c[o].duration||a.timeout}};e()}}},onTransition:function(e,t,n,i){this.add(e),e.duration=i.duration,t&&(t.css={addClass:"fade-out"})}}).Class},{"../../icon":93,"../../item":97,"./config":59,"./style.less":61,"vigour-js/app/ui/switcher":178,"vigour-js/browser/cases":202}],61:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],62:[function(e,t,n){e("./style.less");{var i=(e("vigour-js/app/"),e("vigour-js/app/ui/element")),r=(e("../../icon"),e("vigour-js/browser/cases"),e("vigour-js/browser/element/properties/collection/display"),e("../../text/search"),e("vigour-js/browser/events/util"),e("vigour-js/browser/events/util"),e("./item"));e("../../img")}t.exports=n=new i({css:"first-overview","touch.scrollbar":"y",x:{translate:!0}}).Class,n.Items=new i({pageheader:{}}).Class,n.Item=r},{"../../icon":93,"../../img":95,"../../text/search":161,"./item":63,"./style.less":64,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202,"vigour-js/browser/element/properties/collection/display":206,"vigour-js/browser/events/util":222}],63:[function(e,t,n){e("./style.less");var i=e("vigour-js/app/"),r=e("vigour-js/app/ui/element"),o=e("../../icon"),a=e("../../img"),s=e("vigour-js/browser/cases"),c=e("../../epg_temp"),l=e("../../item"),u=e("../../player/seekbar"),p=(l.TitleSubtitle,c.clockTime),f=e("vigour-js/app/dictionary"),d=s.touch?new l.Thumb({display:"table"}):new l.Large({display:"inline-block"});if(s.slow||((s.touch?d.thumb.img:d.thumb).background={load:function(e){e.opacity=1}}),t.exports=n=d.set({events:{active:"ui-item-clicked"}}).Class,!s.touch){var h=f.get("text.noEPG");n.Tv=new r({css:"ui-item-large tv",display:"inline-block",thumb:new a.Overlay({w:310,h:221,access:new o({on:{data:"id"},icon:{data:"access",transform:function(e,t){var n=i.util.access(t,this.data);return"playAlt"===n?"empty":n},listen:i.user.role}})}),info:{title:{css:"ui-item-text",text:{data:"title"}},"now.text.dictionary":"text.now",epg:{showtitle:{text:{data:"title"}},time:{text:{val:{data:"minutes_since_midnight",transform:p,add:[" - ",{data:"endtime",transform:p}]},transform:function(e,t){var n=this.data;return n&&n.val?t:h.val},listen:f}},bar:new u({w:{val:221,clear:!0},seek:{w:{val:221,multiply:{val:c.minutesSinceMidnight,sub:{data:"minutes_since_midnight"},divide:{data:"duration"}},clear:!0}},button:!1}),model:{inherit:!1}}},model:{subscription:{epgid:!0},val:function(e){var t=e.epgid&&e.epgid.val;void 0!==t&&(this.info.epg.data=c.now(t),this.model=!1)}},events:{click:function(){this.checkParent("on.media",!0).$userOrigin=this.data.from}}}).Class}},{"../../epg_temp":43,"../../icon":93,"../../img":95,"../../item":97,"../../player/seekbar":109,"./style.less":64,"vigour-js/app/":174,"vigour-js/app/dictionary":173,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202}],64:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],65:[function(e,t,n){e("./style.less");var i=e("vigour-js/app/ui/element"),r=e("../../icon"),o=e("../../img"),a=e("../../text"),s=e("../favourite"),c=e("vigour-js/app/"),l=e("vigour-js/browser/cases"),u="dropDownEventId";t.exports=new i({on:{media:{defer:function(e,t){var n=c.user.navigation.media.from.val;if(n){var i=this._parent._caller,r=i.list.find("data",n);r&&!r.css.val&&(i.prev&&(i.prev.css=!1),r.css="current",i.prev=r)}e()}}},title:{text:{val:{dictionary:"text.episodes"},tablet:{data:"show.title"}}},tablet:{favourite:new s},list:{tablet:{scrollbar:"y",h:{val:c.h,sub:{val:99,iosFull:119}}},collection:{data:"season.episodes",filter:!0,element:new i({model:function(e){var t=e._contentPath;t&&!~t.indexOf("channels")&&(this.holder.thumb.cover.data=c.user.usage.from.get(t),this.model=!1)},holder:{thumb:{w:100,img:new o({w:100,h:75}),cover:{y:l.desktop?-75:-5,h:l.desktop?75:5,model:{inherit:!1},desktop:{percentage:{text:{data:"time",transform:function(e,t){var n=Math.floor(100*t);return n?Math.abs(n)+"%":""}}}},bar:{w:{data:"time",transform:function(e,t){return isNaN(t)?0:100*Math.abs(t)}}}}},txt:{title:new a.Title,subtitle:new a.Subtitle},righticon:new r({on:{data:"id"},icon:{data:"access",transform:function(e,t){var n=c.util.access(t,this.data),i="playAlt"===n?l.desktop?"empty":"arrowright":n;return"lockedContent"===i?"lockedContentAlt":i},listen:[c.user.role,c.user.purchases]}})},border:{},"events.click":function(){c.user.navigation.media.$userOrigin=this.data.from}})},model:{complete:function(e){this.parent&&this.parent.on.media._update()}}},dropdown:{h:30,on:{$remove:{defer:function(e){c.removeEvent(!1,u),e()}}},current:{text:{dictionary:"text.season",add:[" ",{data:"season.number"}]},caret:new r({icon:"dropdown"})},collection:{data:"show.seasons",filter:!0,element:new i({text:{dictionary:"text.season",add:[" ",{data:"number"}]},"events.click":function(){var e=this.data.from;c.user.navigation.season.$userOrigin=e}})},"events.click":function(){var e=this.children.length,t=this;30===this.h.val&&e>2?(this.h=30*e+4,c.addEvent("click",function(){t.h&&(t.h=30),c.removeEvent(!1,u)},u)):this.h=30},"model.complete":function(){this.css=this.children.length<=2?{addClass:"inactive"}:{removeClass:"inactive"}}},model:function(e){e.media&&(this.model=!1)}}).Class},{"../../icon":93,"../../img":95,"../../text":159,"../favourite":51,"./style.less":66,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202}],66:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],67:[function(e,t,n){e("./style.less");var i=e("../../img"),r=(e("../../text").TitleSubtitle,e("vigour-js/app/ui/element"),e("vigour-js/browser/cases"),e("./switcher"),e("../favourite")),o=(e("vigour-js/app/"),new i({background:{data:"show.img"},h:{val:220,ios:{animation:{time:24,easing:"outCubic"}}},w:{parent:"w"},info:{position:"absolute",y:{translate:!0},opacity:{parent:"h",transform:function(e,t){return 440/t-1}},box:{star:new r,description:{model:{subscription:{description:!0}},text:{data:"show.description",transform:function(e,t){if(!t.length)return t;var n=t.slice(0,300),i=Math.max(Math.max(n.lastIndexOf("."),n.lastIndexOf("!")),n.lastIndexOf("?"));return~i?n.slice(0,i+1):n+".."}}}}}}).Class);t.exports=n=o},{"../../img":95,"../../text":159,"../favourite":51,"./style.less":71,"./switcher":72,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202}],68:[function(e,t,n){e("./style.less");var i=e("vigour-js/browser/cases");if(i.phone){var r=e("vigour-js/app/ui/element"),o=e("./switcher"),a=(e("./list"),e("./cover")),s=e("vigour-js/browser/events"),i=e("vigour-js/browser/cases"),c=e("vigour-js/app/"),l=(s.document,e("../overview/item"),e("../favourite")),u=(e("../../player"),new r({css:"show",x:{translate:!0},model:function(e){if(e.show){var t=e.show._cachedPath;t&&(n.state&&n.state.path===t&&this.set(n.state.params),this.model=!1)}},on:{$remove:{defer:function(e){var t=this._parent._caller;n.state={path:t.data.show&&t.data.show._cachedPath,params:{cover:{h:t.cover.h.val},switcher:{y:t.switcher.y.val}}},e()}},season:{defer:function(e){var t=this._parent._caller,n=this._val.from;o.set(t.switcher,n._parent,n._name),e()}}},phone:{cover:new a},desktop:{header:{css:"ui-header",append:new r({text:{data:"title"},display:"inline"}),star:l}},switcher:new o({w:c.w}),events:{down:i.ios?function(e){var t=this,n=t.cover,i="seasonmove",r=n.h.val,a=this.switcher._currentList,c=a.node.scrollTop>1;t._y=e.y,n.h._p=!0,t.addEvent("move",function(e){var i=e.y,a=e.x,l=t._y-i,u=!r&&l>0||c;!o.block&&!c&&Math.abs(t._x-a)<Math.abs(l)&&(s.click.block=!0,n.h=n.h.val-l),u||e.preventDefault(),t._y=i,t._x=a},i),t.addEvent("up",function(){s.click.block=!1,n.h._p=!1,n.h=n.h.val>110?220:0,t._y=null,t._x=null,t.removeEvent(!1,i)},i)}:i.slow?function(e){function t(){s.click.block=!1,r.y._p=!1,n._y=null,n._x=null,n.removeEvent(!1,i)}var n=this,i=(n.cover,"seasonmove"),r=this.switcher,a=-220!==r.y.val,c=r._currentList,l=c.node.style,u=c.node.scrollTop>1;n._y=e.y,r.y._p=!0,n.addEvent("move",function(e){var i=e.y,c=e.x,p=n._y-i,f=!a&&p>0||u;!o.block&&!u&&Math.abs(n._x-c)<Math.abs(p)&&(s.click.block=!0,p>0?r.y.val=-220:r.y=0,t()),f?l.overflow="scroll":(l.overflow="hidden",e.preventDefault()),n._y=i,n._x=c},i),n.addEvent("up",t,i)}:function(e){var t,n=this,i=(n.cover,"seasonmove"),r=this.switcher,a=-220!==r.y.val,c=r._currentList,l=c.node.scrollTop>1;n._y=e.y,r.y._p=!0,n.addEvent("move",function(e){var i=e.y,c=e.x,u=n._y-i,p=!a&&u>0||l;!o.block&&!l&&Math.abs(n._x-c)<Math.abs(u)&&(s.click.block=!0,t=r.y.val-u,r.y=Math.min(Math.max(t,-220),0)),p||e.preventDefault(),n._y=i,n._x=c},i),n.addEvent("up",function(){s.click.block=!1,r.y._p=!1,r.y=r.y.val<-110?-220:0,n._y=null,n._x=null,n.removeEvent(!1,i)},i)}}}));t.exports=n=u.Class}else t.exports=e("../watch")},{"../../player":104,"../favourite":51,"../overview/item":63,"../watch":91,"./cover":67,"./list":69,"./style.less":71,"./switcher":72,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202,"vigour-js/browser/events":220}],69:[function(e,t,n){var i=e("vigour-js/browser/cases"),r=e("vigour-js/app/ui/element"),o=e("vigour-js/app/"),a=(e("../../icon"),e("../../img").Basic),s=e("../../item").Indicator,c=e("vigour-js/app/dictionary"),l=(e("vigour-js/data"),new r({collection:{data:"episodes",filter:!0,element:new s({model:function(e){var t=e._contentPath;t&&(this.thumb.bar.w=o.user.usage.from.get(t.concat(["time"])),this.model=!1)},thumb:{img:new a({w:70,h:45}),bar:{w:{transform:function(e,t){return isNaN(t)?0:70*Math.abs(t)}}}},txt:{"subtitle.text.data":{val:function(e){var t="";return e.number&&(t+=c.get("text.episode").val+" "+e.number.val),e.duration?t+=" - "+Math.round(e.duration.val/60)+" "+c.get("text.min").val:void 0},listen:["number","duration"]}},events:{active:!i.desktop&&"ui-item-clicked",click:function(){n.block||(this.checkParent("on.media",!0).$userOrigin=this.data.from)}}})},model:{complete:function(){var e=this.parent;if(n.state){var t=this.data&&this.data._cachedPath;t&&(n.state.path===t&&(e._scrollTop=n.state.scrollTop,e.node.scrollTop=n.state.scrollTop||1),n.state=null)}else i.touch&&(e.node.scrollTop=1);this.model=!1}}})),u=new r({css:"list",scroller:l,on:{$render:{defer:function(e){var t=this._parent._caller;t.node.scrollTop=t._scrollTop||i.touch&&1,e()}}},h:{val:o.h,sub:{val:89,iosFull:109}},scrollbar:"y",model:{inherit:!1}});t.exports=n=u.Class},{"../../icon":93,"../../img":95,"../../item":97,"vigour-js/app/":174,"vigour-js/app/dictionary":173,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202,"vigour-js/data":236}],70:[function(e,t,n){var i=(e("vigour-js/browser/cases"),e("vigour-js/browser/events"),e("vigour-js/app/ui/element")),r=(e("../../icon"),e("vigour-js/app/")),o=new i({text:{dictionary:"text.season",add:{val:" ",add:{data:"number"}}}}).Class;t.exports=new i({desktop:{"text.dictionary":"text.episodes"},items:{collection:{data:"show.seasons",filter:!0,element:new o({"events.click":function(){this.checkParent("on.season",!0).$userOrigin=this.data.from}})}},touch:{x:{translate:!0,parent:"w",multiply:0,"!slow":{animation:{time:Math.min(r.w.val/14,32),easing:"outCubic"}}},highlight:{x:{translate:!0}}}})},{"../../icon":93,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202,"vigour-js/browser/events":220}],71:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],72:[function(e,n,i){function r(){i.block=!1;var e=this.parent,t=e.parent.data.show.seasons,n=this._current||(this._current=0),r=this._keys||(this._keys=t.keys);if(r&&t){var o=this._l||(this._l=r.length),a=this.children,s=(this.children.length,a[n-1]),c=a[n+1];o>n&&!c&&(c=new d,this.add(c)),s&&!s.data&&(s.data=t[n-1]),c&&!c.data&&(c.data=t[n+1])}}function o(e,t){var n=Math.abs(t.x)>Math.abs(t.y);return n&&(i.block=!0),n}function a(e,t){var n=this.parent,i=n.seasons,r=this._l||this._keys.length,o=t.x,a=o/(r-1)/(3/(r-3))+this._start,s=this.x.val,c=this._current,l=this._focus||0,u=120;if(r>3&&0>s&&s>this._max&&(i.x={_e:a}),-u>o&&c!==r-1?c+=1:o>u&&0!==c&&(c-=1),l!==c){var p=i.items.children,f=n.w.val/3;i.highlight.x=f*c,p[l].css="",p[c].css="focus",this._focus=c}}function s(e,t,n){var i,r=this.parent.seasons,o=120,a=3,s=-this._current,c=this._keys.length,l=t.x||t,u=n.x||n;Math.abs(u)>a?(0>u&&!(l>o)&&(i=Math.max(s-1,-c+1)),u>0&&!(-o>l)&&(i=Math.min(s+1,0))):(-o>l&&(i=Math.max(s-1,-c+1)),l>o&&(i=Math.min(s+1,0))),void 0!==this.x._e&&(this.x={_esub:this.x._e.val}),void 0!==r.x._e&&(r.x={_esub:r.x._e.val}),void 0!==i&&(this.checkParent("switcher.on.season",!0).$userOrigin=r.items.children[-i].data.from)}e("./style.less");var c=e("vigour-js/app/ui/element"),l=e("vigour-js/app/"),u=(e("../../icon"),e("vigour-js/util"),e("vigour-js/browser/cases")),p=(e("vigour-js/browser/events/util"),e("vigour-js/browser/events")),f=(e("../../text").Subtitle,p.document),d=(e("../../img"),e("../../item"),e("./list")),h=(e("../favourite"),e("./seasons")),v=new c({on:{$remove:{defer:function(e){var t=this._parent._caller,n=t._currentList;d.state={path:n.data._cachedPath,scrollTop:n.node.scrollTop},i.block=!1,e()}}},y:{translate:!0,"!ios":{"!slow":{animation:{time:24,easing:"outCubic"}}}},touch:{line:{}},seasons:h,roll:{w:{parent:"w"},x:{translate:!0,parent:"w",multiply:0,"!slow":{animation:{time:Math.min(l.w.val/14,32),easing:"outCubic",init:function(){i.block=!0},complete:r}}},events:u.touch&&u.slow&&{down:function(e){var n,i=e.x,r=i,o=i,a=e.y,c="swipe";t=this,f.addEvent("move",function(e){i=e.x,n=i-r,r=i,n&&(p.click.block=!0)},c),f.addEvent("up",function(e){var i=e.x-o;p.click.block=!1,Math.abs(i)>Math.abs(a-e.y)&&s.call(t,e,i,n),f.removeEvent(!1,c)},c)}}},model:function(e){if(e=e.show&&e.show.seasons){var t=e.keys,n=t.length;n&&n!==this._l&&(this._keys=t,this._l=n,i.set(this,e))}},events:u.touch&&!u.slow&&{grab:{x:!0,bind:function(){return this.roll},down:function(){if(this._keys){var e=this.parent.seasons.x._e,t=this._keys.length;this._start=e?e.val:0,this._max=-l.w.val*(t-1)}},pass:o,move:a,up:s}}});n.exports=i=v.Class,i.set=function(e,t,n){for(var i=0|n,o=e.roll,a=o.children.length-1,s=e._keys||(e._keys=t.keys),c=e._l||(e._l=s.length),l=o._current,p=-i,f=e.seasons,h=f.items,v=h.children[u.desktop?i+1:i];i>a++;)o.add(new d);var g=o.children[i];if(void 0!==l){var m=h.children[u.desktop?l+1:l];f.x._p=!1,c>3&&(f.x={multiply:p/(c-1)/(3/(c-3))}),m&&(m.css=""),e.parent.x.val?o.x.preventSet({multiply:p}):o.x={multiply:p}}else c>3&&(f.x._p=!0,f.x={multiply:p/(c-1)/(3/(c-3))},f.x._p=!1),o.x.preventSet({multiply:p});e._current=o._current=i,e._currentList=g,e._keys=o._keys=s,u.touch&&(f.highlight.x=o.w.val/3*i),g.data||(g.data=t[i]),r.call(o),v&&(v.css="focus",u.desktop&&(h.current.data=v.data))},u.touch},{"../../icon":93,"../../img":95,"../../item":97,"../../text":159,"../favourite":51,"./list":69,"./seasons":70,"./style.less":71,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202,"vigour-js/browser/events":220,"vigour-js/browser/events/util":222,"vigour-js/util":315}],73:[function(e,t,n){function i(e,t){var n=t&&t.keys,i="block"===e._parent._parent._val;return n&&n.length&&i?"block":"none"}function r(e,t,n,i){var r=e/t,o=n/t,a=i.length,s=Math.round(a*o),c=s+Math.round(a*r);return 0>s&&(c+=-s,s=0),i.slice(s,c).join(".")}var o=(e("vigour-js/app/ui/element"),e("../overview")),a=e("vigour-js/browser/cases"),s=e("../../icon"),c=e("vigour-js/browser/element/properties/collection/display"),l=(e("../../player"),e("vigour-js/app/"),new o.Items({pageheader:{text:{dictionary:"text.nav.shows",touch:"a - z"}},collection:{data:"shows",filter:{condition:{title:{$contains:""}},sort:"title"},option:c,element:new o.Item({"events.click":function(){this.checkParent("on.show",!0).$userOrigin=this.data.from}})},model:{subscription:{$:{$:!0}}}})),u=new o.Items({pageheader:{"text.dictionary":"text.favorites"},collection:{data:"favourites",option:c,element:new o.Item({desktop:{css:{addClass:"favo-item"},thumb:{w:{sub:15,multiply:.5},h:{self:"w",divide:4/3}},info:!1},"events.click":function(){this.checkParent("on.show",!0).$userOrigin=this.data.from}})},"!touch":{display:{val:"block",transform:{data:"favourites",transform:i}}},touch:{pageheader:{display:{val:"block",transform:{data:"favourites",transform:i}}},message:new s({icon:"favoriteadd","text.dictionary":"text.noFavos",display:{data:"favourites",transform:function(e,t){var n=t&&t.keys&&t.keys.length;return n?"none":"block"}}})}});t.exports=new o({search:e("../../text/search"),on:{$render:{defer:function(e){var t=this._parent._caller;a.desktop?(t._parent=t.parent).addEvent("scroll",function(){},"overviewScroll"):window.requestAnimationFrame(function(){t._node&&(t.node.scrollTop=n.scrollTop||a.touch&&1,t.events.scroll._val.call(t,!1))}),t.set({on:{connect:a.$hasReceiver}}),e()}},$remove:a.desktop&&{defer:function(e){var t=this._parent._caller;t._parent.removeEvent(!1,"overviewScroll"),e()}},connect:{defer:function(e){var t=this._parent._caller;t.events.scroll._val.call(t,!1),e()}}},favos:u,items:l,events:{scroll:function(e){var t=this.node.scrollTop;if(e!==!1&&(n.scrollTop=t),a.$hasReceiver.val&&this&&this.items){var i=this.items.children,o=i.length;if(void 0===this._k||this._l!==o){for(var s=[],c=i.length-1;c>=0;c--){var l=i[c].data;l&&s.unshift(l._name)}this._k=s,this._h=this.node.offsetHeight,this._s=i[1]&&i[1].node.offsetTop,this._sh=this.node.scrollHeight-this._s,this._l=o}var u=this._h,p=this._s,f=this._sh,d=this._k;p>t&&(u-=p-t),this.data.highlight.$userOrigin=r(u,f,t-p,d)}}},model:{complete:function(){this.model={complete:null},this.node.scrollTop=n.scrollTop||a.touch&&1,this.events.scroll._val.call(this,!1)}}}).Class},{"../../icon":93,"../../player":104,"../../text/search":161,"../overview":62,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202,"vigour-js/browser/element/properties/collection/display":206}],74:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],75:[function(e,t,n){function i(e){var t=this._parent,n=t.ms._val,i=l.$isReceiver.val?n.media.$userOrigin.val:t.media.$userOrigin.val;t._caller.transition={element:f.getElement(),$params:f.getParams(t.media,i,!0)},o.state.video={val:i.from},e()}function r(){{var e=this.previous;this.current}if(e){if("page"===e)return void(this.on.page.$userOrigin=this.on.page.val||("show"===this.current||"episode"===this.current)&&"shows"||"channel"===this.current&&"channels"||"discover");if(this.on[e]){var t=this.on[e].from,n=this.on.media.from;if("navigation"===t._parent._name&&("show"===e&&"navigation"!==n._parent._name?(t=n._parent._parent._parent._parent,"show"!==t._name&&(t=null)):t=null),t)return void(this.on[e].$userOrigin=t)}}this.on.page.$userOrigin="string"==typeof this.on.page.val?this.on.page.val:"discover"}e("./style.less");var o=e("vigour-js/app/"),a=e("vigour-js/app/ui/element"),s=e("vigour-js/app/ui/switcher"),c=e("vigour-js/app/ui/switcher/transitions"),l=e("vigour-js/browser/cases"),u=e("../../icon"),p=e("./page"),f=e("./media"),d=e("./show");t.exports=n=new s({css:"first-switcher",desktop:{scrollbar:{val:o.w,transform:function(e,t){return 1300>t||"y"}},transition:{defer:function(e){this._caller.node.scrollTop=0,e()}}},on:{page:{defer:function(){(l.$isFullscreen.val?i:p).apply(this,arguments)}},show:{defer:function(){
(l.$isFullscreen.val?i:d).apply(this,arguments)}},season:{defer:function(e,t){t[0]&&this._parent.show._update(),e()}},media:{defer:function(){(l.$isFullscreen.val?i:f).apply(this,arguments)}}},onTransition:{val:"fade",touch:"slide"},backFallback:r,loader:new a({css:"first-loader",x:{translate:!0},loadicon:new u({icon:"logo"})})}).inject(c).Class},{"../../icon":93,"./media":76,"./page":77,"./show":78,"./style.less":79,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/app/ui/switcher":178,"vigour-js/app/ui/switcher/transitions":179,"vigour-js/browser/cases":202}],76:[function(e,t,n){var i,r=e("vigour-js/browser/cases"),o=e("vigour-js/app/");t.exports=n=function(e){var t=this._parent._caller,i=this.$userOrigin.val||(i=this.$userOrigin.val=this.from);if(!n.isEpisode(i)){var r,a,s=i.from._path,c=s.indexOf("seasons");~c&&(r=s.lastIndexOf("channels"),a=s.slice(r,c),i=this.$userOrigin.val=o.content.get(a),console.error("adjusted the path! from:",s,"to:",i._path))}t.transition={element:n.getElement(),direction:n.getDirection(t,i),$params:n.getParams(this,i),$options:n.getOptions(i)},n.setStatus(t,i),e()},n.isEpisode=function(e){return!~e._contentPath.indexOf("channels")},n.getDirection=function(e,t){var i=e.current;return n.isEpisode(t)?"episode"!==i?1:0:"channel"!==i?1:0},n.getElement=function(){return i||(i=e("../watch"))},n.getOptions=function(e){var t=n.isEpisode(e)&&e._parent._parent,i=r.tablet&&t&&t.from,o=e.from,a=i||o;return a?{loader:a}:void 0},n.getParams=function(e,t,i){var a,s=e._parent,c=s.usage,l=s.ms._val.media.$userOrigin,u=n.isEpisode(t),p={media:t,volume:s.volume.from,msmedia:l};return u&&(seasondata=t._parent._parent,i?p.season=seasondata:(r.phone?s.season.$userOrigin.val=seasondata:s.season.$userOrigin=seasondata,p.season=s.season.$userOrigin),p.show=a=seasondata._parent._parent,p.showusage=c.from.get(a.from._contentPath),p.mediausage=c.from.get(t.from._contentPath,{time:0})),r.$isOnChannel.val=!u,params={media:{player:{on:{msmedia:l,media:t}}},on:{channel:{val:r.$isOnChannel,listen:t},resize:r.tablet&&o.w},data:p},params},n.setStatus=function(e,t){var i,o=e.current,a=n.isEpisode(t);i=r.phone&&a?"page"===o?o:"show":"page",e.previous=i,e.current=a?"episode":"channel"}},{"../watch":91,"vigour-js/app/":174,"vigour-js/browser/cases":202}],77:[function(e,t,n){var i=e("vigour-js/browser/cases");t.exports=function(t){var r,o,a=this.$userOrigin.val,s=this._parent,c=s._caller,l=s.content.from;a&&("discover"===a?(void 0===n[a]&&(n[a]=e("../discover")),o={marquee:l.get("marquee.list"),recommended:l.get("recommended.list"),releases:r=l.get("releases.list"),watched:s.watched.from,free:l.get("free.list"),channels:l.get("channels"),scroll:s.scroll.from,carousel:s.carousel.from}):"shows"===a?(void 0===n[a]&&(n[a]=e("../shows")),o={shows:r=l.get("shows"),favourites:s.favourites.from,search:s.search._val,highlight:s.highlight.from}):"channels"===a&&(void 0===n[a]&&(n[a]=e("../channels")),o={channels:r=l.get("channels")}),c.transition={element:n[a],$params:{data:o},$options:{loader:i.tablet&&"page"===c.current&&c._last!==a?!0:r&&r.from,animation:!(i.tablet&&"page"===c.current),delay:i.tablet&&"page"===c.current&&350},direction:"page"!==c.current&&-1},c.current="page",c._last=a),t()}},{"../channels":44,"../discover":46,"../shows":73,"vigour-js/browser/cases":202}],78:[function(e,t,n){{var i,r=e("vigour-js/browser/cases");e("vigour-js/app/"),e("./media")}r.phone?(t.exports=n=function(e){var t=this._parent,i=t._caller,r=this.$userOrigin.val;i.transition={element:n.getElement(),$params:n.getParams(this,r),$options:n.getOptions(this,r),direction:n.getDirection(i,r)},t.season.$userOrigin._update(),i.previous="page",i.current="show",e()},n.getDirection=function(e,t){var n=e.current;return"page"===n?1:"episode"===n&&-1},n.getElement=function(){return i||(i=e("../show"))},n.getOptions=function(e,t){{var n=e._parent.season.from;t.from}return{loader:n}},n.getParams=function(e,t){var n,i=e._parent,r=t._name,o=i.season,a=i.usage;return o.$userOrigin.val&&o.from.checkParent("_name",r)||(o.$userOrigin.val=t.from.get("seasons.0")),n={on:{season:o.$userOrigin,show:t},data:{show:t,showusage:a.from.get(t.from._contentPath)}}}):t.exports=function(e){var t,n=this.$userOrigin.val,i=n._name,r=this._parent.season,o=r.from._parent._parent===n.from&&r.from._name,a=this._parent,s=a.media;s.from.checkParent("_name",i)&&s.$userOrigin.val||(o=!o||isNaN(o)?0:o,t="seasons."+o+".episodes.0",s.$userOrigin.val=n.from.get(t)),s._update(),e()}},{"../show":68,"./media":76,"vigour-js/app/":174,"vigour-js/browser/cases":202}],79:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],80:[function(e,t,n){e("./style.less");{var i=e("vigour-js/app/ui/element"),r=e("../../img"),o=e("vigour-js/app/"),a=new r({css:"tv-grid-item",h:{val:o.h,divide:3},w:{self:"h",multiply:4/3},display:"inline-block"}).Class,s=new a({w:{self:"h",multiply:8/3,add:{val:o.w.val,multiply:.016}}}).Class,c=new i({category:{text:"this is the field",h:{val:o.h,divide:3},w:{self:"h",multiply:5/6},css:"tv-grid-category"},display:{data:function(e){return 0===e.length?"none":"block"}},events:{arrowUp:function(){this.$prev.val&&this.$prev.val.$focus()},arrowDown:function(){this.$next.val&&this.$next.val.$focus()},arrowRight:function(){o.focusState.prev=this._name,o.focusState.from.val="row"},click:function(){this.events.arrowRight._val.call(this)},arrowLeft:function(){this.checkParent("sidemenu",!0);o.focusState.val="menu"},back:function(e){e.preventDefault(),o.focusState.val="menu"},$focus:function(e){var t,n=this.category,i=n.node,r=this.parent,a=o.h.val,s=a-80,c=a/5;o.focusState.prev=this._name,n.css=e?"tv-grid-category current":"tv-grid-category",e&&(t=i.getBoundingClientRect(),t.bottom>s?r.y=r.y.val-(t.bottom-s):t.top<c&&(r.y=r.y.val+(c-t.top)),r.y._p=null)}},css:"tv-row",collection:{data:!0,element:a}}).Class;t.exports=n=new i({css:"tv-grid",y:{val:o.h.val/5,animation:{easing:"outCubic",time:18}},on:{$new:{defer:function(e){this._parent._caller.y._p=!0,e()}},focusState:{defer:function(e,t){var n=this;if("grid"===n.from.val){var i=n._parent;if(i){var r=i.focusState.from.prev,a=i._caller,s=r&&a[r]||a.children[0];s.$focus()}}else"row"===n.from.val&&o.user.updateNavigation();e()}},$parent:{defer:function(e,t){var n,i,r=this._parent._caller;if(r&&r.data){for(var o in r.data){var l=o;o="$$"+o,r[o]||(i||(i={}),i[o]=new c("marquee"===o?{"category.text":l.length>2?{dictionary:"text."+l}:l,bigItem:new s({data:r.data[l].get(0)}),item:new a({data:r.data[l].get(1)})}:{"category.text":l.length>2?{dictionary:"text."+l}:l,data:r.data[l]}),n||(n=o))}n&&(r.set(i),this._parent.focusState._update())}e()}}}}).Class}n.Row=c,n.Item=a},{"../../img":95,"./style.less":90,"vigour-js/app/":174,"vigour-js/app/ui/element":176}],81:[function(e,t,n){function i(e,t){return Math.ceil(e/t)*t}var r=(e("vigour-js/app/ui/element"),e("vigour-js/app/")),o=(e("vigour-js/browser/cases"),e("vigour-js/app/ui/switcher")),a=e("vigour-js/app/ui/switcher/transitions"),s=e("vigour-js/util/config"),c=e("./message"),l=(e("../../icon"),e("vigour-js/browser/events")),u=new c({css:{addClass:"tv-signin"},container:{holder:{title:{text:{dictionary:"text.login.tvTitle"}},subtitle:{text:{dictionary:"text.login.tvSubtitle"}},bottomimage:{}}}}).Class,p=new c({css:{addClass:"tv-roadblock"},container:{holder:{topimage:{},title:{text:{dictionary:"text.login.tvTitle"}},subtitle:{text:{dictionary:"text.login.tvSubtitle"}},bottomimage:{}}},events:{$focus:function(){}}}).Class;t.exports=n=new o({css:"first-switcher ui-img",x:{val:r.w,multiply:.2,animation:{easing:"outCubic",time:18}},w:{val:r.w},onTransition:"fade",desktop:{scrollbar:"y"},on:{page:{defer:e("./page")},show:{defer:e("./show")},media:{defer:function(e,t){this._parent.show.update(),e()}},signin:{defer:function(e,t){var n=this._parent._caller;n.transition={element:u},e()}},roadblock:{defer:function(e,t){if(this._val){var n=this,i=this._parent._caller,r=l.$focused.val,o=new p({events:{click:function(){this.events.back._val.call(this)},back:function(){r.$focus(),n.val=!1,this.remove()}}});i.parent.set({roadblock:o}),o.$focus()}e()}}},background:{data:"img",transform:function(e,t){if(!t)return" ";var n=Math.ceil((this.w||this.checkParent("w",!0)).val)||r.w.val,o=Math.ceil((this.h||this.checkParent("h",!0)).val)||r.h.val;return n=i(n,100),o=i(o,100),s.img+"/image/"+t+"/"+n+"/"+o+"?effect=overlayBlur&overlay=overlayDarkpurple3&radius="+(o/15.67|0)+"&sigma="+(o/20|0)},load:function(e){e&&(e.opacity=1)}}}).inject(a).Class},{"../../icon":93,"./message":82,"./page":83,"./show":89,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/app/ui/switcher":178,"vigour-js/app/ui/switcher/transitions":179,"vigour-js/browser/cases":202,"vigour-js/browser/events":220,"vigour-js/util/config":306}],82:[function(e,t,n){var i=e("vigour-js/app/ui/element");t.exports=new i({css:"tv-message",container:{holder:{topimage:{}}}}).Class},{"vigour-js/app/ui/element":176}],83:[function(e,t,n){var i,r,o=(e("vigour-js/app/ui/element"),e("./grid")),a=e("vigour-js/app/"),s=e("./row/page"),c=e("./row/channel"),l=e("vigour-js/data").inject(e("vigour-js/data/selection")),u="#abcdefghijklmnopqrstuvwxyz".split("");t.exports=n=function(e,t){function p(){n[d]&&n.stamp===t[1]&&(v.transition={element:n[d],$params:{data:f,on:{focusState:a.focusState}},$options:{force:!0},direction:"page"!==v.current&&-1},v.current="page")}var f,d=this.$userOrigin.val,h=this._parent,v=h._caller;if(v.x={multiply:"row"===a.focusState.val?0:.2},v.data=null,"discover"===d)n[d]="row"===a.focusState.val?s:o,f={spotlight:a.content.get("marquee.list"),free:a.content.get("free.list"),recommended:a.content.get("recommended.list")};else if("shows"===d){if(n[d]="row"===a.focusState.val?s:o,!i){i={},r=new l(a.content.get("shows"),{subscription:{$:{title:!0,img:!0}},block:!0});for(var g=0,m=u.length;m>g;g++)i[u[g]]=new l(a.content.get("shows"),{sort:"title",block:!0,range:[0,5],condition:{title:{$contains:"#"===u[g]?"^\\d":"^["+u[g]+"]"}}})}f=i}else"channels"===d&&(n[d]=c,f=a.content.from.get("channels"));n.stamp=t[1],"shows"===d&&"row"!==a.focusState.val?a.content.get("shows").is(function(){return i.a.length>0&&i["#"].length>0&&i.g.length>3},p):p(),e()}},{"./grid":80,"./row/channel":84,"./row/page":87,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/data":236,"vigour-js/data/selection":237}],84:[function(e,t,n){var i=(e("vigour-js/app/ui/element"),e("vigour-js/app/")),r=(e("vigour-js/app/dictionary"),e("vigour-js/object"),e("../../../epg_temp")),o=e("../../../player/seekbar"),a=r.clockTime,s=e("./item"),c=e("./elements"),l=new s({background:{gone:!1},information:{channeltitle:{css:"ui-item-text",text:{data:"title"}},now:{w:80,text:{dictionary:"text.now"}},epg:{w:{parent:"w",sub:110},showtitle:{text:{data:"title"}},time:{text:{data:"minutes_since_midnight",transform:a,add:[" - ",{data:"endtime",transform:a}]}},bar:new o({seek:{w:{val:r.minutesSinceMidnight,sub:{data:"minutes_since_midnight"},divide:{data:"duration"},transform:function(e,t){return isNaN(parseInt(t))?0:100*t+"%"},clear:!0}},button:!1}),model:{inherit:!1}}},model:{subscription:{epgid:!0},val:function(e){var t=e.epgid&&e.epgid.val;void 0!==t&&(this.information.epg.data=r.now(t),this.model=!1)}},events:{arrowRight:function(){var e=i.focusState.val;"row"===e||this.$prev.val&&this.$prev.val.cover?this.$next.val&&this.$next.val.$focus():i.focusState.val="row"},arrowLeft:function(){var e=i.focusState.val;"grid"===e?i.focusState.val="menu":this.$prev.val&&this.$prev.val.cover?this.$prev.val.$focus():i.focusState.val="grid"},back:function(e){e.preventDefault();var t=this.checkParent("rows",!0);t.x._p=!0,i.focusState.val="row"===i.focusState.val?"grid":"menu"},click:function(){if("lockedContent"===this.cover.icon.val){var e=this.checkParent("on.roadblock",!0);e&&(e.val=!0)}else i.user.navigation.media.$userOrigin.val=this.data.from,i.state.val={val:"player",video:this.data.from}}}}).Class;t.exports=n=new c.BasicRowView({css:{addClass:"tv-channels"},indicator:{display:{val:i.focusState,transform:function(e,t){return"row"===t?"block":"none"}},title:{text:{dictionary:"text.nav.channels"}}},rows:{css:"tv-row",collection:{element:l,data:!0}},on:{focusState:{defer:function(e,t){var n=this.from.val,i=this._parent._caller;"grid"===n?i.parent.x={multiply:.2}:"row"===n&&(i.parent.x={multiply:0}),i.rows&&i.rows.children[0]&&("menu"!==n||"$parent"!==t[0])&&i.rows.children[0].$focus(),e()}},$parent:{defer:function(e,t){this._parent.focusState._update("$parent"),e()}}}}).Class},{"../../../epg_temp":43,"../../../player/seekbar":109,"./elements":85,"./item":86,"vigour-js/app/":174,"vigour-js/app/dictionary":173,"vigour-js/app/ui/element":176,"vigour-js/object":303}],85:[function(e,t,n){{var i=e("vigour-js/app/ui/element"),r=e("vigour-js/app/");e("vigour-js/app/dictionary")}n.Indicator=new i({css:"tv-row-indicator",text:{data:!0,dictionary:function(e,t){return t?t instanceof Object&&t.number?{text:t.number&&t.number.val}:(t=String(t),t.length>2?"text."+t:{text:t}):void 0}},display:"inline-block"}).Class;var o=n.BasicRowView=new i({css:"tv-row-view",indicator:{title:{}},rows:{on:{$new:{defer:function(e){this._parent._caller.x._p=!0,e()}}},y:r.h.val/5,x:{val:0,animation:{easing:"outCubic",time:18}}}}).Class;n.RowView=new o({indicator:{list:{text:"",collection:{element:n.Indicator,data:!0,filter:!0}}},info:{on:{$remove:{defer:function(e){console.log("remove?");var t=this._parent._caller;t._timer&&clearTimeout(t._timer),e()}}},opacity:{data:"description",transform:function(e,t){return t?(this.css="",1):(this.css="dontAnimate",0)}},title:{text:{data:"title"}},showsubtitle:{css:"subtitle",display:{data:"episodeCount",transform:function(e,t){return t?"block":"none"}},text:{val:{data:"seasonCount"},add:[" ",{dictionary:"text.seasons"}," ",{data:"episodeCount"}," ",{dictionary:"text.episodes"}]}},episodesubtitle:{css:"subtitle",display:{data:"duration",transform:function(e,t){return t?"block":"none"}},text:{data:"duration",transform:function(e,t){return~~(t/60)+" "},add:{dictionary:"text.min"}}},description:{text:{data:"description"}}}}).Class},{"vigour-js/app/":174,"vigour-js/app/dictionary":173,"vigour-js/app/ui/element":176}],86:[function(e,t,n){function i(e,t){t=t?this:this.parent;var n=t&&t.node.nextSibling;return n&&n.base?n.base.children[0]?n.base.children[0]:i.call(n.base,!1,!0):void 0}function r(e,t){t=t?this:this.parent;var n=t&&t.node.previousSibling;if(n&&n.base){var i=n.base.children[void 0===e?n.base.children.length-1:e];return i?i:r.call(n.base,e,!0)}}{var o=(e("vigour-js/app/ui/element"),e("../../../img")),a=e("vigour-js/app/"),s=e("vigour-js/browser/cases"),c=(e("vigour-js/app/dictionary"),e("vigour-js/object"),e("../../../icon"));t.exports=new o({on:{data:"link"},define:{$selectIndicator:function(e){var t=this.checkParent("indicator.list",!0),n=t&&t.find("data",e);n||(n=t&&t.find("data._val",e)),n&&t&&t._focused!==n&&(t._focused&&(t._focused.css="tv-row-indicator"),n.css="tv-row-indicator current",t._focused=n)},$focusCommon:function(e){var t,n,i,r=this.checkParent("rows",!0),o=r.parent,a=this.node,s=40,c=this,l=4;if(e){for(rect=a.getBoundingClientRect(),r.x=r.x.val+(s-rect.left)+o.parent.x.val,n=o.info,t=this.$prev.val;l--&&c;)c.background.gone.val&&(c.background={gone:!1}),c=c.$next.val;t&&t.background.gone&&t.background.gone.val&&(t.background={gone:!1}),n&&(i=this.data,n.data={},n._timer&&(clearTimeout(n._timer),n._timer=null),n._timer=setTimeout(function(){n.data=i,n._timer=null},500)),r.x._p=null}this.css=e?"tv-row-item current":"tv-row-item"}},css:"tv-row-item",h:{val:a.h,divide:3,multiply:1.25},w:{self:"h",multiply:4/3},background:{gone:!0},cover:new c({css:"ui-icon relative-size",icon:{data:"access",transform:function(e,t){return(1!==t||s.$isUpgraded.val)&&(2!==t||s.$isUpgraded.val)&&(3!==t||s.$isUpgraded.val&&3!==a.user.role.val)?"empty":"lockedContent"}}}),display:"inline-block",events:{click:function(e){var t=this.data&&this.data.from;if(t)if(t.link){var n,i=t.link.val.split("."),r="shows"===i[3],o="episodes"===i[i.length-2];o?(n=a.content.from.get(i.slice(3)),a.user.navigation.media.$userOrigin.val=n,a.state.val={val:"player",video:n}):r?a.user.navigation.show.$userOrigin=a.content.get(i.slice(3)):console.error("other type of link!")}else if("shows"===t._parent._name)a.user.navigation.show.$userOrigin=t;else if("episodes"===t._parent._name)if("lockedContent"===this.cover.icon.val){var s=this.checkParent("on.roadblock",!0);s&&(s.val=!0)}else a.user.navigation.media.$userOrigin.val=t,a.state.val={val:"player",video:t};else console.error("no normal !",t)},arrowRight:function(){this.$next.val&&this.$next.val.$focus()},arrowDown:function(){var e=r.call(this,0);e&&e.$focus()},arrowUp:function(){var e=i.call(this);e&&e.$focus()},$focus:function(e){var t,n,i=this.parent._name;i?t=i.slice(2):(i=this.data._parent._parent._name,t=this.data._parent._parent,n=!0),n||(a.focusState.prev=i),this.$selectIndicator(t),this.$focusCommon(e)}},"$next.transform":function(e,t){return t?void 0:i.call(this)},"$prev.transform":function(e,t){return t?void 0:r.call(this)}}).Class}},{"../../../icon":93,"../../../img":95,"vigour-js/app/":174,"vigour-js/app/dictionary":173,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202,"vigour-js/object":303}],87:[function(e,t,n){{var i=e("vigour-js/app/ui/element"),r=(e("../../../img"),e("vigour-js/app/")),o=(e("vigour-js/app/dictionary"),e("vigour-js/object"),e("./item")),a=e("./elements"),s=e("vigour-js/data"),c=new i({css:"tv-row",collection:{data:!0,element:new o({events:{arrowLeft:function(){if(this.$prev.val)this.$prev.val.$focus();else{var e=r.focusState.from;e.val="grid"}},back:function(e){e.preventDefault(),r.focusState.val="grid"}}})}}).Class;t.exports=n=new a.RowView({"indicator.list.model.inherit":!1,on:{focusState:{defer:function(e,t){var n=this,i=n._parent;if("row"===n.from.val){if(i){var o=i.focusState.from.prev,a=i._caller.rows;if(a.children.length){var s=o&&a[o]&&a[o].children[0]||a.children[0].children[0];!s&&a.children[1]&&(s=a.children[1].children[0]),s&&!s._$focused&&s.$focus()}}}else"grid"===n.from.val&&r.user.updateNavigation();e()}},$parent:{defer:function(e,t){var n=this._parent._caller;if(n&&n.data&&this._cachedData!==n.data){this._cachedData=n.data;var i=new s([]),o=r.user.navigation.page.val,a={rows:{}};for(var l in n.data)n[l]||(a.rows["$$"+l]=new c({data:n.data[l]})),i.push(l);n.indicator.title.text={dictionary:"text.nav."+o},n.indicator.list.data=i,n.set(a),this._parent.focusState._update()}e()}}}}).Class}},{"../../../img":95,"./elements":85,"./item":86,"vigour-js/app/":174,"vigour-js/app/dictionary":173,"vigour-js/app/ui/element":176,"vigour-js/data":236,"vigour-js/object":303}],88:[function(e,t,n){{var i=e("vigour-js/app/ui/element"),r=e("vigour-js/app/"),o=(e("vigour-js/app/dictionary"),e("vigour-js/object"),e("./item")),a=e("./elements"),s=e("vigour-js/browser/animation/raf"),c=new i({css:"tv-row",collection:{data:"episodes",element:new o({events:{arrowLeft:function(){if(this.$prev.val)this.$prev.val.$focus();else{var e=r.focusState.from;this.parent&&this.parent.data._parent&&"seasons"===this.parent.data._parent._name&&(e._val="row",r.user.navigation.page.$userOrigin=r.user.navigation.page.val||"shows")}},back:function(){var e=r.focusState.from;e._val="row",r.user.navigation.page.$userOrigin=r.user.navigation.page.val||"shows"}}})}}).Class;t.exports=n=new a.RowView({indicator:{title:{text:{data:"title"}},list:{text:{dictionary:"text.season",add:" "},collection:{data:"seasons"}}},rows:{model:{subscription:{title:!0,seasons:{$:{number:!0,episodes:{$:{img:!0,title:!0}}}}},block:!0},collection:{element:c,data:"seasons"}},on:{$remove:{defer:function(e,t){this._deferRafid&&(console.error("lezzz remove this shit!"),window.cancelAnimationFrame(this._deferRafid))}},$parent:{defer:function(e,t){var n=this._parent._caller;if(n._deferRafid&&window.cancelAnimationFrame(n._deferRafid),n&&n.data){{r.user.navigation.page.val}"shows"===n.data._parent._name&&n.data.get("seasons").is("loaded",function(){n.rows&&n.rows.children[0]?n.rows.children[0].children[0].$focus():n._deferRafid=s(function(){n.rows&&n.rows.children[0]&&n.rows.children[0].children[0].$focus()})})}e()}}}}).Class}},{"./elements":85,"./item":86,"vigour-js/app/":174,"vigour-js/app/dictionary":173,"vigour-js/app/ui/element":176,"vigour-js/browser/animation/raf":200,"vigour-js/object":303}],89:[function(e,t,n){{var i;e("vigour-js/app/ui/element"),e("vigour-js/data").inject(e("vigour-js/data/selection")),e("vigour-js/app/")}t.exports=function(t,n){var r,o=this.$userOrigin,a=this._parent,s=a._caller,c={};if(s.x={multiply:0},o){s.data=o,i||(i=e("./row/show"));{o.get("seasons")}r=i,c=o.from}if(!r)throw t(!0),new Error("wrong tv - show.js , no element!");s.transition={element:r,$params:{data:c,info:{data:{}}},$options:{force:!0}},t()}},{"./row/show":88,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/data":236,"vigour-js/data/selection":237}],90:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],91:[function(e,t,n){function i(e){var t=this._parent,n=t._caller,i=window.innerWidth,o=window.innerHeight,a=n.data,s="side";r=i>o,this.from.val&&(r?n[s]||(n.media[s]&&n.media[s].remove(),n.node.style.tableLayout="auto",n.add(new v({name:s,data:a}),"media"),n.media.info.set({display:"block",h:{val:l.h,sub:[p.base.h.val,{val:l.w,sub:400,multiply:9/16}]}}),t.channel._update()):n.media[s]||(n[s]&&n[s].remove(),n.media.add(new v({name:s,data:a}),"info"),n.node.style.tableLayout="fixed",n.media.info.set({display:"table-cell",h:{val:l.h,sub:[p.base.h.val,{val:l.w,sub:0,multiply:9/16}]}}),t.channel._update()),n.on.resize.val||n.set({on:{resize:l.w}}),e())}e("./style.less");var r,o=e("vigour-js/app/ui/element"),a=e("../../icon"),s=e("../../player"),c=e("../favourite"),l=e("vigour-js/app/"),u=e("../seasons"),p=e("../menu").Topbar,f=e("../../text"),d=e("../epg"),h=e("vigour-js/browser/cases"),v=e("vigour-js/app/ui/switcher");v=new v({onTransition:function(e,t){t&&t.remove(),this.add(e)}}).Class;var g=new o({touch:{scrollbar:"y"},phone:{h:l.h.val-p.base.h.val-9*l.w.val/16},header:{title:new f.Title({text:{data:"media.title"}})},description:new f.Description}).Class,m=(new g).Class,y=new g({header:{add:[new a({icon:"share",name:"share",events:{click:function(){var e=this.checkParent("on.popup",!0).from;e.data=this.checkParent("data",!0).media.from,e.val="share"}}}),"title"],subtitle:{text:{val:{dictionary:"text.season"},add:[" ",{data:"season.number",transform:function(e,t){var n=this.data&&this.data.media.from._parent._parent.number,i=n&&n.val;return i&&(t=i),t}}," ",{dictionary:"text.episode"}," ",{data:"media.number"}]}}}}).Class,_=new f.Title({text:{data:"media.title"}}).Class,b=new f.Title({text:{data:"show.title"},favourite:new c}).Class;t.exports=new o({css:"first-watch",x:{translate:!0},model:{subscription:{title:!0,number:!0,description:!0}},on:{channel:{val:!1,defer:function(e){var t=this._parent._caller,n=t.media.info,i=t.side||t.media.side,o=t.pageheader,a={data:t.data},s=h.$isOnChannel.val;s===!1?(n.transition={element:y,$params:a},o&&(o.transition={element:b,$params:a}),i&&(a.on={media:l.user.navigation.media.$userOrigin},r||(a.list={h:{sub:{add:{val:l.w,divide:16/9}}}}),i.transition={element:u,$params:a},i.css="first-seasons seasons-only")):s===!0&&(h.phone&&(n.css="first-seasons first-epg"),n.transition={element:h.phone?d:m,$params:a},o&&(o.transition={element:_,$params:a}),i&&(r||(a.list={h:{sub:{add:{val:l.w,divide:16/9}}}}),i.transition={element:d,$params:a},i.css="first-seasons first-epg")),e()}},$render:{defer:function(e){var t=this._parent;h.tablet&&t.resize._update(),t.channel._update(),e()}}},"tablet.on":{resize:{defer:i}},media:{player:new s.Holder,info:new v},desktop:{add:[new v({name:"pageheader"}),"media"],margin:{},side:new v}}).Class},{"../../icon":93,"../../player":104,"../../text":159,"../epg":49,"../favourite":51,"../menu":55,"../seasons":65,"./style.less":92,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/app/ui/switcher":178,"vigour-js/browser/cases":202}],92:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],93:[function(e,t,n){e("./style.less");var i=e("vigour-js/app/ui/element"),r=(e("vigour-js/browser/cases"),new i({css:"ui-icon"})),o={discover:"",shows:"",tv:"",settings:"",cast:"",play:"",pause:"",fullscreen:"",pullback:"",swipeup:"",close:"",closesmall:"",dropdown:"",arrowright:"",search:"",cart:"",email:"",favorite:"",favoriteadd:"",favoriteremove:"",locked:"",logout:"",profile:"",share:"",arrowleft:"",exitfullscreen:"",right:"",wrong:"",logo:"",scan:"",facebook:"",twitter:"",phone:"",iphone:"",android:"",tablet:"",desktop:"",laptop:"",menu:"",leftnav:"",rightnav:"",noresult:"",volume:"",rewind:"",fastforward:"",disconnect:"",monster:"",lockedRight:"",watching:"",notWatched:"",airplay:"",gender:"",age:"",newsletter:"",warning:"",whatsapp:"",loader1:"",loader2:"",loader3:"",loader4:"",lockedContent:"",fullscreenAlt:"",exitfullscreenAlt:"",playAlt:"",pauseAlt:"",lockedContentAlt:"",empty:" "};r.extend({icon:function(e){var t="<span>"+(o[e.val]||"")+"</span>",n=this.node.innerHTML,i=n.indexOf("<div");~i&&(t+=n.slice(i)),this.html=t}}),t.exports=n=r.Class,n.map=o},{"./style.less":94,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202}],94:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],95:[function(e,t,n){function i(e,t,n){var i=t/e,r=Math.ceil(e/n)*n,o=Math.ceil(r*i);return{w:r,h:o}}e("./style.less");var r=e("vigour-js/app/ui/element"),o=e("vigour-js/app/"),a=(e("vigour-js/browser/animation/frame"),new r),s=e("vigour-js/browser/cases"),c=e("vigour-js/util/config"),l=s.retina?2:1;t.exports=n=new a.Class({opacity:{val:0},background:{data:"img",load:function(e){e&&(e.opacity=1)},transform:function(e,t){if(t){var n,r=Math.ceil((this.w||this.checkParent("w",!0)).val)||o.w.val,a=Math.ceil((this.h||this.checkParent("h",!0)).val)||o.h.val,s=e._parent.range;return s&&(n=i(r,a,s.val),r=n.w,a=n.h),c.img+"/image/"+t+"/"+r*l+"/"+a*l}}},slow:{opacity:1,"background.load":null},css:"ui-img"}).Class,n.density=l,n.Basic=new r({css:"ui-img",background:{data:"img",load:function(e){e&&(e.opacity=1)},transform:function(e,t){return t?c.img+"/image/"+t+"/"+this.w.val*l+"/"+this.h.val*l:void 0}},opacity:{val:0},slow:{opacity:1,"background.load":null}}).Class,n.Relative=new r({css:"ui-img",background:{data:"img",load:function(e){e&&(e.opacity=1)},transform:function(e,t){if(!t)return"";var n,r,o=this.node,a=o.offsetWidth,s=this,u=e._parent.range;return a?(n=o.offsetHeight,u&&(r=i(a,n,u.val),a=r.w,n=r.h),c.img+"/image/"+t+"/"+a*l+"/"+n*l):(s.rafId||(s.rafId=window.requestAnimationFrame(function(){s.rendered&&s.background.update(s)})),"")}},opacity:{val:0},slow:{opacity:1,"background.load":null}}).Class,n.Carousel=new n.Relative({background:{transform:function(e,t){if(!t)return"";var n,r,o=this.node,a=o.offsetHeight,s=this,u=e._parent.range;return a?(n=Math.ceil(Math.min(o.offsetWidth,a/9*16)),u&&(r=i(n,a,u.val),n=r.w,a=r.h),c.img+"/image/"+t+"/"+n*l+"/"+a*l):(s.rafId||(s.rafId=window.requestAnimationFrame(function(){s.rendered&&s.background.update(s)})),"")}}}).Class,n.Overlay=new n({background:{transform:function(e,t){if(!t)return"";var n=Math.ceil((this.w||this.checkParent("w",!0)).val)||o.w.val,i=Math.ceil((this.h||this.checkParent("h",!0)).val)||o.h.val;return c.img+"/image/"+t+"/"+n*l+"/"+i*l+"?effect=overlayBlur&overlay=overlay_lightest&radius=0&sigma=0"}}}).Class,n.Intro=new n({background:{transform:function(e,t){if(!t)return"";var n=this.node,i=n.offsetWidth,r=this;return i?c.img+"/image/"+i*l+"/"+n.offsetHeight*l+"?url=https://wwwmtvplay-a.akamaihd.net/img/intro/"+t:(r.rafId||(r.rafId=window.requestAnimationFrame(function(){r.rendered&&r.background.update(r)})),"")}}}).Class},{"./style.less":96,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/browser/animation/frame":198,"vigour-js/browser/cases":202,"vigour-js/util/config":306}],96:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],97:[function(e,t,n){e("./style.less");var i=e("vigour-js/app/ui/element"),r=e("../icon"),o=e("../img"),a=e("../text"),s=e("vigour-js/browser/cases"),c=(a.Input,e("../button").Switcher),l=a.Title,u=new a.TitleSubtitle({css:"ui-item-text"}).Class,p=e("vigour-js/app/");t.exports=n=new i({css:"ui-item"}).Class,n.Basic=new n({txt:new l}).Class,n.IconRight=new n.Basic({righticon:new r({icon:"arrowright"})}).Class,n.IconRightSub=new n.Basic({righticon:new r({icon:"arrowright"}),css:{addClass:"ui-item-sub"},txt:new u}).Class,n.IconLeft=new n({lefticon:new r({icon:{data:"icon"}}),txt:new l}).Class,n.Block=new n({left:{"title.text.dictionary":"text.all","subtitle.text.dictionary":"text.nav.shows"},center:{"title.text.dictionary":"text.all","subtitle.text.dictionary":"text.nav.channels"},right:{"title.text.dictionary":"text.every","subtitle.text.dictionary":"text.episode"},css:{addClass:"block"}}).Class,n.Menu=new n.IconLeft({h:55,css:{addClass:"ui-item-menu"},righticon:new r}).Class,n.Thumb=new n({thumb:{w:{val:100,phone:70},h:{val:71,phone:45},img:new o.Basic({w:{val:100,phone:70},h:{val:71,phone:45}})},txt:new u,righticon:new r({icon:"arrowright"})}).Class,n.Large=new i({css:"ui-item-large",display:"inline-block",thumb:new o({w:310,h:220}),info:{txt:new u,description:{text:{data:"description"}}}}).Class,n.Indicator=new n.Thumb({righticon:new r({on:{data:"id"},icon:{data:"access",transform:function(e,t){var n=p.util.access(t,this.data),i=n&&~n.indexOf("play")?s.desktop?"empty":"arrowright":n;return"lockedContent"===i?"lockedContentAlt":i},listen:[p.user.role,p.user.purchases]}})}).Class,n.Topbar=new n.Menu({position:"absolute",name:"topbar",h:44,css:{addClass:"ui-item-topbar"},y:{val:0,translate:!0},iosFull:{h:{add:20}},txt:{x:{translate:!0,val:1}}}).Class,n.TitleSubtitle=u,n.Switcher=new n.IconRightSub({righticon:new i({hold:new c})}).Class},{"../button":41,"../icon":93,"../img":95,"../text":159,"./style.less":98,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202}],98:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],99:[function(e,t,n){e("./style.less");var i=e("vigour-js/app/ui/sprite"),r=e("vigour-js/app/ui/element"),o=e("vigour-js/browser/cases");t.exports=n=new r({css:"ui-loader",append:new i({w:31,h:31,params:{cols:1,rows:19}})}).Class,n.Simple=new i({css:"ui-loader-simple","w,h":21,params:{cols:1,rows:19}}).Class,n.Logo=o.ios||o.desktop?new i({css:"loader logo",w:110,h:110,params:{cols:1,rows:26}}).Class:new r({css:"loader logo noanim",w:110,h:110}).Class},{"./style.less":100,"vigour-js/app/ui/element":176,"vigour-js/app/ui/sprite":177,"vigour-js/browser/cases":202}],100:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],101:[function(e,t,n){e("./style.less");var i=e("vigour-js/app"),r=e("vigour-js/app/ui/element"),o=e("../img"),a=e("../icon");t.exports=new r({name:"backdrop",css:"relative-size",img:new o.Relative({css:"relative-size",background:{data:"show.img",load:function(e){e.opacity=.3}}}),holder:{info:{title:{"text.dictionary":"text.sender.remotePlaybackTitle"},txt:{"text.dictionary":"text.sender.remotePlaybackSubtitle"}},pullback:new a({icon:"pullback",pulltext:{"text.dictionary":"text.pullBack"}})},events:{click:function(){i.user.receiver.media.$userOrigin=!1}}}).Class},{"../icon":93,"../img":95,"./style.less":111,"vigour-js/app":174,"vigour-js/app/ui/element":176}],102:[function(e,t,n){e("./style.less");{var i=e("vigour-js/app/ui/element"),r=(e("vigour-js/app/"),e("../seekbar")),o=e("vigour-js/browser/element/video/util");e("vigour-js/browser/cases")}t.exports=new i({css:"player-controls",container:{progress:{
text:{data:"mediausage.time",multiply:{data:"media.duration"},transform:function(e,t){return o.time(Math.abs(t))}}},seekbar:new r({w:{sub:200}}),duration:{text:{data:"media.duration",transform:function(e,t){return o.time(t)}}}}}).Class},{"../seekbar":109,"./style.less":103,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202,"vigour-js/browser/element/video/util":217}],103:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],104:[function(e,t,n){function i(e){var t=e.node||e;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():(t=e.video&&e.video.jqHandle.node)&&t.webkitEnterFullscreen()&&t.webkitEnterFullscreen()}function r(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}function o(){var e=m.user.navigation.media.from,t=m.user.receiver.media.from,n=y.$hasReceiver.val&&t._cachedPath===e._cachedPath;return n}function a(){{var e=this._parent._caller,t=e.parent,n=e.video;n&&n.data}if(t)if(y.$isReceiver.val){if(e.__ready&&!o)return!0}else{if(e._cachedW=null,o())return e._fullscreen?e.x=m.w:e.y={multiply:-1},E(function(){o()&&(m.playing.from.val=!1)}),t.backdrop.empty&&t.set({backdrop:new x({data:e.video.data})}),!0;e.y.multiply.val&&(e.x=0,e.y={multiply:0})}}function s(e){var t=this._parent._caller,n=t.video,i=n&&n.data,r=i&&i.mediausage&&i.mediausage.from,o=n&&n.time.from.val,s=a.call(this);!y.$isOnChannel.val&&s&&r&&(o||0===o)&&r.set("time",Math.abs(o)),e()}function c(e){if(!y.tv&&!y.$isReceiver.val){var t=this._parent._caller;t.y._p=!0,a.call(this),t.y._p=null}e()}function l(e){var t=this._parent,n=t._caller;m.playing.from.val=y.tv||!y.$isActive.val&&y.$isReceiver.val?!0:!1,t.msmedia.val={val:m.user.receiver.media,listen:[y.$hasReceiver]},t.media.val=m.user.navigation.media,t.fullscreen.val=y.$isFullscreen,E(function(){n.video&&(n.__ready=!0,n.video.$play=m.playing,n.overlay.on.volume.val=m.volume)}),window.player=n,y.desktop?m.addEvent("keydown",function(e){if(!(m.popup.val||!y.$isReceiver.val&&o())){var t=!0;32===e.keyCode||13===e.keyCode?n.togglePlay():37===e.keyCode?n.seekBackward():39===e.keyCode?n.seekForward():38===e.keyCode?n.volumeUp():40===e.keyCode?n.volumeDown():70===e.keyCode?n.goFullscreen():t=!1,t&&e.preventDefault()}},S):y.tv&&n.$focus(),e()}function u(e){m.playing.from.val=!1,m.removeEvent(!1,S),e()}function p(e){var t=this.from.val,n=this._parent._caller,o=_.prefix+"fullscreenchange";t?(window.statusBar?window.statusBar.hide():y.desktop?i(n):y.phone&&i(n),n._exitFullscreen=function(e){var t=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;t||(m.state.val="first")},document.body.addEventListener(o,n._exitFullscreen)):(window.statusBar&&window.statusBar.show(),y.desktop&&r(),document.body.removeEventListener(o,n._exitFullscreen)),E.repeat(function(){n.background&&n.background._update()},2),e()}function f(){var e=this.data&&this.data.mediausage;e&&e.time&&!y.$isOnChannel.val&&(e.time.from.val=Math.max(0,Math.abs(e.time.from.val)-.01))}function d(){var e=this.data&&this.data.mediausage;e&&e.time&&!y.$isOnChannel.val&&(e.time.from.val=Math.min(1,Math.abs(e.time.from.val)+.01))}function h(){m.playing.from.val=!m.playing.val}function v(){m.volume.val<=.9&&(m.volume.from.val+=.1)}function g(){m.volume.val>=.1&&(m.volume.from.val-=.1)}e("./style.less");var m=e("vigour-js/app/"),y=e("vigour-js/browser/cases"),_=e("vigour-js/browser/ua"),b=e("vigour-js/app/ui/element"),w=e("./video"),k=e("./overlay"),x=e("./backdrop"),j=e("vigour-js/util/config"),C=y.retina?2:1,S="keyUpID",E=e("vigour-js/browser/animation/raf");document.cookie="_L1Nl9uK_DJGt_RDAVBq_=_L1Nl9uK_DJGt_RDAVBq_; domain=.mtvplay.tv",t.exports=n=new b({on:{fullscreen:{defer:p},msmedia:{defer:s},media:{defer:c},$render:{defer:l},$remove:{defer:u}},tv:{css:"base-player fullscreen-player",events:{back:function(){m.state.val="first"},click:h,arrowLeft:f,arrowRight:d,$focus:function(e){}}},chromecast:{css:"base-player fullscreen-player"},x:{val:0,animation:{time:24,easing:"outCubic",done:function(e){e&&(this.y._p=!0,this.y={multiply:-1},this.y._p=null,this.x._p=!0,this.x=0,this.x._p=null,O.exit.call(this))}}},y:{translate:!0,val:m.w,defer:function(e,t){var n=this;return this._caller.rendered?void(t[2]===!1?E(function(){n._p=!0,e(),n._p=null}):e()):(e(!0),!0)},transform:function(e,t){this._cachedW!==t&&(this._cachedW=t,this._cachedY=this.node.offsetHeight);var n=this._cachedY||(this._cachedY=this.node.offsetHeight);return n?n:void 0},multiply:{val:0,animation:{time:24,easing:"outCubic"}}},video:new w,overlay:new k,adMessage:{text:"Advertisement",display:{val:"none",$isPlayingAd:"block"}},background:{data:"media.img",$bubble:{self:!0},transform:function(e,t){if(!t)return"";var n=this.node,i=n.offsetWidth,r=this;return i?j.img+"/image/"+t+"/"+i*C+"/"+n.offsetHeight*C:(r.rafId||(r.rafId=E(function(){r.rendered&&r.background.update(r)})),"")}}}).Class;var O=y.phone?e("./phone-fullscreen"):function(){if(y.$isFullscreen.val){var e,t=m.user,n=y.$isReceiver.val,i=this.checkParent("data.media",!0);n?(i&&("episodes"===i._parent._name&&(e=i._parent._parent,t.navigation.season.$userOrigin.val=e,t.navigation.show.$userOrigin.val=e._parent._parent),t.navigation.media.$userOrigin=i.from),t.activeClient.$userOrigin=t.cloud.client.from,t.receiver.media.$userOrigin=!1):m.state.val="first"}else m.state.val="player"};n.base.define({seekBackward:f,seekForward:d,togglePlay:h,volumeUp:v,volumeDown:g,goFullscreen:O}),n.Holder=new b({css:"player-holder",backdrop:{empty:!0},player:new n({css:{val:"base-player windowed-player",$isFullscreen:!y.phone&&"base-player fullscreen-player"}})}).Class},{"./backdrop":101,"./overlay":105,"./phone-fullscreen":107,"./style.less":111,"./video":112,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/browser/animation/raf":200,"vigour-js/browser/cases":202,"vigour-js/browser/ua":233,"vigour-js/util/config":306}],105:[function(e,t,n){function i(e){var t=this.checkParent("_d",!0);e.prevent=!0,r.user.receiver.media.$userOrigin.val=t.media.from}var r=e("vigour-js/app/"),o=e("vigour-js/browser/cases"),a=e("vigour-js/app/ui/element"),s=e("../controls"),c=e("../../icon"),l=e("../../img"),u=e("./play"),p=e("../volume"),f=new a({on:{data:"media.id"},buttons:{play:new u({display:!o.phone&&{data:"media.access",transform:function(e,t){var n=r.util.access(t,this.data&&this.data.media);return n&&~n.indexOf("play")?"none":"inline-block"}}}),swipe:new c({icon:"swipeup",display:{data:"media.access",transform:function(e){var t=this.data&&this.data.media,n=t&&!(t._parent&&"channels"===t._parent._name&&3===r.user.role.val)&&(o.$isUpgraded.val||t.access&&!t.access.val||t.val&&t.val.access&&!t.val.access.val),i=o.$hasReceiver.val&&n;return i?"inline-block":"none"},listen:[o.$hasReceiver,r.user.role,r.user.purchases]},events:{click:i}})},events:{click:o.phone?function(){var e=this.parent.opacity;e.val=e.val?0:1}:function(){r.playing.from.val=!r.playing.val}}}).Class,d=(new a).Class;d.base.extend({pointerEvents:function(e){this.node.style.pointerEvents=e.val}}),t.exports=new d({on:{$remove:{defer:function(e){var t=this._parent._caller;t._timer&&clearTimeout(t._timer),e()}},volume:{defer:function(e){var t=this._parent._caller;t.opacity.val=1,e()}}},opacity:{val:1,defer:function(e,t){var n=this._caller;return this._block?!0:(1===this._val&&(n._timer&&clearTimeout(n._timer),n._timer=setTimeout(function(){r.playing.val&&(n.opacity.val=0),n._timer=null},2500)),void e())},listen:r.playing},infoholder:{display:{val:"table",$isPlayingAd:"none",$isOnChannel:"none"},"!phone.thumb":new l({h:{val:50,$isFullscreen:110},w:{self:"h",defer:function(e){this._caller.background._update(),e()}},background:{data:"show.img"}}),titles:{showtitle:{text:{data:"media.title"}},showsubtitle:{text:{val:{dictionary:"text.season",transform:function(e,t){return t&&t[0]},add:{data:"season.number",transform:function(e,t){var n=this.data&&this.data.media.from._parent._parent.number,i=n&&n.val;return i&&(t=i),(t>9?t:"0"+t)+" "}}},add:[{val:{dictionary:"text.episode",transform:function(e,t){return t&&t[0]}}},{data:"media.number",transform:function(e,t){return t>9?t:"0"+t}}]}}}},clickable:new f,"!phoneBrowser.controls":{on:{data:"media.id"},left:new u,display:{data:"media.access",transform:function(e,t){return"lockedContent"===r.util.access(t,this.data&&this.data.media)?"none":"table"},listen:[r.user.role,r.user.purchases]},center:new s({container:{display:{val:"block",$isOnChannel:"none",$isPlayingAd:"none"},seekbar:{bg:{seekLoader:{opacity:{val:0,$isLoadingVideo:1}}}}},adMessage:{text:"Your video will play after this ad.",display:{val:"none",$isPlayingAd:"block"}}}),"!tv.right":{volume:{holder:new p({bars:{data:"volume"}})},fullscreen:new c({icon:{val:"fullscreen",$isFullscreen:"exitfullscreen"},events:{click:function(){var e=this.checkParent("player",!0);e&&e.goFullscreen()}}})}},events:{down:function(e){var t=this.opacity;o.$isFullscreen.val&&!t.val&&(e.prevent=!0,t.val=1)}},desktop:{pointerEvents:{val:"auto",$isPlayingAd:"none"},events:{move:function(){var e=this.opacity;e.val||(e.val=1,e._block=!0,setTimeout(function(){e._block=null},1e3))}}}}).Class},{"../../icon":93,"../../img":95,"../controls":102,"../volume":113,"./play":106,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202}],106:[function(e,t,n){var i=e("../../icon"),r=e("vigour-js/browser/cases"),o=e("vigour-js/app/");t.exports=n=new i({on:{data:"media.id"},icon:{val:{data:"media.access",transform:function(e,t){var n=o.util.access(t,this.data&&this.data.media);return n}},$playing:r.phone?"pause":"pauseAlt",transform:function(e,t){return this._loading||(this.rotate=0),this._loading?"loader2":t},listen:[o.user.role,o.user.purchases]},rotate:{val:0,animation:{complete:function(){var e=this.rotate;e._p=!0,e=0,e._p=!1,this._loading=!1,this.icon.update(this)}}},events:{click:function(e){e.prevent=!0,o.playing.from.val=!o.playing.val}}}).Class,n.base.define({load:function(){this._loading=!0,this.icon.update(this),this.rotate=this.rotate.val+360}})},{"../../icon":93,"vigour-js/app/":174,"vigour-js/browser/cases":202}],107:[function(e,t,n){function i(e){var t=this.checkParent("media",!0),o=t.player.player,a=this.checkParent("topbar",!0),s=o.overlay.controls,c=s.right.fullscreen,l=s.center.container.seekbar,u=(this.checkParent("miniplayer",!0),o.node.style);window.StatusBar&&(e?window.StatusBar.show():window.StatusBar.hide(),void 0===o._fullscreen&&o.setSetting({name:"StatusBar",remove:function(){window.StatusBar.show(),this._listener&&r.h.removeListener(this._listener)}}));var p=a.node.offsetHeight;o.set({rotate:e?0:90,x:0}),o.overlay.node.style.zIndex=e?null:"1",u.zIndex=e?null:"1",u.margin=e?"0":"-"+p+"px "+r.w.val+"px",u.width=e?null:r.h.val+"px",u.height=e?null:r.w.val+"px",t.node.style.overflow=e?null:"visible",o._listener&&r.h.removeListener(o._listener),e||(o._listener=function(){u.width=r.h.val+"px"},r.h.on(o._listener)),c.set({icon:e?"fullscreen":"exitfullscreen",events:{click:e?n:function(){i.call(this,!0)}}}),l._left=e?!1:!0,o._fullscreen=e?!1:!0}{var r=e("vigour-js/app/");e("vigour-js/browser/cases")}t.exports=n=function(){i.call(this)},n.exit=function(){i.call(this,!0)}},{"vigour-js/app/":174,"vigour-js/browser/cases":202}],108:[function(e,t,n){function i(e,t){this._correctTime=e,!this.channel&&this._ready&&this._time!==e&&(!this.jqHandle||this.__paused&&!t?this.tset=!0:(this.tset=null,this.out=null,this.cnt=null,this.jqHandle.setCurrentTime(Math.abs(Math.round(e))),this._time=e))}function r(e,t){if("undefined"==typeof VIACOM)return c.api.player.once("success",function(){n.settings=c.api.player.settings,e.rendered&&r(e,t)}),void(c.api.player.val=!0);e.addEvent("down",function(e){l.$isPlayingAd.val||e.preventDefault()}),e.data&&e.data.media&&e.data.media.from.videolang&&(n.settings.localization.language=e.data.media.from.videolang.val),n.settings.ads.enabled=l.$isUpgraded.val?!1:e.data&&e.data.mediausage&&e.data.mediausage.time&&Math.abs(0|e.data.mediausage.time.val)>.01?!1:!0,l.tv?(n.settings.force="html5",n.settings.html5smartTVMode="Samsung"):l.chromecast&&(n.settings.force="html5",n.settings.html5smartTVMode="Chromecast",n.settings.ads.enabled=!1),e.jqHandle=new VIACOM.Mediaplayer(".video",n.settings,{controls:!1,"webkit-playsinline":!0},c.api.player.debug),e.jqHandle.addEventListener("error",function(e){console.error(e)}),e.jqHandle.addEventListener("play",function(e){}),e.jqHandle.addEventListener("ended",function(e){c.playing.from.val=!1}),e.jqHandle.addEventListener("timeupdate",function(e){}),e.jqHandle.addEventListener("ads:rollPlaying",function(e){l.$isPlayingAd.val=!0}),e.jqHandle.addEventListener("ads:rollEnded",function(e){l.$isPlayingAd.val=!1});var i=e.jqHandle.proxy.player&&e.jqHandle.proxy.player.video;i&&(i.setAttribute("webkit-playsinline",'"true"'),i.removeAttribute("controls"),s&&i.addEventListener("webkitendfullscreen",function(){window.requestAnimationFrame(function(){document.body.scrollTop=0}),e.pause()},!1),e.video=i,e.setEvents()),n.protoNew.call(e),t()}function o(e,t){e._correctTime=Math.abs(e.time.val)*e.duration.val,t&&"string"==typeof t&&(type=e.data.media&&~e.data.media.from._path.indexOf("channels")?"simulcast_stream":"riptide_video",e._correctTime=void 0,e.jqHandle.load(type,t,{startTime:Math.abs(e.time.val)*e.duration.val||(l.$isUpgraded.val?1e-26:void 0),simulcastApiKey:n.settings.simulcastApiKey},function(t){e._ready=!0,c.playing.from.val=!0,void 0!==e._correctTime&&i.call(e,Math.abs(e._correctTime),!0)}))}var a=e("vigour-js/browser/ua"),s=("windows"===a.platform&&"phone"===a.device,"ios"===a.platform),c=("android"===a.platform,e("vigour-js/app/")),l=e("vigour-js/browser/cases");t.exports=n=e("vigour-js/browser/element/video/html5"),n.settings=c.api.player.settings,n.protoNew=n["new"],n["new"]=function(){},n.setEvents=!1,n.play=function(e){var t,n=this;e?(n.jqHandle&&n.__src?n.jqHandle&&(n.tset&&i.call(n,Math.abs(n.time.val)*n.duration.val,!0),n.jqHandle.play()):(t=n.src.val,n.__src=t,n.jqHandle?o(n,t):r(n,function(){o(n,t)})),n.tset=null):n.jqHandle&&n.jqHandle.pause()},n.volume=function(e){var t=e.val;this.jqHandle&&!isNaN(t)&&this.jqHandle.setVolume(t)},n.time={set:i,get:function(e){var t=this.jqHandle&&this.jqHandle.getCurrentTime();return t/this.duration.val||e.val}},n.remove=function(e){this.jqHandle&&this.jqHandle.destroy(),this.jqHandle=null,this.video=null},n.src=function(e){src=e.val,this.__src!==src&&(this.__src=null,this.jqHandle&&(this.jqHandle.destroy(),this.jqHandle=null,this._ready=null))}},{"vigour-js/app/":174,"vigour-js/browser/cases":202,"vigour-js/browser/element/video/html5":215,"vigour-js/browser/ua":233}],109:[function(e,t,n){function i(e){if(!a.$isPlayingAd.val){var t,n,i=this.node.getBoundingClientRect();this._left?(t=i.top,n=(e.y-t)/i.height):this._right?(t=i.top,n=(i.height-(e.y-t))/i.height):(t=i.left,n=(e.x-t)/(i.right-t));var r=n>1?1:0>n?0:n;r!==this._prevVal&&(this.seek.data.mediausage.$userOrigin.set("time",r),this._prevVal=r)}}e("./style.less");var r=e("vigour-js/app/ui/element"),o=(e("vigour-js/app/"),e("vigour-js/browser/ua")),a=e("vigour-js/browser/cases"),s=(e("vigour-js/browser/element/video/util"),e("../../icon"),"ios"===o.platform||"android"===o.platform,new r({css:"ui-seekbar",bg:{},seek:{w:{data:"mediausage.time",transform:function(e,t){return t?100*Math.abs(t)+"%":void 0}}},"!tv.button":{display:{val:"inline-block",$isPlayingAd:"none",$isReceiver:"none"}},events:{down:a.touch?function(e){var t=this.parent.parent.parent.opacity;t&&1!==t.val?this._skipUp=!0:i.call(this,e)}:i,drag:i,up:a.touch?function(e){this.parent.parent.parent.opacity;this._skipUp?this._skipUp=null:i.call(this,e)}:i}}));t.exports=n=s.Class},{"../../icon":93,"./style.less":110,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202,"vigour-js/browser/element/video/util":217,"vigour-js/browser/ua":233}],110:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],111:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],112:[function(e,t,n){function i(){return this._overlay||(this._overlay=this.parent&&this.parent.overlay)}var r=e("vigour-js/app/"),o=e("vigour-js/browser/cases"),a=e("vigour-js/browser/element/video"),s=e("../players/html5"),c=e("vigour-js/browser/events/util").postpone,l=c(function(e){r.playing.val&&e.play(!0)},501);t.exports=new a({node:"div",player:s,src:{data:"media.video"},duration:{data:"media.duration"},css:"video-container",time:{data:"mediausage.time",defer:function(e,t){return o.$isOnChannel.val||o.$isPlayingAd.val?!0:void e()}},volume:{data:"volume"},$play:{defer:function(e){var t=this._caller;return"second"===r.state.val?!0:void(o.desktop?window.requestAnimationFrame(function(){t.rendered?e():e(!0)}):e())}},model:{subscription:{videolang:!0,access:!0,video:!0,mrss:!0}},events:{src:function(e){if(o.$isPlayingAd.val=!1,e.val&&(o.tv||o.$isReceiver.val)&&this.rendered){var t=this.data&&this.data.mediausage;r.playing.from.val=!0,t&&!o.$isOnChannel.val&&t.from.set("time",Math.abs(this.time.from.val)),this.play()}else r.playing.from.val=!1},progress:function(e,t){var n=-Math.abs(e),i=this.data&&this.data.mediausage;o.$isPlayingAd.val||o.$isOnChannel.val||i&&(r&&r.mediaTime&&(r.mediaTime.val=n),i.from.set("time",n))},play:function(){var e=i.call(this);e&&(e.opacity=this.playing?0:1)},stalled:function(){var e=i.call(this);e&&!o.chromecast&&(e.opacity=1),o.$isLoadingVideo.val=!0},seeking:function(e){if(!this._notRendered&&this.rendered){var t=i.call(this);t&&(t.opacity=1),r.playing.val&&(this.__paused||this.pause(!0),l(this)),o.$isLoadingVideo.val=!0}else this._notRendered=!0},canplay:function(){}}}).Class},{"../players/html5":108,"vigour-js/app/":174,"vigour-js/browser/cases":202,"vigour-js/browser/element/video":216,"vigour-js/browser/events/util":222}],113:[function(e,t,n){function i(e){var t=this.node.getBoundingClientRect(),n=t.left,i=(e.x-n)/this.w.val;this.data.volume.from=i>1?1:0>i?0:i}e("./style.less");var r=e("vigour-js/app/ui/element"),o=new r({css:"player-volume",w:50,events:{down:i,drag:i,up:i}});o.extend({bars:function(e){var e=e.val,t=this.children,n=33,i=n*(isNaN(e)?1:e)+5;for(var r in t)i-=n/5,t[r].nested.x=-3+Math.min(i,3)}});for(var a=5;a--;)o.add(new r({nested:{}}));t.exports=o.Class},{"./style.less":114,"vigour-js/app/ui/element":176}],114:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],115:[function(e,t,n){var i=(e("vigour-js/app/ui/element"),e("vigour-js/util"),e("../icon"),e("../item"),e("vigour-js/browser/cases"),e("../img")),r=e("./page");t.exports=n=new r({css:"popup-article",img:new i.Relative({h:190,display:{data:"img",transform:function(e,t){return t?"block":"none"}}}),title:{text:{data:"title"}},body:{text:{data:"text"}}}).Class},{"../icon":93,"../img":95,"../item":97,"./page":125,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202,"vigour-js/util":315}],116:[function(e,t,n){function i(){p.dropdown._remove=!0,p.dropdown.y={sub:0},p.dropdownBackdrop.remove()}var r=e("vigour-js/app/ui/element"),o=(e("vigour-js/util"),e("../icon")),a=e("vigour-js/browser/cases"),s=e("../button"),c=e("../text/input"),l=e("../item"),u=e("./page"),p=e("vigour-js/app/"),f=new r({"events.click":function(){{var e=this.checkParent("on.popup",!0).from;p.user}e.previous=e.val,e.data=p.content.get([this._name,"list","0"]),e.val="article"},css:"term"}).Class;n.FbButton=new s({"events.click":function(){var e=this.checkParent("api",!0);e.facebook.login.val=!0}}).Class,n.GetApp=new u({css:"getapp",on:{$parent:{defer:function(e){var t=this._parent._caller.checkParent("topbar",!0);t&&(t.empty(),t.node.style.backgroundColor="#3a1a58"),e()}}},info:{title:{"text.dictionary":"text.register.redirectTitle"},subtitle:{"text.dictionary":"text.register.redirectSubtitle"},freepass:{}},"ios.teleport":new s({text:{dictionary:"text.register.redirectTeleport"},"events.click":function(){window.location.href="fb709421825777638://"}})}).Class;var d=new r({top:{text:{dictionary:"text.signInTOS"}},items:{privacy:new f({text:{dictionary:"text.privacy"}}),terms:new f({text:{dictionary:"text.terms"}})}}).Class;n.Login=new u({css:"login",logo:{},"!windowsMobile.facebook":new n.FbButton({"text.dictionary":"text.account.signin.facebook"}),email:new s({text:{dictionary:"text.account.signin.email"},"events.click":function(){var e=this.checkParent("on.popup",!0).from;e.val="loginEmail"}}),conditions:new d({css:"alignedTop"})}).Class,n.Login.Email=new c.Form({css:"login",scrollbar:"y",x:{translate:!0},email:new c({input:"email"}),password:new c({input:"password"}),"desktop.confirm":new s({text:{dictionary:"text.account.signin.title"},"events.confirm":function(){var e=this.parent;e.done.call(e)}}),conditions:new d,verify:["email","password"],bottom:{"text.dictionary":"text.account.forgot.title","events.click":function(){var e=this.checkParent("api",!0);e.password.forgot.val=this.parent.email.val}},define:{done:function(){if(this.verified){var e=this.checkParent("api",!0);e.login.val={email:this.email.val,password:this.password.val}}else p.notification.val="invalid"}}}).Class;var h=new d({top:{text:{dictionary:"text.termsOfService"}}}).Class;n.Register=new u({css:"register",logo:{},"!windowsMobile.facebook":new n.FbButton({"text.dictionary":"text.account.signup.facebook"}),email:new s({text:{dictionary:"text.account.signup.email"},"events.click":function(){var e=this.checkParent("on.popup",!0).from;e.val="registerEmail"}}),conditions:new h({css:"alignedTop"})}).Class,n.Register.Email=new c.Form({css:"register",scrollbar:"y",x:{translate:!0},email:new c({input:"email"}),password:new c({input:"password"}),repeatPassword:new c({input:{val:"password",text:"text.repeatPassword"}}),verify:["email","password","repeatPassword"],"desktop.confirm":new s({text:{dictionary:"text.next"},"events.confirm":function(){var e=this.parent;e.done.call(e)}}),conditions:new h,define:{done:function(){if(this.verified)if(this.password.val===this.repeatPassword.val){var e=this.checkParent("on.popup",!0).from;e.data={email:this.email.val,password:this.password.val},e.val="registerNewsletter"}else p.notification.val="noMatchPassword";else p.notification.type=this.verificationError&&this.verificationError.val,p.notification.val="invalid"}}}).Class;var v,g=new l.Switcher({txt:{"title.text.dictionary":"text.newsletterTitle","subtitle.text.dictionary":"text.newsletterSubtitle"},"events.click":function(){this.parent.data||(this.parent.data={});var e=this.parent.data;e.newsletter=!this.righticon.hold.switchOn.val,this.righticon.hold.switchOn=e.newsletter},add:[new o({name:"lefticon",icon:"newsletter"}),"txt"]}).Class;if(a.phone&&a["native"]){var m=new r({css:"auth-dropdown",position:"absolute",y:{animation:{time:18,easing:"outCubic",done:function(){this._remove&&this.remove()}}},model:{complete:function(){var e=this;window.requestAnimationFrame(function(){e.y={sub:e.node.offsetHeight}})}}}).Class;v=new l.IconLeft({lefticon:{icon:"newsletter"},txt:{css:{data:"value",transform:function(e,t){return"txt"===t.trim()?"inactive":" "}},text:{dictionary:{data:"dictionary"}},model:{inherit:!1}},model:function(e){e instanceof Array&&(this.txt.data=e[0])},"events.click":function(){if(!p.dropdown){var e=this.parent,t=this._name,n=this.data;this._dData||(this._dData=n.splice(1)),p.set({dropdownBackdrop:{css:"relative-size","events.click":i},dropdown:new m({y:p.h,collection:{data:!0,element:new r({text:{dictionary:{data:"dictionary"}},"events.click":function(){e.data||(e.data={}),e.data[t]=this.data.value,e[t].txt.data=this.data,i()}})},data:this._dData})})}}}).Class}else v=new l({select:{node:"select",collection:{data:!0,element:new r({node:"option",attr:{value:{data:"value"}},text:{dictionary:{data:"dictionary"}}})}},"events.change":function(e){this.parent.data||(this.parent.data={}),this.parent.data[this._name]=e.target.value},add:[new o({name:"lefticon",icon:"newsletter"}),"select"]}).Class;n.Register.Newsletter=new c.Form({css:"register newsletter",scrollbar:"y",x:{translate:!0},age:new v({"on.$render.defer":function(e){this._parent._caller.data=[{value:"",dictionary:"text.age"},{dictionary:"options.age.0.text",value:"1"},{dictionary:"options.age.1.text",value:"2"},{dictionary:"options.age.2.text",value:"3"}],e()},lefticon:{icon:"age"}}),gender:new v({"on.$render.defer":function(e){this._parent._caller.data=[{value:"",dictionary:"text.gender"},{value:"male",dictionary:"options.gender.0.text"},{value:"female",dictionary:"options.gender.1.text"},{value:"other",dictionary:"options.gender.2.text"}],e()},lefticon:{icon:"gender"}}),newsletter:new g,"desktop.confirm":new s({text:{dictionary:"text.account.signup.title"},"events.confirm":function(){var e=this.parent;e.done.call(e)}}),conditions:new h,define:{done:function(){var e=this.checkParent("api",!0);this.data||(this.data={}),e.register.val=this.data}}}).Class,n.Register.Success=new u({css:"register",text:{dictionary:"fill in stuff"},email:new s({text:{dictionary:"email is verified"},"events.click":function(){var e=this.checkParent("api",!0),t=this.checkParent("on.popup",!0).from;e.login.val={email:e.register.email.val,password:e.register.password.val},e.login.once(function(e){"success"===e&&(t.val="profile")})}})}).Class,n.PasswordReset=new c.Form({css:"register",scrollbar:"y",x:{translate:!0},password:new c({input:"password"}),repeatPassword:new c({input:{val:"password",text:"text.repeatPassword"}}),"desktop.confirm":new s({text:{dictionary:"text.account.passwordReset"},"events.confirm":function(){var e=this.parent;e.done.call(e)}}),define:{done:function(){if(this.password.val===this.repeatPassword.val){var e=this.checkParent("api",!0);e.password.reset.val={password:this.password.val}}else p.notification.val="noMatchPassword"}}}).Class},{"../button":41,"../icon":93,"../item":97,"../text/input":160,"./page":125,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202,"vigour-js/util":315}],117:[function(e,t,n){var i=e("vigour-js/app/ui/element"),r=e("vigour-js/app"),o=e("../button");t.exports=n=new i({css:"upgrade",block:{img:{}},"bottom.text.dictionary":"text.legalContainer","continue":new o({"text.dictionary":"text.continue"})}).Class,n.Monthly=new n({block:{"title.text.dictionary":"text.purchase.monthlyPass.title","txt.text.dictionary":"text.purchase.monthlyPass.body"},"continue.events.click":function(){var e=this.checkParent("api",!0);e.purchase.val={subscription:"monthly"}}}).Class,n.Single=new n({block:{"title.text.dictionary":"text.purchase.singlePass.title","txt.text":{dictionary:"text.purchase.singlePass.body",add:[" ",r.api.price.single]}},"continue.events.click":function(){var e=this.checkParent("api",!0);e.purchase.val={product:r.user.navigation.media.from}}}).Class,n.Yearly=new n({block:{"title.text.dictionary":"text.purchase.yearlyPass.title","txt.text.dictionary":"text.purchase.yearlyPass.body"},"continue.events.click":function(){var e=this.checkParent("api",!0);e.purchase.val={subscription:"yearly"}}}).Class},{"../button":41,"vigour-js/app":174,"vigour-js/app/ui/element":176}],118:[function(e,t,n){{var i=(e("vigour-js/app/ui/element"),e("vigour-js/util"),e("../icon")),r=e("../item"),o=e("vigour-js/browser/cases"),a=e("../button"),s=(e("vigour-js/util/config"),e("vigour-js/browser/ua")),c=e("vigour-js/browser/animation/raf"),l=e("./page");e("vigour-js/app/")}t.exports=n=new l({css:"devices",myDevice:{icon:new i({icon:s.device}),dInfo:{dTitle:{"text.dictionary":"text.thisDevice"},dSubtitle:{text:o.touch?s.device+" "+("ios"===s.platform?"iOS":s.platform)+(s.version?" "+s.version:""):s.platform+" "+s.browser+" "+s.version}}},middle:{display:{val:"block",$hasDevices:"none"},icon:new i({icon:"monster"})},listTitle:{"text.dictionary":"text.available",display:{val:"none",$hasDevices:"block"}},list:{display:{val:"none",$hasDevices:"block"},collection:{element:new r.IconLeft({model:function(e){e&&e.from&&e.from.device&&!/(desktop)|(tv)|(cast)|(tablet)|(airplay)/.test(e.from.device.val)&&(this.opacity=.5)},events:{click:function(){var e=this.checkParent("on.user",!0)._val,t=this.data.from;/(desktop)|(tv)|(cast)|(tablet)|(airplay)/.test(t.device.val)&&e.setReceiver(t)}},display:{data:"title",transform:function(e,t){return t?"table":"none"}},lefticon:{icon:{data:{val:function(e){var t=e&&e.from&&e.from.device&&e.from.device.val;return"chromecast"===t?"cast":t},listen:"device"}}}}),data:!0}},info:{display:{val:"block",$hasDevices:"none"},"title.text.dictionary":"text.watchBigger","description.text.dictionary":"text.watchBig"},learn:new a({display:{val:"block",$hasDevices:"none"},"text.dictionary":"text.learnMore","events.click":function(){var e=this.checkParent("on.popup",!0).from;e.previous="devices",e.val="faq"}}),on:{$render:{defer:function(){var e=this._parent._caller;e.on.devices._val._update()}},devices:{defer:function(e){var t=this._parent._caller;t.on.receiver._update(),t.data=this.from,e()}},receiver:{defer:function(e){var t=this;c(function(){if(t._parent){var n=t._parent._caller,i=n.checkParent("on.user",!0)._val.receiverClient,r=n.list.find("_d.from",i.from);r?(t.focus&&t.focus._node&&(t.focus.css={removeClass:"current"}),t.focus=r,r.css={addClass:"current"}):t.focus&&t.focus&&t.focus._node&&(t.focus.css={removeClass:"current"},t.focus=null)}e()})}}}}).Class},{"../button":41,"../icon":93,"../item":97,"./page":125,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/browser/animation/raf":200,"vigour-js/browser/cases":202,"vigour-js/browser/ua":233,"vigour-js/util":315,"vigour-js/util/config":306}],119:[function(e,t,n){var i=(e("vigour-js/app/ui/element"),e("../icon"),e("../item")),r=e("./page"),o=e("vigour-js/app/");t.exports=new r({css:"faq",scrollbar:"y",on:{$parent:{defer:function(e){this._parent._caller.data=o.content.from.get("faq.list"),e()}}},collection:{data:!0,element:new i.IconRight({"events.click":function(){popup=this.checkParent("on.popup",!0).from,popup.previous="faq",popup.data=this.data,popup.val="article"}})}}).Class},{"../icon":93,"../item":97,"./page":125,"vigour-js/app/":174,"vigour-js/app/ui/element":176}],120:[function(e,t,n){e("./style.less");var i=e("vigour-js/app/ui/element"),r=e("vigour-js/util"),o=e("vigour-js/app/"),a=e("../icon"),s=e("vigour-js/browser/cases"),c=e("vigour-js/app/ui/switcher"),l=e("./auth"),u=e("./settings"),p=e("./profile"),f=e("./share"),d=e("./devices"),h=e("./roadblock"),v=e("./article"),g=e("./languages"),m=e("./faq"),y=e("./wifi"),_=e("./newsletter"),b=e("./mobile"),w=e("./intro"),k=e("./upgrade"),x=e("./buy"),j=(e("./page"),l.GetApp),C=s.phone?o.w.val:400;n=new i({css:"popup-window",on:{$new:{defer:function(e){var t=this._parent._caller;"languages"===o.popup.val&&(t.y._p=!0),window.requestAnimationFrame(function(){t.y&&(t.y._p=!1)}),e()}},loading:{defer:function(e,t){return this._parent._caller?(this._parent._caller.overlay.display=!t[0]||t[0]!==!0&&"string"!=typeof t[0]?"none":"block",void e()):!0}},popup:{defer:function(e){var t,n=this.from.val,i=this._parent,a=i._caller,c=i.overlay._val,C=i.user._val,S=C.receiverClient,E={verifyMobile:{dictionary:"text.mtvMobile",element:b.Verify},countryCodes:{dictionary:"text.chooseTelCode",element:b.CountryCodes,previous:"verifyMobile"},share:{dictionary:"text.share",element:f},wifi:{dictionary:"settings.connectivity",element:y,previous:"settings"},newsletter:{dictionary:"text.newsletterTitle",element:_,previous:"settings"},roadblock:{dictionary:"text.oops",element:h},roadblockUpgrade:{dictionary:"text.buyPremium",element:h},roadblockMedia:{dictionary:"text.lockedEpisode",element:h.Media},article:{title:"faq"!==this.val,element:v,dictionary:"settings.help"},getApp:{
dictionary:"text.getapp",element:j},devices:{dictionary:"text.devices",element:d,params:{on:{receiver:S,devices:C.devices}}},loginEmail:{dictionary:"text.account.signin.title",element:l.Login.Email,previous:"login",righticon:{icon:{icon:"empty"},text:{dictionary:"text.done"}}},passwordReset:{dictionary:"text.account.passwordReset",element:l.PasswordReset},login:{dictionary:"text.account.signin.title",element:l.Login},registerEmail:{dictionary:"text.account.signup.title",element:l.Register.Email,previous:"register",righticon:{icon:{icon:"empty"},text:{dictionary:"text.next"}}},registerSuccess:{dictionary:"text.account.signup.success",element:l.Register.Success},registerNewsletter:{dictionary:"text.account.signup.title",element:l.Register.Newsletter,previous:"registerEmail",righticon:{icon:{icon:"empty"},text:{dictionary:"text.done"}}},register:{dictionary:"text.account.signup.title",element:l.Register},upgrade:{dictionary:"text.upgrade",element:k},settings:{dictionary:"text.nav.settings",element:u},profile:{dictionary:"text.profile",element:p,params:{data:{email:C.email,pic:C.profilePic}}},languages:{dictionary:"text.settings.languages.title",element:g,previous:"settings",params:{on:{language:o.language}}},faq:{dictionary:"settings.help",element:m,previous:"settings"},intro:{dictionary:!1,element:w},getStarted:{dictionary:"text.mtvMobile",element:w.getStarted},getStartedContinue:{dictionary:"text.account.signup.title",element:w.getStartedContinue,previous:"intro"},buyMonthly:{dictionary:"text.upgrade",element:x.Monthly,previous:"upgrade"},buySingle:{dictionary:"text.lockedEpisode",element:x.Single,previous:"roadblockMedia"},buyYearly:{dictionary:"text.upgrade",element:x.Yearly,previous:"upgrade"}};if(n)if(c.val="popup",t=E[this.from.val]){this.from.previous&&(t.previous=this.from.previous,this.from.previous=null),a.topbar.holder.title.text=t.title&&this.from.data?this.from.data.get("title"):t.dictionary!==!1?{dictionary:t.dictionary||this.from.val}:"";var O={element:t.element};this.from.data?(O.$params={data:this.from.data},t.params&&r.merge(O.$params,t.params)):t.params?(O.$params=t.params,this.from.data=null):this.from.data=null,t.previous?(a.topbar.holder.lefticon.icon="arrowleft",a.switcher.previous=t.previous):a.topbar.holder.lefticon.icon="empty",s.desktop||a.topbar.holder.righticon.set(t.righticon?t.righticon:{icon:{icon:"close"},text:"",css:""}),a.switcher.transition=O,e()}else console.error("cannot find popup-type",this.from.val),e(!0);else c.val=!1,s.phone?a.y=o.h:a.remove(),e(!0)}}},position:"absolute",phone:{w:o.w,h:o.h,y:{val:0,animation:{time:o.h.val/30,start:o.h,easing:"outCubic",done:function(e){var t=this;e>=100&&t.remove()}}}},"!phone":{w:{val:o.w,sub:30,max:400},h:{val:o.h,sub:30,max:600},x:{val:o.w,sub:{self:"w"},divide:2},y:{val:o.h,sub:{self:"h"},divide:3,min:15},"!android.opacity":{val:1,animation:{time:15,start:0,easing:"outCubic"}}},topbar:{css:"first-topbar",h:{val:40,phone:{iosFull:60}},holder:{lefticon:new a({icon:"arrowleft","events.click":function(){this.checkParent("switcher",!0).back()}}),title:{text:""},righticon:{icon:new a({icon:"close"}),text:"","events.click":s.desktop?function(e){e.preventDefault(),this.checkParent("on.popup",!0).from=!1}:function(e){e.preventDefault();var t=this.checkParent("switcher",!0)._swElem;t&&t.done?t.done.call(t):this.checkParent("on.popup",!0).from=!1}}}},switcher:new c({node:"div",on:{$remove:{defer:function(e){var t=this._parent._caller;t._timer&&clearTimeout(t._timer),e()}}},h:{parent:"h",sub:{val:40,phone:{iosFull:60}}},onTransition:s.slow?function(e,t,n){t&&t.remove(),this.add(e)}:function(e,t,n,i){n=void 0!==o.popup.direction?o.popup.direction:1,o.popup.direction=void 0,n&&t?(e.x={val:0,animation:{start:1===n?C:-C,time:20,delay:1,easing:"outCubic",done:function(){t&&t.remove()}}},t.x={val:1===n?-C:C,animation:{time:20,delay:1,easing:"outCubic"}},-1===n?this.add(e,t):this.add(e)):(t&&t.remove(),this.add(e))},backFallback:function(){this.previous&&(o.popup.direction=-1,this.previous instanceof Object?(o.popup.data=this.previous.data,o.popup.val=this.previous.val):o.popup.val=this.previous)}}),overlay:{display:"none"}}),n.topbar.holder.righticon.extend({fn:function(){}}),t.exports=n.Class},{"../icon":93,"./article":115,"./auth":116,"./buy":117,"./devices":118,"./faq":119,"./intro":121,"./languages":122,"./mobile":123,"./newsletter":124,"./page":125,"./profile":126,"./roadblock":127,"./settings":128,"./share":129,"./style.less":130,"./upgrade":131,"./wifi":132,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/app/ui/switcher":178,"vigour-js/browser/cases":202,"vigour-js/util":315}],121:[function(e,t,n){function i(e,t,n){var i=120,o=10,a=this.children.length,s=this._pos||(this._pos=0),c=s;Math.abs(n.x)>o?(n.x<0&&!(t.x>i)&&(c=Math.max(s-1,-a+1)),n.x>0&&!(t.x<-i)&&(c=Math.min(s+1,0))):(t.x<-i&&(c=Math.max(s-1,-a+1)),t.x>i&&(c=Math.min(s+1,0))),this.x._e&&(this.x={_esub:this.x._e._val}),r(this,c)}function r(e,t){{var n=e._pos||(e._pos=0);e._dots}t!==n&&(e.x={multiply:t},e._pos=t)}var o=e("vigour-js/app/ui/element"),a=(e("vigour-js/util"),e("../icon"),e("../item"),e("vigour-js/browser/cases"),e("../button")),s=(e("../text/input"),e("vigour-js/util/config"),e("../img")),c=e("./page"),l=e("vigour-js/app/"),u=new o({img:new s.Intro}).Class;t.exports=n=new c({on:{$parent:{defer:function(e){var t,i=this._parent,r=i._caller,o=r.checkParent("topbar",!0);o&&(t=r.roll,r._topbar=o,t._dots=new n.Dots,o.node.style.backgroundColor="#3a1a58",o.set({holder:{title:{dots:t._dots}}}),t.x=r.parent.parent.w.val-15,i.popup.val=l.popup),e()}},popup:{defer:function(e,t){var n=this._val._val;if("intro"!==n){var i=this._parent._caller._topbar;i&&("settings"===n&&(i.node.style.backgroundColor="#5d4078"),i.holder.title.dots.remove())}e()}}},roll:{css:"intro-roll",x:{val:0,multiply:0,animation:{time:18,easing:"outCubic",complete:function(e){for(var t=this._dots.children,n=t.length-1;n>=0;n--)t[n].css=n===-this._pos?"focus":""}}},append:[u,{"img.background":"1.png","title.text.dictionary":"intro.welcome.title","subtitle.text.dictionary":"intro.welcome.body"},{"img.background":"2.png","title.text.dictionary":"intro.devices.title","subtitle.text.dictionary":"intro.devices.body"},{"img.background":"3.png","title.text.dictionary":"intro.connect.title","subtitle.text.dictionary":"intro.connect.body"},{"img.background":"4.png","subtitle.text.dictionary":"intro.free.body",button:new a({"text.dictionary":"intro.free.button","events.click":function(){this.checkParent("on.popup",!0).from="getStartedContinue"}})}],events:{grab:{x:!0,up:i}}}}).Class,n.getStarted=new o({css:"get-started",on:{$parent:{defer:function(e){var t=this._parent,n=t._caller,i=n.checkParent("topbar",!0);i&&(i.node.style.backgroundColor="#5d4078",n._topbar=i),e()}}},"title.text.dictionary":"intro.mobile.title","subtitle.text.dictionary":"intro.mobile.body",append:[a,{css:{addClass:"yes"},"text.dictionary":"intro.mobile.button","events.click":function(){var e=this.checkParent("on.popup",!0).from;e.previous=e.val,e.val="verifyMobile"}},{css:{addClass:"skip"},"text.dictionary":"button.skip","events.click":function(){this.checkParent("on.popup",!0).from=!1}}]}).Class,n.getStartedContinue=new o({css:"get-started",on:{$parent:{defer:function(e){var t=this._parent,n=t._caller,i=n.checkParent("topbar",!0);i&&(i.node.style.backgroundColor="#5d4078",n._topbar=i),e()}}},"title.text.dictionary":"intro.register.title","subtitle.text.dictionary":"intro.register.body",append:[a,{css:{addClass:"facebook"},"text.dictionary":"text.account.signup.facebook","events.click":function(){var e=this.checkParent("api",!0);e.facebook.login.val=!0}},{css:{addClass:"email"},"text.dictionary":"text.account.signup.email","events.click":function(){var e=this.checkParent("on.popup",!0).from;this.parent._topbar.node.style.backgroundColor="#5d4078",e.previous=e.val,e.val="registerEmail"}}],"or.text.dictionary":"text.or",signin:new a({"text.dictionary":"text.account.signin.title","events.click":function(){var e=this.checkParent("on.popup",!0).from;this.parent._topbar.node.style.backgroundColor="#5d4078",e.previous=e.val,e.val="login"}})}).Class,n.Dots=new o({css:"intro-dots",append:[o,{css:"focus"},{},{},{}]}).Class},{"../button":41,"../icon":93,"../img":95,"../item":97,"../text/input":160,"./page":125,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202,"vigour-js/util":315,"vigour-js/util/config":306}],122:[function(e,t,n){var i=(e("vigour-js/app/ui/element"),e("vigour-js/util"),e("../icon"),e("../item")),r=(e("vigour-js/browser/cases"),e("vigour-js/util/config")),o=e("vigour-js/browser/animation/raf"),a=e("./page");t.exports=new a({css:"languages",on:{$parent:{defer:function(e){this._parent._caller.data=r.languages,this._parent.language._update(),e()}},language:{defer:function(e){var t=this;o(function(){if(t._parent){var n=t._parent._caller,i=t._parent._val||n.checkParent("on.language",!0),r=n.find("_d",i.val);r&&(t.focus&&t.focus._node&&(t.focus.css={removeClass:"current"}),t.focus=r,r.css={addClass:"current"}),e()}else e(!0)})}}},collection:{data:!0,element:new i({"title.text":{data:!0,dictionary:function(e,t){return t&&"text.languages."+t+".title"}},"events.click":function(){var e=this.checkParent("on.language",!0),t=this.checkParent("on.popup",!0).from;e.$userOrigin.val=String(this.data),t.direction=-1,t.val="settings"}})}}).Class},{"../icon":93,"../item":97,"./page":125,"vigour-js/app/ui/element":176,"vigour-js/browser/animation/raf":200,"vigour-js/browser/cases":202,"vigour-js/util":315,"vigour-js/util/config":306}],123:[function(e,t,n){var i=e("vigour-js/app/ui/element"),r=(e("vigour-js/util"),e("../icon"),e("vigour-js/browser/cases"),e("../button")),o=e("../text/input"),a=e("../item"),s=e("vigour-js/util/config"),c=e("vigour-js/browser/animation/raf"),l=e("./page"),u=e("vigour-js/app/");n.Verify=new l({css:"verifymobile","on.$parent.defer":function(e){this._parent._caller.data={code:u.telCode},e()},top:{"text.dictionary":"text.enterYourNumber"},country:new a.IconRight({txt:{text:{data:"code",dictionary:function(e,t){return t&&t.slice&&"text.countries."+t.slice(0,2)+".title"},add:[" (+",{data:"code",transform:function(e,t){return t&&s.countrycodes[t]}},")"]}},"events.click":function(){var e=this.checkParent("on.popup",!0).from;e.val="countryCodes"}}),phonenumber:new o({input:"phone","lefticon.html":{data:"code",transform:function(e,t){return t&&("+"+s.countrycodes[t]||t)}}}),verify:new r({text:{dictionary:"text.verify"},"events.click":function(){var e=this.checkParent("api",!0);this.parent.phonenumber.input&&console.log(this.parent.phonenumber.input),e.mobile.verify.val={phonenumber:this.parent.phonenumber.val,country:s.countrycodes[this.parent.data.code.val]}}})}).Class,n.CountryCodes=new i({css:"languages codes",on:{$parent:{defer:function(e){this._parent._caller.data=s.mtvmobile,this._parent.language.val=u.telCode,this._parent.language._update(),e()}},language:{defer:function(e){var t=this;c(function(){if(t._parent){var n=t._parent._caller,i=(t._parent._val||n.checkParent("on.language",!0)).from,r=n.find("_d",i.val);r&&(t.focus&&t.focus._node&&(t.focus.css={removeClass:"current"}),t.focus=r,r.css={addClass:"current"}),e()}else e(!0)})}}},collection:{data:!0,element:new a({"title.text":{data:!0,dictionary:function(e,t){return t&&t.slice&&"text.countries."+t.slice(0,2)+".title"},add:function(e,t){return" (+"+s.countrycodes[String(this.data)]+")"}},"events.click":function(){var e=this.checkParent("on.popup",!0).from;u.telCode.val=String(this.data),e.val="verifyMobile"}})}}).Class},{"../button":41,"../icon":93,"../item":97,"../text/input":160,"./page":125,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/browser/animation/raf":200,"vigour-js/browser/cases":202,"vigour-js/util":315,"vigour-js/util/config":306}],124:[function(e,t,n){var i=(e("vigour-js/app/ui/element"),e("../icon"),e("../item")),r=e("./page"),o=e("vigour-js/app/");t.exports=new r({css:"newsletter",newsletterSwitcher:new i.Switcher({css:"ui-item switch","on.$render.defer":function(e){this._parent._caller.righticon.hold.switchOn=o.user.accept_newsletter.from,e()},txt:{"title.text.dictionary":"text.newsletterTitle","subtitle.text.dictionary":"text.newsletterSubtitle"},"events.click":function(){var e=o.user.accept_newsletter.from;e.val=!e.val}})}).Class},{"../icon":93,"../item":97,"./page":125,"vigour-js/app/":174,"vigour-js/app/ui/element":176}],125:[function(e,t,n){var i=e("vigour-js/app/ui/element");t.exports=new i({x:{translate:!0},scrollbar:"y"}).Class},{"vigour-js/app/ui/element":176}],126:[function(e,t,n){var i=e("vigour-js/app/ui/element"),r=(e("vigour-js/util"),e("../icon")),o=e("../item"),a=e("vigour-js/browser/cases"),s=(e("../button"),e("./page"),e("vigour-js/app/dictionary")),c=e("vigour-js/app/"),l=new i({append:[new o({css:"ui-item",lefticon:new r,title:{}}).Class,{"lefticon.icon":"logout","title.text.dictionary":"text.account.logout","events.click":function(){var e=(this.checkParent("on.token",!0),this.checkParent("on.popup",!0));e.from.val="login",c.user.token.val=!1}}]}).Class;t.exports=n=new i({css:"profile",pic:{icon:new r({icon:"profile",display:{val:function(){return c.user.profilepic.val?"none":"block"},listen:c.user.profilepic}}),img:{background:c.user.profilepic,display:{val:function(){return c.user.profilepic.val?"block":"none"},listen:c.user.profilepic}}},username:{text:c.user.first_name},email:{text:c.user.email},holder:{blocks:{allshows:{bold:{text:{dictionary:"text.all"}},light:{text:{dictionary:"text.nav.shows"}}},allchannels:{display:{val:c.user.role,transform:function(e,t){return 3===t?"none":"table-cell"}},bold:{text:{dictionary:"text.all"}},light:{text:{dictionary:"text.nav.channels"}}},everyepisode:{bold:{text:{dictionary:"text.every"}},light:{text:{dictionary:"text.episode"}}}},unlock:{display:{val:"block",$isUpgraded:"none"},text:{dictionary:"text.purchase.getMore"}}},button:{text:{val:c.user.role,transform:function(e,t){return c.user.role.val?1===c.user.role.val?s.get("text.premium").val:2===c.user.role.val?s.get("text.mtvMobile").val:3===c.user.role.val?s.get("text.trial").val:t:s.get("text.upgrade").val}},css:{val:c.user.role.text},"events.click":function(){if(0===c.user.role.val){var e=this.checkParent("on.popup",!0).from;e.previous="profile",e.val=a.$storeAvailable.val||a.hasMobile.val?"upgrade":"roadblock"}}},items:new l}).Class},{"../button":41,"../icon":93,"../item":97,"./page":125,"vigour-js/app/":174,"vigour-js/app/dictionary":173,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202,"vigour-js/util":315}],127:[function(e,t,n){var i=e("vigour-js/app/ui/element"),r=e("vigour-js/app"),o=(e("vigour-js/util"),e("../icon"),e("../item")),a=(e("vigour-js/browser/cases"),e("../button")),s=(e("../text/input"),e("vigour-js/util/config"),e("../img"),e("./article"),e("./page"));t.exports=n=new s({css:"roadblock",logo:{display:{val:"block",$isLoggedIn:"none"}},"!native.mockup":{display:{val:"none",$isLoggedIn:"block"}},append:[new i({css:"info"}).Class,{"title.text.dictionary":"text.needToRegister","description.text.dictionary":"text.easyRegister",display:{val:"block",$isLoggedIn:"none"}},{"title.text.dictionary":"text.upgradeRequired","description.text.dictionary":"text.upgradeRequired",display:{val:"none",$isLoggedIn:"block",transform:{val:"none",$storeAvailable:!1}}},{"title.text.dictionary":"text.mobileUpgrade","description.text.dictionary":"text.mobileUpgradeInfo","!native.stores":{windowsstore:{},applestore:{},googlestore:{},googlecast:{},samsungtv:{},lgtv:{}},display:{val:"none",$isLoggedIn:"block",transform:{val:!1,$storeAvailable:"none"}}}],signup:new a({display:{val:"block",$isLoggedIn:"none"},"text.dictionary":"text.account.signup.title","events.click":function(){var e=this.checkParent("on.popup",!0).from;e.previous="roadblock",e.val="register"}}),signin:new a({display:{val:"block",$isLoggedIn:"none"},"text.dictionary":"text.account.signin.title","events.click":function(){var e=this.checkParent("on.popup",!0).from;e.previous="roadblock",e.val="login"}}),upgrade:new a({display:{val:"none",$isLoggedIn:"block",transform:{val:"none",$storeAvailable:!1}},"text.dictionary":"text.upgrade","events.click":function(){var e=this.checkParent("on.popup",!0).from;e.previous="roadblock",e.val="upgrade"}})}).Class,n.Media=new s({css:"roadblock media share","holder.thumb":new o.Thumb({thumb:{h:60,img:{h:60}},righticon:!1}),buy:new a({display:{val:"none",$storeAvailable:"block"},text:{dictionary:"text.unlockPrice",add:[" ",r.api.price.single]},"events.click":function(){var e=this.checkParent("on.popup",!0).from;e.val="buySingle"}}),or:{display:{val:"none",$storeAvailable:"block"},text:{val:"- ",add:[{dictionary:"text.or"}," -"]}},upgrade:new a({"text.dictionary":"text.upgrade","events.click":function(){var e=this.checkParent("on.popup",!0).from;e.previous={val:"roadblockMedia",data:this.parent.data},e.val="upgrade"}}),mobile:new a({"text.dictionary":"text.purchase.freeWithMTV",display:{val:"none",hasMobile:"block"},"events.click":function(){var e=this.checkParent("on.popup",!0).from;e.previous="upgrade",e.val="verifyMobile"}})}).Class},{"../button":41,"../icon":93,"../img":95,"../item":97,"../text/input":160,"./article":115,"./page":125,"vigour-js/app":174,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202,"vigour-js/util":315,"vigour-js/util/config":306}],128:[function(e,t,n){var i=e("vigour-js/app/ui/element"),r=(e("vigour-js/util"),e("../icon"),e("../item")),o=e("vigour-js/browser/cases"),a=(e("../button"),e("../text/input"),e("vigour-js/util/config"),e("vigour-js/browser/animation/raf"),e("./page"),e("vigour-js/app/dictionary")),s=e("vigour-js/app/");t.exports=new i({css:"settings",scroller:{language:new r.IconRightSub({txt:{"title.text.dictionary":"text.settings.languages.title","subtitle.text.dictionary":"text.settings.languages.subtitle"},"events.click":function(){var e=this.checkParent("on.popup",!0).from;e.val="languages"}}),FAQ:new r.IconRightSub({txt:{"title.text.dictionary":"settings.help","subtitle.text.dictionary":"settings.helpSub"},"events.click":function(){var e=this.checkParent("on.popup",!0).from;e.val="faq"}}),help:new r.IconRightSub({txt:{"title.text.dictionary":"settings.feedback","subtitle.text.dictionary":"settings.feedbackSub"},"events.click":function(){var e=this.checkParent("api",!0);e.email.send.val={address:"helpme@mtvplay.tv",subject:a.get("text.mailHelp.title").val,body:a.get("text.mailHelp.body").val}}}),"hasMobile.about":new r.IconRightSub({txt:{"title.text.dictionary":"settings.about","subtitle.text.dictionary":"settings.aboutSub"},"events.click":function(){var e=this.checkParent("on.popup",!0).from,t=s.user;e.previous="settings",e.data=t.data.from.get(["about","list","0"]),e.val="article"}}),newsletter:new r.IconRightSub({txt:{"title.text.dictionary":"settings.enableNewsletter.title","subtitle.text.dictionary":"settings.enableNewsletter.subtitle"},display:{val:"none",$isLoggedIn:"table"},"events.click":function(){var e=this.checkParent("on.popup",!0).from;e.val="newsletter"}}),"native.wifi":new r.IconRightSub({txt:{"title.text.dictionary":"settings.connectivity","subtitle.text.dictionary":"settings.connectivitySub"},"events.click":function(){var e=this.checkParent("on.popup",!0).from;e.val="wifi"}}),verifyMobile:new r.IconRightSub({display:{val:o.hasMobile,transform:function(e,t){return t&&o.$isLoggedIn.val?"table":"none"},listen:o.$isLoggedIn},txt:{"title.text.dictionary":"settings.verifyMobile","subtitle.text.dictionary":"settings.verifyMobileSub"},"events.click":function(){var e=this.checkParent("on.popup",!0).from;e.previous="settings",e.val="verifyMobile"}}),"native.intro":new r.IconRightSub({txt:{"title.text.dictionary":"settings.intro","subtitle.text.dictionary":"settings.introSub"},"events.click":function(){var e=this.checkParent("on.popup",!0).from;e.previous="settings",e.val="intro"}})},version:{text:{val:"MTV Play -",add:[" ",window["package"]&&window["package"].version]}},phone:{h:{parent:"h"},scroller:{scrollbar:"y",h:{parent:"h",sub:80}}}}).Class},{"../button":41,"../icon":93,"../item":97,"../text/input":160,"./page":125,"vigour-js/app/":174,"vigour-js/app/dictionary":173,"vigour-js/app/ui/element":176,"vigour-js/browser/animation/raf":200,"vigour-js/browser/cases":202,"vigour-js/util":315,"vigour-js/util/config":306}],129:[function(e,t,n){var i=(e("vigour-js/app/ui/element"),e("vigour-js/util"),e("../icon"),e("../item")),r=(e("vigour-js/browser/cases"),e("../button"),e("../text/input"),e("vigour-js/util/config"),e("../img"),e("./page"));t.exports=n=new r({css:"share","holder.thumb":new i.Thumb({thumb:{h:60,img:{h:60}},righticon:!1}),facebook:new i.IconLeft({lefticon:{icon:"facebook"},"txt.text.dictionary":"text.shareFacebook","events.click":function(){var e=this.checkParent("api",!0);e.facebook.share.val={val:!0,url:!0}}}),email:new i.IconLeft({lefticon:{icon:"email"},"txt.text.dictionary":"text.shareEmail","events.click":function(){var e=this.checkParent("api",!0);e.email.share.val=!0}})}).Class},{"../button":41,"../icon":93,"../img":95,"../item":97,"../text/input":160,"./page":125,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202,"vigour-js/util":315,"vigour-js/util/config":306}],130:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],131:[function(e,t,n){var i=(e("vigour-js/app/ui/element"),e("vigour-js/app")),r=(e("vigour-js/util"),e("../icon"),e("vigour-js/browser/cases"),e("../button")),o=e("./page");n=t.exports=new o({css:"upgrade",block:{img:{},"title.text.dictionary":"text.purchase.goPremium","txt.text.dictionary":"text.purchase.getMore"},bottom:{"text.container":"text.legalContainer"},monthlyFee:new r({text:{dictionary:"text.purchase.monthlyPass.title",add:[" ",i.api.price.monthly]},display:{val:"none",$storeAvailable:"block"},"events.click":function(){var e=this.checkParent("on.popup",!0).from;e.val="buyMonthly"}}),annualFee:new r({text:{dictionary:"text.purchase.yearlyPass.title",add:[" ",i.api.price.yearly]},display:{val:"none",$storeAvailable:"block"},"events.click":function(){var e=this.checkParent("on.popup",!0).from;e.val="buyYearly"}}),upgradeUsingPhone:new r({text:{dictionary:"tex.buyPremiumPhoneButton"},display:{val:"block",$storeAvailable:"none"},"events.click":function(){var e=this.checkParent("on.popup",!0).from;e.previous="upgrade",e.val="roadblockUpgrade"}}),mobile:new r({"text.dictionary":"text.purchase.freeWithMTV",display:{val:"none",hasMobile:"block"},"events.click":function(){var e=this.checkParent("on.popup",!0).from;e.previous="upgrade",e.val="verifyMobile"}})}).Class},{"../button":41,"../icon":93,"./page":125,"vigour-js/app":174,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202,"vigour-js/util":315}],132:[function(e,t,n){var i=(e("vigour-js/app/ui/element"),e("../icon"),e("../item")),r=e("./page"),o=e("vigour-js/app/");t.exports=new r({css:"wifi",wifiSwitcher:new i.Switcher({css:"ui-item switch","on.$render.defer":function(e){this._parent._caller.righticon.hold.switchOn=o.wifiOnly,e()},txt:{"title.text.dictionary":"settings.enableCellular.title","subtitle.text.dictionary":"settings.enableCellular.subtitle"},"events.click":function(){var e=o.wifiOnly;e.val=!e.val}})}).Class},{"../icon":93,"../item":97,"./page":125,"vigour-js/app/":174,"vigour-js/app/ui/element":176}],133:[function(e,t,n){e("./style.less");var i=e("vigour-js/app/ui/element"),r=e("../icon");t.exports=new i({css:"rotate-message",holder:{icon:new r({icon:"phone"}),message:{text:{dictionary:"text.rotateDevice"}}}}).Class},{"../icon":93,"./style.less":134,"vigour-js/app/ui/element":176}],134:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],135:[function(e,t,n){e("./style.less");{var i=e("vigour-js/app/ui/element"),r=e("vigour-js/app/dictionary"),o=e("../../icon"),a=e("../../text"),s=r.get("connect.active"),c=r.get("connect.waiting");e("vigour-js/browser/cases")}t.exports=new i({css:{val:"second-bar"},device:new o({icon:{data:"activeClient.device"}}),info:{html:{data:"activeClient.device",transform:function(e,t){return t?s.val+" "+a.highlight(t):c.val},listen:r}}}).Class},{"../../icon":93,"../../text":159,"./style.less":136,"vigour-js/app/dictionary":173,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202}],136:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],137:[function(e,t,n){e("./style.less");var i=e("vigour-js/app/"),r=e("vigour-js/app/ui/element"),o=e("../../icon"),a=e("../../img"),s=e("../grid"),c=new r({w:{val:s.colWidth,add:10,multiply:2,sub:10},y:{val:s.rowHeight,add:10,divide:2,add:40},title:{text:{data:"media.title"}},img:new a({background:{data:"media.img",range:100},w:{parent:"w"},h:{self:"w",divide:4/3}}),extratitle:{text:{data:"media.title"}},description:{text:{data:"media.description"}}}),l=new a({h:i.h,w:{val:i.w,sub:[c.w,160]},background:{data:"media.img",range:100},overlay:{message:{swipeicon:new o({icon:"swipeup"}),text:"Press Watch Big your device to start playing!"}}});t.exports=new r({css:"second-channel",information:c,cover:l}).Class},{"../../icon":93,"../../img":95,"../grid":145,"./style.less":138,"vigour-js/app/":174,"vigour-js/app/ui/element":176}],138:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],139:[function(e,t,n){e("./style.less");var i=e("../grid"),r=e("vigour-js/app/ui/element"),o=e("../../img"),a=e("vigour-js/app/"),s=e("../../epg_temp"),c=e("../../player/seekbar"),l=s.clockTime,u=new r({w:{parent:"itemWidth",sub:10},css:"grid-item",img:new o({w:{parent:"w",sub:2},h:{parent:"w",multiply:.75},background:{range:100}}),information:{channeltitle:{css:"ui-item-text",text:{data:"title"}},now:{text:{dictionary:"text.now"}},epg:{showtitle:{text:{data:"title"}},time:{text:{data:"minutes_since_midnight",transform:l,add:[" - ",{data:"endtime",transform:l}]}},bar:new c({seek:{w:{val:s.minutesSinceMidnight,sub:{data:"minutes_since_midnight"},divide:{data:"duration"},transform:function(e,t){return isNaN(parseInt(t))?0:100*t+"%"},clear:!0}},button:!1}),model:{inherit:!1}}},model:{subscription:{epgid:!0},val:function(e){var t=e.epgid&&e.epgid.val;void 0!==t&&(this.information.epg.data=s.now(t),this.model=!1)}}}).Class;i=new i({css:"second-channels",itemWidth:{val:a.w,sub:160,divide:{val:4,min:4},clear:!0},title:{text:"channels"},y:{val:i.rowHeight,add:10,divide:2,add:40},collection:{data:"channels",element:new u},model:function(e){var t=e.channels&&e.channels.keys,n=t&&t.length;n!==this._length&&(this.itemWidth={divide:n},this._length=n)}}),t.exports=i.Class},{"../../epg_temp":43,"../../img":95,"../../player/seekbar":109,"../grid":145,"./style.less":140,"vigour-js/app/":174,"vigour-js/app/ui/element":176}],140:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],141:[function(e,t,n){e("./style.less");var i=(e("vigour-js/app/"),e("vigour-js/app/ui/element")),r=e("../grid"),o=e("../../img"),a=e("vigour-js/browser/cases"),s=new r({itemHeight:r.rowHeight,title:{},w:{self:"itemWidth",add:10,multiply:1},collection:{data:!0},model:{val:function(e){e=e[this.collection._flag.data[2]];var t=e&&e.keys,n=t&&t.length;if(t&&n!==this._length){var i=this.parent;this.w={multiply:Math.ceil(n/4)||1},this._length=n,i._index=null,i.horizontalScroll.update()}}}}).Class,c=new i({title:{text:{dictionary:"text.nav.discover"}},holder:{h:{val:r.rowHeight,add:10,multiply:2,sub:10},w:{val:r.colWidth,add:10,multiply:3,sub:10},roll:{w:{parent:"w"},h:{parent:"h"},x:{parent:"w",multiply:{data:"carousel"},animation:!a.chromecast&&{easing:"outCubic",time:36}},collection:{data:"marquee",element:new o({w:{parent:"w"},h:{parent:"h"},background:{range:100}})}}}}).Class,l=new i;l.extend({horizontalScroll:function(e){var t=e.val,n=.25,i=Math.min(~~(t/n),3);if(i!==this._index){var r=this.children;this.x=0===i?0:1===i?-r[0].holder.w.val-80:2===i?-r[0].holder.w.val-80-r[1].w.val-80:-r[0].holder.w.val-80-r[1].w.val-80-r[2].w.val-80;for(var o,a,s=r.length-1;s>=0;s--)a=r[s],o?a.opacity=0:s!==i?a.opacity=.3:(a.opacity=1,o=!0);this._index=i}}}),t.exports=new l.Class({css:"second-discover","!chromecast.x.animation":{easing:"outCubic",time:36},y:{val:r.rowHeight,add:10,divide:2,add:40},horizontalScroll:{data:"scroll"},spotlight:new c,releases:new s({title:{text:{dictionary:"text.newReleases"}},collection:{data:"releases"}}),recommended:new s({title:{text:{dictionary:"text.recommended"}},collection:{data:"recommended"}}),free:new s({title:{text:{dictionary:"text.free"}},collection:{data:"free"}})}).Class},{"../../img":95,"../grid":145,"./style.less":142,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202}],142:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],143:[function(e,t,n){e("./style.less");var i=e("vigour-js/app/"),r=e("vigour-js/app/ui/element"),o=e("../../icon"),a=e("../../img"),s=e("../grid"),c=new r({w:{val:s.colWidth,add:10,multiply:2,sub:10},y:{val:s.rowHeight,add:10,divide:2,add:40},title:{text:{data:"show.title"}},holder:{w:{parent:"w"},img:new a({background:{data:"media.img",range:100},w:{parent:"w"},h:{self:"w",divide:4/3}}),extratitle:{text:{data:"media.title"}},opacity:{data:"media.number",transform:function(e,t){return t?(this.css="",1):(this.css="dontAnimate",0)}},subtitle:{text:{val:{dictionary:"text.season"},add:[" ",{data:"season.number"}," ",{dictionary:"text.episode"}," ",{data:"media.number"}]}},description:{text:{data:"media.description"}}}}),l=new a({h:i.h,w:{val:i.w,sub:[c.w,160]},background:{data:"show.img",range:100},overlay:{message:{swipeicon:new o({icon:{val:"cast",$isReceiver:"swipeup"}}),text:{dictionary:"text.recieveSecondScreen",transform:!1,$isReceiver:{transform:{dictionary:"text.recieveMainScreen"}}}}}});t.exports=new r({css:"second-episode",information:c,cover:l}).Class},{"../../icon":93,"../../img":95,"../grid":145,"./style.less":144,"vigour-js/app/":174,"vigour-js/app/ui/element":176}],144:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],145:[function(e,t,n){e("./style.less");var i=e("vigour-js/app/"),r=e("vigour-js/app/ui/element"),o=e("vigour-js/value"),a=e("../../img"),s=new r,c=new r({w:{parent:"itemWidth"},h:{parent:"itemHeight"},css:"grid-item",img:new a({"events.click":function(){},w:{parent:"w"},h:{parent:"h"},background:{range:100}})}).Class;s.extend({itemWidth:function(){},itemHeight:function(){}}),s.set({itemHeight:{},itemWidth:{self:"itemHeight",divide:.75},collection:{element:new c}}),t.exports=n=s.Class,n.Item=c,n.rowHeight=new o({val:i.h,sub:80,divide:6}),n.colWidth=new o({val:n.rowHeight,divide:.75})},{"../../img":95,"./style.less":146,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/value":327}],146:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],147:[function(e,t,n){e("./style.less");var i=e("vigour-js/app/ui/element"),r=(e("vigour-js/app/"),e("vigour-js/browser/cases")),o=e("./switcher"),a=e("./screensaver"),s=e("./bar");t.exports=new i({css:"second-state",switcher:r.phone?new a:new o,"!phone.bar":new s,"phone.button.title.text.dictionary":"text.returnTap"}).Class},{"./bar":135,"./screensaver":148,"./style.less":154,"./switcher":155,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202}],148:[function(e,t,n){e("./style.less");var i=(e("vigour-js/app/ui/element"),e("vigour-js/app/ui/switcher")),r=e("vigour-js/app/"),o=(e("vigour-js/browser/cases"),e("../../img")),a=new o({w:r.w,h:r.h}).Class,s=new a({model:{subscription:{$:{img:!0}},val:function(e){if(e._name){var t=e.keys;if(t){var n=t.length;if(n){var i=t[~~(Math.random()*n)];this.model=!1,this.data=e[i]}}}}}}).Class;t.exports=n=new i({css:"second-screensaver",on:{page:{defer:function(e){var t,n=this.$userOrigin.val,i=this._parent,r=i._caller,o=i.content.from;

"discover"===n?t=o.get("marquee.list"):"shows"===n?t=o.get("shows"):"channels"===n&&(t=o.get("channels")),r.transition={element:s,$params:{data:t},$options:{force:!0}},e()}},show:{defer:function(e){var t=this.$userOrigin.val,n=this._parent,i=n._caller;i.transition={element:a,$params:{data:t},$options:{force:!0}},e()}},media:{defer:function(e){var t=this.$userOrigin.val,n=this._parent,i=n._caller;i.transition={element:a,$params:{data:t},$options:{force:!0}},e()}}},onTransition:function(e,t,n,i){t&&(t.opacity={val:0,animation:{start:1,time:12}}),e.opacity={val:1,animation:{start:0,time:12,delay:12,done:function(){t&&t.remove()}}},this.add(e)}}).Class},{"../../img":95,"./style.less":149,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/app/ui/switcher":178,"vigour-js/browser/cases":202}],149:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],150:[function(e,t,n){e("./style.less");var i=(e("vigour-js/app/"),e("vigour-js/app/ui/element")),r=e("../grid"),o=e("../../img"),a=e("vigour-js/browser/cases"),s=new i({x:{val:0,add:{val:r.colWidth,add:50,multiply:2},animation:!a.chromecast&&{easing:"outCubic",time:36}},collection:{data:"seasons",element:new r({itemHeight:r.rowHeight,title:{text:{val:"season",add:[" ",{data:"number"}]}},w:{self:"itemWidth",add:10,multiply:1},collection:{data:"episodes"},model:{val:function(e){if(e.episodes){var t=e.episodes.keys,n=t.length;n!==this._length&&(this.w={multiply:Math.ceil(n/4)},this._length=n)}}}})}});s.extend({pos:function(e){var t=0|e.val,n=this.children;if(n[1]){t?n[t-1]&&(this.x=this.x.val-n[t-1].node.getBoundingClientRect().right):this.x.val=0;for(var i,r,o=n.length-1;o>=0;o--)r=n[o],i?r.opacity=0:o!==t?r.opacity=.3:(r.opacity=1,i=!0)}}}),t.exports=new i({css:"second-show",on:{show:{defer:function(e){var t=this._parent._caller;t.data=this.from.val,e()}},season:{defer:function(e){var t=this._parent._caller,n=this.from.val;if(n){var i=n&&n._name;t.data||(this._parent.show.val=n._parent._parent),void 0!==i&&(t.roll.pos.val=i)}e()}}},y:{val:r.rowHeight,add:10,divide:2,add:40},roll:s.set({pos:0,model:{field:"show",complete:function(){var e=this;window.requestAnimationFrame(function(){e.pos.update(),e.model=!1})}}}),information:{title:{text:{data:"show.title"}},holder:{h:{val:r.rowHeight,add:10,multiply:4,sub:10},w:{val:r.colWidth,add:10,multiply:2,sub:10},img:new o({background:{data:"show.img",range:100},w:{parent:"w"},h:{self:"w",divide:4/3}}),description:{text:{data:"show.description"}}}}}).Class},{"../../img":95,"../grid":145,"./style.less":151,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202}],151:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],152:[function(e,t,n){function i(e,t,n,i){for(var r,o,a=e.length-1;a>=0;a--)~t.indexOf(r=e[a])||(o=n[r])&&(o.img.opacity=i)}function r(e,t,n){if(e=n[e],t=n[t],e&&t){var i=o.h.val-80,r=t.node.getBoundingClientRect().bottom;if(r>=i)n.y.val-=r-i+20;else{var a=e.node.getBoundingClientRect().top;0>=a&&(n.y.val-=a)}n.y.val>0&&(n.y.val=0)}}e("./style.less");var o=e("vigour-js/app/"),a=e("vigour-js/app/ui/element"),s=e("../../icon"),c=e("../grid"),l=e("vigour-js/browser/element/properties/collection/display"),u=new c({y:{translate:!0,add:10},"!chromecast.y.animation":{time:36,easing:"outCubic"},itemWidth:{val:o.w,sub:70,divide:6,clear:!0},itemHeight:{self:"itemWidth",divide:4/3,clear:!0},user:{},collection:{data:"shows",options:l,element:new c.Item({display:"inline-block",img:{background:{load:function(e){e.opacity&&e.opacity.val||(e.opacity=.3)}}},model:{val:function(e){var t=e._name;t&&(this.name=t,this.model=!1)}}}),filter:{condition:{title:{$contains:""}},sort:"title"}},model:{subscription:{$:{img:!0,title:!0}}}});u.user.extend({highlight:function(e){var t=e.val,n=this._parent||(this._parent=this.parent);if(t[0]){var o=t.split("."),a=n._old||(n._old=[]);o[0]&&(i(a,o,n,.3),i(o,a,n,1),r(o[0],o[o.length-1],n),n._old=o)}},search:function(e){for(var t=e.val,n=this._parent||(this._parent=this.parent),i="",r=0,o=t&&t.length;o>r;r++)i+="\\s*"+t[r];i+="\\s*",n.filter&&(n.filter.filter={condition:{title:{$contains:i}},sort:"title"})}}),u.user.set({highlight:{data:"highlight"},search:{data:"search"}});var p=new a({searchicon:new s({icon:"search"}),text:{data:"search",transform:function(e,t){return t}}});p.extend({paddingRight:function(e){this.node.style.paddingRight=e.val+"px"}}),t.exports=new a({css:"second-shows",grid:u,search:{searchholder:{searchbox:new p.Class({paddingRight:{self:"text",transform:function(e,t){return t[0]?20:0}},opacity:{self:"text",transform:function(e,t){return t[0]?1:0}}})}}}).Class},{"../../icon":93,"../grid":145,"./style.less":153,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/browser/element/properties/collection/display":206}],153:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],154:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],155:[function(e,t,n){e("./style.less");var i=e("vigour-js/app/ui/element"),r=e("vigour-js/app/ui/switcher"),o=(e("vigour-js/browser/cases"),e("../../icon"));t.exports=n=new r({css:"second-switcher",on:{$remove:{defer:function(e){var t=this._parent._caller;t._timer&&clearTimeout(t._timer),e()}},page:{defer:function(t){var i,r,o=this.$userOrigin.val,a=this._parent,s=a._caller,c=a.content.from;o&&("discover"===o?(void 0===n[o]&&(n[o]=e("../discover")),i={marquee:c.get("marquee.list"),recommended:c.get("recommended.list"),releases:r=c.get("releases.list"),watched:a.watched.from,free:c.get("free.list"),channels:c.get("channels"),scroll:a.scroll.from,carousel:a.carousel.from}):"shows"===o?(void 0===n[o]&&(n[o]=e("../shows")),i={shows:r=c.get("shows"),search:a.search.from,highlight:a.highlight.from}):"channels"===o&&(void 0===n[o]&&(n[o]=e("../channels")),i={channels:r=c.get("channels")}),r?s.transition={element:n[o],$params:{data:i},$options:{loader:r.from}}:console.error("ERROR: NO LOADED BENCHMARK??"),s.current="page"),t()}},show:{defer:function(t){var i,r,o=this.$userOrigin.val,a=this._parent,s=a._caller,c=o._name,l=a.season,u=a.media,p=a.usage;l.from.checkParent("_name",c)||(l.$userOrigin.val=o.from.get("seasons.0")),u.from.checkParent("_name",c)||(u.$userOrigin.val=o.from.get("seasons.0.episodes.0")),r=u.$userOrigin,i=l.$userOrigin,s.transition={element:n.show||(n.show=e("../show")),$params:{on:{season:i},data:{show:o,season:i,media:r,showusage:p.from.get(o.from._contentPath),mediausage:p.from.get(r.from._contentPath),volume:a.volume}},$options:{loader:o.from.seasons}},t()}},season:{defer:function(e,t){t[0]&&this._parent.show._update(),e()}},media:{defer:function(t){var i=this._parent,r=i._caller,o=this.$userOrigin.val;if(o||(o=this.$userOrigin.val=this.from),"episodes"===o._parent._name){var a=o._parent._parent,s=a._parent._parent;r.transition={element:n.episode||(n.episode=e("../episode")),$params:{data:{show:s,season:a,media:o}},$options:{loader:o.from},direction:"page"===r.current?1:"media"===r.current&&-1}}else"channels"===o._parent._name&&(r.transition={element:n.channel||(n.channel=e("../channel")),$params:{data:{media:o}},$options:{loader:o.from},direction:"channel"!==r.current&&1});t()}}},onTransition:function(e,t,n,i){t?(this.add(e,t),t.opacity=0,t.node.pointerEvents="none",this._timer&&clearTimeout(this._timer),this._timer=setTimeout(function(){t&&t.remove(),this._timer=null,i.done&&i.done()},200)):(this.add(e),i.done&&i.done())},loader:new i({css:"second-loader",x:{translate:!0},loadicon:new o({icon:"logo"})})}).Class},{"../../icon":93,"../channel":137,"../channels":139,"../discover":141,"../episode":143,"../show":150,"../shows":152,"./style.less":156,"vigour-js/app/ui/element":176,"vigour-js/app/ui/switcher":178,"vigour-js/browser/cases":202}],156:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],157:[function(e,t,n){e("./style.less");var i=e("vigour-js/app/ui/element"),r=e("vigour-js/app/ui/switcher"),o=e("vigour-js/browser/cases"),a=e("vigour-js/app/");t.exports=n=new r({css:"app-switcher",w:{parent:"w"},h:{parent:"h"},on:{state:{defer:function(t){var r,s,c,l,u,p,f=this._parent,d=f._caller,h=this.from.val,v=f.content._val,g=f.favourites._val,m=f.navigation._val,y=f.receiver._val,_=f.highlight._val,b=f.overlay._val,w=f.watched._val,k=f.search._val,x=f.usage._val,j=f.volume._val,C=f.scroll._val,S=f.carousel._val,E=f.notification._val,O=f.popup._val,A=f.play._val,T=f.loading._val,$=(f.profilepic._val,f.activeClient._val);"empty"===h?l=(new i).Class:"first"===h||"player"===h&&(o.desktop||o.tablet)?(l=n.first||(n.first=e("../first")),o.tv?(u={switcher:{on:{content:v,page:m.page,show:m.show,media:m.media}}},u.sidemenu={data:{page:m.page}}):(u={on:{overlay:b,popup:O,notification:E,loading:T,state:this.from},section:{on:{msmedia:y.media,usage:x,play:y.playing,volume:y.volume},topbar:{on:{page:m.page,show:m.show,media:m.media}},switcher:{on:{content:v,favourites:g,page:m.page,show:m.show,season:m.season,media:m.media,highlight:_,scroll:C,search:k,usage:x,volume:j,watched:w,carousel:S,play:A,ms:y}}}},o.phone?u.section.topmenu={data:{page:m.page}}:u.sidemenu={data:{page:m.page}})):"second"===h?(l=n[h]||(n[h]=e("../second")),u={switcher:{on:{content:f.content,page:m.page,show:m.show,season:m.season,channel:m.channel,media:m.media,highlight:_,scroll:C,search:k,usage:x,watched:w,carousel:S}},bar:{data:{activeClient:$}}}):"player"===h&&(l=n[h]||(n[h]=e("../player")),r=this._val.video.from,"episodes"===r._parent._name?(s=r._parent._parent,c=s._parent._parent,u={data:{show:c,season:s,media:r,mediausage:x.from.get(r._contentPath),volume:j}}):"channels"===r._parent._name&&(u={data:{media:r,mediausage:x.from.get(r._contentPath),volume:j}})),l&&(d.transition={element:l,$params:u,$options:{force:p}},a.user.updateNavigation()),t()}}},onTransition:function(e,t){t&&t.remove(),this.add(e)}}).Class},{"../first":53,"../player":104,"../second":147,"./style.less":158,"vigour-js/app/":174,"vigour-js/app/ui/element":176,"vigour-js/app/ui/switcher":178,"vigour-js/browser/cases":202}],158:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],159:[function(e,t,n){var i=e("vigour-js/app/ui/element"),r=e("vigour-js/app/dictionary");n.Title=new i({text:{data:"title"}}).Class;var o=r.get("text.season"),a=r.get("text.seasons"),s=r.get("text.episode"),c=r.get("text.episodes");n.Subtitle=new i({text:{data:{val:function(e){if(e&&(e=e.from),!e)return"";if(e.subtitle)return e.subtitle.val||"";if(e.number){var t=e._parent._parent,n=t.number?t.number.val:e.season&&e.season.val||(0|t._name)+1;if("seasons"===e._parent._name)return o.val+" "+e.number.val;if(!isNaN(n))return o.val+" "+n+" "+s.val+" "+e.number.val}if(e.seasonCount&&e.episodeCount){var i=e.seasonCount.val,r=e.seasonCount.val>1?a.val:o.val,l=e.episodeCount.val,u=e.episodeCount.val>1?c.val:s.val;return i+" "+r+" "+l+" "+u||""}return""},listen:["seasonCount","episodeCount","subtitle","number","season"]},listen:r}}).Class,n.TitleSubtitle=new i({title:new n.Title,subtitle:new n.Subtitle}).Class,n.Description=new i({text:{data:"media.description","default":{dictionary:"text.noDescription"}}}).Class,n.highlight=function(e){var t=e.charAt(0),n=e.slice(1),i="i"!==t?t.toUpperCase()+n:t+n.charAt(0).toUpperCase()+n.slice(1);return'<span class="text-highlight">'+i+"</span>"}},{"vigour-js/app/dictionary":173,"vigour-js/app/ui/element":176}],160:[function(e,t,n){function i(e,t){t.focused=e,t.corrected||(t.corrected=l.h.val);var n=f.y(e),i=t.corrected-380;if(n>i){{t.y.val}p.ios||(t.focusing=!0),t.y.animation||p.ios||(t.y={animation:{time:10,easing:"outCubic",complete:function(){this.focusing=!1}}}),t.y={sub:n-i-10}}}function r(e){var t=this.node;document.body.scrollTop=0,window.requestAnimationFrame(function(){document.body.scrollTop=0});var n=this.parent.input;if(l.blockResize=!0,this.parent.css="ui-item ui-input active focus",t.value===this.text.val&&(t.value=""),n&&"password"===n.val&&(t.setAttribute("type","password"),t.setAttribute("autocapitalize","off")),v){var i=this,r=function(){o.call(i),t.removeEventListener("blur",r,!0)};t.addEventListener("blur",r,!0)}}function o(){if(!this.focusing){window.scrollTo(0,0),l.blockResize=!1;var e,t=this.parent.input;p.touch&&t&&t.holder&&(e=t.holder.val,e&&!e.focusing&&(e.y={sub:0})),""===this.node.value?(this.node.value=this.text.val,this.parent.css="ui-item ui-input",t&&"password"===t.val&&this.node.setAttribute("type","text")):this.parent.css="ui-item ui-input active"}}function a(e){var t,n=this.node.type,i=this.parent,r=this.node.value;if("text"!==n||i.input){t=i.input.val,"password"===t?i.verified=r.length>5:"email"===n||"email"===t?(i.verified=/^[a-zA-Z0-9._%+-]+@[A-Za-z0-9.-]+\.[a-zA-Z]{2,4}$/.test(r),this.node.value=r.trim()):i.verified=i.input&&"phone"===i.input.val?/^(\d){6,12}$/.test(r):i.input&&i.input.verify&&1===i.input.verify.__t?r>i.input.verify[0]&&r<i.input.verify[1]:r.length>2,i.input&&i.input.keyup&&"function"==typeof i.input.keyup._val&&i.input.keyup._val.call(i,i.verified);var o,a,s,c=this._form!==!1&&(this._form||(this._form=this.checkParent("verify"))||!1),l=c&&c.verify;if(l){for(a=this._righticon||(this._righticon=this.checkParent("topbar.holder.righticon",!0)),s=l.length-1;s>=0;s--)c[l[s]._val].verified||(o=!0,c.verificationError=l[s]);a.css=o?"pointer":"pointer verified",a.verified=!o,c.verified=!o}}}e("./style.less");{var s=e("vigour-js/app/ui/element"),c=e("../icon"),l=e("vigour-js/app/"),u=e("vigour-js/browser/events"),p=e("vigour-js/browser/cases"),f=(e("vigour-js/util"),e("vigour-js/browser/events/offset")),d=e("vigour-js/browser/ua"),h=new s({css:"ui-item ui-input",lefticon:new c({icon:"email"})}),v="firefox"===d.browser;e("vigour-js/app/dictionary")}h.extend({input:function(e){var t,n=e.val,i=e&&e.text&&e.text.val;n&&(t={email:{text:i||"text.email",msg:"text.account.invalid.email"},password:{text:i||"text.password",msg:"text.invalid.password",icon:"locked"},phone:{text:"text.cellphone",msg:"text.invalid.phoneWord"}},this.txt.text=t[n]?{dictionary:t[n].text}:n,this.lefticon.icon=t[n].icon||n),"phone"===n?this.txt.attr={type:"tel",pattern:"d*"}:"age"===n&&(this.txt.attr={type:"tel",pattern:"d*"})}},{name:"key",get:function(){return this.input&&this.input.val||this.txt.attr&&this.txt.attr.type.val}},{name:"msg",get:function(){return map[this.key].msg}},{name:"val",get:function(){return this.txt.node.value}}),t.exports=n=h.set({txt:{node:"input",attr:{type:"text",autocapitalize:"off"},text:"search",css:"inactive",events:{focusin:r,focusout:o,keyup:v&&r,input:a,move:function(e){e.preventDefault()},click:function(e){e&&e.preventDefault(),l.blockResize=!0,this.node.focus(),v&&r.call(this)},down:function(e){if(!u.click.block){var t=this,n=t.parent.input&&t.parent.input.holder;p.touch&&n&&n.val&&i(t,n.val)}}}},events:{out:function(e){"INPUT"!==e.target.tagName&&this.txt.node.blur()}}}).Class,u.confirm={val:{up:function(e,t,n){e.preventDefault(),t.call(this,e,n)}}},n.Form=new s({node:"form",submitfix:{node:"input","attr.type":"submit"},events:{submit:function(e){e.preventDefault(),p.touch&&!this.fDown||!this.done||this.done()},down:function(e){this.fDown=!0}}}).Class,n.Form.base.extend({verify:function(){}})},{"../icon":93,"./style.less":162,"vigour-js/app/":174,"vigour-js/app/dictionary":173,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202,"vigour-js/browser/events":220,"vigour-js/browser/events/offset":221,"vigour-js/browser/ua":233,"vigour-js/util":315}],161:[function(e,t,n){function i(e,t){p.touch&&(u.click.block=1===t?!1:!0,e.items.opacity=t,e.favos.opacity=t)}function r(e,t){if(e&&2===e.__t)throw new Error("object in search");if(e=e&&e.trim()||"",e.length)t.favos.display="none",t.search.clear.icon="closesmall";else{t.favos.display="block",t.search.clear.icon="empty";var n=e?e.trim():"";t.search.field.data.search.$userOrigin=n}for(var i="",r=0,o=e.length;o>r;r++){var a=e[r];("$"===a||"S"===a.toUpperCase())&&(a="(\\$|s)"),i+="\\s*"+a}i+="\\s*",t.items.filter&&(t.items.filter.filter={condition:{title:{$contains:i}},sort:"title"})}function o(e,t,n){this.css="ui-search focus",n||(f.blockResize=!0,i(this.parent,.5),this.field.node.focus(),this._active=!0)}function a(e,t){var n=t?"":e.field.node.value.trim();n.length||(e.css="ui-search",e.clear.icon="empty",e.field.node.value=n,r(n,e.parent)),i(e.parent,1),e._active=!1,f.blockResize=!1}e("./style.less");var s=e("vigour-js/app/ui/element"),c=e("../icon"),l=e("vigour-js/app/dictionary"),u=e("vigour-js/browser/events"),p=e("vigour-js/browser/cases"),f=e("vigour-js/app/");t.exports=new s({node:"form",css:"ui-search",name:"search",w:{val:210,touch:{val:f.w,sub:30}},icon:new c({icon:"search",h:30,placeholder:{"text.dictionary":"text.search"}}),field:{node:"input",attr:{type:"text",name:"search",listen:l.get("text.search"),placeholder:l.get("text.search")},text:{data:function(e){if(e){var t=e.search.val;return(this.first||t)&&(this.first=!0),this.first&&(r(t,this.parent.parent),void 0===t||t===!1?a(this.parent):this.parent.fromDown?this.parent.fromDown=!1:o.call(this.parent,!1,!1,!0)),t||""}return""}},events:{keydown:function(e){13==e.keyCode&&e.preventDefault()},keyup:function(e){if(9!==e.keyCode){var t=this.node.value.length?this.node.value.trim():"";this.data.search.$userOrigin=t}}}},clear:new c({node:"form",icon:"empty",events:{down:function(e){if(e.prevent=!0,this.parent.fromDown=!0,this.parent.field.data.search.$userOrigin="",p.touch){var t="",n=this.parent.field.node;n.value=t,o.call(this.parent),r(t,this.parent.parent)}else a(this.parent,!0)}}}),cancel:{"text.dictionary":"text.cancel",events:{down:function(e){e.prevent=!0,a(this.parent,!0),this.parent.data.search.$userOrigin=""}}},events:{click:o,out:function(e){this._active&&a(this)}}})},{"../icon":93,"./style.less":162,"vigour-js/app/":174,"vigour-js/app/dictionary":173,"vigour-js/app/ui/element":176,"vigour-js/browser/cases":202,"vigour-js/browser/events":220}],162:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],163:[function(e,t,n){window.name="mtvplay",t.exports=n=e("vigour-js/util/config").inject({"repository.branch":"branches"},e("vigour-js/util/config/ua")),n(function(e){for(var t in e)n[t]=e[t];n.parsed=!0},!1,window["package"],!0)},{"vigour-js/util/config":306,"vigour-js/util/config/ua":307}],164:[function(e,t,n){var i,r=e("./config");if(r.development&&r.development.button&&(i=e("vigour-js/util/debug")["native"](!1,!1,function(e){},"build")),!i){var o=e("vigour-js/browser/cases"),a=e("vigour-js/browser/ua");~window.location.href.indexOf("$tv")&&(o.tv=!0,a.device="tv"),~window.location.href.indexOf("$chromecast")&&(o.chromecast=!0,a.device="chromecast"),"tv"===a.device&&"linux"===a.platform&&(a.platform="lg"),e("vigour-js/app/"),(o.tv||o.chromecast)&&(o.$iplogin=!0),e(o.chromecast?"./platform/cast.js":o.tv?"./platform/tv.js":"./platform/all.js")}},{"./config":163,"./platform/all.js":332,"./platform/cast.js":333,"./platform/tv.js":334,"vigour-js/app/":174,"vigour-js/browser/cases":202,"vigour-js/browser/ua":233,"vigour-js/util/debug":308}],165:[function(e,t,n){"use strict";t.exports=e("./lib/core.js"),e("./lib/done.js"),e("./lib/es6-extensions.js"),e("./lib/node-extensions.js")},{"./lib/core.js":166,"./lib/done.js":167,"./lib/es6-extensions.js":168,"./lib/node-extensions.js":169}],166:[function(e,t,n){"use strict";function i(e){function t(e){return null===c?void u.push(e):void a(function(){var t=c?e.onFulfilled:e.onRejected;if(null===t)return void(c?e.resolve:e.reject)(l);var n;try{n=t(l)}catch(i){return void e.reject(i)}e.resolve(n)})}function n(e){try{if(e===p)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void o(t.bind(e),n,i)}c=!0,l=e,s()}catch(r){i(r)}}function i(e){c=!1,l=e,s()}function s(){for(var e=0,n=u.length;n>e;e++)t(u[e]);u=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");var c=null,l=null,u=[],p=this;this.then=function(e,n){return new p.constructor(function(i,o){t(new r(e,n,i,o))})},o(e,n,i)}function r(e,t,n,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=i}function o(e,t,n){var i=!1;try{e(function(e){i||(i=!0,t(e))},function(e){i||(i=!0,n(e))})}catch(r){if(i)return;i=!0,n(r)}}var a=e("asap");t.exports=i},{asap:170}],167:[function(e,t,n){"use strict";var i=e("./core.js"),r=e("asap");t.exports=i,i.prototype.done=function(e,t){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(e){r(function(){throw e})})}},{"./core.js":166,asap:170}],168:[function(e,t,n){"use strict";function i(e){this.then=function(t){return"function"!=typeof t?this:new r(function(n,i){o(function(){try{n(t(e))}catch(r){i(r)}})})}}var r=e("./core.js"),o=e("asap");t.exports=r,i.prototype=r.prototype;var a=new i(!0),s=new i(!1),c=new i(null),l=new i(void 0),u=new i(0),p=new i("");r.resolve=function(e){if(e instanceof r)return e;if(null===e)return c;if(void 0===e)return l;if(e===!0)return a;if(e===!1)return s;if(0===e)return u;if(""===e)return p;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new r(t.bind(e))}catch(n){return new r(function(e,t){t(n)})}return new i(e)},r.all=function(e){var t=Array.prototype.slice.call(e);return new r(function(e,n){function i(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){i(o,e)},n)}t[o]=a,0===--r&&e(t)}catch(c){n(c)}}if(0===t.length)return e([]);for(var r=t.length,o=0;o<t.length;o++)i(o,t[o])})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){e.forEach(function(e){r.resolve(e).then(t,n)})})},r.prototype["catch"]=function(e){return this.then(null,e)}},{"./core.js":166,asap:170}],169:[function(e,t,n){"use strict";var i=e("./core.js"),r=e("asap");t.exports=i,i.denodeify=function(e,t){return t=t||1/0,function(){var n=this,r=Array.prototype.slice.call(arguments);return new i(function(i,o){for(;r.length&&r.length>t;)r.pop();r.push(function(e,t){e?o(e):i(t)});var a=e.apply(n,r);!a||"object"!=typeof a&&"function"!=typeof a||"function"!=typeof a.then||i(a)})}},i.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),n="function"==typeof t[t.length-1]?t.pop():null,o=this;try{return e.apply(this,arguments).nodeify(n,o)}catch(a){if(null===n||"undefined"==typeof n)return new i(function(e,t){t(a)});r(function(){n.call(o,a)})}}},i.prototype.nodeify=function(e,t){return"function"!=typeof e?this:void this.then(function(n){r(function(){e.call(t,null,n)})},function(n){r(function(){e.call(t,n)})})}},{"./core.js":166,asap:170}],170:[function(e,t,n){(function(e){function n(){for(;r.next;){r=r.next;var e=r.task;r.task=void 0;var t=r.domain;t&&(r.domain=void 0,t.enter());try{e()}catch(i){if(c)throw t&&t.exit(),setTimeout(n,0),t&&t.enter(),i;setTimeout(function(){throw i},0)}t&&t.exit()}a=!1}function i(t){o=o.next={task:t,domain:c&&e.domain,next:null},a||(a=!0,s())}var r={task:void 0,next:null},o=r,a=!1,s=void 0,c=!1;if("undefined"!=typeof e&&e.nextTick)c=!0,s=function(){e.nextTick(n)};else if("function"==typeof setImmediate)s="undefined"!=typeof window?setImmediate.bind(window,n):function(){setImmediate(n)};else if("undefined"!=typeof MessageChannel){var l=new MessageChannel;l.port1.onmessage=n,s=function(){l.port2.postMessage(0)}}else s=function(){setTimeout(n,0)};t.exports=i}).call(this,e("_process"))},{_process:338}],171:[function(e,t,n){function i(e,t){var n,i,r,o=e.data.get(["clients",e.clientid]);c.ios?(n="phone"===l.device?"iphone":"ipad",i="phone"===l.device?n:l.device):"appletv"===l.platform?(n="Apple TV",i="airplay"):c.chromecast?(n="Chromecast",i="chromecast",r=window.sessionId):(i=l.device,n=c.desktop?l.platform:l.platform+" "+i);var a={title:n,device:i};r&&(a.castId=r||!1),o.val=a,e.client.val=o}{var r=e("vigour-js/browser/network/cloud").inject(e("vigour-js/browser/network/cloud/datacloud"),e("vigour-js/browser/network/cloud/authenticate")),o=e("vigour-js/value"),a=e("vigour-js/data"),s=e("vigour-js/util"),c=e("vigour-js/browser/cases"),l=e("vigour-js/browser/ua");e("vigour-js/browser/animation/raf")}e("vigour-js/value/flags/process"),n.extend=s.extend(e("./values"),function(e){var t=new r(new o);c.$connected=new o(t.connected),t.client=new o,t.once("welcome",function(n){i(t,e)}),t.on("reconnect",function(){var e={};t.client.from.each(function(t){"key"!==t&&"type"!==t&&"ip"!==t&&(e[t]=this._val)}),t.client.from.on("remove",function(){Object.keys(e).length&&t.data.clients.set(t.clientid,e)})}),e.define({cloud:{get:function(){return t},set:function(e){s.isObj(e)?(e.fastLogin&&(t.fastLogin.val=!0),e.api&&(t.api.val=e.api),e.url&&(t.url.val=e.url)):t.url.val=e}}});var n=new a(t.data.get("app"),{subscription:{$:!0}});e.versionData=new o({val:n,defer:function(e,t){var n;if(this.from.version)if(console.log("hey hey hey"),window["package"]){var i=this.from.version.val,r=window["package"].version;i&&r&&(i=i.split("."),r=r.split("."),i=Number(i[1]),r=Number(r[1]||0),i>r&&(n=!0,this.clearCache(),window["package"].version=this.from.version.val))}else console.error("no window package",window["package"]);e(n?void 0:!0)}})})},{"./values":194,"vigour-js/browser/animation/raf":200,"vigour-js/browser/cases":202,"vigour-js/browser/network/cloud":228,"vigour-js/browser/network/cloud/authenticate":224,"vigour-js/browser/network/cloud/datacloud":226,"vigour-js/browser/ua":233,"vigour-js/data":236,"vigour-js/util":315,"vigour-js/value":327,"vigour-js/value/flags/process":324}],172:[function(e,t,n){var i=e("../value"),r=e("../browser/network/cloud/data"),o=e("../util");o.define(r,"_contentPath",{get:function(){var e=this._path;for(var t in e)if("shows"===e[t]||"channels"===e[t])return e.slice(t);console.error("_contentPath used on non-content data",this,e)}}),n.extend=o.extend(e("./values"),e("./cloud"),function(e){function t(){var t=e.region.val,i=e.language.val;"it"===i&&(i="en"),t&&i&&(n.val=e.cloud.data.get(["mtvData",t,i]))}var n=e.content=new i({});o.define(n,"get",function(){if(this._val&&this._val.cloud)return this._val.get.apply(this._val,arguments);throw new Error("app.content , dont have cloud data!")}),e.region.on(t),e.language.on(t),t()})},{"../browser/network/cloud/data":225,"../util":315,"../value":327,"./cloud":171,"./values":194}],173:[function(e,t,n){var i=e("../../util"),r=(e("../ui/element"),e("../../value")),o=e("../../object");r.operators._dictionary=function(e,t){return t===!1?e:t},t.exports=n=new r({}),i.define(n,"get",function(e){return n.map&&n.map[e]&&(e=n.map[e]),"string"==typeof e&&i.path(n,["responseData"].concat(e.split(".")),"")}),r.flags.dictionary={set:function(e,t){if("string"!=typeof e)this.set("_dictionary",{val:e,transform:function(e,t){if(t&&t.text)return t.text;var i=n.get(t);return i?i instanceof o?(n.once(function(){e._update()}),i.val):i:void 0}});else{var i=n.get(e);i._clearCache=!0,this.val=i}}},n._name="dictionary"},{"../../object":303,"../../util":315,"../../value":327,"../ui/element":176}],174:[function(e,t,n){function i(e){void 0===a[e]&&(a[e]=c.device===e||c.platform===e?!0:!1),r.css={addClass:a[e]?e:"not-"+e}}e("./style.less"),e("../browser/animation/easing");var r,o=e("../browser/element"),a=e("../browser/cases"),s=(e("../browser/animation"),e("../browser/events/advanced")),c=e("../browser/ua"),l=(e("../browser/animation/raf"),e("../browser/events/util"),"ios"===c.platform),u="windows"===c.platform,p=["phone","tablet","tv","desktop","ios","android","windows","mac","touch","slow","chromecast"],f=p.length-1;a.iosBrowser=l&&"standalone"in navigator&&!navigator.standalone,a.iosFull=!a.iosBrowser&&l||(l||u)&&!!window.cordova||!1,a.retina=window.devicePixelRatio>1,a.slow=u&&"phone"===c.device||c.noRaf&&c.hasTransition||l&&480===window.screen.height||"tv"===c.device,a["native"]=window.cordova?!0:!1,a.windowsMobile="windows"===c.platform&&"phone"===c.device&&!!window.cordova,r=t.exports=new o({"x,y":{val:0,clean:!0,translate:!0},node:document.body,w:window.innerWidth,h:window.innerHeight,css:"app"}),r.cases=a;var d=function(){r.blockResize?r.blockResize=!1:(r.w.val=window.innerWidth,r.h.val=window.innerHeight)};if(a.touch&&s.document.addEvent("move",function(e){s._maybescroll||s._setscroll||e.preventDefault()},"app"),"orientation"in window&&window.addEventListener("orientationchange",d),l||window.addEventListener("resize",d),window.location.hash){var h=window.location.hash.split("#")[1],v=h.split(",");for(var g in v){var m=v[g].split("=");c[m[0]]=m[1]}}for("tv"===c.device&&(a.slow=!0);f>=0;)i(p[f--])},{"../browser/animation":199,"../browser/animation/easing":197,"../browser/animation/raf":200,"../browser/cases":202,"../browser/element":205,"../browser/events/advanced":218,"../browser/events/util":222,"../browser/ua":233,"./style.less":175}],175:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],176:[function(e,t,n){var i=e("../../../browser/element");e("../../../value/flags/parent"),e("../../../value/flags/self"),e("../../../value/flags/process"),e("../../../value/flags/util"),e("../../../browser/events"),t.exports=i.inject(e("../../../browser/element/properties/collection"),e("../../../browser/element/properties"),e("../../../browser/element/properties/scrollbar"),e("../../../browser/element/properties/process"),e("../../../value/on"))},{"../../../browser/element":205,"../../../browser/element/properties":210,"../../../browser/element/properties/collection":207,"../../../browser/element/properties/process":211,"../../../browser/element/properties/scrollbar":212,"../../../browser/events":220,"../../../value/flags/parent":323,"../../../value/flags/process":324,"../../../value/flags/self":325,"../../../value/flags/util":326,"../../../value/on":329}],177:[function(e,t,n){function i(){this._spinner&&(this._spinner(),this._spinner=null)}function r(e){"none"===e.val?i.call(this):this._spinner||this.setting("render")}var o=e("../element"),a=e("../../../browser/events/util"),s=new o({"w,h":50,x:{translate:!0,val:0}});s.extend({name:"params",type:!1,set:function(e){this._params=e,this.Class.prototype._params=e}}),s.setSetting({name:"spinner",render:function(){var e=this,t=this._params||{},n=t.start||0,o=t.frames||3,s=t.rows||1,c=t.cols||0,l=t.once,u=n,p=t.steps||s*c-n||19,f=0,d=0;e.display&&!e.display._base!==e||(e.display=e.display&&e.display.val||"block"),e.display.addListener([r,e],!0),e.node.style.backgroundSize=this.w.val*c+"px auto","none"!==e.display.val&&(e._spinner=a.interval(function(){return e.node.style.backgroundPosition=-e.w.val*d+"px "+(s?-e.h.val*f:0)+"px",u++,u===p&&(u=n,l)?void i.call(e):(f=s?~~(u/c):0,void(d=u-f*c))},o))},remove:i}),t.exports=s.Class},{"../../../browser/events/util":222,"../element":176}],178:[function(e,t,n){var r=(e("vigour-js/base"),e("vigour-js/browser/element")),o=e("vigour-js/value"),a=e("vigour-js/object"),s=new r,c=e("vigour-js/browser/cases");o.flags.$params={set:function(e){this.params=e}},o.flags.$options={set:function(e){this.options=e}},s.extend({loader:{},animation:{},delay:{},done:{},force:{},backFallback:{cache:!1},onTransition:{cache:!1},transition:{cache:!1,set:function(e){var t,n,o,s=e.element&&e.element._val,l=e.params,u=e.options||{},p=u&&u.force,f=this.children,d=this._swElem||f[0],h=s&&s.base,v=f.length,g=this;if(v>1)for(i=v-1;i>=0;i--)n=f[i],n!==d&&n.remove();if(this._loading&&(this._loading[1].removeListener(this._loading[0]),this._loading=void 0),h&&h instanceof r||s===r)if(!p&&this._swElem&&this._swElem instanceof s)this._swElem.set(l);else{if(o=this._direction=e.direction&&e.direction._val,u&&u.loader&&!u.loader.$loaded){if(!this.loader)return void console.error("no loader defined!");

var m=new this.loader._val.Class;if(u.loader instanceof a){u.done=function(){t||(t=new s(l)),m._remove&&(u.done=void 0,u.delay=c.tablet?400:200,g._swElem instanceof s?g._swElem.set(l):g.onTransition._val.call(g,t,g._swElem,0,u),u.delay=void 0)};{u.loader._path}this._loading=[function(){m._remove=!0,t&&u.done&&u.done()},u.loader],this._loading[1].is("loaded",this._loading[0])}else u.done=function(){t||(t=new s(l)),u.done=void 0,u.delay=200,g._swElem instanceof s?g._swElem.set(l):g.onTransition._val.call(g,t,g._swElem,0,u),u.delay=void 0};u.loader=void 0,this.onTransition._val.call(this,m,d,o,u)}else t=new s(l),u.done=void 0,u.delay=void 0,u.loader=void 0,this.onTransition._val.call(this,t,d,o,u);void 0!==u.animation&&(u.animation=void 0),u.delay&&(u.delay=void 0)}else l?console.error("only params defined!",l):l&&console.error("no params and no element defined!")}}}),s.define({back:function(){this.backFallback._val.call(this)},add:function(e,t){this._swElem=e,r.prototype.add.apply(this,arguments)}}),s.extend({name:"on",set:function(e){},remove:function(){this._loading&&(this._loading[1].removeListener(this._loading[0]),this._loading=null),this._swTimer&&clearTimeout(this._swTimer),this._timer&&clearTimeout(this._timer),this.on.$remove&&this.on.$remove.update()},"new":function(){this.on.$new&&this.on.$new.update()}}),t.exports=(new s.Class).Class},{"vigour-js/base":195,"vigour-js/browser/cases":202,"vigour-js/browser/element":205,"vigour-js/object":303,"vigour-js/value":327}],179:[function(e,t,n){function i(e,t,n,i,r){var l=r.done,u=r.animation===!1,p=r.delay;n?(o(e,t,n),u?(s(e,n),o(e,t),l&&(p?c(e,function(){r.done&&r.done()},p):l())):p?c(e,function(){a(e,n,r)},p):a(e,n,r)):o(e,t,!1,l)}function r(e,t,n,i,r){var a,p,f=20,d=l.w.val,h=1===i;h?(a=d,p=d/-3):(a=d/-3,p=d),u.windows?(t.x={translate:!0,val:a},n.x={translate:!0,val:0},window.requestAnimationFrame(function(){t.x=0,n.x=p,c(e,function(){s(e,n,r.done)},210)})):(t.x={val:0,animation:{start:a,time:f,delay:1,easing:"outCubic",done:function(){s(e,n,r.done)}}},n.x={val:p,animation:{time:f,delay:2,easing:"outCubic"}}),h?o(e,t):o(e,t,n)}function o(e,t,n,i){t&&e.add(t,n),i&&i()}function a(e,t,n){t.opacity=0,t.node.pointerEvents="none",c(e,function(){s(e,t,n.done)},200)}function s(e,t,n){t&&t.remove(),n&&n()}function c(e,t,n){e._swTimer&&(clearTimeout(e._swTimer),e._swTimer=null),e._swTimer=setTimeout(function(){t.call(e),e._swTimer=null},n)}var l=e("vigour-js/app"),u=e("vigour-js/browser/cases"),p=e("vigour-js/util");n.extend=p.extend(function(e){e.set({onTransition:{defer:function(e){n[this._val]&&(this._val=n[this._val]),e()}}})}),n.slide=function(e,t,n,o){n&&t?r(this,e,t,n,o):i(this,e,t,n,o)},n.fade=function(e,t,n,r){i(this,e,t,n,r)}},{"vigour-js/app":174,"vigour-js/browser/cases":202,"vigour-js/util":315}],180:[function(e,t,n){function i(e){var t=e+"Sibling";return function(){if(this._node){var n=this._node[t];if(n&&(n=n.base),n&&n.events&&n.events.$focus&&(!n.display||"none"!==n.display.val))return n;if(n&&n._node){var i="$"+("previous"===e?"prev":e);return n[i].val}}}}var r=e("../../../browser/element"),o=(e("../../../browser/cases"),e("../../../browser/animation"),e("../../../browser/events/advanced")),a=e("../../../browser/ua"),s=(e("../../../browser/animation/raf"),e("../../../util")),c=e("../../../value"),l=(e("../../"),e("../../../browser/network/url")),u="lg"===a.platform&&"tv"===a.device,p=0;l.on(function(){var e=l.string.val.split("/"),t=Number(e[e.length-1]);if(p>t){p=t;var n=o.$focused&&o.$focused.val;n&&n.events&&n.events.back&&n.events.back._val.call(n,{preventDefault:function(){}})}}),document.addEventListener("keyup",function(e){e.preventDefault()}),document.addEventListener("keydown",function(e){var t,n=o.$focused&&o.$focused.val;if(n&&!n._node&&(o.$focused.val=!1),n&&n.events){var i={arrowLeft:[37,4],arrowRight:[39,5],arrowDown:[40,29461],arrowUp:[38,29460],click:[13,29443]};u||(i.back=[8,88,"VK_BACK"]),t=n.events;for(var r in i)if(t[r]&&s.checkArray(i[r],e.keyCode)!==!1)return u&&(cached=l.string.val,l.val=p++),e.preventDefault(),void t[r]._val.call(n,e)}}),o.arrowLeft={val:function(e,t,n){t.call(this,e,n)}},o.arrowRight={val:function(e,t,n){t.call(this,e,n)}},o.arrowUp={val:function(e,t,n){t.call(this,e,n)}},o.arrowDown={val:function(e,t,n){t.call(this,e,n)}},o.back={val:function(e,t,n){t.call(this,e,n)}},s.define(o,"$focused",{value:new c}),n.$focused=o.$focused,o.$focus={val:function(e,t,n){t.call(this,e,n)}},s.define(r,"$focus",function(e,t){if(this.events&&this.events.$focus&&(o.$focused.val&&(o.$focused.val._$focused=null,o.$focused.val._node&&o.$focused.val.events.$focus._val.call(o.$focused.val,!1,!0),o.$focused.val=!1),!t)){o.$focused.val=this;var n=this;n._$focused=!0;var n=o.$focused.val;n&&n.events&&n._node&&n.events.$focus._val.call(n,!0,e)}}),r.base.extend({$prev:function(){},$next:function(){}}),r.base.set({$prev:i("previous"),$next:i("next")})},{"../../":174,"../../../browser/animation":199,"../../../browser/animation/raf":200,"../../../browser/cases":202,"../../../browser/element":205,"../../../browser/events/advanced":218,"../../../browser/network/url":232,"../../../browser/ua":233,"../../../util":315,"../../../value":327}],181:[function(e,t,n){var i=e("../../util");e("../../value/flags/process"),n.extend=i.extend(function(e){e.extend({id:function(t){var n=t.val;n&&this.cloud?this.data=this.cloud.data.get(["users",n]):n||(console.log("base.mockdata"),this.data=e.mockdata)},data:{val:e.mockdata,set:function(e){var t=this;if(t.instances&&t.instances.length&&(t=t.instances[0]),e.from.cloud){if(t.___c!==e.from){t.initialised=null,t.___c=e.from;for(var n in t.on.user)t.on.user[n].call(t,n);t.initialised=!0}}else{if(t.___c===!1)return;t.___c=!1;for(var n in t.on.user)t.on.mock[n].call(t,n);t.initialised=null}}}})})},{"../../util":315,"../../value/flags/process":324}],182:[function(e,t,n){e("../../value/flags/self"),e("../../value/flags/process"),e("../../value/flags/util");var i=e("../../util"),r=(e("../../value"),e("../../base")),o=(e("../../data"),e("../../object").inject(e("./origin")),e("monotonic-timestamp"),{}),a=e("./mockdata"),s=new a({}),c=r.prototype.extend,l=new r({defaultType:e("./type")});l.define({subscriptions:{get:function(){return o},set:function(e){e&&i.merge(o,e)}},mockdata:{get:function(){return s},set:function(e){e&&s.merge(e)}},on:{value:{mock:{},user:{}}},extend:function(e){e.mock&&(this.mockdata=e.mock);var t=c.apply(this,arguments);return void 0!==e.val&&(this[e.name]=e.val),e.on&&("function"==typeof e.on?e.on.call(this,e.name):this.data&&this.data.cloud?e.on.user&&e.on.user.call(this,e.name):e.on.mock&&e.on.mock.call(this,e.name)),t}}),n.extend=i.extend(e("../cloud"),function(t){var n=t.user=(new l.Class).inject(e("./set"),e("./id"));n.parent=t,n.cases=t.cases,n.cloud=t.cloud})},{"../../base":195,"../../data":236,"../../object":303,"../../util":315,"../../value":327,"../../value/flags/process":324,"../../value/flags/self":325,"../../value/flags/util":326,"../cloud":171,"./id":181,"./mockdata":183,"./origin":188,"./set":189,"./type":191,"monotonic-timestamp":271}],183:[function(e,t,n){var i=e("../../util"),r=e("../../data");t.exports=n=r["new"](),i.define(n,"get",function(e,t,n){return this.path(e instanceof Array?e:String(e).split("."),void 0!==t?t:{},!1,!1,!1,!1,!0,!n)})},{"../../data":236,"../../util":315}],184:[function(e,t,n){function i(){var e=this,t=e._base,n=r(e);n&&(t.setReceiver(n),e.removeListener(i))}function r(e){e=o(e);var t;return e.each(function(){var e=this.from;return"chromecast"===e.device.val?(t=e,!0):void 0}),t}function o(e){for(;e&&4===e.__t&&!e._filter;)e=e._val;return e}var a,s=e("vigour-js/util/config").chromecast,c=e("vigour-js/browser/cases"),l=e("vigour-js/browser/ua"),u=e("vigour-js/value"),p=e("vigour-js/object"),f=e("vigour-js/data"),d=(f["new"]({merge:!0,mixed:4}),"deviceDidComeOnline"),h="deviceDidGoOffline";if("undefined"==typeof v)var v=window.chrome||{};t.exports=n=window.curn=new u({api:{defer:function(e,t){var i=this,r=c["native"]||c.desktop&&"chrome"===l.browser;if(!r)return!0;var o=t[0];if("error"!==o){if(!r||a)return!0;if(c["native"])setTimeout(function(){n.init(s.id)},0),a=!0,e();else{{var u=document.createElement("script");u.onerror=function(){console.error("!!! script.onerror !!!"),i.type="script",i.clearCache(),i.val=t[0]="error",e()}}u.src=s.web,u.id="chromecast-script",window.__onGCastApiAvailable=function(r,o){r?(n.init(s.id),a=!0,e()):(i.clearCache(),i.val=t[0]="error",e())},document.getElementsByTagName("head")[0].appendChild(u)}}}},clients:!1,session:!1,apiDefer:function(e,t){var n=this,i=t[0];"connected"===n.session.status?e("success"):i!==!0||e(!0)}}),n.devices=new p({}),n.available=new p({}),n.setReceiver=function(e,t){var r=n.user,o=r.parent&&r.parent.loading;r.candidates.removeListener(i),r.candidates.on(i),o&&(o.val=!0),e.set("loading",!0),n.connect(e,function(n,i){return o&&(o.val=!1),e.set("loading",!1),n?console.error("CHROMECAST setReceiver connect error",n):void(t&&t(i))})},n.available.on(function(){var e,t={},i=n.user;i&&r(i.candidates)||(this.each(function(i){t[i]=!0,n.devices[i]||(e=!0,n.devices.set(this._name,this))}),n.devices.each(function(n){t[n]||(e=!0,this.remove())}))}),n._name="chromecast",n.init=function(e){if(this._init=!0,window.GoogleCast)window.GoogleCast.startScanForDevices(e);else if(v.cast&&v.cast.SessionRequest){var t,i;c["native"]?(i=[],t=function(){var e=v.cast.getRouteListElement().innerHTML;if(e){for(var t=e.split("><"),r=[],o=t.length-1;o>=0;o--){var a=t[o].split('"'),s=a[3];~i.indexOf(s)||n.dispatchEvent(d,{id:s,friendlyName:a[4].split("</li>")[0].substring(1)}),r.push(s)}for(o=i.length-1;o>=0;o--)s=i[o],~r.indexOf(s)||n.dispatchEvent(h,{id:s});i=r}}):t=function(e){e===v.cast.ReceiverAvailability.AVAILABLE,n.dispatchEvent("available"===e?d:h)};var r=[v.cast.Capability.VIDEO_OUT,v.cast.Capability.AUDIO_OUT],o=v.cast.timeout.requestSession,a=new v.cast.SessionRequest(e,r,o),s=function(e){n.session=e,n.val=e.sessionId},l=v.cast.AutoJoinPolicy.TAB_AND_ORIGIN_SCOPED,u=v.cast.DefaultActionPolicy.CREATE_SESSION,p=new v.cast.ApiConfig(a,s,t,l,u);v.cast.initialize(p,function(){},function(e){console.error("CHROMECAST cast:onError: "+JSON.stringify(e))})}},n.connect=function(e,t){var n=e.castid.val,i=function(e){console.log("CHROMECAST connect success!",e),t&&t(null,e)},r=function(e){console.log("CHROMECAST connect error!",e),t&&t(e)};if(window.GoogleCast)window.GoogleCast.connectToDevice(n,i);else if(c["native"]){try{v.cast._emitConnecting()}catch(o){console.error("CHROMECAST Error in _emitConnecting "+o)}try{cordova.exec(i,r,"Chromecast","selectRoute",[n])}catch(o){console.error("CHROMECAST cordova.exec crash",o)}}else v.cast&&v.cast.requestSession(i,r)},n.dispatchEvent=function(e,t){var i=t?t.id:"unknown",r=i.split(".").join("_").split("/").join(""),o=t&&t.friendlyName?t.friendlyName:i,a={};"unknown"===o&&(o="Chromecast"),"deviceDidComeOnline"===e?(a[r]={title:o,device:"chromecast",cast:"chrome",castid:i},n.available.val=a):"deviceDidGoOffline"===e&&n.available[i]&&(a[i]=null,n.available.val=a)},window.GoogleCast&&(window.GoogleCast.dispatchEvent=function(e,t){n.dispatchEvent(e,t)})},{"vigour-js/browser/cases":202,"vigour-js/browser/ua":233,"vigour-js/data":236,"vigour-js/object":303,"vigour-js/util/config":306,"vigour-js/value":327}],185:[function(e,t,n){function i(e){e=r(e);var t;return e.each(function(){return t="chromecast"===this.from.device.val}),t}function r(e){for(;e&&4===e.__t&&!e._filter;)e=e._val;return e}var o=e("vigour-js/util"),a=e("./chrome");n.extend=o.extend(function(e){a.user=e,e.extend({cast:{type:!1,val:{}}}),e.cast.chrome=a,e.candidates.on(function(){o.disjoin(a.devices,e.candidates,"device"),i(e.candidates)||a.available.each(function(e){a.devices[e]||(didset=!0,a.devices.set(e,this))}),e.devices._val._update()}),a.available.on(function(){o.disjoin(a.devices,e.candidates,"device")}),e.devices._val.$sources.push(a.devices)})},{"./chrome":184,"vigour-js/util":315}],186:[function(e,t,n){function i(){this.clients.update()}function r(){var e=this,t=e.data._val,n=t.get("clients"),r=e.clients._val;e.clients=n,n.addListener([i,e],!0),r&&r.removeListener(i,e);var o=e.candidates&&e.candidates._val,a=e.candidates=new b(n,{condition:{device:{$contains:"(desktop)|(tv)|(cast)|(tablet)|(airplay)"},key:{$exists:!0,$ne:this.cloud.clientid}}});a.on(function(){e.candidates.update()}),o&&o.remove();var s=e.siblings&&e.siblings._val,c=e.siblings=new b(n,{condition:{key:{$exists:!0,$ne:this.cloud.clientid}}});c.on(function(){e.siblings.update()}),s&&s.remove()}function o(e){var t=this;O&&(O.removeListener(s,t),O=null),A&&(A.removeListener(c,t),A=null);var n=t.data._val;t.activeClient=n.get("activeClient",{}),t.activeClient.$userOrigin=t.cloud.client.from}function a(){var e=this;A&&(A.removeListener(c,e),A=null);var t=e.data._val,n=t.get("activeClient",{});if(O&&O.removeListener(s,e),O=n,O.addListener([s,e],!0),e.activeClient=n,_.tv){var i=n.from;i&&"activeClient"!==i._name?e.activeClient.update():e.activeClient.$userOrigin=e.cloud.client.from}else _.chromecast?e.activeClient.update():e.activeClient.$userOrigin=e.cloud.client.from;e.hasCandidates.val&&m(e)}function s(e,t,n,i,r){var o=this;e._removed&&(A&&A.removeListener(c,o),A=e._parent,A.addListener([c,o],!0))}function c(e,t,n,i,r,o){var a=this,l=e;l.activeClient&&(A.removeListener(c,a),A=null,O=l.activeClient,O.addListener([s,a],!0),a.activeClient=l.activeClient)}function l(){var e=this;T&&T.removeListener(f,e),$&&$.removeListener(p,e);var t=e.data._val;e.receiverClient=t.get("receiverClient",!1)}function u(){var e=this;T&&(T.removeListener(f,e),T=null);var t=e.data._val,n=t.get("receiverClient",{});if($&&$.removeListener(p,e),$=n,$.addListener([p,e],!0),e.receiverClient=n,_.tv){var i=e.activeClient.from;i&&2===i.__t&&i!==e.cloud.client.from&&!e.hasReceiver.val&&e.setReceiver(e.cloud.client.from)}else _.chromecast&&e.setReceiver(e.cloud.client.from)}function p(e,t,n,i,r){var o=this;e._removed&&(T&&T.removeListener(f,o),T=e._parent,T.addListener([f,o],!0))}function f(e,t,n,i,r,o){var a=this,s=e;s.receiverClient&&(T.removeListener(f,a),T=null,$=s.receiverClient,$.addListener([p,a],!0),a.receiverClient=s.receiverClient)}function d(){var e=this;v(e)}function h(){var e=this;v(e)}function v(e){var t=e.data._val,n=t.get("receiver",{});e.receiver={volume:n.get("volume",1),media:n.get("media",!1),playing:n.get("playing",!1)}}function g(e,t){for(;t&&4===t.__t&&!t._filter;)t=t._val;if(!t)return console.error("could not determine list to select from");var n;return t.each(function(){var t=this._val;if(!t||t._removed||!t.device)return console.error("bad client","path:",t&&t._path,"client:",t&&t.raw||t);if(t!==e.activeClient.from){var i=t.device.val;if(S.test(i)&&(!t.token||t.token.val===e.token.val))return n=t,E.test(i)?!0:void 0}}),n}function m(e){e.candidates._val.each(function(){var t=this.from;"tv"!==t.device.val||t.token&&t.token.val||(t.set("token",e.token.val),e.hasReceiver.val||e.setReceiver(t))})}var y=e("vigour-js/util"),_=(e("vigour-js/value"),e("vigour-js/browser/cases")),b=e("vigour-js/data").inject(e("vigour-js/data/selection")),w=e("vigour-js/object/compound"),k=e("vigour-js/browser/events"),x=e("vigour-js/browser/ua"),j=e("vigour-js/browser/animation/raf"),C=e("vigour-js/object");C.inject(e("vigour-js/value/length"));var S=/(desktop)|(tv)|(cast)|(tablet)|(airplay)/i;_.$isCandidate=S.test(x.device);var E=/(tv)|(cast)|(airplay)/i;e("vigour-js/value/flags/process"),n.extend=y.extend(function(t){var n=t.parent.inject(e("../../content")).content;if(n.on("self",function(){t.token.val&&t.receiver.media.val&&t.receiver.media.from!==t.receiver.media&&t.receiver.media.from!==n.get(t.receiver.media.from._contentPath)&&(t.receiver.media.$userOrigin=n.get(t.receiver.media.from._contentPath))}),t.extend({receiver:{mock:{receiver:{volume:1,media:!1,playing:!1}},subscription:{receiver:{volume:!0,playing:!0,media:{$:!0}}},on:{mock:d,user:h}},clients:{subscription:{clients:{$:{$:!0}}},on:{mock:r,user:r}},candidates:{val:{}},siblings:{val:{}},receiverClient:{val:{},on:{mock:l,user:u},subscription:{receiverClient:{$:!0}}},activeClient:{val:{},mock:{activeClient:!0},subscription:{activeClient:{$:!0}},on:{mock:o,user:a}}}),t.extend({devices:{val:new w(t.siblings)}}),t.extend({hasReceiver:{val:{val:t.receiverClient,transform:function(e,n){var i=t.receiverClient.from;return i&&!i._removed&&i.cloud&&"clients"===i._path[0]||0}}},isReceiver:{val:{defer:function(e,n){var i=n[2]||this._updateOrigin;if(!i||!i._prop&&"receiverClient"!==i._name)return!0;var r=n[1];"cleanup"!==r&&(t._handleOldIsReceiver&&(!t._wasReceiver||t.hasReceiver.val||t.isActive.val||t.setReceiver(t.cloud.client.from),t._handleOldIsReceiver=null),this.clearCache(),t._wasReceiver=this.val),e()},val:t.receiverClient,transform:function(e,n){var i=t.receiverClient.from;return i&&!i._removed&&i.cloud&&i===t.cloud.client.from||0}}},hasCandidates:{val:{val:t.candidates.$length,$convertType:"boolean"}},hasDevices:{val:{val:t.devices.$length,$convertType:"boolean"}},isActive:{val:{defer:function(e,n){var i=n[2]||this._updateOrigin;(!i||!i._prop&&"activeClient"!==i._name)&&e(!0);var r=n[1];r&&"cleanup"!==r&&(t._handleOldIsActive&&(!t._wasActive||t.activeClient.$userOrigin&&t.activeClient.$userOrigin._val||(t.activeClient.$userOrigin=t.cloud.client._val),t._handleOldIsActive=null),this.clearCache(),t._wasActive=this.val),e()},val:t.activeClient,transform:function(e,n){var i=t.activeClient.from;return i&&i.val===!0||i===t.cloud.client.from||0}}},setReceiver:{type:!1,val:function(e){var t=this;if(e=e.from){var n=e.cast&&e.cast.val;n?t.cast[n].setReceiver(e):(e.set("token",t.token.val),t.receiverClient.$userOrigin=e)}}}}),!_.chromecast){var i=_.tv?"keydown":"down";k.document.addEvent(i,function(){!t.cloud.client._val||_.$isFullscreen&&_.$isFullscreen.val||(t.activeClient.$userOrigin=t.cloud.client.from)})}t.cloud.on("welcome",function(){t.cloud._status>2&&(t._handleOldIsActive=!0,t._handleOldIsReceiver=!0,t.cloud.data.once(function(){t.isActive.update(),t.isReceiver.update()}))}),t.isActive.on(!0,function(){var e=t.isReceiver.val;if(t.hasCandidates.val){if(e||!t.hasReceiver.val){var n=g(t,t.candidates);n?j(function(){t.setReceiver(n)}):e&&(t.receiverClient.$userOrigin=null)}}else e&&(t.receiverClient.$userOrigin=null)}),_.$isCandidate&&t.hasReceiver.on(0,function(e,n,i){n===t.cloud.stamp&&(t.isActive.val||j(function(){var e=g(t,t.clients);e===t.cloud.client.from&&t.setReceiver(e)}))}),t.iplogin.val||t.candidates.on(function(e,n,i,r,o){t.hasCandidates.val&&t.isActive.val&&t.initialised&&m(t)}),_.$isActive=t.isActive,_.$hasDevices=t.hasDevices,_.$hasReceiver=t.hasReceiver,_.$isReceiver=t.isReceiver});var O,A,T,$},{"../../content":172,"vigour-js/browser/animation/raf":200,"vigour-js/browser/cases":202,"vigour-js/browser/events":220,"vigour-js/browser/ua":233,"vigour-js/data":236,"vigour-js/data/selection":237,"vigour-js/object":303,"vigour-js/object/compound":300,"vigour-js/util":315,"vigour-js/value":327,"vigour-js/value/flags/process":324,"vigour-js/value/length":328}],187:[function(e,t,n){{var i=e("vigour-js/util"),r=e("vigour-js/object");e("./mockdata")}e("vigour-js/value/flags/process"),n.extend=i.extend(function(t){function n(e){e._lastupdate&&e.navigation.last&&e.navigation.last.from!==e.navigation.last&&(e.navigation.last.from.removeListener(e._lastupdate),e._lastupdate=null)}function i(e,t){t[1]&&"l"===t[1][0]&&this._name===this._parent.last.from.key.val?(this.clearCache(),e()):e(!0)}var o=t.parent.inject(e("../content")).content;o.on("self",function(){var e=t.navigation,n=this,i=e.media.from,r=e.season.from,o=e.show.from;i._contentPath&&(e.media.$userOrigin.val=n.from.get(i._contentPath)),r._contentPath&&(e.season.$userOrigin.val=n.from.get(r._contentPath)),o._contentPath&&(e.show.$userOrigin.val=n.from.get(o._contentPath))}),t.define({updateNavigation:function(e){return this.navigation.last&&this.navigation.last.$userOrigin&&(e=e||this.navigation.last.$userOrigin.get("key").val,"string"==typeof e)?void this.navigation[e]._update(this.navigation[e]._val._val,"l"+Math.floor(9999*Math.random())):void(this.navigation.page.$userOrigin="discover")}}),t.extend({navigation:{mock:{navigation:{show:!1,page:!1,media:!1,season:!1,last:{key:"page",time:0}}},subscription:{navigation:{show:!0,media:!0,season:!0,page:!0,last:{key:!0,time:!0}}},val:{page:{defer:i},show:{defer:i,val:!1},season:{defer:i,val:!1},media:{defer:i,val:!1}},on:{user:function(e){n(this),this.navigation={last:this.data._val.get([e,"last"])},this.__first=!0;var t=this.navigation,i=this.data.$userOrigin;this._lastupdate=function(e,n,i){this.key&&t[this.key.val]&&t[this.key.val].$userOrigin._update(void 0,"l"+n)},t.last.from.on(this._lastupdate),this.navigation={page:i.get([e,"page"],"discover"),show:i.get([e,"show"]),season:i.get([e,"season"]),media:i.get([e,"media"])},t.last.from.key?t.last.from._update(void 0,r.stamp()):t.last.from.key||(t.page.$userOrigin="discover")},mock:function(){n(this);var e=this.navigation,t=this.mockdata.navigation,i={page:t.page,show:t.show,season:t.season,media:t.media};this.navigation={last:t.last},this.__first&&(t.page.val="discover"),this._lastupdate=function(t,n,i){e[this.key.val]&&e[this.key.val].$userOrigin._update(void 0,"l"+n)},e.last.from.on(this._lastupdate),this.navigation=i}}}})})},{"../content":172,"./mockdata":183,"vigour-js/object":303,"vigour-js/util":315,"vigour-js/value/flags/process":324}],188:[function(e,t,n){var i=e("../../util"),r=e("./mockdata"),o=e("monotonic-timestamp");n.extend=i.extend(function(e){var t=e.set,n=function(t){for(var n,i,o=t;o&&!o._removed&&o instanceof e;){if(o._parent&&o._parent._prop&&"navigation"===o._parent._prop.name&&(n=o),o.cloud&&"users"===o._path[0]||o instanceof r)return[o,n];i=o,o=o._val}var a=i&&!i._removed&&i!==t?i:!1;return[a,n]};i.define(e,"$userOrigin",{set:function(e){var i=n(this),r=i[0],a=i[1];if(!r){var s=this._prop&&this._prop.name;if(s){var c=this._caller,l=c.data._val;r=l.get(s,{}),this.val=r}}if(!r)throw new Error("cannot find correct $userOrigin for "+(this._name||this._prop&&"propety "+this._prop.name));t.call(r,e),a&&a._name&&(a._parent.last.from.val={time:o(),key:a._name})},get:function(){return n(this)[0]}})})},{"../../util":315,"./mockdata":183,"monotonic-timestamp":271}],189:[function(e,t,n){var i=e("../../util"),r=(e("./"),e("../../object"));n.extend=i.extend(function(e){function t(e){this[e]=this.data.$userOrigin.get(e,this[e]._prop.$default)}function n(e){this[e]=this.mockdata[e]}e.define({_set:function(e,i){if(this[i]instanceof r&&(this[i].val=e[i]),"function"==typeof this[i])e[i]instanceof Array?this[i].apply(this,e[i]):this[i](e[i]);else if(this.isProperty(i,e))this[i]=e[i];else if(this[i])this[i]=e[i];else{var o={};o[i]=e[i];var a={};a[i]=!0,this.extend({name:i,mock:o,$default:e[i],subscription:a,on:{mock:n,user:t}})}}})})},{"../../object":303,"../../util":315,"./":182}],190:[function(e,t,n){var i=e("../../util"),r=e("../../value"),o=e("../../browser/cases");e("../../value/flags/process"),n.extend=i.extend(function(e){e.define({updateId:function(e){this.id=e instanceof Array?e[e.length-1]:e},authenticate:function(e,t,n,i){var r=this,o=r.cloud;if(o.params.fastLogin&&"undefined"!=typeof localStorage){var a=localStorage.getItem("userId");a&&(t.id=a)}o.authenticate(t,function(t){if(t.error&&"undefined"!=typeof localStorage&&localStorage.removeItem("userId"),e.clearCache(),n!==e.val,t.error||!e.val)e.val=!1,r.id=!1,i(),t.error?console.error("authenticate error:",t.error):r.iplogin&&r.iplogin.val||(r.cloud.emit("logout",t),"undefined"!=typeof localStorage&&localStorage.removeItem("userId"));else{if(e.val!==!0&&r.updateId(t),o.params.fastLogin&&"undefined"!=typeof localStorage){var a;a=t instanceof Array?t[t.length-1]:t,localStorage.setItem("userId",a)}r.iplogin&&r.iplogin.val,i()}})}}),e.extend({iplogin:{val:o.tv||o.chromecast},token:{subscription:{token:!0},val:{transform:function(e,t){return t instanceof Object?!1:t},defer:function(e,t,n){if(t[0]&&t[0].defer)return!0;var i=this,r=i._caller;r.cloud.connected.is(!0,function(){var t=i.val,n=r.id&&r.id.val,o=r.iplogin&&r.iplogin.val;if(i.clearCache(),n&&!o){{r.cloud.logout(n)}"undefined"!=typeof localStorage&&localStorage.removeItem("userId")}if(t){var a=r.cloud.api.get("auth");if(!a)throw new Error("could not determine auth url (got: "+a+")");var s={url:r.cloud.api.auth.val,subs:r.subscriptions,token:t},c=r.__authenticated__;if(o)if(t===!0&&delete s.token,s.tv=!0,c){var l,u=r.cloud.data.get("users");u.each(function(e){var t=this;t.token&&t.token.val===i.val?l=t._name:(t.receiverClient&&t.receiverClient.from===r.cloud.client.from&&(t.receiverClient.$userOrigin=null),t.activeClient&&t.activeClient.from===r.cloud.client.from&&(t.activeClient.$userOrigin=null))}),r.id=l?l:!1,e()}else r._authrequest=s,r.authenticate(i,s,t,e),r.__authenticated__=!0;else r._authrequest=s,r.authenticate(i,s,t,e)}else r.id=!1,e()})}}},localStorageToken:{val:{defer:function(e,t){var n=this._caller;if(n._readLocalStorage||"string"!=typeof this.val)e(!0);else{n._readLocalStorage=this.val;var i=localStorage.getItem(n._readLocalStorage);i&&"true"!==i&&(n.token=i),n.token.on(function(){var e=this.val;"string"==typeof e?localStorage.setItem(n._readLocalStorage,e):localStorage.removeItem(n._readLocalStorage)}),e()}}}}}),e.cases.$isLoggedIn=new r({val:e.token,transform:function(e,t){return t===!0?0:void 0}});var t=e.cloud.client;t.on(function(n,i,r){if(origin=r||this._updateOrigin,i===e.cloud.stamp){var o=t.from;o.token&&(e.token.val=e._authrequest.token=o.token.val)}}),e.token._name="token"})},{"../../browser/cases":202,"../../util":315,"../../value":327,"../../value/flags/process":324}],191:[function(e,t,n){{var i=(e("../../base"),e("../../value")),r=e("../../object").set;e("../../util")}t.exports={type:i,create:function(e,t,n,o){var a=new i;return a._base=this,a._caller=a._base,a._prop=n,r.call(a,e,!1,!1,!0),this._class&&(this._class.prototype._[n.name]=a),n&&(n._vset||(n.mock&&(this.mockdata=n.mock),n.subscription&&(this.subscriptions=n.subscription),n.on&&("function"==typeof n.on?(this.on.mock[n.name]=n.on,this.on.user[n.name]=n.on):(n.on.mock&&!this.on.mock[n.name]&&(this.on.mock[n.name]=n.on.mock),n.on.user&&!this.on.user[n.name]&&(this.on.user[n.name]=n.on.user))),n._vset=function(e,t,i,r){var o=this._caller||this._base||this;n.set&&n.set.call(o,this,e,t,i,r)}),o||a._update(e)),a},set:function(e,t,n){return this._caller=this,e},get:function(e,t){return e&&(e._caller=this),t.get?t.get.call(this,e):e}}},{"../../base":195,"../../object":303,"../../util":315,"../../value":327}],192:[function(e,t,n){var i=e("vigour-js/util");e("vigour-js/value/flags/process"),n.extend=i.extend(function(e){e.extend({url:function(e){if(!e.urlset&&4===e.__t){e.urlset=!0;var t=this;t.navigation.page.on(function(n){e.from.val=t.navigation.page.val}),t.navigation.show.on(function(n){e.from.val=t.$parse(this).url}),t.navigation.media.on(function(){e.from.val=t.$parse(this).url}),e.from.on(function(){t.$execUrl()})}}}),e.define({$execUrl:function(e){var t,n,i,r,o,a=this,s=a.url.from.string.val,c=a.navigation,l=a.parent.content;s&&"$tv"!==s||(s=e),~s.indexOf("/")?0===s.indexOf("shows")?(t=s.split("/"),n=Number(t[1].split("-")[0]),t[2]&&(i=Number(t[2])),t[3]&&(r=Number(t[3].split("-")[0])),n&&(n=l.from.get(["shows",n]),c.show.$userOrigin=n),r&&(r=l.from.get(c.show.from._path.slice(3).concat(["seasons",String(i-1),"episodes",String(r-1)])),c.media.$userOrigin=r)):0===s.indexOf("channels")&&(t=s.split("/"),o=Number(t[1].split("-")[0]),c.page.$userOrigin="channels"):c.page.$userOrigin=s},$parse:function(e){var t=(this.url.val,e.from._parent&&e.from._parent._name),n={};return e.from&&(n.title=e.from.get("title",!1).val,"episodes"===t&&(n.season=Number(e.from._parent._parent._name)+1,n.media=Number(e.from._name)+1,n.show=e.from._parent._parent._parent._parent),t&&this.urlMap[t]&&(n.url=this.urlMap[t](e,n))),n},urlMap:{value:{episodes:function(e,t){var n=t.title,i=this.shows(t.show)+"/"+t.season+"/"+t.media;return n&&(i+="-"+n),i&&i.replace(/ /g,"+").replace("?","")},shows:function(e,t){var n=t?t.title:e.get("title",!1).val,i=e.from._name,r="shows/"+i;return n&&(r+="-"+n),r&&r.replace(/ /g,"+").replace("?","")}}}})})},{"vigour-js/util":315,"vigour-js/value/flags/process":324}],193:[function(e,t,n){function i(e){e.watched.from.each(function(){var t=this.media&&this.media.from;if(t){var n=e.parent.content.from._path.concat(t._contentPath),i=t._path;o.compareArrays(i,n)||(console.log("resolve",i,n),this.media.val=e.parent.content.get(n))}})}function r(e,t){var n=e._parent._val;return n&&n.$length.val>0?!0:0}var o=e("vigour-js/util"),a=(e("vigour-js/object"),e("./mockdata"),e("vigour-js/browser/cases")),s=e("vigour-js/data").inject(e("vigour-js/data/selection"));e("vigour-js/value/flags/process"),n.extend=o.extend(function(t){var n=t.parent.inject(e("../content")).content;t.extend({usage:{mock:{usage:{}},subscription:{usage:{shows:{$:{media:{$:!0},favourite:!0,timestamp:!0}}}},on:{mock:function(){this.usage=this.mockdata.usage},user:function(){this.usage=this.data.from.get("usage",{})}}},watched:{on:{mock:function(){this.__watched&&(this.__watched.remove(),this.__watched=null),this.watched&&this.watched.$empty(),this.watched={}},user:function(){var e=this;this.__watched&&(this.__watched.remove(),this.__watched=null);var t=this.__watched=new s(e.usage.from.get("shows"),{condition:{media:{title:{$exists:!0}}}});e.watched={},t.on(function(){var i={};t.each(function(t){var r=n.get(this._path.slice(-2)),a={};o.path(a,r._path,{img:!0,title:!0});var s=e.parent.cloud;s.subscribe(a),e.watched.set(this._name,{show:r,media:this.media.from}),e.watched[this._name].once("remove",function(){s.unsubscribe(a)}),i[this._name]=!0}),e.watched.each(function(t){i[t]||e.watched&&this.remove()}),i=!1,e.watched.update()}),t._update()}}},favourites:{on:{mock:function(){this.__favourites&&(this.__favourites.remove(),this.__favourites=null),this.favourites&&this.favourites.$empty(),this.favourites={}},user:function(){var e=this;e.__favourites&&(e.__favourites.remove(),e.__favourites=null),this.favourites.$empty();var t=e.__favourites=new s(e.usage.from.get("shows"),{condition:{favourite:{$or:["true",!0]}}});e.favourites={},t.on(function(){var i={};t.each(function(t){var r=n.get(this._path.slice(-2));e.favourites.set(this._name,r),i[this._name]=!0}),e.favourites.each(function(e){i[e]||this.remove()}),i=!1,e.favourites.update()}),t._update()}}}}),t.extend({hasWatched:{val:{val:t.watched,transform:r}},hasFavourites:{val:{val:t.favourites,transform:r}}});n._val;n.on("self",function(){t.token.val?(i(t),t.favourites._prop.on.user.call(t),t.watched._prop.on.user.call(t)):(i(t),t.favourites._prop.on.mock.call(t),t.watched._prop.on.user.call(t))}),a.$hasFavourites=t.hasFavourites,a.$hasWatched=t.hasWatched})},{"../content":172,"./mockdata":183,"vigour-js/browser/cases":202,"vigour-js/data":236,"vigour-js/data/selection":237,"vigour-js/object":303,"vigour-js/util":315,"vigour-js/value/flags/process":324}],194:[function(e,t,n){var i=e("../util"),r=e("../value"),o=e("../browser/network/url"),a=e("../browser/ua");e("../value/flags/process"),n.extend=i.extend(function(e){var t=e.cases||(e.cases=equire("../browser/cases"));e.initialised=new r(!1),e.overlay=new r(!1),e.focusState=new r("menu"),e.region=new r({init:e.initialised}),e.url="tv"===a.device&&"lg"===a.platform?new r({defer:function(){},params:{},string:""}):o,e.ready=new r,e.menu=new r({init:e.ready}),e.network=new r,e.loading=new r({init:e.ready,defer:function(e,t){var n=this.updatePath.join(".");t[0]===!1&&(n&&n===this.id||!this.id)?(this.val=t[0],this.id=!1):t[0]===!0&&(this.id=n,this.val=!0),e()}});var n=e.guessLanguage=function(){var t=window.navigator.userLanguage||window.navigator.language||e.region.val;return t?t.slice(0,2).toLowerCase():void 0};e.language=new r({transform:function(e,t){return t&&"string"==typeof t||(t=n()),t?t.slice(0,2).toLowerCase():!1;

},init:e.initialised}),e.fullscreen=new r({force:!0}),e.loader=new r,e.volume=new r({val:1,transform:function(e,t){return isNaN(t)?1:t}}),e.popup=new r({init:e.ready}),e.state=new r({init:e.ready}),e.notification=new r({init:e.ready,force:!0}),e.playing=new r({init:e.ready,val:!1}),e.restrictPlayback=new r,e.wifiOnly=new r(localStorage?{val:localStorage.getItem("wifiOnly")||!1,defer:function(e){this._val?localStorage.setItem("wifiOnly",!0):localStorage.removeItem("wifiOnly"),e()}}:!1),e.restrictPlayback.val={val:e.wifiOnly,transform:function(e,n){return n&&t["native"]&&"wifi"!==api.network.val?!0:!1}},t.$playing=e.playing,t.$storeAvailable=new r(t["native"]&&(t.ios||t.android||t.windowsMobile))})},{"../browser/network/url":232,"../browser/ua":233,"../util":315,"../value":327,"../value/flags/process":324}],195:[function(e,t,n){var i=e("../"),r=e("../util"),o=e("../util/inject"),a=i.Base=t.exports=n=function(e){this._from=this.constructor,e&&this.set(e)};n.settings=e("./settings");var s=n.set=function(e,t,n){for(var i in e)if(~i.indexOf(",")){for(var o=i.split(","),a={},c=0,l=o.length;l>c;c++)a[o[c]]=r.clone(e[i]);if(n){delete e[i];for(var u in a)e[u]=a[u]}else s.call(this,a,t,n)}else i=r.dotField(e,i),this._set&&!n?this._set.call(this,e,i,t):this[i]=e[i];return n?e:this};r.define(a,"isProperty",function(e,t){var n=this,i=!(void 0===n._[e]&&!r.lookup.call(n,e)&&"function"!=typeof n[e]);return i},"defaultType",!1,"extensions",!1,"define",function(e){for(var t in e)r.define(this,t,e[t]),r.define(this.Class,t,e[t])},"extend",function(e){var t,i=r.arg(arguments),o=i.length;if(o>1)for(t=0;o>t;this.extend(i[t++]));else if(e.name)if(e===!0&&alert(),e.def||0===e.def||(e.def=!1),this.Class.prototype._settings&&(n.settings.parse.call(this,e),e._settings&&n.settings.create.call(this,e)),e.type===!1||!e.type&&!this.defaultType)r.define(this.Class,e.name,e);else{e.type||(e.type=this.defaultType);var a=function(t){return e.type.get?e.type.get.call(this,t,e):t},s=function(t){var n=this[e.name];if(null!==n)return n===e.def?e.type.create.call(this,t,n,e):(t=e.type.set.call(this,t,n,e),void(null!==t&&(n.val=t)))};r.define(this,e.name,e.def,s,a,!0),r.define(this.Class,e.name,e.def,s,a)}else for(t in e)"function"==typeof e[t]?this.extend({name:t,set:e[t]}):(e[t].name=t,this.extend(e[t]))},"remove",function(e,t,n){if(this._from){if(this.setting("remove",[n]),!t){var r=this._from.base.instances;if(r){var o=0;for(r.length;r[o]!==this||!r.splice(o,1);o++);}}for(var a in this.__)this.__[a]instanceof i.Object?(this.__[a].remove(!1,!1,!1,!1,!1,!0),this.__[a]=null):this.__[a]=null;if(this.__=null,e&&this.instances)for(s=this.instances.length-1;s>=0;this.instances[s--].remove(!0,!0));for(var s in this)this[s]=null;this._settings=null,this._=null,delete this._settings,delete this._,delete this.__}},"set",s,"get",function(e,t){return r.get(this,e,t)},"inject",o,"eachInstance",function(e,t,n,i){var r=this.instances;if(r)for(var o,a=0,s=r.length;s>a;a++)if(o=r[a],!o||t&&o.__&&o.__[t])o||console.error("\n\n\n\ninstance in base gone?",a,r);else{if(e.call(o,n,i))return!0;if(o.eachInstance(e,t,n))return!0}},"Class",{get:function(){if(!this._class){this.instances=[],this._class=function(e,t,n){if(!t){var i=this._from.base;i.instances.push(this),this.setting&&this.setting("new",[i,n]),e&&this.set(e)}},this._class.base=this,this._class.prototype=new this._from(!1,!0),this._class.prototype.__=null,r.setstore.call(this);var e,t=this._class.prototype._={};for(e in this.__)t[e]=this.__[e];for(e in this._)void 0===t[e]&&(t[e]=this._[e]);this._class.prototype._from=this._class,this._class.inject=o}return this._class}})},{"../":238,"../util":315,"../util/inject":316,"./settings":196}],196:[function(e,t,n){var i=e("./"),r=e("../util");r.define(i,"_settings"),i.prototype._._settings={};var o=function(e,t,n){var i,a,s,c=e._settings,l=this,u=l._._settings;if(r.setstore.call(l),!l.__._settings){l.__._settings={};for(var p in u)l._settings[p]=u[p]}s=l.__._settings;for(a in c)if(i=c[a],t&&s[i][e.name]||!t&&!s[i][e.name]||n){if(s[i]===u[i]){s[i]={};for(var f in u[i])s[i][f]=u[i][f]}t?(this.eachInstance(function(){this[e.name]!==l[e.name]?this._setting!==s&&this._settings[i]===s[i]&&o.call(this,s[i][e.name],!1,!0):this._setting!==s&&this._settings[i]!==s[i]&&this.removeSetting(e.name,i)}),s[i][e.name]=null,delete s[i][e.name],r.empty(s[i])&&(s[i]=!0)):(s[i]===!0&&(s[i]={}),s[i][e.name]=e)}};n.create=function(e){e._set=e.set,e.set=function(t,n){o.call(this,e),e._set.apply(this,arguments)}},n.parse=function(e,t){t||(t=this._settings);for(var n in t)e[n]&&(e._settings||(e._settings=[]),e._settings.push(n))},n.add=function(e,t){if(e instanceof Array)for(var n in e)t?this.add(e[n],t):this.addSetting(e[n],!1);else if(t)t.prototype._settings[e]=!0;else{r.setstore.call(this),this.__._settings||(this.__._settings={});for(var i in this._._settings)this._settings[i]=this._._settings[i];this._settings[e]=!0}},r.define(i,"addSetting",function(e){n.add.call(this,e),this._class&&(this._class.prototype._._settings=this._settings)},"setSetting",function(e){n.parse.call(this,e),o.call(this,e)},"removeSetting",function(e,t){t instanceof Array||(t=[t]);for(var n,i=t.length-1,r=this._settings;i>=0;i--)if(r&&r[t[i]]&&r[t[i]][e]){n=!0;break}n&&o.call(this,{name:e,_settings:t},!0)},"setting",function(e,t){var n=this._settings;if(n&&n[e]&&n[e]!==!0)for(var i in n[e])n[e][i][e].apply(this,t)}),n.add(["new","remove"],i)},{"../util":315,"./":195}],197:[function(e,t,n){var i=e("./");i.easing=n,n.inCubic=function(e,t,n,i){return n*(e/=i)*e*e+t},n.outCubic=function(e,t,n,i){return n*((e=e/i-1)*e*e+1)+t},n.outBack=function(e,t,n,i,r){var r=1.70158;return n*((e=e/i-1)*e*((r+1)*e+r)+1)+t}},{"./":199}],198:[function(e,t,n){var i=e("../../value"),r=new i(1),o=e("../../util"),a=function(){n.rafId=window.requestAnimationFrame(a),r.val++};r.done=new i(!0),o.define(r,"addListener",function(e,t,n){this._listeners||(this.done.val=!1,a()),i.prototype.addListener.call(this,e,t,n)},"removeListener",function(e,t,r){var o=this;i.prototype.removeListener.call(o,e,t,r),this._listeners||(window.cancelAnimationFrame(n.rafId),this.val=1,this.done.val=!0)}),t.exports=r},{"../../util":315,"../../value":327}],199:[function(e,t,n){function i(e){this._p=!0,this.val=e,this._p=!1}var r=(e("../element").inject(e("../element/properties")),e("../../object")),o=(e("../../util"),e("../../value/flags/util")),a=e("../../value/operators"),s=e("./frame"),c=function(e,t,n,i){return n*e/i+t};a._a=function(e,t){return t},a._a.order=2,o.animation={set:function(e){var t=this,o=t.checkParent("_prop");if(e){t._val||(t.val=0);var a,l,u=o._prop.name,p=o._caller,f=e.noListener,d=t._path,h=u.concat(d.join("")),v=e.skip,g=e.easing&&n.easing[e.easing]||e.easing||c;if(o._animListen||(o._animListen=function(e){var t=this[u];if(t)t.update(this,!0);else{var n=s._listeners&&s._listeners.length;console.log("_animListen setting",s._listeners&&s._listeners.length),s.removeListener(void 0,this),console.log(">> _animListen setting",s._listeners&&s._listeners.length),n&&n===(s._listeners&&s._listeners.length)&&console.error("this >>",this)}}),p.setSetting({name:"animation",remove:function(){var e=s._listeners&&s._listeners.length;if(s.removeListener(void 0,this),s._listeners&&e&&e===(s._listeners&&s._listeners.length))for(var t in s._listeners)s._listeners[t]instanceof Array&&(s._listeners[t][1]===this,s._listeners[t][1])}}),o.preventSet=i,o.set("translate",!0),t.set("_a",{time:e.time||60,val:function(i,c,p){var d,m=this,y=o,_=m[u];if(m._a||(m._a={}),!m._a[h]&&(l=void 0===e.start?m.rendered&&void 0!==t.__lval?t.__lval:c:e.start instanceof r?e.start.val:e.start,m._a[h]={_start:l,_end:l,_current:l,_count:0},!m.rendered))return l;if(m.rendered){if(v)return m._a[h]._current=c,v=!1,c;if(d=m._a[h],_._p||n.prevent)d._frame=0,s.removeListener(y._animListen,this,!0),1!==_._p&&(d._current=d._end=c,e.complete&&(f=e.complete.call(m,c)),e.done&&setTimeout(function(){e.done.call(m,c)},0),e.once&&setTimeout(function(){e.once&&e.once.call(m,c),e.once=null},0));else if(d._frame!==s.val){if(d._frame||void 0!==c&&d._current!==c){if(d._end!==c&&(e.init&&e.init.call(m,d._current),f||s.addListener([y._animListen,this,u],function(e,t){for(var n in t)if(t[n].pop&&t[n].pop&&t[n][1]===m&&t[n][2]===u)return!1;return!0}),d._start=d._current,d._end=c,d._count=0,a=~~i.time.val),d._frame=s.val,e.delay)return e.delay--,d._start;var b=++d._count;d._current=g.call(m,b,d._start,d._end-d._start,a||(a=~~i.time.val)),e[b]&&e[b].call(this,d._current,c)}d._count===a&&(d._current=c,d._frame=0,d._count=0,e.complete&&(f=e.complete.call(m,c)),e.done&&setTimeout(function(){e.done.call(m,c)},0),e.once&&setTimeout(function(){e.once&&e.once.call(m,c),e.once=null},0),f||s.removeListener(y._animListen,this,!0))}return d._current}}}),o._skip=!0,t._skip=!0,void 0!==e.start){var m=this._caller;m||(m=this.checkParent("_prop")._caller),m.setRender(u,function(e){this.update(u)})}}else t.remove("_a"),t._skip=void 0,o._skip=void 0,_remove(o)}}},{"../../object":303,"../../util":315,"../../value/flags/util":326,"../../value/operators":330,"../element":205,"../element/properties":210,"./frame":198}],200:[function(e,t,n){var i=e("../ua"),r="equestAnimationFrame",o=e("../../util");lastFrame=0,o.define(i,"hasTransition",{get:function(){if(!i._hasTransition){var e=document.body||document.documentElement,t=e.style,n="ransition";i._hasTransition="string"==typeof t["t"+n]||"string"==typeof t[i.prefix+"T"+n]}return i._hasTransition}}),r="r"+r,window[r]||(i.noRaf=!0,window[r]=function(e){return setTimeout(e,20)},window.cancelAnimationFrame=function(e){clearTimeout(e)}),t.exports=n=window[r],n.timer=function(e,t,i){n(--t?function(){i&&e(),n.timer(e,t,i)}:e)},n.repeat=function(e,t){n.timer(e,t,!0)}},{"../../util":315,"../ua":233}],201:[function(e,t,n){var i=e("./"),r=(e("../element"),e("../element/set")),o=e("../../base"),a=e("../../util"),s=function(e,t,n,i){n||(e.css||(e.css=""),e.css.set(i?"removeClass":"addClass",t),e.css.update(e),e.eachInstance(function(){console.error("\n\n\ninstance! set css!!!!!",t,e.node),this.css.set(i?"removeClass":"addClass",t),this.css.update(this)}))},c=i.methods;r.remove=function(e,t,n,i){if(t&&t.__remove__)if(this[e]instanceof o)i[e]=!1;else{if(!a.lookup.call(this,e))return delete t[e],!0;delete t.__remove__}},r.cases=c.reader(function(e,t,n,r){var l,u,p,f,d,h=this,v=function(e){e=o.set(e,!1,!0);for(var t in e)a.isObj(e[t])&&(e[t]=v(e[t]));return e};return t=v(t),n?(h._cases||(h._cases={}),null===t?(h._cases[e].method&&i[e].removeListener(h._cases[e].method),i[e].val&&(h.css={removeClass:e},h.eachInstance(function(){this.css={removeClass:e}})),delete h._cases[e]):(u=c.original(h,!0,t,h._cases,!0,e),h._cases[e]={val:t,orig:u[0],nested:u[1]},h._cases[e].method||(l=h._cases[e].method=function(){t&&(p=c.merge(!0,e,t,h._cases),f=p[0],d=p[1],delete f.val,delete d.val,i[e].val?(s(h,e,r),h.set(f,!0)):(s(h,e,r,!0),h.set(d,!0)))},i[e].addListener(l),h.setSetting({name:"_c"+e,remove:function(){this===h&&(i[e].removeListener(l),this._cases[e].method=null)}})),i[e].val&&(s(h,e,r),h.set(t,!0)))):(s(h,e,r),h.set(t)),!0})},{"../../base":195,"../../util":315,"../element":205,"../element/set":214,"./":202}],202:[function(e,t,n){var i=e("../../object"),r=e("../../util"),o=e("../element"),a=e("../../value"),s=e("../../value/flags");r.define(n,"methods",{});var c=r.isObj,l=function(e,t,n){var i,r,o,a,s;if(n){i={};for(o in e)i[o]=!0}for(r in t)(!n||i[r])&&(a=e[r],s=t[r],a instanceof Object?(a.__remove__&&s&&!s.__remove__&&delete a.__remove__,s instanceof Object||(t[r]={val:s}),l(a,s,n)):(e[r]=s,a="burn"))},u=function(e,t,r,a,l,p,f,d,h){d||(h=e,d=[]);var v,g,m;if(l instanceof i&&!p);else if(l instanceof Object)for(v in l)m=l[v],n[v]?(g=n[v],g instanceof i&&(p&&o.set.lookup.call(h,d[d.length-1])||(t[v]=!0)),c(m)?(d.push(v),u(e,t,r,a,m,p,f,d,h)):a.val=e&&(void 0!==e._val?e._val:void 0),a[v]=null):c(m)?(a[v]||(a[v]=e&&e[v]&&e[v].convert&&e[v].convert(m)||(m instanceof Array?[]:{})),d.push(v),u(e&&e[v],t,r,a[v],m,p,f,d,h),!p||e&&e[v]||(a[v].__remove__=!0)):e&&a&&!a[v]&&(s[v]?(delete a[v],a.val=void 0!==e._val?e._val:void 0):a[v]="val"===v?void 0!==e._val?e._val:void 0:void 0!==e[v]&&e[v].convert&&e[v].convert())};n.methods.original=function(e,t,n,i,r,o){var a,s,p=t?e.convert(n):e._val,f={};u(e,f,i,p,n,r,o);for(a in i)f[a]||(s=i[a].orig,t?c(s)?i[a].nested[o]||l(p,s,o):p.val&&(p.val=s):c(s)?s.val&&(p=s.val):p=s);return[p,f]},n.methods.merge=function(e,t,i,o){var a,s,u,p,f=r.clone(o[t].orig),d=i;for(s in o)if(s===t||o[t].nested[s])a=!0;else if(n[s].val)if(u=o[s].val,c(f)||c(u)){c(f)||(f={val:f}),c(u)||(u={val:u}),l(f,u,!0);for(s in n)p=f[s],null!==p&&void 0!==p&&delete f[s];if(a)if(e){d===i&&(d=r.clone(d)),u=r.clone(u);for(s in n)null!==u[s]&&void 0!==u[s]&&delete u[s];l(d,u,!0)}else u.val&&(d=u.val)}else f=u;return[d,f]},n.methods.reader=function(e,t,r){return function(o,s){var c,l="!"===o[0],u=l?n[o.slice(1)]:n[o];return u?u instanceof i?(l&&!n[o]&&(n[o]=new a({val:function(){return!u.val},listen:u})),c=e?e.call(this,o,s,!0,l):t):c=l?!!e:e?e.call(this,o,s):r:l&&(c=e?e.call(this,o,s,!1,l):r),u===!1&&e&&(c=!0),c}},e("./object"),e("./base")},{"../../object":303,"../../util":315,"../../value":327,"../../value/flags":322,"../element":205,"./base":201,"./object":203}],203:[function(e,t,n){var i=e("../../value/flags"),r=e("./"),o=e("../../object"),a=e("../../util"),s=r.methods,c={set:function(e,t,n,i){this._flag||(this._flag={});var l=this,u=l._flag["case"]||(l._flag["case"]=["case",l._val,!1,{},c]),p=u[3],f=a.isObj(e),d=f&&!e.val?!1:!0;if(null===e)p[i]&&r[i].removeListener(p[i].method),delete p[i];else{if(u[5]=!0,!p[i]){var h=s.original(l,f,e,p,!1,i);p[i]={val:e,orig:h[0],nested:h[1],method:function(){var t=s.merge(f,i,e,p),n=t[0],o=t[1];u[5]=!0,r[i].val?(n||console.warn(i,"wrong in cases!",n,r,u),d&&n&&(u[1]=n.val||n),l.val=n):(d&&(u[1]=o&&o.val||o),"$isActive"===i&&console.log("no way gozee 2",o,l),l.val=o),u[5]=null}},r[i].addListener(u[3][i].method)}r[i].val&&(d&&(u[1]=e.val||e),o.set.call(l,e,t,!1,!0),l._ignorefornow=!0),u[5]=null}},remove:function(e,t){var n=0;for(var i in e[3])n++,!this._ignorefornow&&!t||i===t?(n--,r[i].removeListener(e[3][i].method)):delete this._ignorefornow;return n?!0:void 0},stack:"case"},l={set:function(e,t,n,i){null!==e&&o.set.call(this,e,t,!1,!0)}};i.dynamic.cases=s.reader(!1,c,l)},{"../../object":303,"../../util":315,"../../value/flags":322,"./":202}],204:[function(e,t,n){var i="cssRules",r=function(e){e="."+e.replace(/\./g," .").toLowerCase();for(var t,n,r=document.styleSheets,o=r.length,a=0;o>a;a++)if(n=r[a][i]||r[a][i="rules"])for(var s,c=0,l=n.length;l>c;s=n[c++],s.selectorText===e&&(t=s.style));return t},o=function(e,t){var i=n;return t.push(i[e]||(i[e]=r(e))||{}),e};t.exports=function(e,t){if(e){var n=this[e];if(!n){n=[];for(var i,r=e.split(" "),a=0,s=r.length;s>a;a++)(i=o(r[a],n).split("."))instanceof Array&&o(i[i.length-1],n);this[e]=n}if(t){if(!(n instanceof Array))return;for(var c,a=n.length-1;!c&&a>=0;c=n[a--][t]);n=c}return n}}},{}],205:[function(e,t,n){var i=e("../../base"),r=e("../../value/base"),o=e("../../"),a=e("../../util"),s=new i;s.defaultType=r.type,t.exports=n=o.Element=s.Class,n.base=s;var c="undefined"!=typeof document?document:"no document",l=function(){for(var e=this._node.childNodes,t=0,n=e.length;n>t;t++)e[t].base&&e[t].base.remove(!1,!1,!0)};n.base.extend({name:"node",type:!1,set:function(e){this._node=e instanceof Object||!e.length?e:c.createElement(e),this._node.base=this},get:function(){return this._node||(this.node=c.createElement("div")),this._node},"new":function(e,t){if(t)this._node=t;else{var n=e._node;n&&(this._node=n.cloneNode(!0),this._node.base=this)}if(e._node&&e._node.hasChildNodes()){var i,r,o=this._node.childNodes,a=e._node.childNodes,s=o.length;for(i=0;s>i;i++)r=a[i].base,r&&(o[i].base=new r.Class(!1,!1,o[i]),r._name&&(o[i].base._name=r._name,this[r._name]=o[i].base),o[i].base.setting("parent",[this]))}},remove:function(e){if(l.call(this),this._node&&(this._node.base=null),!e){var t=this._node.parentNode;t&&(t.removeChild(this._node),this._name&&t.base&&(t.base[this._name]=null))}}},{css:function(e){var t=e.val||"";e._skip=!0,e.addClass&&(~t.indexOf(e.addClass.val)||(e._val=(t.length>0?t+" ":"")+e.addClass.val,e.add&&(e._val=e._val.replace(e.add.val,"")),e._lval=!1,e.__lval=!1,e.___lval=!1,t=e.val),e.addClass.remove()),e.removeClass&&(t&&e._val&&(e._val=e._val.replace(new RegExp(" ?"+e.removeClass.val),""),e._lval=!1,e.__lval=!1,e.___lval=!1,t=e.val),e.removeClass.remove()),this.node.className=t?t.replace("$",""):""}},{name:"name",type:!1,set:function(e){var t=this.parent;this._name&&t&&(t[this._name]=null),this._name=e,this._node&&e===this.node.nodeName.toLowerCase()||this.css&&this.css._val===e||(this.css={add:" "+e}),t&&(t[e]=this)},get:function(){return this._name}},{name:"parent",type:!1,get:function(){if(this._node){var e=this._node.parentNode||this._p;return e?e.base||e._p:!1}}},{name:"children",type:!1,get:function(){if(!this._node)return[];var e,t=this._node.childNodes,n=t.length,i=new Array(n);for(e=0;n>e;e++)i[e]=t[e].base||t[e];return i}});var u=function(e){if(this.lastindex||this.setting("render",[e]),this.renders)for(var t,n,i,r=this.node.childNodes,o=this.renders,s=this.lastindex||0,c=o.length;c>s;s++)if(i=o[s])if(t=a.checkArray(r,i,"base"),t!==!1)u.call(i,this);else if(i._from)if(n=i.Class,i.name&&this[i.name]&&this[i.name]===n)u.call(this[i.name],this);else for(var l in r)if(r[l].base&&r[l].base instanceof n){u.call(r[l].base,this);break}this.lastindex=c},p=function(){var e,t;this.parent&&(e=this.parent,e.renders?e.renders.push(this):(e.renders=[this],t=e.parent,!t||t._settings&&t._settings.render!==!0||p.call(e)))},f=function(e){var t=e.__&&e.__._settings||e._._settings;(e._.renders||e.__&&e.__.renders||t.render!==!0)&&(this.renders||(this.renders=[]),this.__&&this.__.renders||(this.renders=a.clone(this.renders)),this.renders.push(e))};a.define(n,"append",function(e){arguments;arguments.length>1&&(e=a.arg(arguments));var t;e.length||e instanceof n||!e.val||(t=e.before,e=e.val);var i=e[0],r=0,o=e.length;if(e.length)if("function"==typeof i)for(var r=1,o=e.length;o>r;r++)this.add(new i(e[r]),t);else for(;o>r;r++)this.add(e[r],t);else this.add(e,t)},"checkRender",function(e,t){if(e&&f.call(this,e),!t){var n=this.__&&this.__.renders||this._.renders;(n||(this.__&&this.__._settings||this._._settings).render!==!0)&&(!this.lastindex||n&&this.lastindex<n.length)&&this.rendered?u.call(this,this):this.parent&&f.call(this.parent,this)}},"checkParent",a.checkParentFactory("parent"),"get",function(e,t){return a.get(this,e,t)},"find",function(e,t,n){void 0===n&&(n=!0);for(var i,r,o=this.node.childNodes,a=0,s=o.length,c=n===!0?!0:n-1;s>a;a++)if(r=o[a].base){if(r.get(e,!0)==t)return r;if(n&&(i=r.find(e,t,c)))return i}},"setRender",function(e,t){this.setSetting({name:e,render:t}),p.call(this),this.eachInstance(function(){p.call(this)},e)},"renders",!1,"add",function(e,t){return t?("string"==typeof t&&(t=this[t]),t?this.node.insertBefore(e.node,t.node||t):console.error("cannot find insertbefore")):this.node.appendChild(e.node),e.setting("parent",[this]),e.name&&(this[e.name]=e),this.checkRender(e),this},"empty",function(e){var t,n=this.node.childNodes;for(this.node.innerHtml="",t=n.length-1;t>=0;t--)n[t].base&&n[t].base.remove(e)}),n.base.addSetting("parent"),n.base.addSetting("render"),e("./set")},{"../../":238,"../../base":195,"../../util":315,"../../value/base":320,"./set":214}],206:[function(e,t,n){var i=e("./util");n.prepare=function(e){e.display||(e.display="block")},n.newElement=function(e,t,n){var r=i.children(n);for(var o in r)if(r[o]._d&&r[o]._d===e)return r[o].display=t.display.val,!0},n.rem=function(e,t,n,i){return e.display="none",!0},n.fragment=function(e,t,n,i){n&&(n[i]=null)}},{"./util":208}],207:[function(e,t,n){var i=e("./util"),r=e("../../../../util");n.extend=r.extend(e("../data"),function(e){e.extend({name:"collection",remove:function(){this._colElem&&this._colElem.remove()},set:function(e,t,n,o,a,s){e._skip=!0;var c,l,u=i.filter(e,this),p=this.filter||e.val,f=this._colOptions||e.options&&(this._colOptions=e.options.convert()),d=e.element,h=this._colElem||d&&d._val&&(this._colElem=new(d._val.Class||d._val)),v=!this._colInit,g=this._colElem;if(p&&h)if(c=d._slStamp,l=d._val,c?d._slStamp=t:g&&d._slStamp!==t&&(l.Class&&g instanceof l.Class||!l.Class&&g instanceof l||(h=this._colElem=new(l.Class||l),d._slStamp=t)),v)f&&f.prepare&&f.prepare(h),this._colInit=!0,this.node.appendChild(i.fragment(p,h,this,!1,f,u));else if(n&&n._parent===p.from)if(o){var m=r.checkArray(i.children(this),n,"_d",!0);m&&(f&&f.rem&&f.rem(m,this,u)||m.remove())}else r.checkArray(i.children(this),n,"_d")===!1?i.element(n,h,this,!0,this.node,f,u,!0):u&&f&&f.indexChange&&f.indexChange(r.checkArray(i.children(this),n,"_d",!0),this,u);else if(!n)if(o)i.clear(this,f);else{var y,_,b,w=i.children(this),k={};u===!0&&(_=p.keys);for(var x in w)b=w[x],y=w[x]._d._name,(u&&!_?r.checkArray(p,b._d)!==!1:p[y]&&p[y]===b._d)?(k[y]=!0,u&&(f&&f.indexChange?b._d._indexCache[u][0]!==b.i&&f.indexChange(b,this,u,!0):u===!0&&x!=r.checkArray(_,y,!0)&&(delete k[y],f&&f.rem&&f.rem(w[x],this,u,u)||b.remove()))):f&&f.rem&&f.rem(b,this,u,u)||b.remove();this.node.appendChild(i.fragment(p,h,this,k,f,u))}}})})},{"../../../../util":315,"../data":209,"./util":208}],208:[function(e,t,n){{var i=(e("../"),e("../../../../data").inject(e("../../../../data/selection")));e("../../../../util")}n.element=function(e,t,n,i,r,o,a,s){var c;if(!o||!o.newElement||(c=o.newElement.apply(this,arguments),c!==!0))return c=c||new t.Class,c._col=!0,void 0!==e&&c._dSet(e),r&&r.appendChild(c.node),c.setting("parent",[n]),o&&o.element&&o.element(c,n,a,s),i&&void 0!==e&&c.updateData(),n.checkRender(c,!0),c},n.fragment=function(e,t,i,r,o,a){var s=document.createDocumentFragment(),c=function(e){if(this._name&&(e=this._name),!(o&&o.fragment&&o.fragment(i,this,r,e)||r&&r[e])){var c=n.element(this||null,t,i,!1,s,o,a);c&&s.appendChild(c.node)}};if(s._p=i,e.each)e.each(c);else for(var l in e)c.call(e[l],l);return t.updateData(!0),s},n.children=function(e,t){if(e){var n=[];for(var i in e.node.childNodes){var r=e.node.childNodes[i].base;r&&r._col&&n.push(r)}return t&&t.children&&t.children(n),n}},n.clear=function(e,t){e.colInit=null;var i=n.children(e);for(var r in i)i[r].remove();t&&t.clear&&t.clear(e)},n.filter=function(e,t){var n=e.val;if(e.filter&&e.filter.val===!0)return!0;if(n&&e.filter&&!t.filter){var r=e.filter.raw;return n=t.filter=new i(n,r),r._col=!0,n.addListener(function(e,n,i,r){t.collection._update(e,n,i,r)}),t.setSetting({remove:function(){t.filter.remove(),t.filter=null}}),n._uid}return n&&n._filter?n._uid:t.filter?t.filter._uid:void 0}},{"../":210,"../../../../data":236,"../../../../data/selection":237,"../../../../util":315}],209:[function(e,t,n){{var i=e("../../../data/base"),r=e("../../../util");e("../../../value/flags")}n.extend=r.extend([i,{updateData:function(e,t,n){this._d&&(this._subscribed=!1,t=this._d);var i=!1;n||this.model||this._fmodel||(i=!0);for(var r,o=this.node.childNodes,a=o.length-1;a>=0;a--)r=o[a].base,!r||r.model&&r.model.inherit&&r.model.inherit.val===!1||void 0!==r._d&&!r._dfrom||(r.model&&t&&(i&&(r._fmodel=!0),r._dSet(t,!0)),r.updateData(e,t,r._fmodel||n))}}])},{"../../../data/base":234,"../../../util":315,"../../../value/flags":322}],210:[function(e,t,n){var i=e("../../ua"),r=e("../../css"),o=e("../../../value"),a=e("../../../util"),s=e("../../../util/hash"),c=e("../../animation/raf"),l=e("../").images={},u=i.prefix+"Transform",p=i.prefix+"-transform",f=document.body.style,d=void 0!=f.perspectiveProperty||void 0!=f.WebkitPerspective?["translate3d(",",0px)"]:["translate(",")"],h=function(e){var t="margin"+(e[0].toUpperCase()+e.slice(1));return function(n){n.clean&&(m.call(this,e,t),n.clean=null),n.translate?this.translate(n):this.node.style[this.relative?t:e]=n.val+"px"}},v=new RegExp(p+"(.*?);"),g={x:/(margin-left(.*?);)|(left(.*?);)/g,y:/(margin-top(.*?);)|(top(.*?);)/g},m=function(e){var t=this._t,n=!1,i=this[e],r=this.node.style.cssText.replace(g[e],"");if(i&&i.translate&&i.translate.val===!1&&(i.translate=null),this.node.style[u]&&!i.translate){if(t)if(this[e].translate)n=!0;else for(var o=2;6>o;o++)t[o]&&(n=!0);n||(r=r.replace(v,""))}this.node.style.cssText=r};n.extend=a.extend(function(e){function t(e){var t="scroll",n=t+e;return{name:n,set:function(e){var i=e.val,r=this;void 0!==i&&(r.node[n]=i),r.__sT||(r.__sT=!0,r.addEvent(t,function(){void 0!==e._listeners?e.val=r.node[n]:r[n].__lval=void 0}))},get:function(e){return void 0===e.__lval&&(e.val=this.node[n]),e},render:function(){var e=this,t=e[n].__lval;t&&c(function(){e.node[n]=t})}}}a.define(e.Class,"cleanCoordinates",function(e){this._node&&(e?m.call(this,e):(m.call(this,"x"),m.call(this,"y")))},"translate",function(e){var t,n,i,r,o,a,s=e.val,c="",l=e&&e._prop.name,p=this._t=this._t||[],f=!1;return"x"===l?(t=0|s,t===p[0]&&(f=!0)):"y"===l?(n=0|s,n===p[1]&&(f=!0)):"rotate"===l?(r=s,r===p[2]&&(f=!0)):"scale"===l?(i=s,i===p[3]&&(f=!0)):"rotateY"===l?(o=s,o===p[4]&&(f=!0)):"rotateX"===l&&(a=s,a===p[4]&&(f=!0)),f||(p[0]=t||this.x.translate&&0|this.x.val||0,p[1]=n||this.y.translate&&0|this.y.val||0,p[2]=r||this.rotate.val,p[3]=i||this.scale.val,p[4]=o||this.rotateY.val,p[5]=a||this.rotateX.val,(p[0]||p[1])&&(c=c.concat(d[0]+p[0]+"px,"+p[1]+"px"+d[1])),p[2]&&(c=c.concat(" rotate("+p[2]+"deg)")),p[3]&&(c=c.concat(" scale("+p[3]+")")),p[4]&&(c=c.concat(" rotateY("+p[4]+"deg)")),p[5]&&(c=c.concat(" rotateX("+p[5]+"deg)")),this.node.style[u]=c),this},"update",function(){for(var e,t=0,n=a.arg(arguments),i=n.length;i>t;t++)n[t]instanceof Array?this.update.apply(this,n[t]):(e=a.get(this,n[t]),e&&e.update(this));return this}),e.extend({name:"relative",type:!1,get:function(){var e=this.position!==!1?this.position.val:this.position={css:!0,val:r(this.css.val,"position")};return"absolute"!==e}},{type:!1,name:"rendered",get:function(){var e,t=this._rendered||this.node===document.body;if(!t){for(e=this.node.parentNode;!t&&e;)e.base&&e._rendered&&(t=!0),e==document.body&&(t=!0),e=e.parentNode;t&&(this._rendered=!0)}return t}},t("Left"),t("Top"),{position:function(e){this.node.style.position=e.val},rotate:function(e){this.translate(e)},rotateY:function(e){this.translate(e)},rotateX:function(e){this.translate(e)},scale:function(e){this.translate(e)},src:function(e){var t=e.val;t&&"/"!==t[t.length-1]&&(this.node.src=t)},attr:function(e){var t=this;e.each(function(e){t.node.setAttribute(e,this.val)})},backgroundPos:function(e){this.node.style.backgroundPosition=e.val},backgroundBatch:function(e){},background:function(e){var t,n,i,r,u=e.val,p=this,f=this.node.style;if(e.gone&&e.gone.val)e._skip=!0,f.backgroundImage="";else if(u&&"/"!==u[u.length-1]){if(t="url("+u+")",f.backgroundImage===t)return;if(e.size&&(f.backgroundSize=e.size.val),e.load){if(n=s(u),i=this.checkParent("backgroundBatch"),i&&(r=i.backgroundBatch),!l[n]){this._loaded=null,r&&(window.cancelAnimationFrame(r._raf),r.batch||(r.batch=[]),r.batch.push(s)),l[n]=new o(!1);var d=document.createElement("img");d.onload=function(){r&&(r.batch.splice(a.checkArray(r.batch,n),1),0===r.batch.length&&(r.batch=null,r._raf=c(function(){i._node&&r._val.call(i)}))),l[n].val=!0,d.onload=null,d=null,l[n].remove(!1,!1,!1,!1,!1,!0),l[n]=!0},d.src=u}l[n]!==!0?(this._loaded=null,l[n].addListener([function(){e.load&&e.load.val!==!0&&e.load._val.call(this,p)},e._base],!0)):(this._loaded=!0,r&&(r.batch&&0!==r.batch.length||(r.batch=null,window.cancelAnimationFrame(r._raf),r._raf=c(function(){i._node&&r._val.call(i)}))),e.load.val!==!0&&e.load._val.call(this,p))}f.backgroundImage=t}},padding:function(e){this.node.style.padding=e.val+"px"},y:h("top"),x:h("left"),display:function(e){this.node.style.display=e.val},w:function(e){var t=e.val;this.node.style.width=(t>-1?(0|t)+"px":t)||"100%"},h:function(e){var t=e.val;this.node.style.height=(t>-1?(0|t)+"px":t)||"100%"},opacity:function(e){var t=e.val;this.node.style.opacity=t>-1?t:1},html:function(e){var t=e.val||"";t.replace&&(t=t.replace(/\t/g,"    ").replace(/\r\n|\n|\r/g,"<br/>").replace(/  /g,"&nbsp; ").replace(/  /g," &nbsp;"),this.node.innerHTML=t)},href:function(e){this.node.href=e.val},text:function(e){var t=this.node,n=t.childNodes,i=e.val||"";if(i instanceof Object&&(i=""),/text/.test(t.type))return void(t.value=i);if(n)for(var r=0,o=n.length;o>r;r++)if(3===n[r].nodeType)return void(n[r].nodeValue=i);t.appendChild(document.createTextNode(i))}})})},{"../":205,"../../../util":315,"../../../util/hash":313,"../../../value":327,"../../animation/raf":200,"../../css":204,"../../ua":233}],211:[function(e,t,n){var i=e("../../../util");n.extend=i.extend(function(e){var t=e.Class.prototype,n=t.add;i.define(t,"add",function(e){e.process?(e.__tempAdd=i.arg(arguments),e.__tempAdd.unshift(this)):n.apply(this,arguments)}),e.extend({process:function(e){console.log("xxxx___xxxx"),this.__tempAdd&&!this.parent&&(n.apply(this.__tempAdd[0],this.__tempAdd.slice(1)),this.__tempAdd=null)}})})},{"../../../util":315}],212:[function(e,t,n){function i(e){document.activeElement?"INPUT"!==e.target.tagName&&"FORM"!==e.target.tagName&&(document.activeElement.blur(),u.removeEvent(!1,"blur")):u.removeEvent(!1,"blur")}var r,o=e("../../events"),a=e("../../cases"),s=e("../../ua"),c=!1,l=("ios"===s.platform,"android"===s.platform,e("../../../util").extend),u=o.document;a.touch?(o.preventDown={val:{down:function(e,t){document.activeElement?u.addEvent("up",i,"blur"):"INPUT"===e.target.tagName||"FORM"===e.target.tagName||o._maybescroll||e.preventDefault()}}},o.scrollbar={val:{down:function(e,t,n){var r,a,s,c,l,p,f,d=this,h="x"===n._val;if(h?(s="x",c="y",a="scrollLeft",p=d.node.scrollWidth-d.node.offsetWidth):(s="y",c="x",a="scrollTop",p=d.node.scrollHeight-d.node.offsetHeight),r=d.node[a],p>0){o[s]=!0,o._maybescroll=!0,h||(r?r===p?r=d.node[a]=p-1:r>p&&(f=!0):r=d.node[a]=1);var v=e.y,g=e.x,m=a+s;u.addEvent("move",function(e){var t=Math.abs(g-e.x),n=v-e.y,r=Math.abs(n);h?r>t&&(o[s]=!1,o[c]||e.preventDefault()):(t>r&&(o[s]=!1,o[c]||e.preventDefault()),f&&n>0&&e.preventDefault()),console.log("move"),l=!0,i(e),u.removeEvent(!1,m)},m),u.addEvent("up",function(e){var t,n,i=o._maybescroll;if(!l){var h=d.node[a];l=!(h===r)||0>h||h>p&&!f}if(!l&&!o[c]&&!o.click.block&&i&&i.length)for(t=i.length;t--;)e.prevent||(n=i[t],n[0].call(n[1],e));(!o[c]||l)&&(o._maybescroll=!1),o[s]=!1,u.removeEvent(!1,a),window.requestAnimationFrame(function(){document.body.scrollTop=0})},a)}}}},r=function(e){var t=this.node.style;"x"===e.val?(t.msTouchAction="pan-x",t.touchAction="pan-x",t.overflowY="hidden"):"y"===e.val&&(t.msTouchAction="pan-y",t.touchAction="pan-y",t.overflowX="hidden"),t.overflow="scroll",t.webkitOverflowScrolling="touch",t.msTouchAction="auto",t.touchAction="auto",this.events={scrollbar:e.val},c||(c=!0,u.events={preventDown:!0})}):r=function(e){var t=this.node.style;t.overflow="auto",t.overflowY="x"!==e.val?"scroll":"hidden",t.overflowX="y"!==e.val?"scroll":"hidden"},n.extend=l(function(e){e.extend({scrollbar:r})})},{"../../../util":315,"../../cases":202,"../../events":220,"../../ua":233}],213:[function(e,t,n){var i=e("../../ua"),r="-"+i.prefix.toLowerCase(),o=r+"-transform";n.getMatrix=function(e){if(e.style[o]){var t=window.getComputedStyle(e,null).getPropertyValue(o).replace("matrix(","").split(",");return t}}},{"../../ua":233}],214:[function(e,t,n){var i=e("../../util"),r=e("./"),o=e("../../object"),a=n,s=function(e,t,n,i){var r;for(var o in a)if(r=a[o].call(this,e,t,n,i))return r};i.define(r,"_set",function(e,t,n){if(!s.call(this,t,e[t],n,e))if(this.isProperty(t,e))"function"==typeof this[t]?e[t]instanceof Array?this[t].apply(this,e[t]):this[t](e[t]):this[t]=e[t];else if(e[t]instanceof r){var i;if(this[t]){for(var a=this.node.childNodes,c=0,l=a.length;l>c;c++)if(a[c]===this[t].node){i=a[c+1];break}this[t].remove&&this[t].remove()}var u=n?new e[t].Class:e[t];u.name=t,this.add(u,i),n&&this.eachInstance(function(){
var e=new u.Class;e._name=t,this.add(e)})}else if(this[t]instanceof o)this[t].val=e[t];else if(e[t]instanceof o)console.warn("are you sure you want to set using a vObject? maybe require some stuff (e.g. data)"),this[t]=e[t];else if(this[t]instanceof r)e[t]?this[t].set(e[t],n):e[t]===!1&&(n&&this.eachInstance(function(){this[t]&&this[t].remove()}),this[t].remove(),this[t]=null);else if(e[t]instanceof Object){var u=(new r).set(e[t],n);u.name=t,this.add(u),n&&this.eachInstance(function(){var e=new u.Class;e._name=t,this.add(e)})}else console.warn('"'+t+'" is not an existing property. "'+e[t]+'" is a primitive. Adding as primitive.'),this[t]=e[t]},"convert",function(e){var t,n={};for(var a in e)t=i.isObj(e[a]),n[a]=this[a]instanceof r?t?this[a].convert(e[a]):this[a]:this[a]instanceof o?this[a].convert(t&&e[a]):void 0===this[a]||i.lookup.call(this,a)&&this[a]===!1?!1:this[a];return n})},{"../../object":303,"../../util":315,"./":205}],215:[function(e,t,n){function i(){var e=arguments,t=e.length;return function(n){for(var i=0,r=this;t>i;this.video.addEventListener(e[i++],function(e){n._val.call(r,e)}));}}function r(){function e(){if(t.time)if(t.time.val||(this._firstT=!0),p&&"chrome"!==a.browser){var n=0;clearInterval(t._timeFixInterval),t._timeFixInterval=setInterval(function(){t.updateTime(),3===n&&(t._canplay=null,clearInterval(t._timeFixInterval)),1!==t.video.duration&&(n++,t.playing&&t.video.play())},200)}else t.time.val?u?setTimeout(function(){t.updateTime()},0):t.updateTime():t._forceTime=!0,t._canplay=null;t.video&&t.video.removeEventListener(f,e)}if(!this._canplay&&!l){this._canplay=!0;var t=this;this._canPlay=e,this.video&&this.video.addEventListener(f,e)}}function o(e){this.video.readyState?(this.video.currentTime=e,u&&(this._correctTime=e)):r.call(this)}var a=e("../../ua"),s=e("./"),c=e("../../../browser/events/util").postpone,l="windows"===a.platform&&"phone"===a.device,u="ios"===a.platform,p="android"===a.platform,f="canplay";t.exports={progress:{set:function(){var e=this;e.video&&e.video.addEventListener("end",e._prEnd=function(){e.clearProgress()})},remove:function(){this.video&&(this.video.removeEventListener("canplay",this._canPlay),this.video.removeEventListener("end",this._prEnd))}},buffer:function(e){if(this.video&&this.video.buffered){for(var t,n,i=this.video.buffered.length,r=-1,o=this.video.currentTime||0,a=0;i>a&&(t=this.video.buffered.start(a),t>r&&o>t);a++)r=a,n=t;return r>-1?(r=this.video.buffered.end(r),o>r?0:r/this.duration.val):0}return 0},play:function(e){e?this.video.play():this.video.pause()},time:{set:u||p?c(o):o,get:function(e){var t=this.video&&this.video.currentTime;return this._correctTime&&(this._correctTime>t-2&&this._correctTime<t+2?(t=this._correctTime,this.cnt?this._cnt<2?(this._correctTime=!1,this._cnt=!1):(this._correctTime+=.5,this._cnt--):this.cnt=3):t=this._correctTime),t/this.duration.val||e.val}},duration:function(e){return this.video&&this.video.readyState?this.video.duration:e&&e.val},autoplay:function(e){this.video&&(this.video.autoplay=e.val)},volume:function(e){var t=e.val;this.video&&!isNaN(t)&&(this.video.volume=t)},"new":function(){r.call(this),this.volume&&this.volume.update(this)},events:{pause:function(e){var t=this;u&&t.video&&t.video.addEventListener("pause",function(e){t.ignoreevents||t.pause()})},progress:s.progress,ready:i("loadedmetadata"),canplay:function(e){var t=this;t.video&&t.video.addEventListener(f,function(n){t.video&&4===t.video.readyState&&(t._stalled=!1,e._val.call(t,n))})},stalled:function(e){var t=this,n=function(n){var i=t.getTime();t.getBuffer(i)-i>.05||(t._stalled=!0,e._val.call(t,n))};t.video&&(t.video.addEventListener("stalled",n),t.video.addEventListener("waiting",n))},play:{play:function(){this.events.play&&this.events.play._val.call(this)},set:!1},end:i("ended")},src:function(e){this.video&&(this.video.src!==e||e||!e&&this.video.src)&&(this.video.src=e.val)}},s.player||(s.player=t.exports)},{"../../../browser/events/util":222,"../../ua":233,"./":216}],216:[function(e,t,n){function i(e){this._readyForEvents=!0;var t=this,n=(this.player||p.player).events;return e.each(function(e){n[e]&&n[e].set!==!1&&(n[e].set||n[e]).call(t,this,e)}),n}function r(e){var t=this,n=(this.player||p.player).events;e.each(function(e){n[e]&&n[e].remove&&n[e].remove.call(t,this,e)})}function o(e){var t=this.events;if(t){var n=this,i=(this.player||p.player).events;t.each(function(t){i[t]&&i[t].play&&i[t].play.call(n,this,t,e)})}}function a(e){if(!this._progress){var t=e,n=t.interval&&t.interval.val||500,i=t._val,r=this,o=(this.player||p.player).progress;o&&o.set&&o.set.call(r),r._progress=setInterval(function(){var e=Number(r.getTime()),t=r.getBuffer(e),n=Number(r.duration.val);1===n&&(n=0),e>=1&&n?(console.log("--->PAUSE!"),r.pause(),r.playing=!1,r.clearProgress()):(r._stalled&&n&&(t>.85||r.__lp&&r.events.canplay&&e>r.__lp+1/n?(r._stalled=!1,r.events.canplay._val.call(r),r.__lp=null):!r.__lp&&e>-1&&(r.__lp=e)),r.ignoreevents||i.call(r,e,t))},n)}}var s=e("../").inject(e("../properties")),c=e("../../events"),l=e("../../../util"),u=new s({node:"video"});t.exports=n=u.Class;var p=n;n.base=u,u.setSetting({name:"_videoSettings","new":function(){this.player["new"]&&this.player["new"].call(this)},remove:function(){this.player.remove&&this.player.remove.call(this)},render:function(){this.player.render&&this.player.render.call(this)}}),u.node.setAttribute("webkit-playsinline",""),this._progress=a,n.progress={play:function(e,t,n){n?a.call(this,this.events.progress):this.clearProgress()},set:function(e){this.playing&&a.call(this,e)},remove:function(){this.clearProgress()}},l.define(n,"setEvents",function(){i.call(this,this.events)},"play",function(e,t){e&&delete this.ignoreevents,t||this.ignoreevents||this.playing===!0?this.__paused&&this.events.progress&&(this.playing=!0,a.call(this,this.events.progress)):(this.playing=!0,o.call(this,!0)),this.__paused=null,(this.player||p.player).play.call(this,!0)},"pause",function(e){e&&(this.ignoreevents=!0),this.ignoreevents||this.playing===!1?this.clearProgress():(this.playing=!1,o.call(this,!1),this.events.pause&&this.events.pause._val.call(this)),this.__paused=!0,(this.player||p.player).play.call(this,!1)},"toggle",function(e){this.playing?this.pause():this.play()},"updateTime",function(){this._firstT=!1,n.setTime.call(this,this.time)},"getTime",function(){return(this.rendered&&this.player||p.player).time.get.call(this,this.time)||0},"getBuffer",function(e){return(this.rendered&&this.player||p.player).buffer.call(this,e||0)},"clearProgress",function(){if(this._progress){clearInterval(this._progress),this._progress=null;var e=(this.player||p.player).progress;e&&e.remove&&e.remove.call(this)}}),u.extend({name:"player",type:!1,set:function(e){l.setstore.call(this),this.__.player=e,e.element&&(this.node=e.element),this._class&&(this._class.prototype._.player=e)},get:function(e){return l.getStore.call(this,"player")||p.player||{}}},{name:"duration",set:function(e){},get:function(e){return e._overwrite=(this.player||p.player).duration.call(this,e),e}},{name:"$play",set:function(e){this.rendered&&(e.val?this.play():this.pause())}},{name:"time",set:n.setTime=function(e){if(!this._ignore){e._overwrite=null;var t=e.val,n=!1;void 0!==t&&(this._firstT&&this._forceTime!==!0||(t=Math.abs(t),n=!0,this._firstT=!0,this._forceTime=null),t>=0&&this.duration&&(this.__lp&&(this.__lp=null),(this.player||p.player).time.set.call(this,t*this.duration.val),this.events.seeking&&!n&&this.events.seeking._val.call(this,t)))}}},{autoplay:function(e){(this.player||p.player).autoplay.call(this,e)},volume:function(e){(this.player||p.player).volume.call(this,e)},src:function(e){e.val!==this.___Src&&(this.___Src=e.val,this.events.src&&this.events.src._val.call(this,e),(this.player||p.player).src.call(this,e))}},{name:"events","new":function(){this.player&&this.player.setEvents!==!1&&i.call(this,this.events)},remove:function(){this.rafId&&(window.cancelAnimationFrame(this.rafId),this.rafId=null),r.call(this,this.events)},set:function(e){var t=l.arg(arguments);t[5]=this._readyForEvents?i.call(this,e):(this.player||p.player).events,t[5].seeking||(t[5].seeking={set:!1}),t[5].src||(t[5].src={set:!1}),c._set.apply(this,t)}})},{"../":205,"../../../util":315,"../../events":220,"../properties":210}],217:[function(e,t,n){n.time=function(e,t){var n=~~(e/3600),i=~~(e%3600/60),r=t?(e%60).toFixed(t):~~(e%60);return ret="",n>0&&(ret+=""+n+":"+(10>i?"0":"")),ret+=""+i+":"+(10>r?"0":""),ret+=""+r,ret||0}},{}],218:[function(e,t,n){function i(e,t){return e.move&&e.move._val||!t.__t&&t!==!0&&t||t._val}function r(e,t,n){var r=n.bind?n.bind._val:this,o=i(n,t),a="drag";e.preventDefault(),o&&p.addEvent("move",function(e){o.call(r,e,n)},a),n.down&&n.down._val.call(r,e,n),p.addEvent("up",function(e){n.up&&n.up._val.call(r,e,n),p.removeEvent(!1,a)},a)}function o(e,t,i){var r=this,o="active",a=setTimeout(function(){r.css={addClass:i._val},a=null},50);n._deactivate&&n._deactivate(),n._deactivate=function(){a&&clearTimeout(a),p.removeEvent(!1,o),n._deactivate=null,window.requestAnimationFrame(function(){r&&(r.css=r._stayActive?{addClass:i._val}:{removeClass:i._val})})},p.addEvent("move",n._deactivate,o),p.addEvent("up",n._deactivate,o)}function a(e){for(var t,n={},i=e.keys,r=i.length-1;r>=0;r--)t=i[r],n[t]=e[t];return n}function s(e,t,n,i){return e[i]&&e[i]._e||(e[i]={_e:0}),n[i]._val!==!0&&e[i].set("_e",a(n[i])),t[i]-e[i]._e.val}function c(e,t,n,r){var o=n.bind&&!r?n.bind.val:this,a=(n.y?"y":n.x?"x":"xy")+"Grab"+(r||"");if(o)if(o._node){var u,f,d,h,v,g,m=i(n,t),y=e.x,_=e.y,b=y,w=_,k=function(e){o.x._p=!1,o.y._p=!1,n.up&&g&&n.up._val.call(o,e,{x:b-y,y:w-_},{x:b-h,y:w-v}),l.click.block=!1,p.removeEvent(!1,a)};n.x||n.y||(n.x={_val:!0},n.y={_val:!0}),n.down&&n.down._val.call(o,e,n),p.addEvent("move",function(e){h=b,v=w,b=e.x,w=e.y,l.click.block=!0,u?(e.preventDefault(),f&&(o.x={_e:b-f}),d&&(o.y={_e:w-d}),m&&m.call(o,e,{x:b-y,y:w-_},n)):(g=n.pass?n.pass._val.call(o,e,{x:b-y,y:w-_}):!0,g?(e.preventDefault(),n.x&&(f=s(o,e,n,"x"),o.x._p=1),n.y&&(d=s(o,e,n,"y"),o.y._p=1),n.start&&n.start._val.call(o,e,n),u=!0):(k(e),m=!1,p.removeEvent(!1,a)))},a),p.addEvent("up",k,a)}else for(var x=o.length-1;x>=0;x--)c.call(o[x],e,t,n,x+1)}var l=e("./"),u=e("../../value/operators"),p=l.document;t.exports=l,u._e=function(e,t){return e+t},u._esub=function(e,t){return e-t},u._e.order=3,l.drag={val:{down:r}},l.grab={val:{down:c}},l.active={val:{down:o}}},{"../../value/operators":330,"./":220}],219:[function(e,t,n){function i(e,t,n){e.x=e.pageX,e.y=e.pageY,t.call(this,e,n)}function r(e,t,n){var i="_"+e;c.define(a,i,{value:[]});var r={create:function(r,o){var c=function(e){if(this.rendered)if(n)n.call(this,e,this.events[o]._val);else if(a[o]&&a[o].val){var t=a[o].val;for(var i in a[o])s[i]&&(t=a[o][i]);t=t[r],t&&t.call(this,e,this.events[o]._val)}else this.events[o]&&this.events[o]._val.call(this,e)};a.document.addEvent(t,function(e){for(var t=a[i],n=t.length-1;n>=0;n--)c.call(t[n],e),t[n]&&t[n].eachInstance(c,"events",e)},e)},add:function(t,n){n=i,this.setSetting({name:n,remove:a[e].remove}),c.checkArray(a[i],this)||a[i].push(this)},remove:function(){var t=c.checkArray(a[i],this,!0);if(~t){var n;this.events&&this._from.base.events&&(n=this.events[e]===this._from.base.events[e]),n?console.log(n,"noRemove evnt, are we sure - fix this asap"):a[i].splice(t,1)}}};a[e]=r}function o(e,t,n){1!==e.which||a.down.block||i.call(this,e,t,n)}{var a=t.exports=e("./"),s=e("../cases"),c=e("../../util");e("../ua")}s.touch="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||navigator.msMaxTouchPoints||!1,c.define(a,"_out",{value:[]}),a.$makeKeyBoardEvent=r,r("keyboard","keyup"),r("keyboardDown","keydown"),r("keyboardDown$down","keydown"),r("keyboardDown$click","keydown"),a.down={touch:{touchstart:function(e,t,n){if(!a.down.block){var i=e.targetTouches[0]||{};e.x=i.pageX,e.y=i.pageY,t.call(this,e,n)}}},val:{mousedown:o}},a.rdown={touch:{touchstart:function(){}},val:{mousedown:function(e,t,n){3===e.which&&(document.oncontextmenu=function(){return!1},e.preventDefault(),i.call(this,e,t,n),setTimeout(function(){document.oncontextmenu=!1},0))}}},a.move={touch:{touchmove:function(e,t,n){var i=e.targetTouches[0];e.x=i.pageX,e.y=i.pageY,t.call(this,e,n)}},val:{mousemove:i}},a.up={touch:{touchend:function(e,t,n){var i=e.changedTouches;e.x=i[0].pageX,e.y=i[0].pageY,t.call(this,e,n)}},val:{mouseup:i}},a.click={val:{down:function(e,t,n){var i=this,r="click";a.click.block||(i.addEvent("up",function(e){i.removeEvent("up",r);var o=a._maybescroll;o?o.length?a._maybescroll.unshift([t,i]):a._maybescroll=[[t,i]]:a.click.block||t.call(i,e,n)},r),setTimeout(function(){i.removeEvent("up",r)},300))}}},a.rclick={val:{rdown:a.click.val.down}};var l=function(){var e=c.checkArray(a._out,this,!0);~e&&(a._out.splice(e,1),this.removeSetting("_out",u))},u={name:"_out",render:function(){c.checkArray(a._out,this)||a._out.push(this)},remove:l};a.out={create:function(){this.m=!0,a.document.addEvent("up",function(e){for(var t=e.target,n=function(){for(var n,i=t;i&&!n;)i.base&&this===i.base?n=!0:i=i.parentNode;!n&&this.rendered&&this.events.out._val.call(this,e)},i=a._out,r=i.length-1;r>=0;r--)n.call(i[r]),i[r]&&i[r].eachInstance(n,"events")},"out")},add:function(){this.setSetting(u)},remove:l}},{"../../util":315,"../cases":202,"../ua":233,"./":220}],220:[function(e,t,n){function i(e,t){n[e]?s(e,t):(n[e]={_basic:!0},o(e))}function r(e,t){return function(i){for(var r,o,a=i.target;a;){if(r=a.base){if(o=r.events,o[e]&&(t?n[e]._m.call(r,i,o[e]):o[e]._val&&o[e]._val.call(r,i),i.prevent))return;if(o=r.__e,o&&o[e])for(var s in o[e])if("_uid"!==s&&(t?n[e]._m.call(r,i,o[e][s]):o[e][s].call(r,i),i.prevent))return}a=a.parentNode}}}function o(e,t){var i=e||t;n._r[e]=!0,"scroll"===i?document.addEventListener(i,function(t){var n,i=t.target.base;if(i&&(n=i.events,n&&n[e]&&n[e]._val.call(i,t),n=i.__e,n&&n[e]))for(var r in n[e])"_uid"!==r&&n[e][r].call(i,t)},!0):document.addEventListener(i,n[e].m=r(e))}function a(e,t,o,a){var s=n[e]._m=function(e,n){e.prevent||t.call(this,e,n._val||n.val||n,n)};n[e].m=r(e,!0),n._r[e]=!0,n[o]&&(n[o].m||i(o,a),n[o]._basic?n[e].__e=o:(n[e].__e=n[o].__e,n[e]._m=function(e,t){n[o]._m.call(this,e,function(e){s.call(this,e,t)})})),document.addEventListener(n[o]&&n[o].__e||o,n[e].m)}function s(e,t){n[e].create&&n[e].create(e,t);var i,r,s;for(r in n[e])l[r]===!0&&(i=n[e][r]);if(i||(i=n[e].val)){for(s in i);if(n[e].__e=s,i[s]===!0)n[e]._basic=!0,o(e,s);else for(s in i)n[s]&&n[s].add&&n[e]&&!n[e].add&&(n[e].add=f(n[s].add,e,s)),a(e,i[s],s,t)}}var c=e("../element"),l=e("../cases"),u=e("../../util"),p=function(){};u.define(p,"_uid",{value:0}),n._r={},n.document=new c({node:document}),n.document.exec=function(e){if(this.__e[e]){var t=u.arg(arguments,1);for(var n in this.__e[e])this.__e[e][n].apply(this,t)}};var f=function(e,t,n){return function(){return e.apply(this,arguments)}};n._set=function(e,t,r,o,a,s){var c=this;e.each(function(t){s&&s[t]||(this._val===!1?n[t]&&(n[t].remove&&n[t].remove.call(c),c.eachInstance(n[t].remove,e._prop.name),this.remove()):(n[t]&&n[t].m||i(t,t),n[t].add&&n[t].add.call(c,!1,t)))})},c.base.extend({name:"events",set:n._set}),u.define(c,"addEvent",function(e,t,r){n[e]&&n[e].m||i(e);var o=this.__e||(this.__e={}),a=o[e]||(o[e]=new p);return r||(a._uid++,r=a._uid),a[r]=t,n[e].add&&n[e].add.call(this,r,e),this},"removeEvent",function(e,t,i){var r,o=this.__e;if(o)if(e&&o[e]){if(r=n[e]&&n[e].remove,t)!o[e][t]||i&&o[e][t]!==i||(r&&n[e].remove.call(this,t),delete o[e][t]);else for(t in o[e])i&&o[e][t]!==i||(r&&n[e].remove.call(this,t),delete o[e][t]);u.empty(o[e])&&delete o[e]}else if(!e)for(e in o)this.removeEvent(e,t,i);return u.empty(o)&&delete this.__e,this}),e("./basic")},{"../../util":315,"../cases":202,"../element":205,"./basic":219}],221:[function(e,t,n){function i(e,t,i,s,c){if(!e)return 0;var l=!1;t||(t=[],l=!0),o.Element&&e instanceof o.Element&&(e=e.node);var u=e[s];if("number"!=typeof u&&(u=0),e.parentNode&&n[i](e.parentNode,t),"absolute"!==(e.style&&e.style.position||e.__preCss||e.className&&(e.__preCss=a(e.className,"position")||!0)))t.push(["rel",u]);else{var p=r(e);t.push(["abs",p?parseInt(p[c],10)+u:u])}if(l){var f,d,h=0;for(d in t)"abs"==t[d][0]?h+=t[d][1]:f=t[d][1];u="rel"===t[t.length-1][0]?h+f:h}return u||0}var r=e("../element/properties/util").getMatrix,o=e("../../"),a=e("../css");n.left=n.x=function(e,t){return i(e,t,"left","offsetLeft",4)},n.top=n.y=function(e,t){return i(e,t,"top","offsetTop",5)}},{"../../":238,"../css":204,"../element/properties/util":213}],222:[function(e,t,n){var i=e("../animation/raf"),r=e("../../util");n.throttle=function(e,t,n){t||(t=20);var r,o,a=!n;return function(){o=arguments,a&&(n=this),r||(r=t,i(function s(){r--,r?i(s):e.apply(n,o)}))}},n.postpone=function(e,t,n){t||(t=200);var i,r,o=!n;return function(){return r=arguments,o&&(n=this),i&&clearTimeout(i),i=setTimeout(function(){e.apply(n,r)},t)}},n.interval=function(e,t,n){t||(t=30);var o,a,s=r.arg(arguments,3);return o||(o=t,i(function c(){o--,o||(o=t,e.apply(n,s)),a||i(c)})),function(){a=!0}}},{"../../util":315,"../animation/raf":200}],223:[function(e,t,n){var i,r="addEventListener",o=e("../../util"),a=(e("../ua"),0),s=t.exports=function(e,n){var c=e.url;if(!n&&c instanceof Array){e.m=function(){if(++e.r===e.n){for(var t=0,n=[],i=c.length;i>t;n.push(e.d[c[t++]]));e.complete(n)}},e.r=0,e.d={};for(var u=0,p=e.n=c.length;p>u;t.exports(e,c[u++]));}else{var f=e.data,d=e.encode,h=(e.api||"")+(n||c),v=e.headers,g=e.complete,m=e.progress,y=e.error,_=e.change,b=e.mime,w=e.user,k=e.pass,x=e.jsonp,j=e.parse,C=e.iframe,S=null,E=e.fallback,O=e._fallbackIndex,A=e.type||e.method||"GET",T=e.contentType||"json"===d?"application/json":"application/x-www-form-urlencoded",$=e.async===!1?!1:!0;if(x)s.jsonp(h,g,y);else{var P=new XMLHttpRequest;if(C){a++;var L,R={},I=a;for(var D in e)"error"!==D&&"iframe"!==D&&"complete"!==D&&(R[D]=e[D]);var B=function(){var e;i[C].onload=null;var t=function(e){if(e.data){var n;try{n=JSON.parse(e.data)}catch(e){return void(y&&y(e))}if(n.id!==I)return;if(n.err)return void(y&&y(n.err));var i=n.msg;if(g){if(j!==!1)try{i=JSON.parse(i)}catch(e){}g(i,e)}removeEventListener("message",t)}};window.addEventListener&&(addEventListener("message",t,!1),e=i[C].contentWindow,R=JSON.stringify({msg:R,id:I}),e.postMessage(R,"*"))};return i||(i={}),void(i[C]?i[C].cListeners?i[C].cListeners.push(B):B():(L=i[C]=document.createElement("iframe"),L.src=C,L.cListeners=[B],L.onload=function(){for(var e in L.cListeners)L.cListeners[e]();L.cListeners=null},L.style.visibility="hidden",L.style.width="0px",L.style.height="0px",L.style.position="absolute",document.body.appendChild(L)))}if(f&&("GET"===A?h+="?"+l(f,"GET",d):S=l(f,"POST",d)),P.open(A,h,$,w,k),P.setRequestHeader("Content-Type",T),v)for(var N in v)P.setRequestHeader(N,v[N]);g&&P[r]("load",function(t){var i=(t.target||t.srcElement).response;if(j!==!1)try{i=JSON.parse(i)}catch(t){}e.m?(e.d[n]=i,e.m()):g(i,t)},!1),y&&(O||(e._fallbackIndex=0),E&&O!==E.length?(e._fallbackIndex++,e=o.merge(e,O),s(e,n)):P[r]("error",y,!1)),m&&P[r]("progress",m,!1),_&&(P.onreadystatechange=_),b&&P.overrideMimeType(b),P.send(S)}}},c=0;s.jsonp=function(e,t,n,i,r){r&&r!==!0||(r="callback");var o="_jsonp_"+c++,a=document.createElement("script");e+=e.match(/\?/)?"&"+r+"="+o:"?"+r+"="+o,a.type="text/javascript",a.src=e,n&&(a.onerror=function(e){n(e)}),window[o]=function(e){t.call(i||window,e),document.getElementsByTagName("head")[0].removeChild(a),a=null,delete window[o]},document.getElementsByTagName("head")[0].appendChild(a)};var l=s.encode=function(e,t,n){var i="";if("json"===n)i=JSON.stringify(e);else if(e instanceof Object)if(!o.isNode&&window.FormData&&e instanceof FormData&&"GET"!==t)i=e;else if(e instanceof Array)i=JSON.stringify(e[r]),"uri"===n&&(i=encodeURIComponent(i));else{for(var r in e){var a=e[r];a instanceof Object&&(a=JSON.stringify(a)),"uri"===n&&(r=encodeURIComponent(r),a=encodeURIComponent(a)),i+=r+"="+a+"&"}i=i.slice(0,-1)}else i="uri"===n?encodeURIComponent(e):e;return i}},{"../../util":315,"../ua":233}],224:[function(e,t,n){function i(e){r.define(e,"authenticate",function(e,t,n){function i(){console.error("connect ->>> reAuth?"),r._status>2&&(console.error("reconnect ->>> reAuth!",e),r.authenticate(e,t,!0))}window.authrequest=e;var r=this;return"function"==typeof e&&(e=e()),e?(r.emit("authenticate",e,function(e){e.hop?r.hop(e.hop):t&&t(e)}),n||r.on("connect",i),void(r._reAuth=i)):r.socket.removeListener("connect",i)},"logout",function(e){var t=this;t.emit("logout",e),t.data.users[e]&&t.data.users[e].activeClient&&t.data.users[e].activeClient.from._name===t.clientid&&t.data.users[e].activeClient.remove();var n=t.stamp;e?(t.data.users[e]&&t.data.users[e].activeClient&&t.data.users[e].activeClient.from._name===t.clientid&&(t.data.users[e].activeClient.from=t.data.users[e].activeClient),t.data.users[e].remove(void 0,void 0,void 0,void 0,n)):t.data.users.each(function(e){this.remove(void 0,void 0,void 0,void 0,n)}),t.socket.removeListener("connect",t._reAuth),t._reAuth=null})}var r=e("../../../util");n.extend=r.extend(i)},{"../../../util":315}],225:[function(e,t,n){function i(e,t){}function r(e,t,n){return e.length?(c.path(t,e,n,!0),t):n}function o(e){for(var t in e)e[t]instanceof Object&&(e[t]instanceof f?e[t]={$path:e[t]._path}:o(e[t]))}function a(e,t,n,i,r,a){var s=this.cloud;if("localStorage"!==t&&t!==!1&&t!==s.stamp&&void 0!==e)if(i&&n)n._removed&&s.set(n._hashpath,[n._path,null,s.timeStamp()]);else if(n&&!this._cloudignore&&n._updateOrigin===n){2===n.__t&&e instanceof Object&&o(e);var c=n&&n._path;if(c&&"users"===c[0]&&c[c.length-2]&&"clients"===c[c.length-2])return;if(c&&"users"===c[0]&&"media"===c[1])throw new Error("THIS IS WRONG ABORT!---> setting users.media "+c.join("."));s.set(n._hashpath,[n._path,4===n.__t?{$path:e._path}:e,s.timeStamp()])}}var s,c=e("../../../util"),l=e("../data").inject(e("../../../object/hashpath")),u=e("../data/element"),p=e("../../../data"),f=e("../../../object"),d=(e("monotonic-timestamp"),l["new"](!1,function(e,t,n,r){var o=this;r?(o.cloud=r,o.addListener(a),!c.isNode&&window.cordova&&(document.addEventListener("pause",function(){o.preventUpdate=!0},!1),document.addEventListener("resume",function(){r.kickPing(),o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(function(){o.defered&&o.merge(o.defered.data,!1,o.defered.stamp),o.preventUpdate=null,o.defered=null,o.timeout=null},100)},!1)),r.on("set",function(e){var t=(e.s,e.v),n=r.state.subs.map,a=t[1];if(t[0]instanceof Array)for(var s=t[0].length;hash=t[0][--s];)i(n[hash],e.v[1]);else i(n[e.v[0]],e.v[1]);r.stamp=a,o.preventUpdate?o.defered?(o.defered.stamp=a,o.defered.data=c.merge(o.defered.data,e.s)):o.defered={data:e.s,stamp:a}:o.merge(e.s,!1,a)})):n&&(o.cloud=n.cloud)}));t.exports=d,d.prototype._blacklist.push("cloud","datacloud","_batchUnsub","_cloudignore","_lstamp","$t","$loaded"),s=d.prototype.__update,d.inject(e("vigour-js/object/flags")),d.flags.$path={reset:!0,set:function(e,t,n){if(n)throw new Error("cloud data $path flag reset???");if(t!==this.cloud.stamp)throw new Error("set with $path only allowed from the hub");var i=c.changeType(e);if(i.length&&this._$setVal(this.cloud.data.get(i,{},void 0,t),t,!1,!0),4!==this.__t)throw new Error("cloud data $path flag __t !== 4")}};var h=d.prototype.set,v=d.prototype._$setVal;c.define(d,"_$setVal",function(e,t){if(this.cloud.stamp===t&&!this.$loaded)for(var n=this;n&&!n.$loaded;)n.$loaded=!0,n=n._parent;v.apply(this,arguments)},"set",function(e,t,n,i){return i===this.cloud.stamp||"clients"!==this._name||this[e]||e===this.cloud.clientid||console.error("\n\nI WANT TO BLOCK THIS YA DURK","\nstamp !== this.cloud.stamp",i!==this.cloud.stamp,"\nthis._name === 'clients'","clients"===this._name,"\n!this[name]",!this[e],"\nname !== this.cloud.clientid",e!==this.cloud.clientid),h.apply(this,arguments)},"updateQueue",function(){},"stamp",function(){return this.cloud?this.cloud.timeStamp():void console.error("WAT NO CLOUD?! in this:\n",this)},"__update",function(e,t,n,i,r,o){return this._lstamp=t,s.call(this,e,t,n,i,r,o)},"_set",function(e,t){return!t||this._lstamp>t?void 0:l.prototype._set.apply(this,arguments)},"subscribe",function(e,t,n){if(t&&t.cloud&&t._val===this,e&&"function"!=typeof e){var i,o,a,s,l,d,h,v=this._path,g=e[1],m=(v&&c.checkArray(v,"usage"),g&&!g._col&&(!g._dfrom||g._fmodel));if(m&&!g.getModel);else if(m){var y;e[1]._ignoreFieldInSubscription&&(e[3]||(y=!0)),h=e[3],o=g.getModel(this,e[3],y)}else if(e instanceof p&&e.__sub)o=u.parseData(e);else{if(e instanceof f){if(d=e._listeners)for(var _=0,b=d.length;b>_;_++)this.subscribe(d[_],e);return}!e||!c.isObj(e)||e instanceof Array||(o=e,e=JSON.stringify(e))}if(o){var w;t&&(o=u.parseData(t,o,this._subs)),t&&t.cloud&&t._val===this&&(v=t._path,w=!0),i=r(v,{},o),a=JSON.stringify(i);var k=w?t:this;k._subs||(k._subs=[]),g&&(g._subscribed=!0),s=[o,g||e,a],h&&s.push(h),l=c.checkArray(k._subs,a,2);var x;for(var j in k._subs)k._subs[j][1]===(g||e)&&k._subs[j][2]===a&&(x=!0);x||(k._subs.push(s),l===!1&&this.cloud.subscribe(i,a))}}},"unsubscribe",function(e,t){if(!(!e||e._col||e._filter&&e._filter._col||e._dfrom&&!e._fmodel)){var n,i,o,a,s,l,u,p=this._path,f=e._listeners;if(!c.isObj(e)||e instanceof Array||(e=JSON.stringify(e)),l=this._subs&&c.checkArray(this._subs,e,1),l!==!1&&void 0!==l){if(e.model&&e.model.parsing){if(e.model&&e.model.field){u=this.get(e.model.field.val),u._subs||(u._subs=[]);var d=c.get(this._subs[l][0],e.model.field.val);d&&(this._subs[l][0]=d)}return}i=this._subs[l],n=i[2],s=i[0],o=r(p,{},s),this._subs.splice(l,1),a=c.checkArray(this._subs,n,2),a===!1&&this.cloud.unsubscribe(o,n)}else if(e._removed);else if(f){for(var h=0,v=f.length;v>h;h++)f[h]instanceof Array?this.unsubscribe(f[h][1],e):f[h].__t&&this.unsubscribe(f[h],e);return}}})},{"../../../data":236,"../../../object":303,"../../../object/hashpath":302,"../../../util":315,"../data":231,"../data/element":230,"monotonic-timestamp":271,"vigour-js/object/flags":301}],226:[function(e,t,n){function i(){var e=this;e._joins={},e._status=1,e.on("connect",function(){e._status++,e._reconnect()}),e.state=new d({subs:{map:{},tree:{}},sets:{map:{}}}),e.state.sets.list||e.state.sets.set("list",[]),e.batch={maps:{sets:{},subs:{},unsubs:{}}},e.data=new p({},!1,!1,this),e._qTimer=setInterval(function(){e._doBatch()},v),e.on("subscribed",function(e){})}function r(e,t,n){t.each(function(t){this._subs&&this._subs.each(function(){n&&this.from.subsobj._v&&this.from.subsobj._v.remove(),e.unsubscribe(this.from)}),"_subs"!==t&&r(e,this,n)})}function o(e,t,n,i){var r=n.__t,o=i[e];if(o){var a=t[1],c=t[2],l=o.update[1];if(r&&(l=l.raw),a instanceof Object&&l instanceof Object&&!a.$path&&!l.$path&&(r||(l=u.clone(l)),a=u.merge(l,a)),r?(o.update.set(1,a),o.update.set(2,c)):(o.update[1]=a,o.update[2]=c),!r){var p=o.i,f=n.length-1;if(p!==f){s(n,p);for(var d in i)i[d].i>=p&&i[d].i--;o.i=f}}}else{var h={update:t,i:n.length};r?i.set(e,h):i[e]=h,o=i[e],n.push(o.update)}}function a(e,t,n){t.each(function(i){return"*"===i?(e.$||e.set("$",{}),void t["*"].each(function(i){t["*"][i][1].each(function(r){a(e.$,t["*"][i][1][r],n)})})):(e[i]||e.set(i,{}),void(t[i].val===!0?e[i]._subs?e[i]._subs.push(n):e[i].set("_subs",[n]):a(e[i],t[i],n)))})}function s(e,t){for(var n=e[t];e[t+1];)e[t]=e[++t];e[t]=n}function c(e,t){for(;e[t+1];)e[t]=e[++t];e.pop()}t.exports=i;var l=e("monotonic-timestamp"),u=e("../../../util/object"),p=e("./data"),f=e("../../../object"),d=(f["new"]({merge:!0}),f["new"]({merge:!0})),h=e("../../../util/hash"),v=20,g="subs",m="sets",y="unsubs";i.prototype.timeSync=function(){var e=this,t=Date.now();e.emit("time",function(n){var i=Date.now()-t,r=t+i/2,o=n-r;i<e._timeTravel&&(e._timeTravel=i,e._timeOffset=o);var a=e._timeTries++;(i>75&&10>a||i>50&&5>a||i>20&&2>a)&&e.timeSync()})},i.prototype.outList=function(e){var t=this.batch;return t.lists?t.lists[e]?t.lists[e]:t.lists[e]=[]:(t.lists={},t.lists[e]=[])},i.prototype._doBatch=function(){var e=this,t=e.batch.lists;t&&(e.emit("batch",t),e.batch.lists=null,e.batch.maps={subs:{},sets:{},unsubs:{}})},i.prototype._clearCache=function(){},i.prototype.subscribe=function(e,t){var n,i,r=this,o=r.state;if(e.hash&&e.subsobj?(n=e.hash,i=e):(t||(t=JSON.stringify(e)),n=h(t),i=o.subs.map[n]),i){if(!i.active||i.active._val)return;i.active.val=r._status}else{o.subs.map.set(n,{hash:n,subsobj:e,active:r._status,cleared:!1}),i=o.subs.map[n];var s=o.subs.tree;a(s,i.subsobj,i)}var c=r.batch.maps.unsubs,l=c[n];if(void 0!==l)return void r.cancel(n,l,y);var p,f=r.outList(g),d=r.batch.maps.subs;if(i.cleared._val)p=i.subsobj.raw,i.cleared.val=r._status;else{i.cleared.val=r._status;var v=r.getDeps(o.subs.tree,i.subsobj,i,{});p=u.empty(v)?i.subsobj.raw:{$subsobj:i.subsobj.raw,$depends:v}}d[n]=f.length,f.push(p)},i.prototype.getDeps=function _(e,t,n,i){return t.each(function(r){var o=e[r];o&&(o._subs&&o._subs.each(function(e){var t=this._val;!t.subsobj._v||t.hash._val===n.hash._val||t.cleared._val||i[t.hash._val]||(t.cleared.val=n.cleared._val,i[t.hash._val]=t.subsobj.raw)}),_(o,t[r],n,i))}),i},i.prototype.unsubscribe=function(e,t){var n=this;if(e instanceof Array){var i=n.state.subs.tree,o=i.get(e);o&&r(n,o,t)}else{var a,s,c=n.batch.maps.subs;if(e.hash)a=e.hash.val,s=e;else{t||(t=JSON.stringify(e)),a=h(t);var l=n.state.subs.map;s=l[a]}var u=c[a];if(void 0!==u)n.cancel(a,u,g);else{var p=n.outList("unsubs");n.batch.maps.unsubs[a]=p.length,p.push(a)}s.active.val=!1}},i.prototype.cancel=function(e,t,n){var i=this.batch,r=i.lists[n];c(r,t),r.length||(delete i.lists[n],u.empty(i.lists)&&delete i.lists);var o=i.maps[n];delete o[e];for(e in o)o[e]>t&&o[e]--},i.prototype.set=function(e,t){!t[0].length;var n=this,i=n.outList(m),r=n.batch.maps.sets;o(e,t,i,r)},i.prototype._reconnect=function(){var e=this,t=e.state,n=t.subs.map;if(e._timeTries=0,e._timeTravel=1/0,e.timeSync(),e.stamp="cleanup",e.data.clients){var i=e.data.clients[e.clientid];i&&(i=i.raw,delete i.key,delete i.type,delete i.ip,delete i.token),e.data.set("clients",{clear:!0},void 0,e.stamp),e.clientid&&e.client&&(e.client.val=e.data.clients.get(e.clientid,{}),i&&(e.client.from.val=i))}e.data.users&&e.data.users.each(function(){this.set("clients",{clear:!0},void 0,e.stamp)});var r=[];n.each(function(e){var t=this,n=t.active,i=t.cleared;1===n._val?(n.val=!0,i.val=!0):n._val?(n.val=!1,1===i._val?i.val=!0:i._val&&(i.val=!1),r.push(t)):i._val&&(i.val=1===i._val?!0:!1)});for(var o,a=0;o=r[a];a++)e.subscribe(o);for(var s in e._joins)e.join(e._joins[s],!0)},i.prototype.timeStamp=function(){var e=l();return this._timeOffset&&(e+=this._timeOffset),e}},{"../../../object":303,"../../../util/hash":313,"../../../util/object":317,"./data":225,"monotonic-timestamp":271}],227:[function(e,t,n){function i(e){return e?r(e):void 0}function r(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}t.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){i.off(e,n),t.apply(this,arguments)}var i=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var i,r=0;r<n.length;r++)if(i=n[r],i===t||i.fn===t){n.splice(r,1);break}return this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var i=0,r=n.length;r>i;++i)n[i].apply(this,t)}return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length};

},{}],228:[function(e,t,n){function i(e,t,n){for(var i=n.length-1;i>=0;i--)r(e,t,n[i])}function r(e,t,n){e[n]=function(){var e=this[t];e[n].apply(e,arguments)}}function o(){var e=u.arg(arguments);e.unshift(_),console.log.apply(console,e)}function a(e){return function(){var t=u.arg(arguments);t.unshift(_,e),console.log.apply(console,t)}}function s(e){return e=e||f.session("VID")||d("V_"),f.session("VID",e)}function c(e,t){for(var n in e._callbacks)for(var i,r=e._callbacks[n],o=0;i=r[o];o++)"on"===i.name&&i.fn?t.once(n,i.fn):t.on(n,i);e.off()}function l(e,t){var n=e.indexOf("?");return n>-1&&(e=e.slice(0,n)),e+"?"+h(t,"GET","uri")}var u=e("../../../util"),p=e(u.isNode?"socket.io-client":"./socket.io.js"),f=e("../../../util/global"),d=e("../../../util/id"),h=e("../ajax").encode,v=e("../../../object"),g=e("../../../value"),m=e("./emitter"),y=t.exports=function(e,t){t||(t={});var n=this;if(n.params=t,n.url=e,n.VID=t.VID=s(t.VID),n.connected=new g(!1),n.api=new g({defer:function(e,t){var n=this.from.__t;if(2!==n)throw new Error("cloud.api needs to be an Object");e()}}),t.api&&(n.api.val=t.api),n.addDocumentListeners(),e instanceof v){var i=e.val;if(i)n.init(e,t);else{var r=new m;r.emit=function(){var e=n.emitbuffer||(n.emitbuffer=[]);e.push(arguments)},r.placeholder=!0,n.socket=r,e.addListener(function(i,r,o,a){this.val&&n.init(e,t)})}}else n.init(e,t)};y.inject=e("../../../util/inject"),y.prototype.addDocumentListeners=function(){var e=this;!u.isNode&&window.cordova&&(document.addEventListener("resume",function(){e.connected.val=!1},!1),document.addEventListener("pause",function(){e.connected.val=!1},!1))},y.prototype.init=function(e,t){var n=this,i=n.connect(e,t,{disconnect:function(){o("disconnect"),n.connected.val=!1},connect:function(){o("connect"),n.connected.val=!0,i.io.engine.on("heartbeat",function(){n.connected.val=!0})},welcome:function(e){o("welcome"),e=e.split("@");{var i=(n.clientid=e[0],e[1]);n.state}n.hub=t.h=i,n.socket.io.uri=l(n.socket.io.uri,t)},hop:function(e){o("hop"),n.hop(e)},err:function(e){o.error(e),"tokenCheck"===e.type&&"undefined"!=typeof localStorage&&(localStorage.removeItem("productionuserToken"),localStorage.removeItem("userId"))},reconnecting:a("reconnecting"),reconnect_attempt:a("reconnect_attempt"),reconnect:a("reconnect"),reconnect_failed:a("reconnect_failed")}),r=n.emitbuffer;if(r){for(var s in r)i.emit.apply(i,r[s]);n.emitbuffer=null}},y.prototype.connect=function(e,t,n){var i=this;e||(e=i.url),t||(t=i.params),e instanceof v&&(e=e.val),e=l(e,t);var r=i.socket;r&&!r.placeholder&&(r.disconnect(),r.io.disconnect());var o=i.socket=new p(e,{forceNew:!0,timeout:5e3});if(n)for(var a in n)o.on(a,n[a]);return r&&c(r,o),o},y.prototype.hop=function(e){var t=this,n=t.params;-1!==e.indexOf("@")&&(t.url="ws://"+e.split("@")[1]),t.hub=n.h=e,t.connect()},y.prototype.whenReady=function(e){this.clientid?e():this.once("welcome",e)},y.prototype.kickPing=function(e){var t=this.socket.io.engine;t.ping(),t.onHeartbeat(e||t.pingTimeout),t.setPing()},y.prototype.disconnect=function(){var e=this.socket;e&&(e.disconnect(),e.io.disconnect())},i(y.prototype,"socket",["on","once","emit"]);var _=":: vigour-cloud ::";o.error=function(e,t){console.error(_,e,"\n",t)}},{"../../../object":303,"../../../util":315,"../../../util/global":312,"../../../util/id":314,"../../../util/inject":316,"../../../value":327,"../ajax":223,"./emitter":227,"./socket.io.js":229,"socket.io-client":278}],229:[function(e,t,n){(function(i){!function(e){if("object"==typeof n&&"undefined"!=typeof t)t.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r;"undefined"!=typeof window?r=window:"undefined"!=typeof i?r=i:"undefined"!=typeof self&&(r=self),r.io=e()}}(function(){var t;return function n(t,i,r){function o(s,c){if(!i[s]){if(!t[s]){var l="function"==typeof e&&e;if(!c&&l)return l(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=i[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return o(n?n:e)},u,u.exports,n,t,i,r)}return i[s].exports}for(var a="function"==typeof e&&e,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":2}],2:[function(e,t,n){function i(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,i=r(e),o=i.source,l=i.id;return t.forceNew||t["force new connection"]||!1===t.multiplex?(s("ignoring socket cache for %s",o),n=a(o,t)):(c[l]||(s("new io instance for %s",o),c[l]=a(o,t)),n=c[l]),n.socket(i.path)}var r=e("./url"),o=e("socket.io-parser"),a=e("./manager"),s=e("debug")("socket.io-client");t.exports=n=i;var c=n.managers={};n.protocol=o.protocol,n.connect=i,n.Manager=e("./manager"),n.Socket=e("./socket")},{"./manager":3,"./socket":5,"./url":6,debug:9,"socket.io-parser":40}],3:[function(e,t,n){function i(e,t){return this instanceof i?(e&&"object"==typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connected=0,this.attempts=0,this.encoding=!1,this.packetBuffer=[],this.encoder=new s.Encoder,this.decoder=new s.Decoder,this.autoConnect=t.autoConnect!==!1,void(this.autoConnect&&this.open())):new i(e,t)}var r=(e("./url"),e("engine.io-client")),o=e("./socket"),a=e("component-emitter"),s=e("socket.io-parser"),c=e("./on"),l=e("component-bind"),u=(e("object-component"),e("debug")("socket.io-client:manager"));t.exports=i,i.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)this.nsps[e].emit.apply(this.nsps[e],arguments)},a(i.prototype),i.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},i.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},i.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this):this._reconnectionDelay},i.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this):this._reconnectionDelayMax},i.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},i.prototype.maybeReconnectOnOpen=function(){this.openReconnect||this.reconnecting||!this._reconnection||0!==this.attempts||(this.openReconnect=!0,this.reconnect())},i.prototype.open=i.prototype.connect=function(e){if(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=r(this.uri,this.opts);var t=this.engine,n=this;this.readyState="opening";var i=c(t,"open",function(){n.onopen(),e&&e()}),o=c(t,"error",function(t){if(u("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",t),e){var i=new Error("Connection error");i.data=t,e(i)}n.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;u("connect attempt will timeout after %d",a);var s=setTimeout(function(){u("connect attempt timed out after %d",a),i.destroy(),t.close(),t.emit("error","timeout"),n.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(s)}})}return this.subs.push(i),this.subs.push(o),this},i.prototype.onopen=function(){u("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(c(e,"data",l(this,"ondata"))),this.subs.push(c(this.decoder,"decoded",l(this,"ondecoded"))),this.subs.push(c(e,"error",l(this,"onerror"))),this.subs.push(c(e,"close",l(this,"onclose")))},i.prototype.ondata=function(e){this.decoder.add(e)},i.prototype.ondecoded=function(e){this.emit("packet",e)},i.prototype.onerror=function(e){u("error",e),this.emitAll("error",e)},i.prototype.socket=function(e){var t=this.nsps[e];if(!t){t=new o(this,e),this.nsps[e]=t;var n=this;t.on("connect",function(){n.connected++})}return t},i.prototype.destroy=function(e){--this.connected||this.close()},i.prototype.packet=function(e){u("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(e){for(var n=0;n<e.length;n++)t.engine.write(e[n]);t.encoding=!1,t.processPacketQueue()}))},i.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},i.prototype.cleanup=function(){for(var e;e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},i.prototype.close=i.prototype.disconnect=function(){this.skipReconnect=!0,this.engine.close()},i.prototype.onclose=function(e){u("close"),this.cleanup(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},i.prototype.reconnect=function(){if(this.reconnecting)return this;var e=this;if(this.attempts++,this.attempts>this._reconnectionAttempts)u("reconnect failed"),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.attempts*this.reconnectionDelay();t=Math.min(t,this.reconnectionDelayMax()),u("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){u("attempting reconnect"),e.emitAll("reconnect_attempt",e.attempts),e.emitAll("reconnecting",e.attempts),e.open(function(t){t?(u("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(u("reconnect success"),e.onreconnect())})},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},i.prototype.onreconnect=function(){var e=this.attempts;this.attempts=0,this.reconnecting=!1,this.emitAll("reconnect",e)}},{"./on":4,"./socket":5,"./url":6,"component-bind":7,"component-emitter":8,debug:9,"engine.io-client":10,"object-component":37,"socket.io-parser":40}],4:[function(e,t,n){function i(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}t.exports=i},{}],5:[function(e,t,n){function i(e,t){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.subEvents()}{var r=e("socket.io-parser"),o=e("component-emitter"),a=e("to-array"),s=e("./on"),c=e("component-bind"),l=e("debug")("socket.io-client:socket"),u=e("has-binary");e("indexof")}t.exports=n=i;var p={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},f=o.prototype.emit;o(i.prototype),i.prototype.subEvents=function(){var e=this.io;this.subs=[s(e,"open",c(this,"onopen")),s(e,"packet",c(this,"onpacket")),s(e,"close",c(this,"onclose"))]},i.prototype.open=i.prototype.connect=function(){return this.connected?this:(this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},i.prototype.send=function(){var e=a(arguments);return e.unshift("message"),this.emit.apply(this,e),this},i.prototype.emit=function(e){if(p.hasOwnProperty(e))return f.apply(this,arguments),this;var t=a(arguments),n=r.EVENT;u(t)&&(n=r.BINARY_EVENT);var i={type:n,data:t};return"function"==typeof t[t.length-1]&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),i.id=this.ids++),this.connected?this.packet(i):this.sendBuffer.push(i),this},i.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},i.prototype.onopen=function(){l("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:r.CONNECT})},i.prototype.onclose=function(e){l("close (%s)",e),this.connected=!1,this.disconnected=!0,this.emit("disconnect",e)},i.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:this.onevent(e);break;case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:this.onack(e);break;case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},i.prototype.onevent=function(e){var t=e.data||[];l("emitting event %j",t),null!=e.id&&(l("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?f.apply(this,t):this.receiveBuffer.push(t)},i.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var i=a(arguments);l("sending ack %j",i);var o=u(i)?r.BINARY_ACK:r.ACK;t.packet({type:o,id:e,data:i})}}},i.prototype.onack=function(e){l("calling ack %s with %j",e.id,e.data);var t=this.acks[e.id];t.apply(this,e.data),delete this.acks[e.id]},i.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},i.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)f.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},i.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},i.prototype.destroy=function(){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.io.destroy(this)},i.prototype.close=i.prototype.disconnect=function(){return this.connected?(l("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT}),this.destroy(),this.onclose("io client disconnect"),this):this}},{"./on":4,"component-bind":7,"component-emitter":8,debug:9,"has-binary":32,indexof:36,"socket.io-parser":40,"to-array":44}],6:[function(e,t,n){(function(n){function i(e,t){var i=e,t=t||n.location;return null==e&&(e=t.protocol+"//"+t.hostname),"string"==typeof e&&("/"==e.charAt(0)&&"undefined"!=typeof t&&(e=t.hostname+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e="undefined"!=typeof t?t.protocol+"//"+e:"https://"+e),o("parse %s",e),i=r(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/",i.id=i.protocol+"://"+i.host+":"+i.port,i.href=i.protocol+"://"+i.host+(t&&t.port==i.port?"":":"+i.port),i}var r=e("parseuri"),o=e("debug")("socket.io-client:url");t.exports=i}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:9,parseuri:38}],7:[function(e,t,n){var i=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=i.call(arguments,2);return function(){return t.apply(e,n.concat(i.call(arguments)))}}},{}],8:[function(e,t,n){function i(e){return e?r(e):void 0}function r(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}t.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){i.off(e,n),t.apply(this,arguments)}var i=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var i,r=0;r<n.length;r++)if(i=n[r],i===t||i.fn===t){n.splice(r,1);break}return this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var i=0,r=n.length;r>i;++i)n[i].apply(this,t)}return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],9:[function(e,t,n){function i(e){return i.enabled(e)?function(t){t=r(t);var n=new Date,o=n-(i[e]||n);i[e]=n,t=e+" "+t+" +"+i.humanize(o),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function r(e){return e instanceof Error?e.stack||e.message:e}t.exports=i,i.names=[],i.skips=[],i.enable=function(e){try{localStorage.debug=e}catch(t){}for(var n=(e||"").split(/[\s,]+/),r=n.length,o=0;r>o;o++)e=n[o].replace("*",".*?"),"-"===e[0]?i.skips.push(new RegExp("^"+e.substr(1)+"$")):i.names.push(new RegExp("^"+e+"$"))},i.disable=function(){i.enable("")},i.humanize=function(e){var t=1e3,n=6e4,i=60*n;return e>=i?(e/i).toFixed(1)+"h":e>=n?(e/n).toFixed(1)+"m":e>=t?(e/t|0)+"s":e+"ms"},i.enabled=function(e){for(var t=0,n=i.skips.length;n>t;t++)if(i.skips[t].test(e))return!1;for(var t=0,n=i.names.length;n>t;t++)if(i.names[t].test(e))return!0;return!1};try{window.localStorage&&i.enable(localStorage.debug)}catch(o){}},{}],10:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":11}],11:[function(e,t,n){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":12,"engine.io-parser":21}],12:[function(e,t,n){(function(n){function i(e,t){if(!(this instanceof i))return new i(e,t);if(t=t||{},e&&"object"==typeof e&&(t=e,e=null),e&&(e=u(e),t.host=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)),this.secure=null!=t.secure?t.secure:n.location&&"https:"==location.protocol,t.host){var r=t.host.split(":");t.hostname=r.shift(),r.length&&(t.port=r.pop())}this.agent=t.agent||!1,this.hostname=t.hostname||(n.location?location.hostname:"localhost"),this.port=t.port||(n.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=f.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.open(),this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades}function r(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var o=e("./transports"),a=e("component-emitter"),s=e("debug")("engine.io-client:socket"),c=e("indexof"),l=e("engine.io-parser"),u=e("parseuri"),p=e("parsejson"),f=e("parseqs");t.exports=i,i.priorWebsocketSuccess=!1,a(i.prototype),i.protocol=l.protocol,i.Socket=i,i.Transport=e("./transport"),i.transports=e("./transports"),i.parser=e("engine.io-parser"),i.prototype.createTransport=function(e){s('creating transport "%s"',e);var t=r(this.query);t.EIO=l.protocol,t.transport=e,this.id&&(t.sid=this.id);var n=new o[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this});return n},i.prototype.open=function(){var e;if(this.rememberUpgrade&&i.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))e="websocket";else{if(0==this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";var e;try{e=this.createTransport(e)}catch(n){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},i.prototype.setTransport=function(e){s("setting transport %s",e.name);var t=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},i.prototype.probe=function(e){function t(){if(f.onlyBinaryUpgrades){var t=!this.supportsBinary&&f.transport.supportsBinary;p=p||t}p||(s('probe transport "%s" opened',e),u.send([{type:"ping",data:"probe"}]),u.once("packet",function(t){if(!p)if("pong"==t.type&&"probe"==t.data)s('probe transport "%s" pong',e),f.upgrading=!0,f.emit("upgrading",u),i.priorWebsocketSuccess="websocket"==u.name,s('pausing current transport "%s"',f.transport.name),f.transport.pause(function(){p||"closed"!=f.readyState&&"closing"!=f.readyState&&(s("changing transport and sending upgrade packet"),l(),f.setTransport(u),u.send([{type:"upgrade"}]),f.emit("upgrade",u),u=null,f.upgrading=!1,f.flush())});else{s('probe transport "%s" failed',e);var n=new Error("probe error");n.transport=u.name,f.emit("upgradeError",n)}}))}function n(){p||(p=!0,l(),u.close(),u=null)}function r(t){var i=new Error("probe error: "+t);i.transport=u.name,n(),s('probe transport "%s" failed because of error: %s',e,t),f.emit("upgradeError",i)}function o(){r("transport closed")}function a(){r("socket closed")}function c(e){u&&e.name!=u.name&&(s('"%s" works - aborting "%s"',e.name,u.name),n())}function l(){u.removeListener("open",t),u.removeListener("error",r),u.removeListener("close",o),f.removeListener("close",a),f.removeListener("upgrading",c)}s('probing transport "%s"',e);var u=this.createTransport(e,{probe:1}),p=!1,f=this;i.priorWebsocketSuccess=!1,u.once("open",t),u.once("error",r),u.once("close",o),this.once("close",a),this.once("upgrading",c),u.open()},i.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",i.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var e=0,t=this.upgrades.length;t>e;e++)this.probe(this.upgrades[e])}},i.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(s('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(p(e.data));break;case"pong":this.setPing();break;case"error":var t=new Error("server error");t.code=e.data,this.emit("error",t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else s('packet received with socket readyState "%s"',this.readyState)},i.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},i.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},i.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){s("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},i.prototype.ping=function(){this.sendPacket("ping")},i.prototype.onDrain=function(){for(var e=0;e<this.prevBufferLen;e++)this.callbackBuffer[e]&&this.callbackBuffer[e]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},i.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},i.prototype.write=i.prototype.send=function(e,t){return this.sendPacket("message",e,t),this},i.prototype.sendPacket=function(e,t,n){var i={type:e,data:t};this.emit("packetCreate",i),this.writeBuffer.push(i),this.callbackBuffer.push(n),this.flush()},i.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.onClose("forced close"),s("socket closing - telling transport to close"),this.transport.close()),this},i.prototype.onError=function(e){s("socket error %j",e),i.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},i.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState){s('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){n.writeBuffer=[],n.callbackBuffer=[],n.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t)}},i.prototype.filterUpgrades=function(e){for(var t=[],n=0,i=e.length;i>n;n++)~c(this.transports,e[n])&&t.push(e[n]);return t}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":13,"./transports":14,"component-emitter":8,debug:9,"engine.io-parser":21,indexof:36,parsejson:28,parseqs:29,parseuri:30}],13:[function(e,t,n){function i(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR}var r=e("engine.io-parser"),o=e("component-emitter");t.exports=i,o(i.prototype),i.timestamps=0,i.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},i.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},i.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},i.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},i.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},i.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},i.prototype.onPacket=function(e){this.emit("packet",e)},i.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":8,"engine.io-parser":21}],14:[function(e,t,n){(function(t){function i(e){var n,i=!1,s=!1,c=!1!==e.jsonp;if(t.location){var l="https:"==location.protocol,u=location.port;u||(u=l?443:80),i=e.hostname!=location.hostname||u!=e.port,s=e.secure!=l}if(e.xdomain=i,e.xscheme=s,n=new r(e),"open"in n&&!e.forceJSONP)return new o(e);if(!c)throw new Error("JSONP disabled");return new a(e)}var r=e("xmlhttprequest"),o=e("./polling-xhr"),a=e("./polling-jsonp"),s=e("./websocket");n.polling=i,n.websocket=s}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":15,"./polling-xhr":16,"./websocket":18,xmlhttprequest:19}],15:[function(e,t,n){(function(n){function i(){}function r(e){o.call(this,e),this.query=this.query||{},s||(n.___eio||(n.___eio=[]),s=n.___eio),this.index=s.length;var t=this;s.push(function(e){t.onData(e)}),this.query.j=this.index,n.document&&n.addEventListener&&n.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=i)})}var o=e("./polling"),a=e("component-inherit");t.exports=r;var s,c=/\n/g,l=/\\n/g;a(r,o),r.prototype.supportsBinary=!1,r.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null),o.prototype.doClose.call(this)},r.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),this.script=t;var i="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);i&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},r.prototype.doWrite=function(e,t){function n(){i(),t()}function i(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(e){r.onError("jsonp polling iframe removal error",e)}try{var t='<iframe src="javascript:0" name="'+r.iframeId+'">';o=document.createElement(t)}catch(e){o=document.createElement("iframe"),o.name=r.iframeId,o.src="javascript:0"}o.id=r.iframeId,r.form.appendChild(o),r.iframe=o}var r=this;if(!this.form){var o,a=document.createElement("form"),s=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=u,a.method="POST",a.setAttribute("accept-charset","utf-8"),s.name="d",a.appendChild(s),document.body.appendChild(a),this.form=a,this.area=s}this.form.action=this.uri(),i(),e=e.replace(l,"\\\n"),this.area.value=e.replace(c,"\\n");try{this.form.submit()}catch(p){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==r.iframe.readyState&&n()}:this.iframe.onload=n}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":17,"component-inherit":20}],16:[function(e,t,n){(function(n){function i(){}function r(e){if(c.call(this,e),n.location){var t="https:"==location.protocol,i=location.port;i||(i=t?443:80),this.xd=e.hostname!=n.location.hostname||i!=e.port,this.xs=e.secure!=t}}function o(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.create()}function a(){for(var e in o.requests)o.requests.hasOwnProperty(e)&&o.requests[e].abort()}var s=e("xmlhttprequest"),c=e("./polling"),l=e("component-emitter"),u=e("component-inherit"),p=e("debug")("engine.io-client:polling-xhr");t.exports=r,t.exports.Request=o,u(r,c),r.prototype.supportsBinary=!0,r.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,new o(e)},r.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,i=this.request({method:"POST",data:e,isBinary:n}),r=this;i.on("success",t),i.on("error",function(e){r.onError("xhr post error",e)}),this.sendXhr=i},r.prototype.doPoll=function(){p("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},l(o.prototype),o.prototype.create=function(){var e=this.xhr=new s({agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR}),t=this;try{if(p("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async),this.supportsBinary&&(e.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(i){}"withCredentials"in e&&(e.withCredentials=!0),this.hasXDR()?(e.onload=function(){t.onLoad()},e.onerror=function(){t.onError(e.responseText)}):e.onreadystatechange=function(){4==e.readyState&&(200==e.status||1223==e.status?t.onLoad():setTimeout(function(){t.onError(e.status)},0))},p("xhr data %s",this.data),e.send(this.data)}catch(i){return void setTimeout(function(){t.onError(i)},0)}n.document&&(this.index=o.requestsCount++,o.requests[this.index]=this)},o.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},o.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},o.prototype.onError=function(e){this.emit("error",e),this.cleanup()},o.prototype.cleanup=function(){if("undefined"!=typeof this.xhr&&null!==this.xhr){this.hasXDR()?this.xhr.onload=this.xhr.onerror=i:this.xhr.onreadystatechange=i;try{this.xhr.abort()}catch(e){}n.document&&delete o.requests[this.index],this.xhr=null}},o.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type");

}catch(n){}e="application/octet-stream"===t?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(n){this.onError(n)}null!=e&&this.onData(e)},o.prototype.hasXDR=function(){return"undefined"!=typeof n.XDomainRequest&&!this.xs&&this.enablesXDR},o.prototype.abort=function(){this.cleanup()},n.document&&(o.requestsCount=0,o.requests={},n.attachEvent?n.attachEvent("onunload",a):n.addEventListener&&n.addEventListener("beforeunload",a))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":17,"component-emitter":8,"component-inherit":20,debug:9,xmlhttprequest:19}],17:[function(e,t,n){function i(e){var t=e&&e.forceBase64;(!l||t)&&(this.supportsBinary=!1),r.call(this,e)}var r=e("../transport"),o=e("parseqs"),a=e("engine.io-parser"),s=e("component-inherit"),c=e("debug")("engine.io-client:polling");t.exports=i;var l=function(){var t=e("xmlhttprequest"),n=new t({agent:this.agent,xdomain:!1});return null!=n.responseType}();s(i,r),i.prototype.name="polling",i.prototype.doOpen=function(){this.poll()},i.prototype.pause=function(e){function t(){c("paused"),n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var i=0;this.polling&&(c("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){c("pre-pause polling complete"),--i||t()})),this.writable||(c("we are currently writing - waiting to pause"),i++,this.once("drain",function(){c("pre-pause writing complete"),--i||t()}))}else t()},i.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},i.prototype.onData=function(e){var t=this;c("polling got data %s",e);var n=function(e,n,i){return"opening"==t.readyState&&t.onOpen(),"close"==e.type?(t.onClose(),!1):void t.onPacket(e)};a.decodePayload(e,this.socket.binaryType,n),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},i.prototype.doClose=function(){function e(){c("writing close packet"),t.write([{type:"close"}])}var t=this;"open"==this.readyState?(c("transport open - closing"),e()):(c("transport not open - deferring close"),this.once("open",e))},i.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")},t=this;a.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},i.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=+new Date+"-"+r.timestamps++),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+this.hostname+n+this.path+e}},{"../transport":13,"component-inherit":20,debug:9,"engine.io-parser":21,parseqs:29,xmlhttprequest:19}],18:[function(e,t,n){function i(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),r.call(this,e)}var r=e("../transport"),o=e("engine.io-parser"),a=e("parseqs"),s=e("component-inherit"),c=e("debug")("engine.io-client:websocket"),l=e("ws");t.exports=i,s(i,r),i.prototype.name="websocket",i.prototype.supportsBinary=!0,i.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=void 0,n={agent:this.agent};this.ws=new l(e,t,n),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},i.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(i.prototype.onData=function(e){var t=this;setTimeout(function(){r.prototype.onData.call(t,e)},0)}),i.prototype.write=function(e){function t(){n.writable=!0,n.emit("drain")}var n=this;this.writable=!1;for(var i=0,r=e.length;r>i;i++)o.encodePacket(e[i],this.supportsBinary,function(e){try{n.ws.send(e)}catch(t){c("websocket closed before onclose event")}});setTimeout(t,0)},i.prototype.onClose=function(){r.prototype.onClose.call(this)},i.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},i.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=+new Date),this.supportsBinary||(e.b64=1),e=a.encode(e),e.length&&(e="?"+e),t+"://"+this.hostname+n+this.path+e},i.prototype.check=function(){return!(!l||"__initialize"in l&&this.name===i.prototype.name)}},{"../transport":13,"component-inherit":20,debug:9,"engine.io-parser":21,parseqs:29,ws:31}],19:[function(e,t,n){var i=e("has-cors");t.exports=function(e){var t=e.xdomain,n=e.xscheme,r=e.enablesXDR;try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(o){}try{if("undefined"!=typeof XMLHttpRequest&&(!t||i))return new XMLHttpRequest}catch(o){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(o){}}},{"has-cors":34}],20:[function(e,t,n){t.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],21:[function(e,t,n){(function(t){function i(e,t,i){if(!t)return n.encodeBase64Packet(e,i);var r=e.data,o=new Uint8Array(r),a=new Uint8Array(1+r.byteLength);a[0]=d[e.type];for(var s=0;s<o.length;s++)a[s+1]=o[s];return i(a.buffer)}function r(e,t,i){if(!t)return n.encodeBase64Packet(e,i);var r=new FileReader;return r.onload=function(){e.data=r.result,n.encodePacket(e,t,!0,i)},r.readAsArrayBuffer(e.data)}function o(e,t,i){if(!t)return n.encodeBase64Packet(e,i);if(f)return r(e,t,i);var o=new Uint8Array(1);o[0]=d[e.type];var a=new g([o.buffer,e.data]);return i(a)}function a(e,t,n){for(var i=new Array(e.length),r=u(e.length,n),o=function(e,n,r){t(n,function(t,n){i[e]=n,r(t,i)})},a=0;a<e.length;a++)o(a,e[a],r)}var s=e("./keys"),c=e("arraybuffer.slice"),l=e("base64-arraybuffer"),u=e("after"),p=e("utf8"),f=navigator.userAgent.match(/Android/i);n.protocol=3;var d=n.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},h=s(d),v={type:"error",data:"parser error"},g=e("blob");n.encodePacket=function(e,n,r,a){"function"==typeof n&&(a=n,n=!1),"function"==typeof r&&(a=r,r=null);var s=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&s instanceof ArrayBuffer)return i(e,n,a);if(g&&s instanceof t.Blob)return o(e,n,a);var c=d[e.type];return void 0!==e.data&&(c+=r?p.encode(String(e.data)):String(e.data)),a(""+c)},n.encodeBase64Packet=function(e,i){var r="b"+n.packets[e.type];if(g&&e.data instanceof g){var o=new FileReader;return o.onload=function(){var e=o.result.split(",")[1];i(r+e)},o.readAsDataURL(e.data)}var a;try{a=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(s){for(var c=new Uint8Array(e.data),l=new Array(c.length),u=0;u<c.length;u++)l[u]=c[u];a=String.fromCharCode.apply(null,l)}return r+=t.btoa(a),i(r)},n.decodePacket=function(e,t,i){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return n.decodeBase64Packet(e.substr(1),t);if(i)try{e=p.decode(e)}catch(r){return v}var o=e.charAt(0);return Number(o)==o&&h[o]?e.length>1?{type:h[o],data:e.substring(1)}:{type:h[o]}:v}var a=new Uint8Array(e),o=a[0],s=c(e,1);return g&&"blob"===t&&(s=new g([s])),{type:h[o],data:s}},n.decodeBase64Packet=function(e,n){var i=h[e.charAt(0)];if(!t.ArrayBuffer)return{type:i,data:{base64:!0,data:e.substr(1)}};var r=l.decode(e.substr(1));return"blob"===n&&g&&(r=new g([r])),{type:i,data:r}},n.encodePayload=function(e,t,i){function r(e){return e.length+":"+e}function o(e,i){n.encodePacket(e,t,!0,function(e){i(null,r(e))})}return"function"==typeof t&&(i=t,t=null),t?g&&!f?n.encodePayloadAsBlob(e,i):n.encodePayloadAsArrayBuffer(e,i):e.length?void a(e,o,function(e,t){return i(t.join(""))}):i("0:")},n.decodePayload=function(e,t,i){if("string"!=typeof e)return n.decodePayloadAsBinary(e,t,i);"function"==typeof t&&(i=t,t=null);var r;if(""==e)return i(v,0,1);for(var o,a,s="",c=0,l=e.length;l>c;c++){var u=e.charAt(c);if(":"!=u)s+=u;else{if(""==s||s!=(o=Number(s)))return i(v,0,1);if(a=e.substr(c+1,o),s!=a.length)return i(v,0,1);if(a.length){if(r=n.decodePacket(a,t,!0),v.type==r.type&&v.data==r.data)return i(v,0,1);var p=i(r,c+o,l);if(!1===p)return}c+=o,s=""}}return""!=s?i(v,0,1):void 0},n.encodePayloadAsArrayBuffer=function(e,t){function i(e,t){n.encodePacket(e,!0,!0,function(e){return t(null,e)})}return e.length?void a(e,i,function(e,n){var i=n.reduce(function(e,t){var n;return n="string"==typeof t?t.length:t.byteLength,e+n.toString().length+n+2},0),r=new Uint8Array(i),o=0;return n.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var i=new Uint8Array(e.length),a=0;a<e.length;a++)i[a]=e.charCodeAt(a);n=i.buffer}r[o++]=t?0:1;for(var s=n.byteLength.toString(),a=0;a<s.length;a++)r[o++]=parseInt(s[a]);r[o++]=255;for(var i=new Uint8Array(n),a=0;a<i.length;a++)r[o++]=i[a]}),t(r.buffer)}):t(new ArrayBuffer(0))},n.encodePayloadAsBlob=function(e,t){function i(e,t){n.encodePacket(e,!0,!0,function(e){var n=new Uint8Array(1);if(n[0]=1,"string"==typeof e){for(var i=new Uint8Array(e.length),r=0;r<e.length;r++)i[r]=e.charCodeAt(r);e=i.buffer,n[0]=0}for(var o=e instanceof ArrayBuffer?e.byteLength:e.size,a=o.toString(),s=new Uint8Array(a.length+1),r=0;r<a.length;r++)s[r]=parseInt(a[r]);if(s[a.length]=255,g){var c=new g([n.buffer,s.buffer,e]);t(null,c)}})}a(e,i,function(e,n){return t(new g(n))})},n.decodePayloadAsBinary=function(e,t,i){"function"==typeof t&&(i=t,t=null);for(var r=e,o=[],a=!1;r.byteLength>0;){for(var s=new Uint8Array(r),l=0===s[0],u="",p=1;255!=s[p];p++){if(u.length>310){a=!0;break}u+=s[p]}if(a)return i(v,0,1);r=c(r,2+u.length),u=parseInt(u);var f=c(r,0,u);if(l)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(d){var h=new Uint8Array(f);f="";for(var p=0;p<h.length;p++)f+=String.fromCharCode(h[p])}o.push(f),r=c(r,u)}var g=o.length;o.forEach(function(e,r){i(n.decodePacket(e,t,!0),r,g)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":22,after:23,"arraybuffer.slice":24,"base64-arraybuffer":25,blob:26,utf8:27}],22:[function(e,t,n){t.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var i in e)n.call(e,i)&&t.push(i);return t}},{}],23:[function(e,t,n){function i(e,t,n){function i(e,r){if(i.count<=0)throw new Error("after called too many times");--i.count,e?(o=!0,t(e),t=n):0!==i.count||o||t(null,r)}var o=!1;return n=n||r,i.count=e,0===e?t():i}function r(){}t.exports=i},{}],24:[function(e,t,n){t.exports=function(e,t,n){var i=e.byteLength;if(t=t||0,n=n||i,e.slice)return e.slice(t,n);if(0>t&&(t+=i),0>n&&(n+=i),n>i&&(n=i),t>=i||t>=n||0===i)return new ArrayBuffer(0);for(var r=new Uint8Array(e),o=new Uint8Array(n-t),a=t,s=0;n>a;a++,s++)o[s]=r[a];return o.buffer}},{}],25:[function(e,t,n){!function(e){"use strict";n.encode=function(t){var n,i=new Uint8Array(t),r=i.length,o="";for(n=0;r>n;n+=3)o+=e[i[n]>>2],o+=e[(3&i[n])<<4|i[n+1]>>4],o+=e[(15&i[n+1])<<2|i[n+2]>>6],o+=e[63&i[n+2]];return r%3===2?o=o.substring(0,o.length-1)+"=":r%3===1&&(o=o.substring(0,o.length-2)+"=="),o},n.decode=function(t){var n,i,r,o,a,s=.75*t.length,c=t.length,l=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var u=new ArrayBuffer(s),p=new Uint8Array(u);for(n=0;c>n;n+=4)i=e.indexOf(t[n]),r=e.indexOf(t[n+1]),o=e.indexOf(t[n+2]),a=e.indexOf(t[n+3]),p[l++]=i<<2|r>>4,p[l++]=(15&r)<<4|o>>2,p[l++]=(3&o)<<6|63&a;return u}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],26:[function(e,t,n){(function(e){function n(e,t){t=t||{};for(var n=new i,r=0;r<e.length;r++)n.append(e[r]);return t.type?n.getBlob(t.type):n.getBlob()}var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,r=function(){try{var e=new Blob(["hi"]);return 2==e.size}catch(t){return!1}}(),o=i&&i.prototype.append&&i.prototype.getBlob;t.exports=function(){return r?e.Blob:o?n:void 0}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],27:[function(e,n,i){(function(e){!function(r){function o(e){for(var t,n,i=[],r=0,o=e.length;o>r;)t=e.charCodeAt(r++),t>=55296&&56319>=t&&o>r?(n=e.charCodeAt(r++),56320==(64512&n)?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--)):i.push(t);return i}function a(e){for(var t,n=e.length,i=-1,r="";++i<n;)t=e[i],t>65535&&(t-=65536,r+=_(t>>>10&1023|55296),t=56320|1023&t),r+=_(t);return r}function s(e,t){return _(e>>t&63|128)}function c(e){if(0==(4294967168&e))return _(e);var t="";return 0==(4294965248&e)?t=_(e>>6&31|192):0==(4294901760&e)?(t=_(e>>12&15|224),t+=s(e,6)):0==(4292870144&e)&&(t=_(e>>18&7|240),t+=s(e,12),t+=s(e,6)),t+=_(63&e|128)}function l(e){for(var t,n=o(e),i=n.length,r=-1,a="";++r<i;)t=n[r],a+=c(t);return a}function u(){if(y>=m)throw Error("Invalid byte index");var e=255&g[y];if(y++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function p(){var e,t,n,i,r;if(y>m)throw Error("Invalid byte index");if(y==m)return!1;if(e=255&g[y],y++,0==(128&e))return e;if(192==(224&e)){var t=u();if(r=(31&e)<<6|t,r>=128)return r;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=u(),n=u(),r=(15&e)<<12|t<<6|n,r>=2048)return r;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=u(),n=u(),i=u(),r=(15&e)<<18|t<<12|n<<6|i,r>=65536&&1114111>=r))return r;throw Error("Invalid UTF-8 detected")}function f(e){g=o(e),m=g.length,y=0;for(var t,n=[];(t=p())!==!1;)n.push(t);return a(n)}var d="object"==typeof i&&i,h="object"==typeof n&&n&&n.exports==d&&n,v="object"==typeof e&&e;(v.global===v||v.window===v)&&(r=v);var g,m,y,_=String.fromCharCode,b={version:"2.0.0",encode:l,decode:f};if("function"==typeof t&&"object"==typeof t.amd&&t.amd)t(function(){return b});else if(d&&!d.nodeType)if(h)h.exports=b;else{var w={},k=w.hasOwnProperty;for(var x in b)k.call(b,x)&&(d[x]=b[x])}else r.utf8=b}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],28:[function(e,t,n){(function(e){var n=/^[\],:{}\s]*$/,i=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,r=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,a=/^\s+/,s=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(a,"").replace(s,""),e.JSON&&JSON.parse?JSON.parse(t):n.test(t.replace(i,"@").replace(r,"]").replace(o,""))?new Function("return "+t)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],29:[function(e,t,n){n.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},n.decode=function(e){for(var t={},n=e.split("&"),i=0,r=n.length;r>i;i++){var o=n[i].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},{}],30:[function(e,t,n){var i=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,n=e.indexOf("["),o=e.indexOf("]");-1!=n&&-1!=o&&(e=e.substring(0,n)+e.substring(n,o).replace(/:/g,";")+e.substring(o,e.length));for(var a=i.exec(e||""),s={},c=14;c--;)s[r[c]]=a[c]||"";return-1!=n&&-1!=o&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}},{}],31:[function(e,t,n){function i(e,t,n){var i;return i=t?new o(e,t):new o(e)}var r=function(){return this}(),o=r.WebSocket||r.MozWebSocket;t.exports=o?i:null,o&&(i.prototype=o.prototype)},{}],32:[function(e,t,n){(function(n){function i(e){function t(e){if(!e)return!1;if(n.Buffer&&n.Buffer.isBuffer(e)||n.ArrayBuffer&&e instanceof ArrayBuffer||n.Blob&&e instanceof Blob||n.File&&e instanceof File)return!0;if(r(e)){for(var i=0;i<e.length;i++)if(t(e[i]))return!0}else if(e&&"object"==typeof e){e.toJSON&&(e=e.toJSON());for(var o in e)if(e.hasOwnProperty(o)&&t(e[o]))return!0}return!1}return t(e)}var r=e("isarray");t.exports=i}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:33}],33:[function(e,t,n){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],34:[function(e,t,n){var i=e("global");try{t.exports="XMLHttpRequest"in i&&"withCredentials"in new i.XMLHttpRequest}catch(r){t.exports=!1}},{global:35}],35:[function(e,t,n){t.exports=function(){return this}()},{}],36:[function(e,t,n){var i=[].indexOf;t.exports=function(e,t){if(i)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],37:[function(e,t,n){var i=Object.prototype.hasOwnProperty;n.keys=Object.keys||function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t},n.values=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(e[n]);return t},n.merge=function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);return e},n.length=function(e){return n.keys(e).length},n.isEmpty=function(e){return 0==n.length(e)}},{}],38:[function(e,t,n){var i=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){for(var t=i.exec(e||""),n={},o=14;o--;)n[r[o]]=t[o]||"";return n}},{}],39:[function(e,t,n){(function(t){var i=e("isarray"),r=e("./is-buffer");n.deconstructPacket=function(e){function t(e){if(!e)return e;if(r(e)){var o={_placeholder:!0,num:n.length};return n.push(e),o}if(i(e)){for(var a=new Array(e.length),s=0;s<e.length;s++)a[s]=t(e[s]);return a}if("object"==typeof e&&!(e instanceof Date)){var a={};for(var c in e)a[c]=t(e[c]);return a}return e}var n=[],o=e.data,a=e;return a.data=t(o),a.attachments=n.length,{packet:a,buffers:n}},n.reconstructPacket=function(e,t){function n(e){if(e&&e._placeholder){var r=t[e.num];return r}if(i(e)){for(var o=0;o<e.length;o++)e[o]=n(e[o]);return e}if(e&&"object"==typeof e){for(var a in e)e[a]=n(e[a]);return e}return e}return e.data=n(e.data),e.attachments=void 0,e},n.removeBlobs=function(e,n){function o(e,c,l){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){a++;var u=new FileReader;u.onload=function(){l?l[c]=this.result:s=this.result,--a||n(s)},u.readAsArrayBuffer(e)}else if(i(e))for(var p=0;p<e.length;p++)o(e[p],p,e);else if(e&&"object"==typeof e&&!r(e))for(var f in e)o(e[f],f,e)}var a=0,s=e;o(s),a||n(s)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":41,isarray:42}],40:[function(e,t,n){function i(){}function r(e){var t="",i=!1;return t+=e.type,(n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type)&&(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(i=!0,t+=e.nsp),null!=e.id&&(i&&(t+=",",i=!1),t+=e.id),null!=e.data&&(i&&(t+=","),t+=p.stringify(e.data)),u("encoded %j as %s",e,t),t}function o(e,t){function n(e){var n=d.deconstructPacket(e),i=r(n.packet),o=n.buffers;o.unshift(i),t(o)}d.removeBlobs(e,n)}function a(){this.reconstructor=null}function s(e){var t={},i=0;if(t.type=Number(e.charAt(0)),null==n.types[t.type])return l();if(n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type){for(t.attachments="";"-"!=e.charAt(++i);)t.attachments+=e.charAt(i);t.attachments=Number(t.attachments)}if("/"==e.charAt(i+1))for(t.nsp="";++i;){var r=e.charAt(i);if(","==r)break;if(t.nsp+=r,i+1==e.length)break}else t.nsp="/";var o=e.charAt(i+1);if(""!=o&&Number(o)==o){for(t.id="";++i;){var r=e.charAt(i);if(null==r||Number(r)!=r){--i;break}if(t.id+=e.charAt(i),i+1==e.length)break}t.id=Number(t.id)}if(e.charAt(++i))try{t.data=p.parse(e.substr(i))}catch(a){return l()}return u("decoded %s as %j",e,t),t}function c(e){this.reconPack=e,this.buffers=[]}function l(e){return{type:n.ERROR,data:"parser error"}}var u=e("debug")("socket.io-parser"),p=e("json3"),f=(e("isarray"),e("component-emitter")),d=e("./binary"),h=e("./is-buffer");n.protocol=4,n.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],n.CONNECT=0,n.DISCONNECT=1,n.EVENT=2,n.ACK=3,n.ERROR=4,n.BINARY_EVENT=5,n.BINARY_ACK=6,n.Encoder=i,n.Decoder=a,i.prototype.encode=function(e,t){if(u("encoding packet %j",e),n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type)o(e,t);else{var i=r(e);t([i])}},f(a.prototype),a.prototype.add=function(e){var t;if("string"==typeof e)t=s(e),n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type?(this.reconstructor=new c(t),0==this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!h(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,this.emit("decoded",t))}},a.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},c.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=d.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},c.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":39,"./is-buffer":41,"component-emitter":8,debug:9,isarray:42,json3:43}],41:[function(e,t,n){(function(e){function n(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=n}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],42:[function(e,t,n){t.exports=e(33)},{}],43:[function(e,n,i){!function(e){function n(e){if(n[e]!==a)return n[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=n("json-stringify")&&n("json-parse");else{var i,r='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var o=u.stringify,c="function"==typeof o&&p;if(c){(i=function(){return 1}).toJSON=i;try{c="0"===o(0)&&"0"===o(new Number)&&'""'==o(new String)&&o(s)===a&&o(a)===a&&o()===a&&"1"===o(i)&&"[1]"==o([i])&&"[null]"==o([a])&&"null"==o(null)&&"[null,null,null]"==o([a,s,null])&&o({a:[i,!0,!1,null,"\x00\b\n\f\r	"]})==r&&"1"===o(null,i)&&"[\n 1,\n 2\n]"==o([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==o(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==o(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==o(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==o(new Date(-1))}catch(l){c=!1}}t=c}if("json-parse"==e){var f=u.parse;if("function"==typeof f)try{if(0===f("0")&&!f(!1)){i=f(r);var d=5==i.a.length&&1===i.a[0];if(d){try{d=!f('"	"')}catch(l){}if(d)try{d=1!==f("01")}catch(l){}if(d)try{d=1!==f("1.")}catch(l){}}}}catch(l){d=!1}t=d}}return n[e]=!!t}var r,o,a,s={}.toString,c="function"==typeof t&&t.amd,l="object"==typeof JSON&&JSON,u="object"==typeof i&&i&&!i.nodeType&&i;u&&l?(u.stringify=l.stringify,u.parse=l.parse):u=e.JSON=l||{};var p=new Date(-0xc782b5b800cec);try{p=-109252==p.getUTCFullYear()&&0===p.getUTCMonth()&&1===p.getUTCDate()&&10==p.getUTCHours()&&37==p.getUTCMinutes()&&6==p.getUTCSeconds()&&708==p.getUTCMilliseconds()}catch(f){}if(!n("json")){var d="[object Function]",h="[object Date]",v="[object Number]",g="[object String]",m="[object Array]",y="[object Boolean]",_=n("bug-string-char-index");if(!p)var b=Math.floor,w=[0,31,59,90,120,151,181,212,243,273,304,334],k=function(e,t){return w[t]+365*(e-1970)+b((e-1969+(t=+(t>1)))/4)-b((e-1901+t)/100)+b((e-1601+t)/400)};(r={}.hasOwnProperty)||(r=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=s?r=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,r=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,r.call(this,e)});var x={"boolean":1,number:1,string:1,undefined:1},j=function(e,t){var n=typeof e[t];return"object"==n?!!e[t]:!x[n]};if(o=function(e,t){var n,i,a,c=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,i=new n;for(a in i)r.call(i,a)&&c++;return n=i=null,c?o=2==c?function(e,t){var n,i={},o=s.call(e)==d;for(n in e)o&&"prototype"==n||r.call(i,n)||!(i[n]=1)||!r.call(e,n)||t(n)}:function(e,t){var n,i,o=s.call(e)==d;for(n in e)o&&"prototype"==n||!r.call(e,n)||(i="constructor"===n)||t(n);(i||r.call(e,n="constructor"))&&t(n)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],o=function(e,t){var n,o,a=s.call(e)==d,c=!a&&"function"!=typeof e.constructor&&j(e,"hasOwnProperty")?e.hasOwnProperty:r;for(n in e)a&&"prototype"==n||!c.call(e,n)||t(n);for(o=i.length;n=i[--o];c.call(e,n)&&t(n));}),o(e,t)},!n("json-stringify")){var C={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},S="000000",E=function(e,t){return(S+(t||0)).slice(-e)},O="\\u00",A=function(e){var t,n='"',i=0,r=e.length,o=r>10&&_;for(o&&(t=e.split(""));r>i;i++){var a=e.charCodeAt(i);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:n+=C[a];break;default:if(32>a){n+=O+E(2,a.toString(16));break}n+=o?t[i]:_?e.charAt(i):e[i]}}return n+'"'},T=function(e,t,n,i,c,l,u){var p,f,d,_,w,x,j,C,S,O,$,P,L,R,I,D;try{p=t[e]}catch(B){}if("object"==typeof p&&p)if(f=s.call(p),f!=h||r.call(p,"toJSON"))"function"==typeof p.toJSON&&(f!=v&&f!=g&&f!=m||r.call(p,"toJSON"))&&(p=p.toJSON(e));else if(p>-1/0&&1/0>p){if(k){for(w=b(p/864e5),d=b(w/365.2425)+1970-1;k(d+1,0)<=w;d++);for(_=b((w-k(d,0))/30.42);k(d,_+1)<=w;_++);w=1+w-k(d,_),x=(p%864e5+864e5)%864e5,j=b(x/36e5)%24,C=b(x/6e4)%60,S=b(x/1e3)%60,O=x%1e3}else d=p.getUTCFullYear(),_=p.getUTCMonth(),w=p.getUTCDate(),j=p.getUTCHours(),C=p.getUTCMinutes(),S=p.getUTCSeconds(),O=p.getUTCMilliseconds();p=(0>=d||d>=1e4?(0>d?"-":"+")+E(6,0>d?-d:d):E(4,d))+"-"+E(2,_+1)+"-"+E(2,w)+"T"+E(2,j)+":"+E(2,C)+":"+E(2,S)+"."+E(3,O)+"Z"}else p=null;if(n&&(p=n.call(t,e,p)),null===p)return"null";if(f=s.call(p),f==y)return""+p;if(f==v)return p>-1/0&&1/0>p?""+p:"null";if(f==g)return A(""+p);if("object"==typeof p){for(R=u.length;R--;)if(u[R]===p)throw TypeError();if(u.push(p),$=[],I=l,l+=c,f==m){for(L=0,R=p.length;R>L;L++)P=T(L,p,n,i,c,l,u),$.push(P===a?"null":P);D=$.length?c?"[\n"+l+$.join(",\n"+l)+"\n"+I+"]":"["+$.join(",")+"]":"[]"}else o(i||p,function(e){var t=T(e,p,n,i,c,l,u);t!==a&&$.push(A(e)+":"+(c?" ":"")+t)}),D=$.length?c?"{\n"+l+$.join(",\n"+l)+"\n"+I+"}":"{"+$.join(",")+"}":"{}";return u.pop(),D}};u.stringify=function(e,t,n){var i,r,o,a;if("function"==typeof t||"object"==typeof t&&t)if((a=s.call(t))==d)r=t;else if(a==m){o={};for(var c,l=0,u=t.length;u>l;c=t[l++],a=s.call(c),(a==g||a==v)&&(o[c]=1));}if(n)if((a=s.call(n))==v){if((n-=n%1)>0)for(i="",n>10&&(n=10);i.length<n;i+=" ");}else a==g&&(i=n.length<=10?n:n.slice(0,10));return T("",(c={},c[""]=e,c),r,o,i,"",[])}}if(!n("json-parse")){var $,P,L=String.fromCharCode,R={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},I=function(){throw $=P=null,SyntaxError()},D=function(){for(var e,t,n,i,r,o=P,a=o.length;a>$;)switch(r=o.charCodeAt($)){case 9:case 10:case 13:case 32:$++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=_?o.charAt($):o[$],$++,e;case 34:for(e="@",$++;a>$;)if(r=o.charCodeAt($),32>r)I();else if(92==r)switch(r=o.charCodeAt(++$)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=R[r],$++;break;case 117:for(t=++$,n=$+4;n>$;$++)r=o.charCodeAt($),r>=48&&57>=r||r>=97&&102>=r||r>=65&&70>=r||I();e+=L("0x"+o.slice(t,$));break;default:I()}else{if(34==r)break;for(r=o.charCodeAt($),t=$;r>=32&&92!=r&&34!=r;)r=o.charCodeAt(++$);e+=o.slice(t,$)}if(34==o.charCodeAt($))return $++,e;I();default:if(t=$,45==r&&(i=!0,r=o.charCodeAt(++$)),r>=48&&57>=r){for(48==r&&(r=o.charCodeAt($+1),r>=48&&57>=r)&&I(),i=!1;a>$&&(r=o.charCodeAt($),r>=48&&57>=r);$++);if(46==o.charCodeAt($)){for(n=++$;a>n&&(r=o.charCodeAt(n),r>=48&&57>=r);n++);n==$&&I(),$=n}if(r=o.charCodeAt($),101==r||69==r){for(r=o.charCodeAt(++$),(43==r||45==r)&&$++,n=$;a>n&&(r=o.charCodeAt(n),r>=48&&57>=r);n++);n==$&&I(),$=n}return+o.slice(t,$)}if(i&&I(),"true"==o.slice($,$+4))return $+=4,!0;if("false"==o.slice($,$+5))return $+=5,!1;if("null"==o.slice($,$+4))return $+=4,null;I()}return"$"},B=function(e){var t,n;if("$"==e&&I(),"string"==typeof e){if("@"==(_?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=D(),"]"!=e;n||(n=!0))n&&(","==e?(e=D(),"]"==e&&I()):I()),","==e&&I(),t.push(B(e));return t}if("{"==e){for(t={};e=D(),"}"!=e;n||(n=!0))n&&(","==e?(e=D(),"}"==e&&I()):I()),(","==e||"string"!=typeof e||"@"!=(_?e.charAt(0):e[0])||":"!=D())&&I(),t[e.slice(1)]=B(D());return t}I()}return e},N=function(e,t,n){var i=M(e,t,n);i===a?delete e[t]:e[t]=i},M=function(e,t,n){var i,r=e[t];if("object"==typeof r&&r)if(s.call(r)==m)for(i=r.length;i--;)N(r,i,n);else o(r,function(e){N(r,e,n)});return n.call(e,t,r)};u.parse=function(e,t){var n,i;return $=0,P=""+e,n=B(D()),"$"!=D()&&I(),$=P=null,t&&s.call(t)==d?M((i={},i[""]=n,i),"",t):n}}}c&&t(function(){return u})}(this)},{}],44:[function(e,t,n){function i(e,t){var n=[];t=t||0;for(var i=t||0;i<e.length;i++)n[i-t]=e[i];return n}t.exports=i},{}]},{},[1])(1)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],230:[function(e,t,n){function i(e,t){if(e.sort&&e.sort.field){var n={$:{}};n.$[e.sort.field]=!0,s.merge(t,n)}return t}function r(e,t,n,r,o,u,p){var f,d,h;u&&(d=void 0!==u._name?u._name:u,u instanceof l&&(d=u._name),u instanceof Array&&u[1]);var v=p&&u&&(p._d||p.checkParent("data",!0));if("collection"===r){var g;if(n.filter&&n.filter.val!==!0){g={};var m=n.filter.raw,y=s.path(e,t.split("."),[]);y.push([m,{$:i(m,g)}]);var _=s.path(e,t.split("."),{},!0);for(var b in y[y.length-1][1])_[b]=y[y.length-1][1][b];y=_}else{var w,m=t===!0?"$":t+".$",k=m.split(".");v&&v[d]&&(f=!0,k[0]===d&&(k.shift(),f=!1)),f?w&&(e.specialFix=d,h&&(e.specialFix=[d,h]),g=s.path(e,k,{}),a(n.element._val instanceof c?n.element._val:n.element._val.base,g)):(g=s.path(e,k,{}),a(n.element._val instanceof c?n.element._val:n.element._val.base,g))}}else if(v&&v[d]&&(f=!0),t instanceof Array)for(var b in t)f?(t[b]instanceof Array&&(t[b]=t[b][0]),t[b]=t[b].split("."),t[b][0]===d&&(t[b].shift(),s.path(e,t[b],!0))):(t[b]instanceof Array&&(t[b]=t[b][0]),s.path(e,t[b].split("."),!0));else t!==!0&&"string"==typeof t&&(f?(t=t.split("."),t[0]===d&&(t.shift(),t.length>0&&s.path(e,t,!0))):s.path(e,t.split("."),!0))}function o(e,t,n,i,o,a){if(t instanceof Array)for(var s=0,c=t.length;c>s;s++)r(e,t[s]._flag.data[2],t,n,i,o,a);else r(e,t._flag.data[2],t,n,i,o,a)}function a(e,t,n,i,r){if(e.model&&(e.model.flags||e.model.subscription||e.model.field)){var c,l=t;if(r);else if(!e.model.field||!e.model.field.val||e.model.parsing||e.model.parsed||"string"==typeof i&&e.model.field.val!==i){if(i&&e.model.field&&e.model.field.val!==i)return void 0}else c=e.model.field.val.split("."),e.model.field.val===i||(l=s.path(t,c,{},!0));if(e.model&&e.model.subscription){var u=e.model.subscription.raw;if(u===!0)c&&(c.length>1?l=s.path(t,c,!0,!0):(t[c[0]]=!0,l=!0));else{var p=e.model.subscription.raw;if("string"==typeof p){var f=p;p={},p[f]=!0}s.merge(l,p)}}for(var d in e.model.flags)o(l,e.model.flags[d],d,n,i,e)}if(!e.model||!e.model.block||!e.model.block.val)for(var h,v=e.children,g=0,m=v&&v.length;m>g;h=g++)h=v[g],(h.model&&h.model.inherit&&h.model.inherit.val===!1||h._col||h.data)&&!h._dfrom||a(h,t,n,i);return t["__#__"]&&delete t["__#__"],e.model&&e.model.block&&"all"===e.model.block.val?void 0:t}var s=e("../../../util"),c=e("../../element"),l=(e("../../../util/hash"),e("../../../object"));n.parseData=function(e,t,n){if(e){var r={},o=e._filter,a=t||e.__sub;if(a)if(o){r["*"]||(r["*"]=[]),r["*"].push([s.clone(o,{subsObj:!0,fn:!0,type:!0
}),i(o,t||{$:a})]);for(var c in r["*"][1])r[c]=r["*"][1][c];delete r["*"]}else r=a;return r}},s.define(c,"getModel",function(e,t,n){var i=a(this,{},e,t,n);return s.empty(i)?null:i})},{"../../../object":303,"../../../util":315,"../../../util/hash":313,"../../element":205}],231:[function(e,t,n){{var i=e("../../../object"),r=e("../../../data"),o=(e("../../../value"),e("../../../util")),a=e("../../../"),s=t.exports=n=a.Networkdata=r["new"]({mixed:4,merge:!0}),c="subscribe",l="un"+c,u="Listener",p="add"+u,f="remove"+u,d=i.prototype,h=d[p],v=d[f],g=function(e,t){for(var n=this;n&&4===n.__t;){if(n.__block)return;n=n._val}n instanceof s&&n[e]&&n[e](t,this)};e("../../../")}s.prototype._blacklist.push("_subs","_complete"),o.define(s,"get",function(e,t,n,i){return this.path(e instanceof Array?e:String(e).split("."),void 0!==t?t:{},!1,!1,!1,i||!1,!0,!n)},p,function(e){this[c]&&this[c](e),h.apply(this,arguments)},f,function(e,t){this._listeners&&this[l]&&this[l](t),v.apply(this,arguments)}),o.define(r,p,function(e){this.__block||g.call(this,c,e),h.apply(this,arguments)},f,function(e,t){this.__block||g.call(this,l,t),v.apply(this,arguments)})},{"../../../":238,"../../../data":236,"../../../object":303,"../../../util":315,"../../../value":327}],232:[function(e,t,n){function i(e){var t;a.hashUrl&&n.blocks===p?p++:(p++,t="u"+p,n.clearCache(),n.string.clearCache(),n.string._update(n.string.val,t),n.params._update(n.string.val,t),n._update(n.string.val,t),n._lstamp=null)}var r=e("../../util"),o=e("../../value"),a=e("../../util/config"),s=(e("../../value/flags/process"),e("../../browser/animation/raf")),c=e("../../browser/events/util").postpone,l=e("../../browser/ua");t.exports=n=new o,a.hashUrl="tv"===l.device&&"lg"===l.platform?!1:a.hashUrl;var u=!a.hashUrl,p=0,f=c(u?function(e){href=window.location.href,console.log(e,e.replace(/ /g,"+").replace(/^#\//,"").toLowerCase()),window.history.pushState({},e,e.replace(/ /g,"+").replace(/^#\//,"").toLowerCase())}:function(e){n.block=!0,window.location.href="#/"+e.replace(/ /g,"+").toLowerCase(),n.block=!1}),d=(o.prototype._set,function(){if(u){var e=window.location.href;return e&&(t=h(e),e=e.replace(t,"")),String(window.location.href).replace(String(window.location.origin)+"/","").replace(/^#\//,"").replace(/\+/g," ")||""}var e=window.location.href.split("#"),t="";return e&&1===e.length&&(t=h(e[0]),e[0]=e[0].replace(t,"")),(e.length>1?e[1].replace(/\+/g," "):" ").slice(1)+t}),h=function(e){e||(e=d()||"");var t=e.split("?"),n=t.length;return e=n>1&&t[t.length-1]?"?"+t[t.length-1]:""};n.parse=d,n.val={string:function(){var e=d();return e.replace(h(e),"")},params:{val:function(){return h()},defer:function(e,t){this.clearCache();var n,i,r,o=this.val;if(o&&o!==this._last){this._last=o,n=o.slice(1).split("&"),i={};for(var a in n)r=n[a].split("="),r.length>1?i[r[0]]=r[1]:console.error("url: no [key]=[value] format -- not implemented yet");this.val=i}s(function(){e()})}},transform:function(e,t){return t},defer:function(e,t){if(!t[1]||"u"!==t[1][0]){this.clearCache();var i="string"==typeof t[0]?t[0]:t[0]&&t[0].val||this.val;return i&&(n.blocks=p,f(i+this.params.val)),!0}this.clearCache(),s(function(){e()})}},r.define(n,"update",function(){i()}),r.define(n.string,"raw",{get:function(){return this.val.replace(/ /g,"+")}}),a.hashUrl?window.onhashchange=i:window.onpopstate=i},{"../../browser/animation/raf":200,"../../browser/events/util":222,"../../browser/ua":233,"../../util":315,"../../util/config":306,"../../value":327,"../../value/flags/process":324}],233:[function(e,t,n){var i=e("../util"),r=n.test=function(e,t){for(var n=i.arg(arguments,1),r=n.length-1,o=n[r][0];o!==!0&&!new RegExp(o).test(e);o=n[--r][0]);(t.slice||t.call(this,o,n[r]))&&(this[t]=n[r][1])},o=n.parse=function(e,t){e||(t=n,e="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"no navigator"),e=e.toLowerCase(),t||(t={});var o="firefox",a="android",s=".+mobile",c="webkit",l="playstation",u="xbox",p="linux",f="crkey",d="chromecast",h="tablet",v="windows",g="phone";r.call(t,e,function(n,i){t.browser=i[2]||n;var r=e.match(new RegExp("((([\\/ ]version|"+i[0]+"(?!.+version))[/ ])| rv:)([0-9]{1,4}\\.[0-9]{0,2})"));t.version=r?Number(r[4]):0,t.prefix=i[1]},[!0,c],["\\(windows","ms","ie"],["safari",c],[o,"Moz"],["opera","O"],["msie","ms","ie"],["chrome|crios/",c,"chrome"]),r.call(t,e,"platform",[!0,v],[p,p],["lg.{0,3}netcast","lg"],[o+s,o],["mac os x","mac"],["iphone|ipod|ipad","ios"],[u,u],[l,l],[a,a],[v,v],[f,d],["smart-tv;|;samsung;smarttv","samsung"]),r.call(t,e,"device",[!0,"desktop"],[v+".+touch|ipad|"+a,h],["iphone|("+a+s+")|("+o+s+")|"+v+" phone|iemobile",g],[u+"|"+l,"console"],["tv|smarttv|googletv|appletv|hbbtv|pov_tv|netcast.tv|webos.+large","tv"],[f,d],["amazon-fireos",h]);var m=304704;return t.platform===a&&!i.isNode&&t.device===g&&window.innerWidth*window.innerHeight>m&&(t.device="tablet"),t};if(!i.isNode&&(o(),window.__ua__))for(var a in window.__ua__)n[a]=window.__ua__[a]},{"../util":315}],234:[function(e,t,n){var i=e("./"),r=(e("../base"),e("../util")),o=(e("../value/flags/data"),e("../object"));n.extend=r.extend(function(e,t,n){var a=r.compareArrays,s={_dUpdate:function(e,t,n,o,s,c,l,u,p,f){if(this.model){if("$ndata"===e&&(t=o,n=s,o=c,s=l,c=u,l=p,u=f),!this._d&&this.parent)for(var d=this.parent;!this._d&&d;)d._d?this._dSet(d._d,!0):d=d.parent;var h=this,v=h.model,g=v.flags,m=h._d&&h._d._path||[],y=(o||(o=h._d&&h._d._updateOrigin)&&!(o===h._d&&(o=!1)))&&o.updatePath,_=o&&o._path,b=function(n,i){var p,f,d,v;if(!i._flag.data)return void console.error("NO DATA FLAG",y,i._flag,t,e,s,c,l);if(i=i._flag.data[2],"collection"!==n||!h._colFilter){if(i===!0)f=!0;else if(i.pop){i=i.concat();for(var g=i.length-1;g>=0;g--)void 0!==!v&&(p=r.get(h._d,i[g]),void 0!==p&&(v=!0)),i[g]=i[g].split(".")}else i=i.split("."),p=r.get(h._d,i),!p&&h._d&&h._d.from&&i&&(p=r.get(h._d.from,i)),p&&o&&4===o.__t&&(v=!0);if(!f&&o){d=!0;var b;if(o===p||(b=o.from)===p)f=!0;else if(h._d._filter&&p&&p._ancestor(o))f=!0;else if(v)for(var w=0;w<i.length;w++){if(y&&a(y,i[w])||i[w][0]===y[0]&&r.get(t,i[w].concat().shift())){d=!1;break}if(a(m.concat(i[w]),_)||a(i[w],_)){d=!1;break}if(p&&null!==o._val&&t&&(t[i[w]]||t.$path||4===t.__t)&&(p._ancestor(o)||p.from._ancestor(b))){f=!0;break}}else if(null===t);else if(void 0===t);else if(y&&a(y,i)||i[0]===y&&y[0]&&r.get(t,i.concat().shift()))d=!1;else if(m&&(a(m.concat(i),_)||a(i,_)))d=!1;else if(p&&t[i[0]]&&p._ancestor(o))f=!0;else if(h.__checkKeys__)for(var k in h.__checkKeys__)(i===h.__checkKeys__[k]||i[0]===h.__checkKeys__[k])&&(f=!0)}return f||s||(u||s||void 0!==p)&&(!d||1===s)?(h[n]._update(t,!1,o,s,c,l,!u,h),!0):void 0}},w=function(){if(this._d){var e,t=this;t.model.val,v.field&&(e=r.get(t._d,v.field.val)),v._val&&(e=v._val.call(t,e||t._d)||e),e&&t._d!==e&&(v.parsing=!0,v.field&&(v.parsed=v.field.val),this._dSet(e),v.parsing=!1)}};if(w.call(h),u&&h.eachInstance(w,"model"),g&&(u||h._d))for(var k in g)if(g[k].__t)b(k,g[k]);else for(var x=0,j=g[k].length;j>x&&!b(k,g[k][x]);x++);this.model.complete&&this.model.complete._val.call(this,i)}},_dSet:function(e,t){return this.model._flag&&this.model._flag.defer&&!this.__processing?void(this.__pFlag=[e,t]):(this._d&&this._d.__t&&this._d.removeListener(!0,this),this._d=e,t&&(this._dfrom=!0),this._dListen(),e)},_dListen:function(){var e;if(this.model&&this._d&&this._d instanceof o)this._d.addListener([this._dUpdate,this]),e=this,this._d.cloud||this._d.each(function(){e.__checkKeys__=!0,4===this.__t&&this.addListener([e._dUpdate,e,"$ndata",this])});else if(this.model&&this._d)for(var t in this._d)this.__checkKeys__&&this.__checkKeys__!==!0||(this.__checkKeys__=[]),this._d[t]instanceof o&&(this.__checkKeys__.push||console.error("xxxxxx",this,this.__checkKeys__,t,this._d),this.__checkKeys__.push(t),this._d[t].addListener([this._dUpdate,this,"$ndata",t]))},updateData:function(e){return this.model._flag&&this.model._flag.defer&&!this.__processing?(this.__pFlagU=[e],void this.model._update()):void this._dUpdate(this._d,void 0,!1,!1,!1,!1,!1,e)}},c=function(n){e.extend({name:n,type:!1,value:t&&t[n]?function(){s[n].apply(this,arguments),t[n].apply(this,arguments)}:s[n]})};for(var l in s)c(l);e.extend({name:"model",cache:!1,set:function(e){if((this.__pFlag||this.__pFlagU)&&(this.__processing=!0,this.model.parsing=!1,this.__pFlag&&this._dSet.apply(this,this.__pFlag),this.__pFlagU&&this.updateData.apply(this,this.__pFlagU),this.__pFlagU=null,this.__pFlag=null,this.__processing=null),e.field&&e.field.val!==e.parsed){var t,n=e.parsed&&e.parsed.split(".");if(e.parsed=null,this._d)if(t=this._d,n){for(var i=n.length-1;i>=0;i--)t=t._parent;t&&(this._dSet(t),this.updateData(!0))}else this.updateData(!0);e.parsed=null}},remove:function(){if(this._d)if(this._d.__t){if(this._d.removeListener(void 0,this),!this._d.cloud){var e=this;this._d.each(function(){4===this.__t&&this.removeListener(void 0,e)})}}else if(this.__checkKeys__)for(var t in this.__checkKeys__)this._d[this.__checkKeys__[t]]instanceof o&&this._d[this.__checkKeys__[t]].removeListener(void 0,this)}},{name:"data",type:!1,set:function(e){if(this._d!==e){if(this.model._flag&&this.model._flag.defer)return this.__pFlag=[e],void(this.__pFlagU=[!0]);this.model.parsing=!1,this._dSet(e),this.updateData(!0)}},get:function(){return this._d}})})},{"../base":195,"../object":303,"../util":315,"../value/flags/data":321,"./":236}],235:[function(e,t,n){function i(e,t,n){var i;switch(e){case"$not":if(t instanceof Object){var a=c(t,n);i=function(e){return a(e)===!1}}else i=function(e){return e!==t};break;case"$ne":i=function(e){return e!==t};break;case"$and":var l=r(t,n);i=o(l);break;case"$nand":var l=r(t,n);i=function(e){for(var t=0,n=l.length;n>t;t++)if(l[t](e)===!1)return!0;return!1};break;case"$or":var l=r(t,n);i=function(e){for(var t=0,n=l.length;n>t;t++)if(l[t](e))return!0;return!1};break;case"$nor":var l=r(t,n);i=function(e){for(var t=0,n=l.length;n>t;t++)if(l[t](e))return!1;return!0};break;case"$every":n.set("$",{});var a=c(t,n.$);i=function(e){if(e&&e.__t<3){var t=!0;return e.each(function(){return a(this)?void 0:!(t=!1)}),t}return!1};break;case"$nevery":n.set("$",{});var a=c(t,n.$);i=function(e){if(e&&e.__t<3){var t=!1;return e.each(function(){return a(this)?void 0:t=!0}),t}return!0};break;case"$":case"$some":if(n.set("$",{}),t instanceof Object){var a=c(t,n.$);i=function(e){if(e&&e.__t<3){var t;return e.each(function(){return a(this)?t=!0:void 0}),t||!1}return!1}}else i=function(e){if(e&&e.__t<3){var n;return e.each(function(){return this===t?n=!0:void 0}),n||!1}return!1},n.$._check=function(e){return e===t};break;case"$nsome":n.set("$",{});var a=c(t,n.$);i=function(e){if(e&&e.__t<3){var t=!0;return e.each(function(){return a(this)?!(t=!1):void 0}),t}return!0};break;case"$lt":i=function(e){return t>e};break;case"$lte":i=function(e){return t>=e};break;case"$gt":i=function(e){return e>t};break;case"$gte":i=function(e){return e>=t};break;case"$contains":var u=new RegExp(t,"i");i=function(e){return u.test(e)};break;case"$ncontains":var u=new RegExp(t,"i");i=function(e){return!u.test(e)};break;case"$containsall":break;case"$ncontainsall":break;case"$has":i=function(e){return e&&void 0!==e[t]};break;case"$nhas":i=function(e){return!e||void 0===e[t]};break;case"$exists":i=function(e){return(void 0!==e&&null!==e)===t};break;case"$in":i=function(e){for(var n=0,i=t.length;i>n;n++)if(e===t[n])return!0;return!1};break;case"$nin":i=function(e){for(var n=0,i=t.length;i>n;n++)if(e===t[n])return!1;return!0};break;case"$regex":i=function(e){return t.test(e)};break;default:if(t instanceof Object){var p=n[e];p||(n.set(e,{}),p=n[e]);var a=c(t,p);i=function(t){return t=s(t,e),a(t)}}else i=function(n){return n=s(n,e),n===t},n.set(e,{}),n[e]._check=i}return n?n._check=i:i}function r(e,t){for(var n=[],i=0,r=e.length;r>i;i++)n.push(c(e[i],t));return n}function o(e,t){return function(t){for(var n=a(t),i=0,r=e.length;r>i;i++)if(e[i](n)===!1)return!1;return!0}}function a(e){var t=e&&e.from&&e.from.val;return void 0!==t?t:e}function s(e,t){return e=a(e),e?a(e[t]):void 0}var c=(e("./"),t.exports=function(e,t){if(e instanceof Object){var n=Object.keys(e);if(1===n.length){var r=n[0],s=i(r,e[r],t);return t._check=function(e){var t=a(e);return s(t)}}for(var r,c=[],l=0,u=n.length;u>l;l++)r=n[l],c.push(i(r,e[r],t));return t._check=o(c)}return t._check=function(t){return a(t)===e}})},{"./":236}],236:[function(e,t,n){var i=e("vigour-js"),r=e("vigour-js/object"),o=e("vigour-js/util");t.exports=n=i.Data=r["new"](),n.prototype._blacklist.push("__sub","__block"),o.define(n,"_hook",function(e,t){t.subscription&&(this.__sub=t.subscription,delete t.subscription),t.block&&(this.__block=!0,delete t.block)})},{"vigour-js":238,"vigour-js/object":303,"vigour-js/util":315}],237:[function(e,t,n){function i(e,t){var n=e.val;return n&&n[t]&&n[t].val}function r(e,t){var n=e.path(t);return n&&n.val}var o=e("./conditions"),a=e("../util/hash"),s=e("../object"),c=e("../util");n.SubsObj=s["new"](),n.SubsObj.prototype._blacklist.push("_root","_check","_sort","_uid"),n.extend=c.extend(function(e){e.prototype._blacklist.push("_filter","_uid","_hash","_indexCache","_subscnt");var t=e.prototype._update,i=e.prototype._hook,r=e.prototype.remove;c.define(e,"remove",function(){var e;if(this._filter&&(e=this.length))for(var t=0;e>t;t++)delete this[t];return r.apply(this,arguments)},"filter",{get:function(){return this._filter},set:function(e){this._filter=e,this._build(void 0,!0),t.call(this,void 0,this.stamp(),void 0,!1,!1,void 0)}},"_hook",function(e,t){if(i&&i.call(this,e,t),!c.empty(t)&&e){var n=this;n._subscnt=0,n._filter=t,n._hash=a(e._path+JSON.stringify([t.condition,t.range,t.sort])),n._uid||(n._uid=n._hash)}},"_build",function(e,i){var r=this;if(e||(e=r._val),e){r.length&&r._clear();var a,s,c=[],f=this._itemsHandler,d=r._filter,h=d.subsObj||new n.SubsObj({},r),v=this.stamp();if(4!==e.__t||e._filter||(e=e.from),d.sort&&("string"==typeof d.sort&&(d.sort={field:d.sort}),a=d.sort,a.fn||(a.type||(a.type="string"),a.fn=p[a.type](a)),h.path(a.field.split("."),{}).set("_sort",!0)),d.condition){var g=0,m=0,y=d.check||(d.check=o(d.condition,h));d.subsObj=h,e.each(function(e){s=this,f&&f(s,h,r),y(s)?(g++,c.push(s)):void 0!==r._has(s)?(u(s,r),i||t.call(r,s,v,r,s,!1,null),m++):m++})}else e.each(function(){f&&f(this,h,r),c.push(this)});d.subsObj=h,a&&c.length>1&&c.sort(d.sort.fn);var _,s,b=d.range;if(b&&(b instanceof Array||(b=d.range=[0,d.range]),c.length)){var w=c.splice(b[0],b[1]);for(_=c.length;s=c[--_];)void 0!==r._has(s)&&u(s,r);c=w}for(var s,_=c.length;s=c[--_];){r[_]=s;{void 0===r._has(s)}l(s,r,_)}r.length=c.length}},"_update",function(e,n,i,r,o,a){if(this._filter){var s=this,c=s.updatePath;if(void 0!==c[0]){var l=1===c.length,u=l&&r,p=u?s._lfrom:s.val[c[0]];if(s._val._filter&&void 0===s._val._has(p))return void(void 0!==s._has(p)&&s._checkItem(p,!1,e,n));var f=u?!1:l&&o?void 0:c;s._checkItem(p,f,e,n)===!0&&t.apply(s,arguments)}else i||(r?s.length&&s._clear():s._build()),t.apply(this,arguments)}else t.apply(this,arguments)},"_has",function(e){var t,n=e._indexCache,i=this._uid;return n&&i&&(t=n[i])?t[0]:void 0},"_clear",function(){var e=this;e.each(function(t){e[t]=void 0,delete e[t]}),e.length=0},"_checkItem",function(e,t,n,i){if(e){var r,o,a,s=this,p=e,f=s._filter,d=f.sort,h=f.range,v=h&&!(0===h[0]&&h[1]>=s._val.length||s.length<h[1]-h[0]),g=t===!1||e._removed,m=a=void 0!==(o=s._has(e)),y=f.check,_=g?!1:v||1!==t?!y||y(e):a;if(a!==_)if(a){m=1,u(e,s),g=e;for(var b;b=s[++o];)s[o-1]=b,l(b,s,o-1);var w=o-1;s[w]=null,delete s[w];var k;v&&s._val.each(d?function(){void 0!==s._has(this)||s[w]&&!(d.fn(this,s[w])<0)||y&&!y(this)||(k=s[w]=this)}:function(){return void 0!==s._has(this)||y&&!y(this)?void 0:k=s[w]=this}),k?(l(k,s,o-1),r=k):s.length--}else{var x;if(d){var j=d.fn;if(s.length&&s.each(function(t){return j(e,this)<0?x=t:void 0}),void 0!==x){m=1,x=Number(x),l(e,s,x),r=e,v?(g=s[s.length-1],u(g,s)):this.length++;for(var o=s.length-2;o>=x;)l(s[o],s,o+1),s[o+1]=s[o--];s[x]=e}else v||(m=1,x=s.length++,s[x]=e,l(e,s,x),r=e)}else v||(m=1,x=s.length++,s[x]=e,l(e,s,x),r=e)}else if(a&&d){if(t.length&&d.field)if(~d.field.indexOf(".")){var C=d.field.split(".");if(!c.compareArrays(t.slice(1),C))return m}else if(t[1]!==d.field)return m;var x;if(s.each(function(t){if(t!=o){var n=d.fn(e,this);if(-1===n)return t==o+1?!0:(x=o>t?t:t-1,!0);if(t>=o+1&&0===n)return!0;t>o&&(x=t)}}),void 0!==x){m=1;var S;if(o>x)for(;o>x;)S=s[o]=s[--o],S&&l(S,s,o+1);else for(;x>o;)S=s[o]=s[++o],S&&l(S,s,o-1);s[x]=e}var w=s.length-1;if(v&&(x==w||void 0===x&&o==w)){var E;s._val.each(function(){void 0!==s._has(this)||-1!==d.fn(this,e)||y&&!y(this)||(E||(E=e),s[w]=e=this)}),l(e,s,w),E&&(u(E,s),g=E,r=e,m=1)}else void 0!==x&&l(e,s,Number(x))}return 1===m&&s.__update(n,i,p,g,r),m}})});var l=n.storeIndex=function(e,t,n){var i,r=e._indexCache;r?(i=r[t._uid],i?(i[1]=i[0],i[0]=n):r[t._uid]=[n]):(e._indexCache={},e._indexCache[t._uid]=[n])},u=n.unstoreIndex=function(e,t){var n=e._indexCache;if(n){var i=n[t._uid];i[1]=i[0],i[0]=void 0}},p={number:function(e){var t=e.field;return function(n,i){var r=n[t]&&n[t].val,o=i[t]&&i[t].val;return void 0===r||void 0===o?r===o?0:void 0===r?1:-1:e.order?-1*(r-o):r-o}},string:function(e){var t=e.field;if(~t.indexOf(".")){var n=t.split(".");return function(t,i){if(t=r(t,n),i=r(i,n),void 0===t||void 0===i)return t===i?0:void 0===t?1:-1;var o=t>i?1:t===i?0:-1;return e.order?-1*o:o}}return function(n,r){n=i(n,t),r=i(r,t);var o=void 0===n||null===n,a=void 0===r||null===r;if(o||a)return n===r?0:o?1:-1;var s=n>r?1:n===r?0:-1;return e.order?-1*s:s}}}},{"../object":303,"../util":315,"../util/hash":313,"./conditions":235}],238:[function(e,t,n){},{}],239:[function(e,t,n){function i(e,t){var i;if("console"===n.mode)i={bold:["[1m","[22m"],italic:["[3m","[23m"],underline:["[4m","[24m"],inverse:["[7m","[27m"],strikethrough:["[9m","[29m"],white:["[37m","[39m"],grey:["[90m","[39m"],black:["[30m","[39m"],blue:["[34m","[39m"],cyan:["[36m","[39m"],green:["[32m","[39m"],magenta:["[35m","[39m"],red:["[31m","[39m"],yellow:["[33m","[39m"],whiteBG:["[47m","[49m"],greyBG:["[49;5;8m","[49m"],blackBG:["[40m","[49m"],blueBG:["[44m","[49m"],cyanBG:["[46m","[49m"],greenBG:["[42m","[49m"],magentaBG:["[45m","[49m"],redBG:["[41m","[49m"],yellowBG:["[43m","[49m"]};else if("browser"===n.mode)i={bold:["<b>","</b>"],italic:["<i>","</i>"],underline:["<u>","</u>"],inverse:['<span style="background-color:black;color:white;">',"</span>"],strikethrough:["<del>","</del>"],white:['<span style="color:white;">',"</span>"],grey:['<span style="color:gray;">',"</span>"],black:['<span style="color:black;">',"</span>"],blue:['<span style="color:blue;">',"</span>"],cyan:['<span style="color:cyan;">',"</span>"],green:['<span style="color:green;">',"</span>"],magenta:['<span style="color:magenta;">',"</span>"],red:['<span style="color:red;">',"</span>"],yellow:['<span style="color:yellow;">',"</span>"],whiteBG:['<span style="background-color:white;">',"</span>"],greyBG:['<span style="background-color:gray;">',"</span>"],blackBG:['<span style="background-color:black;">',"</span>"],blueBG:['<span style="background-color:blue;">',"</span>"],cyanBG:['<span style="background-color:cyan;">',"</span>"],greenBG:['<span style="background-color:green;">',"</span>"],magentaBG:['<span style="background-color:magenta;">',"</span>"],redBG:['<span style="background-color:red;">',"</span>"],yellowBG:['<span style="background-color:yellow;">',"</span>"]};else{if("none"===n.mode)return e+"";console.log('unsupported mode, try "browser", "console" or "none"')}return i[t][0]+e+i[t][1]}function r(e){var t=["__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","charAt","constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf","charCodeAt","indexOf","lastIndexof","length","localeCompare","match","replace","search","slice","split","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim","trimLeft","trimRight"];Object.keys(e).forEach(function(i){-1!==t.indexOf(i)?console.log("warn: ".red+("String.prototype"+i).magenta+" is probably something you don't want to override. Ignoring style name"):"string"==typeof e[i]?c(i,function(){return n[e[i]](this)}):c(i,function(){for(var t=this,r=0;r<e[i].length;r++)t=n[e[i][r]](t);return t})})}function o(e){return function(){if(!s)return this.replace(/( )/,"$1");var t=this.split("");return t=t.map(e),t.join("")}}function a(e,t){function n(e){var t=Math.floor(Math.random()*e);return t}function i(e){var t=!1;return a.filter(function(n){t=n===e}),t}function r(e,t){var r,a,s="";t=t||{},t.up=t.up||!0,t.mid=t.mid||!0,t.down=t.down||!0,t.size=t.size||"maxi",e=e.split("");for(a in e)if(!i(a)){switch(s+=e[a],r={up:0,down:0,mid:0},t.size){case"mini":r.up=n(8),r.min=n(2),r.down=n(8);break;case"maxi":r.up=n(16)+3,r.min=n(4)+1,r.down=n(64)+3;break;default:r.up=n(8)+1,r.mid=n(6)/2,r.down=n(8)+1}var c=["up","mid","down"];for(var l in c)for(var u=c[l],p=0;p<=r[u];p++)t[u]&&(s+=o[u][n(o[u].length)])}return s}var o={up:["̍","̎","̄","̅","̿","̑","̆","̐","͒","͗","͑","̇","̈","̊","͂","̓","̈","͊","͋","͌","̃","̂","̌","͐","̀","́","̋","̏","̒","̓","̔","̽","̉","ͣ","ͤ","ͥ","ͦ","ͧ","ͨ","ͩ","ͪ","ͫ","ͬ","ͭ","ͮ","ͯ","̾","͛","͆","̚"],down:["̖","̗","̘","̙","̜","̝","̞","̟","̠","̤","̥","̦","̩","̪","̫","̬","̭","̮","̯","̰","̱","̲","̳","̹","̺","̻","̼","ͅ","͇","͈","͉","͍","͎","͓","͔","͕","͖","͙","͚","̣"],mid:["̕","̛","̀","́","͘","̡","̢","̧","̨","̴","̵","̶","͜","͝","͞","͟","͠","͢","̸","̷","͡"," ҉"]},a=[].concat(o.up,o.down,o.mid);return r(e)}var s=!1;if("undefined"!=typeof t&&(s=!0),s)n.mode="console";else{var n={},t={};n.mode="browser"}var c=function(e,t){n[e]=function(e){return t.apply(e)},String.prototype.__defineGetter__(e,t)},l=["bold","underline","strikethrough","italic","inverse","grey","black","yellow","red","green","blue","white","cyan","magenta","greyBG","blackBG","yellowBG","redBG","greenBG","blueBG","whiteBG","cyanBG","magentaBG"];l.forEach(function(e){c(e,function(){return i(this,e)})});var u=function(){var e=["red","yellow","green","blue","magenta"];return function(t,n,r){return" "===t?t:i(t,e[n++%e.length])}}();n.themes={},n.addSequencer=function(e,t){c(e,o(t))},n.addSequencer("rainbow",u),n.addSequencer("zebra",function(e,t,n){return t%2===0?e:e.inverse}),n.setTheme=function(t){if("string"==typeof t)try{return n.themes[t]=e(t),r(n.themes[t]),n.themes[t]}catch(i){return console.log(i),i}else r(t)},c("stripColors",function(){return(""+this).replace(/\x1B\[\d+m/g,"")}),c("zalgo",function(){return a(this)})},{}],240:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":241}],241:[function(e,t,n){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":242,"engine.io-parser":255}],242:[function(e,t,n){(function(n){function i(e,t){if(!(this instanceof i))return new i(e,t);if(t=t||{},e&&"object"==typeof e&&(t=e,e=null),e&&(e=u(e),t.host=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)),this.secure=null!=t.secure?t.secure:n.location&&"https:"==location.protocol,t.host){var r=t.host.split(":");t.hostname=r.shift(),r.length?t.port=r.pop():t.port||(t.port=this.secure?"443":"80")}this.agent=t.agent||!1,this.hostname=t.hostname||(n.location?location.hostname:"localhost"),this.port=t.port||(n.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=f.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=t.rejectUnauthorized||null,this.open()}function r(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var o=e("./transports"),a=e("component-emitter"),s=e("debug")("engine.io-client:socket"),c=e("indexof"),l=e("engine.io-parser"),u=e("parseuri"),p=e("parsejson"),f=e("parseqs");t.exports=i,i.priorWebsocketSuccess=!1,a(i.prototype),i.protocol=l.protocol,i.Socket=i,i.Transport=e("./transport"),i.transports=e("./transports"),i.parser=e("engine.io-parser"),i.prototype.createTransport=function(e){s('creating transport "%s"',e);var t=r(this.query);t.EIO=l.protocol,t.transport=e,this.id&&(t.sid=this.id);var n=new o[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized});return n},i.prototype.open=function(){var e;if(this.rememberUpgrade&&i.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))e="websocket";else{if(0==this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";var e;try{e=this.createTransport(e)}catch(n){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},i.prototype.setTransport=function(e){s("setting transport %s",e.name);var t=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},i.prototype.probe=function(e){function t(){if(f.onlyBinaryUpgrades){var t=!this.supportsBinary&&f.transport.supportsBinary;p=p||t}p||(s('probe transport "%s" opened',e),u.send([{type:"ping",data:"probe"}]),u.once("packet",function(t){if(!p)if("pong"==t.type&&"probe"==t.data){if(s('probe transport "%s" pong',e),f.upgrading=!0,f.emit("upgrading",u),!u)return;i.priorWebsocketSuccess="websocket"==u.name,s('pausing current transport "%s"',f.transport.name),f.transport.pause(function(){p||"closed"!=f.readyState&&(s("changing transport and sending upgrade packet"),l(),f.setTransport(u),u.send([{type:"upgrade"}]),f.emit("upgrade",u),u=null,f.upgrading=!1,f.flush())})}else{s('probe transport "%s" failed',e);var n=new Error("probe error");n.transport=u.name,f.emit("upgradeError",n)}}))}function n(){p||(p=!0,l(),u.close(),u=null)}function r(t){var i=new Error("probe error: "+t);i.transport=u.name,n(),s('probe transport "%s" failed because of error: %s',e,t),f.emit("upgradeError",i)}function o(){r("transport closed")}function a(){r("socket closed")}function c(e){u&&e.name!=u.name&&(s('"%s" works - aborting "%s"',e.name,u.name),n())}function l(){u.removeListener("open",t),u.removeListener("error",r),u.removeListener("close",o),f.removeListener("close",a),f.removeListener("upgrading",c)}s('probing transport "%s"',e);var u=this.createTransport(e,{probe:1}),p=!1,f=this;i.priorWebsocketSuccess=!1,u.once("open",t),u.once("error",r),u.once("close",o),this.once("close",a),this.once("upgrading",c),u.open()},i.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",i.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var e=0,t=this.upgrades.length;t>e;e++)this.probe(this.upgrades[e])}},i.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(s('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(p(e.data));break;case"pong":this.setPing();break;case"error":var t=new Error("server error");t.code=e.data,this.emit("error",t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else s('packet received with socket readyState "%s"',this.readyState)},i.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},i.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},i.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){s("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},i.prototype.ping=function(){this.sendPacket("ping")},i.prototype.onDrain=function(){for(var e=0;e<this.prevBufferLen;e++)this.callbackBuffer[e]&&this.callbackBuffer[e]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},i.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},i.prototype.write=i.prototype.send=function(e,t){return this.sendPacket("message",e,t),this},i.prototype.sendPacket=function(e,t,n){if("closing"!=this.readyState&&"closed"!=this.readyState){var i={type:e,data:t};this.emit("packetCreate",i),this.writeBuffer.push(i),this.callbackBuffer.push(n),this.flush()}},i.prototype.close=function(){function e(){i.onClose("forced close"),s("socket closing - telling transport to close"),i.transport.close()}function t(){i.removeListener("upgrade",t),i.removeListener("upgradeError",t),e()}function n(){i.once("upgrade",t),i.once("upgradeError",t)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var i=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}return this},i.prototype.onError=function(e){s("socket error %j",e),i.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},i.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){s('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){n.writeBuffer=[],n.callbackBuffer=[],n.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t)}},i.prototype.filterUpgrades=function(e){for(var t=[],n=0,i=e.length;i>n;n++)~c(this.transports,e[n])&&t.push(e[n]);return t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":243,"./transports":244,"component-emitter":250,debug:252,"engine.io-parser":255,indexof:266,parsejson:267,parseqs:268,parseuri:269}],243:[function(e,t,n){function i(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,
this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized}var r=e("engine.io-parser"),o=e("component-emitter");t.exports=i,o(i.prototype),i.timestamps=0,i.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},i.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},i.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},i.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},i.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},i.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},i.prototype.onPacket=function(e){this.emit("packet",e)},i.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":250,"engine.io-parser":255}],244:[function(e,t,n){(function(t){function i(e){var n,i=!1,s=!1,c=!1!==e.jsonp;if(t.location){var l="https:"==location.protocol,u=location.port;u||(u=l?443:80),i=e.hostname!=location.hostname||u!=e.port,s=e.secure!=l}if(e.xdomain=i,e.xscheme=s,n=new r(e),"open"in n&&!e.forceJSONP)return new o(e);if(!c)throw new Error("JSONP disabled");return new a(e)}var r=e("xmlhttprequest"),o=e("./polling-xhr"),a=e("./polling-jsonp"),s=e("./websocket");n.polling=i,n.websocket=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":245,"./polling-xhr":246,"./websocket":248,xmlhttprequest:249}],245:[function(e,t,n){(function(n){function i(){}function r(e){o.call(this,e),this.query=this.query||{},s||(n.___eio||(n.___eio=[]),s=n.___eio),this.index=s.length;var t=this;s.push(function(e){t.onData(e)}),this.query.j=this.index,n.document&&n.addEventListener&&n.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=i)},!1)}var o=e("./polling"),a=e("component-inherit");t.exports=r;var s,c=/\n/g,l=/\\n/g;a(r,o),r.prototype.supportsBinary=!1,r.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o.prototype.doClose.call(this)},r.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),this.script=t;var i="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);i&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},r.prototype.doWrite=function(e,t){function n(){i(),t()}function i(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(e){r.onError("jsonp polling iframe removal error",e)}try{var t='<iframe src="javascript:0" name="'+r.iframeId+'">';o=document.createElement(t)}catch(e){o=document.createElement("iframe"),o.name=r.iframeId,o.src="javascript:0"}o.id=r.iframeId,r.form.appendChild(o),r.iframe=o}var r=this;if(!this.form){var o,a=document.createElement("form"),s=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=u,a.method="POST",a.setAttribute("accept-charset","utf-8"),s.name="d",a.appendChild(s),document.body.appendChild(a),this.form=a,this.area=s}this.form.action=this.uri(),i(),e=e.replace(l,"\\\n"),this.area.value=e.replace(c,"\\n");try{this.form.submit()}catch(p){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==r.iframe.readyState&&n()}:this.iframe.onload=n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":247,"component-inherit":251}],246:[function(e,t,n){(function(n){function i(){}function r(e){if(c.call(this,e),n.location){var t="https:"==location.protocol,i=location.port;i||(i=t?443:80),this.xd=e.hostname!=n.location.hostname||i!=e.port,this.xs=e.secure!=t}}function o(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.create()}function a(){for(var e in o.requests)o.requests.hasOwnProperty(e)&&o.requests[e].abort()}var s=e("xmlhttprequest"),c=e("./polling"),l=e("component-emitter"),u=e("component-inherit"),p=e("debug")("engine.io-client:polling-xhr");t.exports=r,t.exports.Request=o,u(r,c),r.prototype.supportsBinary=!0,r.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,new o(e)},r.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,i=this.request({method:"POST",data:e,isBinary:n}),r=this;i.on("success",t),i.on("error",function(e){r.onError("xhr post error",e)}),this.sendXhr=i},r.prototype.doPoll=function(){p("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},l(o.prototype),o.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new s(e),i=this;try{if(p("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async),this.supportsBinary&&(t.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(r){}"withCredentials"in t&&(t.withCredentials=!0),this.hasXDR()?(t.onload=function(){i.onLoad()},t.onerror=function(){i.onError(t.responseText)}):t.onreadystatechange=function(){4==t.readyState&&(200==t.status||1223==t.status?i.onLoad():setTimeout(function(){i.onError(t.status)},0))},p("xhr data %s",this.data),t.send(this.data)}catch(r){return void setTimeout(function(){i.onError(r)},0)}n.document&&(this.index=o.requestsCount++,o.requests[this.index]=this)},o.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},o.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},o.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},o.prototype.cleanup=function(e){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=i:this.xhr.onreadystatechange=i,e)try{this.xhr.abort()}catch(t){}n.document&&delete o.requests[this.index],this.xhr=null}},o.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(n){}e="application/octet-stream"===t?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(n){this.onError(n)}null!=e&&this.onData(e)},o.prototype.hasXDR=function(){return"undefined"!=typeof n.XDomainRequest&&!this.xs&&this.enablesXDR},o.prototype.abort=function(){this.cleanup()},n.document&&(o.requestsCount=0,o.requests={},n.attachEvent?n.attachEvent("onunload",a):n.addEventListener&&n.addEventListener("beforeunload",a,!1))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":247,"component-emitter":250,"component-inherit":251,debug:252,xmlhttprequest:249}],247:[function(e,t,n){function i(e){var t=e&&e.forceBase64;(!l||t)&&(this.supportsBinary=!1),r.call(this,e)}var r=e("../transport"),o=e("parseqs"),a=e("engine.io-parser"),s=e("component-inherit"),c=e("debug")("engine.io-client:polling");t.exports=i;var l=function(){var t=e("xmlhttprequest"),n=new t({xdomain:!1});return null!=n.responseType}();s(i,r),i.prototype.name="polling",i.prototype.doOpen=function(){this.poll()},i.prototype.pause=function(e){function t(){c("paused"),n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var i=0;this.polling&&(c("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){c("pre-pause polling complete"),--i||t()})),this.writable||(c("we are currently writing - waiting to pause"),i++,this.once("drain",function(){c("pre-pause writing complete"),--i||t()}))}else t()},i.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},i.prototype.onData=function(e){var t=this;c("polling got data %s",e);var n=function(e,n,i){return"opening"==t.readyState&&t.onOpen(),"close"==e.type?(t.onClose(),!1):void t.onPacket(e)};a.decodePayload(e,this.socket.binaryType,n),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},i.prototype.doClose=function(){function e(){c("writing close packet"),t.write([{type:"close"}])}var t=this;"open"==this.readyState?(c("transport open - closing"),e()):(c("transport not open - deferring close"),this.once("open",e))},i.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")},t=this;a.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},i.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=+new Date+"-"+r.timestamps++),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+this.hostname+n+this.path+e}},{"../transport":243,"component-inherit":251,debug:252,"engine.io-parser":255,parseqs:268,xmlhttprequest:249}],248:[function(e,t,n){function i(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),r.call(this,e)}var r=e("../transport"),o=e("engine.io-parser"),a=e("parseqs"),s=e("component-inherit"),c=e("debug")("engine.io-client:websocket"),l=e("ws");t.exports=i,s(i,r),i.prototype.name="websocket",i.prototype.supportsBinary=!0,i.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=void 0,n={agent:this.agent};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.ws=new l(e,t,n),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},i.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(i.prototype.onData=function(e){var t=this;setTimeout(function(){r.prototype.onData.call(t,e)},0)}),i.prototype.write=function(e){function t(){n.writable=!0,n.emit("drain")}var n=this;this.writable=!1;for(var i=0,r=e.length;r>i;i++)o.encodePacket(e[i],this.supportsBinary,function(e){try{n.ws.send(e)}catch(t){c("websocket closed before onclose event")}});setTimeout(t,0)},i.prototype.onClose=function(){r.prototype.onClose.call(this)},i.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},i.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=+new Date),this.supportsBinary||(e.b64=1),e=a.encode(e),e.length&&(e="?"+e),t+"://"+this.hostname+n+this.path+e},i.prototype.check=function(){return!(!l||"__initialize"in l&&this.name===i.prototype.name)}},{"../transport":243,"component-inherit":251,debug:252,"engine.io-parser":255,parseqs:268,ws:270}],249:[function(e,t,n){var i=e("has-cors");t.exports=function(e){var t=e.xdomain,n=e.xscheme,r=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||i))return new XMLHttpRequest}catch(o){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(o){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(o){}}},{"has-cors":264}],250:[function(e,t,n){t.exports=e(227)},{"/Users/youzi/dev/mtv-play/node_modules/vigour-js/browser/network/cloud/emitter.js":227}],251:[function(e,t,n){t.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],252:[function(e,t,n){function i(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function r(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var i="color: "+this.color;e=[e[0],i,"color: inherit"].concat(Array.prototype.slice.call(e,1));var r=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))}),e.splice(o,0,i),e}function o(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(e){try{null==e?localStorage.removeItem("debug"):localStorage.debug=e}catch(t){}}function s(){var e;try{e=localStorage.debug}catch(t){}return e}n=t.exports=e("./debug"),n.log=o,n.formatArgs=r,n.save=a,n.load=s,n.useColors=i,n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(s())},{"./debug":253}],253:[function(e,t,n){function i(){return n.colors[u++%n.colors.length]}function r(e){function t(){}function r(){var e=r,t=+new Date,o=t-(l||t);e.diff=o,e.prev=l,e.curr=t,l=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=i());var a=Array.prototype.slice.call(arguments);a[0]=n.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var s=0;a[0]=a[0].replace(/%([a-z%])/g,function(t,i){if("%%"===t)return t;s++;var r=n.formatters[i];if("function"==typeof r){var o=a[s];t=r.call(e,o),a.splice(s,1),s--}return t}),"function"==typeof n.formatArgs&&(a=n.formatArgs.apply(e,a));var c=r.log||n.log||console.log.bind(console);c.apply(e,a)}t.enabled=!1,r.enabled=!0;var o=n.enabled(e)?r:t;return o.namespace=e,o}function o(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),i=t.length,r=0;i>r;r++)t[r]&&(e=t[r].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function a(){n.enable("")}function s(e){var t,i;for(t=0,i=n.skips.length;i>t;t++)if(n.skips[t].test(e))return!1;for(t=0,i=n.names.length;i>t;t++)if(n.names[t].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=r,n.coerce=c,n.disable=a,n.enable=o,n.enabled=s,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var l,u=0},{ms:254}],254:[function(e,t,n){function i(e){var t=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"y":return n*p;case"days":case"day":case"d":return n*u;case"hours":case"hour":case"h":return n*l;case"minutes":case"minute":case"m":return n*c;case"seconds":case"second":case"s":return n*s;case"ms":return n}}}function r(e){return e>=u?Math.round(e/u)+"d":e>=l?Math.round(e/l)+"h":e>=c?Math.round(e/c)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function o(e){return a(e,u,"day")||a(e,l,"hour")||a(e,c,"minute")||a(e,s,"second")||e+" ms"}function a(e,t,n){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var s=1e3,c=60*s,l=60*c,u=24*l,p=365.25*u;t.exports=function(e,t){return t=t||{},"string"==typeof e?i(e):t["long"]?o(e):r(e)}},{}],255:[function(e,t,n){(function(t){function i(e,t){var i="b"+n.packets[e.type]+e.data.data;return t(i)}function r(e,t,i){if(!t)return n.encodeBase64Packet(e,i);var r=e.data,o=new Uint8Array(r),a=new Uint8Array(1+r.byteLength);a[0]=m[e.type];for(var s=0;s<o.length;s++)a[s+1]=o[s];return i(a.buffer)}function o(e,t,i){if(!t)return n.encodeBase64Packet(e,i);var r=new FileReader;return r.onload=function(){e.data=r.result,n.encodePacket(e,t,!0,i)},r.readAsArrayBuffer(e.data)}function a(e,t,i){if(!t)return n.encodeBase64Packet(e,i);if(g)return o(e,t,i);var r=new Uint8Array(1);r[0]=m[e.type];var a=new b([r.buffer,e.data]);return i(a)}function s(e,t,n){for(var i=new Array(e.length),r=f(e.length,n),o=function(e,n,r){t(n,function(t,n){i[e]=n,r(t,i)})},a=0;a<e.length;a++)o(a,e[a],r)}var c=e("./keys"),l=e("has-binary"),u=e("arraybuffer.slice"),p=e("base64-arraybuffer"),f=e("after"),d=e("utf8"),h=navigator.userAgent.match(/Android/i),v=/PhantomJS/i.test(navigator.userAgent),g=h||v;n.protocol=3;var m=n.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},y=c(m),_={type:"error",data:"parser error"},b=e("blob");n.encodePacket=function(e,n,o,s){"function"==typeof n&&(s=n,n=!1),"function"==typeof o&&(s=o,o=null);var c=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&c instanceof ArrayBuffer)return r(e,n,s);if(b&&c instanceof t.Blob)return a(e,n,s);if(c&&c.base64)return i(e,s);var l=m[e.type];return void 0!==e.data&&(l+=o?d.encode(String(e.data)):String(e.data)),s(""+l)},n.encodeBase64Packet=function(e,i){var r="b"+n.packets[e.type];if(b&&e.data instanceof b){var o=new FileReader;return o.onload=function(){var e=o.result.split(",")[1];i(r+e)},o.readAsDataURL(e.data)}var a;try{a=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(s){for(var c=new Uint8Array(e.data),l=new Array(c.length),u=0;u<c.length;u++)l[u]=c[u];a=String.fromCharCode.apply(null,l)}return r+=t.btoa(a),i(r)},n.decodePacket=function(e,t,i){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return n.decodeBase64Packet(e.substr(1),t);if(i)try{e=d.decode(e)}catch(r){return _}var o=e.charAt(0);return Number(o)==o&&y[o]?e.length>1?{type:y[o],data:e.substring(1)}:{type:y[o]}:_}var a=new Uint8Array(e),o=a[0],s=u(e,1);return b&&"blob"===t&&(s=new b([s])),{type:y[o],data:s}},n.decodeBase64Packet=function(e,n){var i=y[e.charAt(0)];if(!t.ArrayBuffer)return{type:i,data:{base64:!0,data:e.substr(1)}};var r=p.decode(e.substr(1));return"blob"===n&&b&&(r=new b([r])),{type:i,data:r}},n.encodePayload=function(e,t,i){function r(e){return e.length+":"+e}function o(e,i){n.encodePacket(e,a?t:!1,!0,function(e){i(null,r(e))})}"function"==typeof t&&(i=t,t=null);var a=l(e);return t&&a?b&&!g?n.encodePayloadAsBlob(e,i):n.encodePayloadAsArrayBuffer(e,i):e.length?void s(e,o,function(e,t){return i(t.join(""))}):i("0:")},n.decodePayload=function(e,t,i){if("string"!=typeof e)return n.decodePayloadAsBinary(e,t,i);"function"==typeof t&&(i=t,t=null);var r;if(""==e)return i(_,0,1);for(var o,a,s="",c=0,l=e.length;l>c;c++){var u=e.charAt(c);if(":"!=u)s+=u;else{if(""==s||s!=(o=Number(s)))return i(_,0,1);if(a=e.substr(c+1,o),s!=a.length)return i(_,0,1);if(a.length){if(r=n.decodePacket(a,t,!0),_.type==r.type&&_.data==r.data)return i(_,0,1);var p=i(r,c+o,l);if(!1===p)return}c+=o,s=""}}return""!=s?i(_,0,1):void 0},n.encodePayloadAsArrayBuffer=function(e,t){function i(e,t){n.encodePacket(e,!0,!0,function(e){return t(null,e)})}return e.length?void s(e,i,function(e,n){var i=n.reduce(function(e,t){var n;return n="string"==typeof t?t.length:t.byteLength,e+n.toString().length+n+2},0),r=new Uint8Array(i),o=0;return n.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var i=new Uint8Array(e.length),a=0;a<e.length;a++)i[a]=e.charCodeAt(a);n=i.buffer}r[o++]=t?0:1;for(var s=n.byteLength.toString(),a=0;a<s.length;a++)r[o++]=parseInt(s[a]);r[o++]=255;for(var i=new Uint8Array(n),a=0;a<i.length;a++)r[o++]=i[a]}),t(r.buffer)}):t(new ArrayBuffer(0))},n.encodePayloadAsBlob=function(e,t){function i(e,t){n.encodePacket(e,!0,!0,function(e){var n=new Uint8Array(1);if(n[0]=1,"string"==typeof e){for(var i=new Uint8Array(e.length),r=0;r<e.length;r++)i[r]=e.charCodeAt(r);e=i.buffer,n[0]=0}for(var o=e instanceof ArrayBuffer?e.byteLength:e.size,a=o.toString(),s=new Uint8Array(a.length+1),r=0;r<a.length;r++)s[r]=parseInt(a[r]);if(s[a.length]=255,b){var c=new b([n.buffer,s.buffer,e]);t(null,c)}})}s(e,i,function(e,n){return t(new b(n))})},n.decodePayloadAsBinary=function(e,t,i){"function"==typeof t&&(i=t,t=null);for(var r=e,o=[],a=!1;r.byteLength>0;){for(var s=new Uint8Array(r),c=0===s[0],l="",p=1;255!=s[p];p++){if(l.length>310){a=!0;break}l+=s[p]}if(a)return i(_,0,1);r=u(r,2+l.length),l=parseInt(l);var f=u(r,0,l);if(c)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(d){var h=new Uint8Array(f);f="";for(var p=0;p<h.length;p++)f+=String.fromCharCode(h[p])}o.push(f),r=u(r,l)}var v=o.length;o.forEach(function(e,r){i(n.decodePacket(e,t,!0),r,v)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":256,after:257,"arraybuffer.slice":258,"base64-arraybuffer":259,blob:260,"has-binary":261,utf8:263}],256:[function(e,t,n){t.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var i in e)n.call(e,i)&&t.push(i);return t}},{}],257:[function(e,t,n){function i(e,t,n){function i(e,r){if(i.count<=0)throw new Error("after called too many times");--i.count,e?(o=!0,t(e),t=n):0!==i.count||o||t(null,r)}var o=!1;return n=n||r,i.count=e,0===e?t():i}function r(){}t.exports=i},{}],258:[function(e,t,n){t.exports=function(e,t,n){var i=e.byteLength;if(t=t||0,n=n||i,e.slice)return e.slice(t,n);if(0>t&&(t+=i),0>n&&(n+=i),n>i&&(n=i),t>=i||t>=n||0===i)return new ArrayBuffer(0);for(var r=new Uint8Array(e),o=new Uint8Array(n-t),a=t,s=0;n>a;a++,s++)o[s]=r[a];return o.buffer}},{}],259:[function(e,t,n){!function(e){"use strict";n.encode=function(t){var n,i=new Uint8Array(t),r=i.length,o="";for(n=0;r>n;n+=3)o+=e[i[n]>>2],o+=e[(3&i[n])<<4|i[n+1]>>4],o+=e[(15&i[n+1])<<2|i[n+2]>>6],o+=e[63&i[n+2]];return r%3===2?o=o.substring(0,o.length-1)+"=":r%3===1&&(o=o.substring(0,o.length-2)+"=="),o},n.decode=function(t){var n,i,r,o,a,s=.75*t.length,c=t.length,l=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var u=new ArrayBuffer(s),p=new Uint8Array(u);for(n=0;c>n;n+=4)i=e.indexOf(t[n]),r=e.indexOf(t[n+1]),o=e.indexOf(t[n+2]),a=e.indexOf(t[n+3]),p[l++]=i<<2|r>>4,p[l++]=(15&r)<<4|o>>2,p[l++]=(3&o)<<6|63&a;return u}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],260:[function(e,t,n){(function(e){function n(e,t){t=t||{};for(var n=new i,r=0;r<e.length;r++)n.append(e[r]);return t.type?n.getBlob(t.type):n.getBlob()}var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,r=function(){try{var e=new Blob(["hi"]);return 2==e.size}catch(t){return!1}}(),o=i&&i.prototype.append&&i.prototype.getBlob;t.exports=function(){return r?e.Blob:o?n:void 0}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],261:[function(e,t,n){(function(n){function i(e){function t(e){if(!e)return!1;if(n.Buffer&&n.Buffer.isBuffer(e)||n.ArrayBuffer&&e instanceof ArrayBuffer||n.Blob&&e instanceof Blob||n.File&&e instanceof File)return!0;if(r(e)){for(var i=0;i<e.length;i++)if(t(e[i]))return!0}else if(e&&"object"==typeof e){e.toJSON&&(e=e.toJSON());for(var o in e)if(e.hasOwnProperty(o)&&t(e[o]))return!0}return!1}return t(e)}var r=e("isarray");t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:262}],262:[function(e,t,n){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],263:[function(e,t,n){(function(e){!function(i){function r(e){for(var t,n,i=[],r=0,o=e.length;o>r;)t=e.charCodeAt(r++),t>=55296&&56319>=t&&o>r?(n=e.charCodeAt(r++),56320==(64512&n)?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--)):i.push(t);return i}function o(e){for(var t,n=e.length,i=-1,r="";++i<n;)t=e[i],t>65535&&(t-=65536,r+=y(t>>>10&1023|55296),t=56320|1023&t),r+=y(t);return r}function a(e,t){return y(e>>t&63|128)}function s(e){if(0==(4294967168&e))return y(e);var t="";return 0==(4294965248&e)?t=y(e>>6&31|192):0==(4294901760&e)?(t=y(e>>12&15|224),t+=a(e,6)):0==(4292870144&e)&&(t=y(e>>18&7|240),t+=a(e,12),t+=a(e,6)),t+=y(63&e|128)}function c(e){for(var t,n=r(e),i=n.length,o=-1,a="";++o<i;)t=n[o],a+=s(t);return a}function l(){if(m>=g)throw Error("Invalid byte index");var e=255&v[m];if(m++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function u(){var e,t,n,i,r;if(m>g)throw Error("Invalid byte index");if(m==g)return!1;if(e=255&v[m],m++,0==(128&e))return e;if(192==(224&e)){var t=l();if(r=(31&e)<<6|t,r>=128)return r;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=l(),n=l(),r=(15&e)<<12|t<<6|n,r>=2048)return r;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=l(),n=l(),i=l(),r=(15&e)<<18|t<<12|n<<6|i,r>=65536&&1114111>=r))return r;throw Error("Invalid UTF-8 detected")}function p(e){v=r(e),g=v.length,m=0;for(var t,n=[];(t=u())!==!1;)n.push(t);return o(n)}var f="object"==typeof n&&n,d="object"==typeof t&&t&&t.exports==f&&t,h="object"==typeof e&&e;(h.global===h||h.window===h)&&(i=h);var v,g,m,y=String.fromCharCode,_={version:"2.0.0",encode:c,decode:p};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return _});else if(f&&!f.nodeType)if(d)d.exports=_;else{var b={},w=b.hasOwnProperty;for(var k in _)w.call(_,k)&&(f[k]=_[k])}else i.utf8=_}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],264:[function(e,t,n){var i=e("global");try{t.exports="XMLHttpRequest"in i&&"withCredentials"in new i.XMLHttpRequest}catch(r){t.exports=!1}},{global:265}],265:[function(e,t,n){t.exports=function(){return this}()},{}],266:[function(e,t,n){var i=[].indexOf;t.exports=function(e,t){if(i)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],267:[function(e,t,n){(function(e){var n=/^[\],:{}\s]*$/,i=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,r=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,a=/^\s+/,s=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(a,"").replace(s,""),e.JSON&&JSON.parse?JSON.parse(t):n.test(t.replace(i,"@").replace(r,"]").replace(o,""))?new Function("return "+t)():void 0):null}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],268:[function(e,t,n){n.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},n.decode=function(e){for(var t={},n=e.split("&"),i=0,r=n.length;r>i;i++){var o=n[i].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},{}],269:[function(e,t,n){var i=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,n=e.indexOf("["),o=e.indexOf("]");-1!=n&&-1!=o&&(e=e.substring(0,n)+e.substring(n,o).replace(/:/g,";")+e.substring(o,e.length));for(var a=i.exec(e||""),s={},c=14;c--;)s[r[c]]=a[c]||"";return-1!=n&&-1!=o&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}},{}],270:[function(e,t,n){function i(e,t,n){var i;return i=t?new o(e,t):new o(e)}var r=function(){return this}(),o=r.WebSocket||r.MozWebSocket;t.exports=o?i:null,o&&(i.prototype=o.prototype)},{}],271:[function(e,t,n){var i=0,r=1,o=0,a=0;t.exports=function(){var e=Date.now();if(i===e){do o=e+r++/(r+999);while(o===a);a=o}else r=1,o=e;return a=o,i=e,o}},{}],272:[function(e,t,n){t.exports=e(165)},{"./lib/core.js":273,"./lib/done.js":274,"./lib/es6-extensions.js":275,"./lib/node-extensions.js":276,"/Users/youzi/dev/mtv-play/node_modules/promise/index.js":165}],273:[function(e,t,n){t.exports=e(166)},{"/Users/youzi/dev/mtv-play/node_modules/promise/lib/core.js":166,asap:277}],274:[function(e,t,n){t.exports=e(167)},{"./core.js":273,"/Users/youzi/dev/mtv-play/node_modules/promise/lib/done.js":167,asap:277}],275:[function(e,t,n){t.exports=e(168)},{"./core.js":273,"/Users/youzi/dev/mtv-play/node_modules/promise/lib/es6-extensions.js":168,asap:277}],276:[function(e,t,n){t.exports=e(169)},{"./core.js":273,"/Users/youzi/dev/mtv-play/node_modules/promise/lib/node-extensions.js":169,asap:277}],277:[function(e,t,n){t.exports=e(170)},{"/Users/youzi/dev/mtv-play/node_modules/promise/node_modules/asap/asap.js":170,_process:338}],278:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":279}],279:[function(e,t,n){function i(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,i=r(e),o=i.source,l=i.id;return t.forceNew||t["force new connection"]||!1===t.multiplex?(s("ignoring socket cache for %s",o),n=a(o,t)):(c[l]||(s("new io instance for %s",o),c[l]=a(o,t)),n=c[l]),n.socket(i.path)}var r=e("./url"),o=e("socket.io-parser"),a=e("./manager"),s=e("debug")("socket.io-client");t.exports=n=i;var c=n.managers={};n.protocol=o.protocol,n.connect=i,n.Manager=e("./manager"),n.Socket=e("./socket")},{"./manager":280,"./socket":282,"./url":283,debug:287,"socket.io-parser":294}],280:[function(e,t,n){function i(e,t){return this instanceof i?(e&&"object"==typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connected=[],this.encoding=!1,this.packetBuffer=[],this.encoder=new s.Encoder,this.decoder=new s.Decoder,this.autoConnect=t.autoConnect!==!1,void(this.autoConnect&&this.open())):new i(e,t)}var r=(e("./url"),e("engine.io-client")),o=e("./socket"),a=e("component-emitter"),s=e("socket.io-parser"),c=e("./on"),l=e("component-bind"),u=(e("object-component"),e("debug")("socket.io-client:manager")),p=e("indexof"),f=e("backo2");t.exports=i,i.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)this.nsps[e].emit.apply(this.nsps[e],arguments)},i.prototype.updateSocketIds=function(){for(var e in this.nsps)this.nsps[e].id=this.engine.id},a(i.prototype),i.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},i.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},i.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},i.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,
this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},i.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},i.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},i.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},i.prototype.open=i.prototype.connect=function(e){if(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=r(this.uri,this.opts);var t=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var i=c(t,"open",function(){n.onopen(),e&&e()}),o=c(t,"error",function(t){if(u("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",t),e){var i=new Error("Connection error");i.data=t,e(i)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;u("connect attempt will timeout after %d",a);var s=setTimeout(function(){u("connect attempt timed out after %d",a),i.destroy(),t.close(),t.emit("error","timeout"),n.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(s)}})}return this.subs.push(i),this.subs.push(o),this},i.prototype.onopen=function(){u("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(c(e,"data",l(this,"ondata"))),this.subs.push(c(this.decoder,"decoded",l(this,"ondecoded"))),this.subs.push(c(e,"error",l(this,"onerror"))),this.subs.push(c(e,"close",l(this,"onclose")))},i.prototype.ondata=function(e){this.decoder.add(e)},i.prototype.ondecoded=function(e){this.emit("packet",e)},i.prototype.onerror=function(e){u("error",e),this.emitAll("error",e)},i.prototype.socket=function(e){var t=this.nsps[e];if(!t){t=new o(this,e),this.nsps[e]=t;var n=this;t.on("connect",function(){t.id=n.engine.id,~p(n.connected,t)||n.connected.push(t)})}return t},i.prototype.destroy=function(e){var t=p(this.connected,e);~t&&this.connected.splice(t,1),this.connected.length||this.close()},i.prototype.packet=function(e){u("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(e){for(var n=0;n<e.length;n++)t.engine.write(e[n]);t.encoding=!1,t.processPacketQueue()}))},i.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},i.prototype.cleanup=function(){for(var e;e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},i.prototype.close=i.prototype.disconnect=function(){this.skipReconnect=!0,this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},i.prototype.onclose=function(e){u("close"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},i.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)u("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();u("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(u("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(u("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(u("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},i.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},{"./on":281,"./socket":282,"./url":283,backo2:284,"component-bind":285,"component-emitter":286,debug:287,"engine.io-client":240,indexof:290,"object-component":291,"socket.io-parser":294}],281:[function(e,t,n){function i(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}t.exports=i},{}],282:[function(e,t,n){function i(e,t){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}var r=e("socket.io-parser"),o=e("component-emitter"),a=e("to-array"),s=e("./on"),c=e("component-bind"),l=e("debug")("socket.io-client:socket"),u=e("has-binary");t.exports=n=i;var p={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},f=o.prototype.emit;o(i.prototype),i.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[s(e,"open",c(this,"onopen")),s(e,"packet",c(this,"onpacket")),s(e,"close",c(this,"onclose"))]}},i.prototype.open=i.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},i.prototype.send=function(){var e=a(arguments);return e.unshift("message"),this.emit.apply(this,e),this},i.prototype.emit=function(e){if(p.hasOwnProperty(e))return f.apply(this,arguments),this;var t=a(arguments),n=r.EVENT;u(t)&&(n=r.BINARY_EVENT);var i={type:n,data:t};return"function"==typeof t[t.length-1]&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),i.id=this.ids++),this.connected?this.packet(i):this.sendBuffer.push(i),this},i.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},i.prototype.onopen=function(){l("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:r.CONNECT})},i.prototype.onclose=function(e){l("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},i.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:this.onevent(e);break;case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:this.onack(e);break;case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},i.prototype.onevent=function(e){var t=e.data||[];l("emitting event %j",t),null!=e.id&&(l("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?f.apply(this,t):this.receiveBuffer.push(t)},i.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var i=a(arguments);l("sending ack %j",i);var o=u(i)?r.BINARY_ACK:r.ACK;t.packet({type:o,id:e,data:i})}}},i.prototype.onack=function(e){l("calling ack %s with %j",e.id,e.data);var t=this.acks[e.id];t.apply(this,e.data),delete this.acks[e.id]},i.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},i.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)f.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},i.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},i.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},i.prototype.close=i.prototype.disconnect=function(){return this.connected&&(l("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{"./on":281,"component-bind":285,"component-emitter":286,debug:287,"has-binary":288,"socket.io-parser":294,"to-array":298}],283:[function(e,t,n){(function(n){function i(e,t){var i=e,t=t||n.location;return null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"==e.charAt(0)&&(e="/"==e.charAt(1)?t.protocol+e:t.hostname+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e="undefined"!=typeof t?t.protocol+"//"+e:"https://"+e),o("parse %s",e),i=r(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/",i.id=i.protocol+"://"+i.host+":"+i.port,i.href=i.protocol+"://"+i.host+(t&&t.port==i.port?"":":"+i.port),i}var r=e("parseuri"),o=e("debug")("socket.io-client:url");t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:287,parseuri:292}],284:[function(e,t,n){function i(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}t.exports=i,i.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},i.prototype.reset=function(){this.attempts=0},i.prototype.setMin=function(e){this.ms=e},i.prototype.setMax=function(e){this.max=e},i.prototype.setJitter=function(e){this.jitter=e}},{}],285:[function(e,t,n){var i=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=i.call(arguments,2);return function(){return t.apply(e,n.concat(i.call(arguments)))}}},{}],286:[function(e,t,n){t.exports=e(227)},{"/Users/youzi/dev/mtv-play/node_modules/vigour-js/browser/network/cloud/emitter.js":227}],287:[function(e,t,n){function i(e){return i.enabled(e)?function(t){t=r(t);var n=new Date,o=n-(i[e]||n);i[e]=n,t=e+" "+t+" +"+i.humanize(o),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function r(e){return e instanceof Error?e.stack||e.message:e}t.exports=i,i.names=[],i.skips=[],i.enable=function(e){try{localStorage.debug=e}catch(t){}for(var n=(e||"").split(/[\s,]+/),r=n.length,o=0;r>o;o++)e=n[o].replace("*",".*?"),"-"===e[0]?i.skips.push(new RegExp("^"+e.substr(1)+"$")):i.names.push(new RegExp("^"+e+"$"))},i.disable=function(){i.enable("")},i.humanize=function(e){var t=1e3,n=6e4,i=60*n;return e>=i?(e/i).toFixed(1)+"h":e>=n?(e/n).toFixed(1)+"m":e>=t?(e/t|0)+"s":e+"ms"},i.enabled=function(e){for(var t=0,n=i.skips.length;n>t;t++)if(i.skips[t].test(e))return!1;for(var t=0,n=i.names.length;n>t;t++)if(i.names[t].test(e))return!0;return!1};try{window.localStorage&&i.enable(localStorage.debug)}catch(o){}},{}],288:[function(e,t,n){(function(n){function i(e){function t(e){if(!e)return!1;if(n.Buffer&&n.Buffer.isBuffer(e)||n.ArrayBuffer&&e instanceof ArrayBuffer||n.Blob&&e instanceof Blob||n.File&&e instanceof File)return!0;if(r(e)){for(var i=0;i<e.length;i++)if(t(e[i]))return!0}else if(e&&"object"==typeof e){e.toJSON&&(e=e.toJSON());for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)&&t(e[o]))return!0}return!1}return t(e)}var r=e("isarray");t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:289}],289:[function(e,t,n){t.exports=e(262)},{"/Users/youzi/dev/mtv-play/node_modules/vigour-js/node_modules/engine.io-client/node_modules/engine.io-parser/node_modules/has-binary/node_modules/isarray/index.js":262}],290:[function(e,t,n){t.exports=e(266)},{"/Users/youzi/dev/mtv-play/node_modules/vigour-js/node_modules/engine.io-client/node_modules/indexof/index.js":266}],291:[function(e,t,n){var i=Object.prototype.hasOwnProperty;n.keys=Object.keys||function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t},n.values=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(e[n]);return t},n.merge=function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);return e},n.length=function(e){return n.keys(e).length},n.isEmpty=function(e){return 0==n.length(e)}},{}],292:[function(e,t,n){var i=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){for(var t=i.exec(e||""),n={},o=14;o--;)n[r[o]]=t[o]||"";return n}},{}],293:[function(e,t,n){(function(t){var i=e("isarray"),r=e("./is-buffer");n.deconstructPacket=function(e){function t(e){if(!e)return e;if(r(e)){var o={_placeholder:!0,num:n.length};return n.push(e),o}if(i(e)){for(var a=new Array(e.length),s=0;s<e.length;s++)a[s]=t(e[s]);return a}if("object"==typeof e&&!(e instanceof Date)){var a={};for(var c in e)a[c]=t(e[c]);return a}return e}var n=[],o=e.data,a=e;return a.data=t(o),a.attachments=n.length,{packet:a,buffers:n}},n.reconstructPacket=function(e,t){function n(e){if(e&&e._placeholder){var r=t[e.num];return r}if(i(e)){for(var o=0;o<e.length;o++)e[o]=n(e[o]);return e}if(e&&"object"==typeof e){for(var a in e)e[a]=n(e[a]);return e}return e}return e.data=n(e.data),e.attachments=void 0,e},n.removeBlobs=function(e,n){function o(e,c,l){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){a++;var u=new FileReader;u.onload=function(){l?l[c]=this.result:s=this.result,--a||n(s)},u.readAsArrayBuffer(e)}else if(i(e))for(var p=0;p<e.length;p++)o(e[p],p,e);else if(e&&"object"==typeof e&&!r(e))for(var f in e)o(e[f],f,e)}var a=0,s=e;o(s),a||n(s)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":295,isarray:296}],294:[function(e,t,n){function i(){}function r(e){var t="",i=!1;return t+=e.type,(n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type)&&(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(i=!0,t+=e.nsp),null!=e.id&&(i&&(t+=",",i=!1),t+=e.id),null!=e.data&&(i&&(t+=","),t+=p.stringify(e.data)),u("encoded %j as %s",e,t),t}function o(e,t){function n(e){var n=d.deconstructPacket(e),i=r(n.packet),o=n.buffers;o.unshift(i),t(o)}d.removeBlobs(e,n)}function a(){this.reconstructor=null}function s(e){var t={},i=0;if(t.type=Number(e.charAt(0)),null==n.types[t.type])return l();if(n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type){for(var r="";"-"!=e.charAt(++i)&&(r+=e.charAt(i),i!=e.length););if(r!=Number(r)||"-"!=e.charAt(i))throw new Error("Illegal attachments");t.attachments=Number(r)}if("/"==e.charAt(i+1))for(t.nsp="";++i;){var o=e.charAt(i);if(","==o)break;if(t.nsp+=o,i==e.length)break}else t.nsp="/";var a=e.charAt(i+1);if(""!==a&&Number(a)==a){for(t.id="";++i;){var o=e.charAt(i);if(null==o||Number(o)!=o){--i;break}if(t.id+=e.charAt(i),i==e.length)break}t.id=Number(t.id)}if(e.charAt(++i))try{t.data=p.parse(e.substr(i))}catch(s){return l()}return u("decoded %s as %j",e,t),t}function c(e){this.reconPack=e,this.buffers=[]}function l(e){return{type:n.ERROR,data:"parser error"}}var u=e("debug")("socket.io-parser"),p=e("json3"),f=(e("isarray"),e("component-emitter")),d=e("./binary"),h=e("./is-buffer");n.protocol=4,n.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],n.CONNECT=0,n.DISCONNECT=1,n.EVENT=2,n.ACK=3,n.ERROR=4,n.BINARY_EVENT=5,n.BINARY_ACK=6,n.Encoder=i,n.Decoder=a,i.prototype.encode=function(e,t){if(u("encoding packet %j",e),n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type)o(e,t);else{var i=r(e);t([i])}},f(a.prototype),a.prototype.add=function(e){var t;if("string"==typeof e)t=s(e),n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type?(this.reconstructor=new c(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!h(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,this.emit("decoded",t))}},a.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},c.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=d.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},c.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":293,"./is-buffer":295,"component-emitter":286,debug:287,isarray:296,json3:297}],295:[function(e,t,n){(function(e){function n(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],296:[function(e,t,n){t.exports=e(262)},{"/Users/youzi/dev/mtv-play/node_modules/vigour-js/node_modules/engine.io-client/node_modules/engine.io-parser/node_modules/has-binary/node_modules/isarray/index.js":262}],297:[function(e,t,n){!function(e){function t(e){if(t[e]!==o)return t[e];var n;if("bug-string-char-index"==e)n="a"!="a"[0];else if("json"==e)n=t("json-stringify")&&t("json-parse");else{var i,r='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var s=l.stringify,c="function"==typeof s&&u;if(c){(i=function(){return 1}).toJSON=i;try{c="0"===s(0)&&"0"===s(new Number)&&'""'==s(new String)&&s(a)===o&&s(o)===o&&s()===o&&"1"===s(i)&&"[1]"==s([i])&&"[null]"==s([o])&&"null"==s(null)&&"[null,null,null]"==s([o,a,null])&&s({a:[i,!0,!1,null,"\x00\b\n\f\r	"]})==r&&"1"===s(null,i)&&"[\n 1,\n 2\n]"==s([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==s(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==s(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==s(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==s(new Date(-1))}catch(p){c=!1}}n=c}if("json-parse"==e){var f=l.parse;if("function"==typeof f)try{if(0===f("0")&&!f(!1)){i=f(r);var d=5==i.a.length&&1===i.a[0];if(d){try{d=!f('"	"')}catch(p){}if(d)try{d=1!==f("01")}catch(p){}if(d)try{d=1!==f("1.")}catch(p){}}}}catch(p){d=!1}n=d}}return t[e]=!!n}var i,r,o,a={}.toString,s="function"==typeof define&&define.amd,c="object"==typeof JSON&&JSON,l="object"==typeof n&&n&&!n.nodeType&&n;l&&c?(l.stringify=c.stringify,l.parse=c.parse):l=e.JSON=c||{};var u=new Date(-0xc782b5b800cec);try{u=-109252==u.getUTCFullYear()&&0===u.getUTCMonth()&&1===u.getUTCDate()&&10==u.getUTCHours()&&37==u.getUTCMinutes()&&6==u.getUTCSeconds()&&708==u.getUTCMilliseconds()}catch(p){}if(!t("json")){var f="[object Function]",d="[object Date]",h="[object Number]",v="[object String]",g="[object Array]",m="[object Boolean]",y=t("bug-string-char-index");if(!u)var _=Math.floor,b=[0,31,59,90,120,151,181,212,243,273,304,334],w=function(e,t){return b[t]+365*(e-1970)+_((e-1969+(t=+(t>1)))/4)-_((e-1901+t)/100)+_((e-1601+t)/400)};(i={}.hasOwnProperty)||(i=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=a?i=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,i=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,i.call(this,e)});var k={"boolean":1,number:1,string:1,undefined:1},x=function(e,t){var n=typeof e[t];return"object"==n?!!e[t]:!k[n]};if(r=function(e,t){var n,o,s,c=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,o=new n;for(s in o)i.call(o,s)&&c++;return n=o=null,c?r=2==c?function(e,t){var n,r={},o=a.call(e)==f;for(n in e)o&&"prototype"==n||i.call(r,n)||!(r[n]=1)||!i.call(e,n)||t(n)}:function(e,t){var n,r,o=a.call(e)==f;for(n in e)o&&"prototype"==n||!i.call(e,n)||(r="constructor"===n)||t(n);(r||i.call(e,n="constructor"))&&t(n)}:(o=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],r=function(e,t){var n,r,s=a.call(e)==f,c=!s&&"function"!=typeof e.constructor&&x(e,"hasOwnProperty")?e.hasOwnProperty:i;for(n in e)s&&"prototype"==n||!c.call(e,n)||t(n);for(r=o.length;n=o[--r];c.call(e,n)&&t(n));}),r(e,t)},!t("json-stringify")){var j={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},C="000000",S=function(e,t){return(C+(t||0)).slice(-e)},E="\\u00",O=function(e){var t,n='"',i=0,r=e.length,o=r>10&&y;for(o&&(t=e.split(""));r>i;i++){var a=e.charCodeAt(i);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:n+=j[a];break;default:if(32>a){n+=E+S(2,a.toString(16));break}n+=o?t[i]:y?e.charAt(i):e[i]}}return n+'"'},A=function(e,t,n,s,c,l,u){var p,f,y,b,k,x,j,C,E,T,$,P,L,R,I,D;try{p=t[e]}catch(B){}if("object"==typeof p&&p)if(f=a.call(p),f!=d||i.call(p,"toJSON"))"function"==typeof p.toJSON&&(f!=h&&f!=v&&f!=g||i.call(p,"toJSON"))&&(p=p.toJSON(e));else if(p>-1/0&&1/0>p){if(w){for(k=_(p/864e5),y=_(k/365.2425)+1970-1;w(y+1,0)<=k;y++);for(b=_((k-w(y,0))/30.42);w(y,b+1)<=k;b++);k=1+k-w(y,b),x=(p%864e5+864e5)%864e5,j=_(x/36e5)%24,C=_(x/6e4)%60,E=_(x/1e3)%60,T=x%1e3}else y=p.getUTCFullYear(),b=p.getUTCMonth(),k=p.getUTCDate(),j=p.getUTCHours(),C=p.getUTCMinutes(),E=p.getUTCSeconds(),T=p.getUTCMilliseconds();p=(0>=y||y>=1e4?(0>y?"-":"+")+S(6,0>y?-y:y):S(4,y))+"-"+S(2,b+1)+"-"+S(2,k)+"T"+S(2,j)+":"+S(2,C)+":"+S(2,E)+"."+S(3,T)+"Z"}else p=null;if(n&&(p=n.call(t,e,p)),null===p)return"null";if(f=a.call(p),f==m)return""+p;if(f==h)return p>-1/0&&1/0>p?""+p:"null";if(f==v)return O(""+p);if("object"==typeof p){for(R=u.length;R--;)if(u[R]===p)throw TypeError();if(u.push(p),$=[],I=l,l+=c,f==g){for(L=0,R=p.length;R>L;L++)P=A(L,p,n,s,c,l,u),$.push(P===o?"null":P);D=$.length?c?"[\n"+l+$.join(",\n"+l)+"\n"+I+"]":"["+$.join(",")+"]":"[]"}else r(s||p,function(e){var t=A(e,p,n,s,c,l,u);t!==o&&$.push(O(e)+":"+(c?" ":"")+t)}),D=$.length?c?"{\n"+l+$.join(",\n"+l)+"\n"+I+"}":"{"+$.join(",")+"}":"{}";return u.pop(),D}};l.stringify=function(e,t,n){var i,r,o,s;if("function"==typeof t||"object"==typeof t&&t)if((s=a.call(t))==f)r=t;else if(s==g){o={};for(var c,l=0,u=t.length;u>l;c=t[l++],s=a.call(c),(s==v||s==h)&&(o[c]=1));}if(n)if((s=a.call(n))==h){if((n-=n%1)>0)for(i="",n>10&&(n=10);i.length<n;i+=" ");}else s==v&&(i=n.length<=10?n:n.slice(0,10));return A("",(c={},c[""]=e,c),r,o,i,"",[])}}if(!t("json-parse")){var T,$,P=String.fromCharCode,L={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},R=function(){throw T=$=null,SyntaxError()},I=function(){for(var e,t,n,i,r,o=$,a=o.length;a>T;)switch(r=o.charCodeAt(T)){case 9:case 10:case 13:case 32:T++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=y?o.charAt(T):o[T],T++,e;case 34:for(e="@",T++;a>T;)if(r=o.charCodeAt(T),32>r)R();else if(92==r)switch(r=o.charCodeAt(++T)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=L[r],T++;break;case 117:for(t=++T,n=T+4;n>T;T++)r=o.charCodeAt(T),r>=48&&57>=r||r>=97&&102>=r||r>=65&&70>=r||R();e+=P("0x"+o.slice(t,T));break;default:R()}else{if(34==r)break;for(r=o.charCodeAt(T),t=T;r>=32&&92!=r&&34!=r;)r=o.charCodeAt(++T);e+=o.slice(t,T)}if(34==o.charCodeAt(T))return T++,e;R();default:if(t=T,45==r&&(i=!0,r=o.charCodeAt(++T)),r>=48&&57>=r){for(48==r&&(r=o.charCodeAt(T+1),r>=48&&57>=r)&&R(),i=!1;a>T&&(r=o.charCodeAt(T),r>=48&&57>=r);T++);if(46==o.charCodeAt(T)){for(n=++T;a>n&&(r=o.charCodeAt(n),r>=48&&57>=r);n++);n==T&&R(),T=n}if(r=o.charCodeAt(T),101==r||69==r){for(r=o.charCodeAt(++T),(43==r||45==r)&&T++,n=T;a>n&&(r=o.charCodeAt(n),r>=48&&57>=r);n++);n==T&&R(),T=n}return+o.slice(t,T)}if(i&&R(),"true"==o.slice(T,T+4))return T+=4,!0;if("false"==o.slice(T,T+5))return T+=5,!1;if("null"==o.slice(T,T+4))return T+=4,null;R()}return"$"},D=function(e){var t,n;if("$"==e&&R(),"string"==typeof e){if("@"==(y?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=I(),"]"!=e;n||(n=!0))n&&(","==e?(e=I(),"]"==e&&R()):R()),","==e&&R(),t.push(D(e));return t}if("{"==e){for(t={};e=I(),"}"!=e;n||(n=!0))n&&(","==e?(e=I(),"}"==e&&R()):R()),(","==e||"string"!=typeof e||"@"!=(y?e.charAt(0):e[0])||":"!=I())&&R(),t[e.slice(1)]=D(I());return t}R()}return e},B=function(e,t,n){var i=N(e,t,n);i===o?delete e[t]:e[t]=i},N=function(e,t,n){var i,o=e[t];if("object"==typeof o&&o)if(a.call(o)==g)for(i=o.length;i--;)B(o,i,n);else r(o,function(e){B(o,e,n)});return n.call(e,t,o)};l.parse=function(e,t){var n,i;return T=0,$=""+e,n=D(I()),"$"!=I()&&R(),T=$=null,t&&a.call(t)==f?N((i={},i[""]=n,i),"",t):n}}}s&&define(function(){return l})}(this)},{}],298:[function(e,t,n){function i(e,t){var n=[];t=t||0;for(var i=t||0;i<e.length;i++)n[i-t]=e[i];return n}t.exports=i},{}],299:[function(e,n,i){var r=e("../util"),o=e("./");r.define(o,"push",function(){if(1===this.__t){void 0===this.length&&(this.length=0);for(var e=0,t=arguments.length;t>e;e++)this._push(arguments[e]);return this.length}},"_push",function(e,t,n,i,r){return this.length++,this.set(this.length-1,e,t,n,i,r),this[this.length-1]},"pop",function(){if(1===this.__t){var e=this.length;0!==e&&(t=this[e-1],this.length--,t.remove())}},"splice",function(e,t){if(e>-1&&1===this.__t)for(var n,i=0,r=this.length;r>i;i++)n?i===r-1?this[i]=null:(this[i]=this[i+1],this[i]._name=i):i===e&&(i===r-1?this.pop():(n=!0,this.length--,this[i].remove(),this[i]=this[i+1],this[i]._name=i))},"include",function(e,t,n){return r.include(this,e,t,n)},"concat",function(e){for(var t=this,n=(t.length,0),i=e.length;i>n;n++)t._push(e[n],!1,!1,!0);return t._update(e),t},"moveItem",function(e,t){var n=this;if(void 0===t&&(t=n.length-1),e!==t){var i=n[e];if(i){var r=t>e?1:-1;do n[e]=null,n.set(e,n[e+r],!0),e+=r;while(e!==t);n[t]=null,n.set(t,i,!0)}}})},{"../util":315,"./":303}],300:[function(e,t,n){function i(e,t){var n=this;n._parent=e,t&&(t instanceof Array||(t=[t]),this.push.apply(this,t))}var r=e("vigour-js/object").inject(e("vigour-js/value/length")),o=e("vigour-js/util"),a=e("vigour-js/util/id"),s=r["new"](void 0,function(e){var t=this;return t.$sources=new i(t,e),this.__t=2,!1});o.define(s,"_class",r),t.exports=s,s.prototype._blacklist.push("$sources"),o.define(s,"_absorb",function(e){for(var t=this,n=e.source,i=e.name,r=n;r&&4===r.__t&&!r._filter;)r=r._val;e.endpoint=r,r&&r.each(function(){t.set(i+"-"+this._name,this)}),t.each(function(){var e=this,n=e._val;if(t.$sources){var i,r=e._name.split("-")[0],o=t.$sources[r].endpoint;o.each(function(){return this===n?i=!0:void 0}),i||e.remove()}})},"_addCompoundListener",function(e){var t=this;e.source.on(function(){t._absorb(e)})}),i.prototype.push=function(){for(var e,t=this,n=t._parent,i=(arguments.length,0);e=arguments[i];i++){var r=a(),o=t[r]={name:r,source:e};n._absorb(o),n._addCompoundListener(o)}}},{"vigour-js/object":303,"vigour-js/util":315,"vigour-js/util/id":314,"vigour-js/value/length":328}],301:[function(e,t,n){var i=e("../util");n.extend=i.extend(function(e,t){var n=e.prototype,r=n.convert,o=n._set,a=n._remove,s=function(t){var n;for(var i in e.flags.dynamic)if(n=e.flags.dynamic[i](t))break;return n},c=function(t){for(var n in t)if(e.flags[n]||s(n))return!0};t||(t=n.set),n._blacklist.push("_flag"),i.define(e,"convert",function(e){var t=r.call(this,e);if(this._flag&&(!e||!i.isObj(e)||e.val||c(e)))for(var n in this._flag){var o=this._flag[n];o[4]&&o[4].stack||(t===o[1]&&(t={}),t.val===o[1]&&delete t.val,t[o[0]]=o[2])}return t},"__flags__",{},"_remove",function(t,n,i){if(this._flag){for(var r in this._flag){var o=this._flag[r];o&&(e.flags[o[0]]?e.flags[o[0]].remove&&e.flags[o[0]].remove.call(this,o):o[4].remove.call(this,o))}this._flag=null}a.call(this,t,n,i)},"_set",function(t,n,r,a,s){if(o.call(this,t,n,r,a,s),this._flag)for(var c in this._flag){var l=this._flag[c];if(l){var u=e.flags[l[0]]||l[4];this._val!==l[1]&&u.useVal?e.flags[l[0]]?(e.flags[l[0]].remove&&e.flags[l[0]].remove.call(this,l),delete this._flag[c],i.empty(this._flag)&&delete this._flag):l[5]||(l[4].remove.call(this,l),delete this._flag[c],i.empty(this._flag)&&delete this._flag):e.flags[l[0]]&&e.flags[l[0]].reset&&l[3]!==this&&e.flags[l[0]].set.call(this,l[2],n,!0,this._name)}}},"set",function(n,r,o,a,c){var l,u,p=e.flags[n]||s(n);if(p){if(r===!1){var f=p.stack||n,d=this._flag&&this._flag[f];if(d&&p.remove){var h=p.remove.call(this,d,n);h||(delete this._flag[f],i.empty(this._flag)&&delete this._flag)}l=!0}else{if(this._flag)for(var f in this._flag){var d=this._flag[f];if(d&&p.remove)if(p.stack||n!==d[0]){if(!p.stack||p.stack!==d[0]){var v=e.flags[d[0]]||d[4];v.useVal&&p.useVal&&(v.remove.call(this,d),delete this._flag[f],i.empty(this._flag)&&delete this._flag)}}else r!==d[2]?p.remove.call(this,d):u=!0}u||(p.set.call(this,r,a,!1,n),l=!0)}this[n]&&this[n].remove(!1,!1,!1,!1,!1,!0)}else l=t.call(this,n,r,o,a,c);return l}),e.flags=n.__flags__,i.define(e.flags,"dynamic",{})})},{"../util":315}],302:[function(e,t,n){var i=e("../util"),r=e("../util/hash");n.extend=i.extend(function(e){e.prototype._blacklist.push("__hp"),i.define(e,"_hashpath",{get:function(){return this.__hp||(this.__hp=r(this._path.toString()))}})})},{"../util":315,"../util/hash":313}],303:[function(e,t,n){var i=e("../util"),r=e("../"),o=e("../util/inject"),a=t.exports=n=r.Object=function(e,t,n){n&&(this._parent=n),t&&this._hook&&this._hook(e,t),void 0!==e&&(this.val=e)};a.inject=o;var s=function(e,t,n,o,s){if(null===e&&(t||(t=this.stamp()),this.remove(!1,!1,!1,n,t,o)),!(!this.__t||this.__t<3||e!==this._val||this._ignoreValue))return!1;if(!this.stamp)return void console.error("ERROR in vigour-js/object,  OBJECT no .stamp",this);t||(t=this.stamp());var c,l,u,p,f,d=this._val;if(this._changevobj&&(this.__t<4&&e instanceof a||4===this.__t&&(!this._mixed||4===this._mixed||e instanceof Array||e instanceof Object&&(e instanceof a||e.val)))&&(this._changevobj(e,t),4===this._mixed&&(this._val=null)),r.Base&&e instanceof r.Base)this.remove(!0,!0,!1,!1,t),this.__t=5,this._val=e;else if(e instanceof a)(this.__t<3&&!this._mixed||1===this.__t)&&this.remove(!0,!0,!1,void 0,t),this._val=e,this.__t=4,this._setvobj&&this._setvobj(e);else if(e instanceof Object&&"function"!=typeof e)if(e instanceof Array){this._val=void 0,this.__t=1,this.length=e.length,l=this.remove(!0,!0,e,!1,t);for(var h=0,v=this.length;v>h;h++)l=this.set(h,e[h],!1,t,o,!0)||l===!1?!1:!0}else{e.clear?(l=this.remove(!0,!0,!1,!1,t),delete e.clear):1===this.__t?1!==this._mixed&&4!==this._mixed?this.remove(!0,!0,!1,!1,t):p=!0:this._merge||this._mixed&&2!==this.__t||(l=this.remove(!0,!0,e,!1,t)),e.val&&i.isObj(e.val)?(f=!0,this._$setVal(new this._class(e.val,!1,this),t,n,!0),this._val._contained=!0):this._mixed||(this._val=void 0),p||(this.__t=2);for(var g in e)i.checkArray(this._blacklist,g)||("val"===g?(f||(u=this._$setVal(e.val,t,n,!0)),c=!0):l=this.set(g,e[g],!1,t,o,!0)||l===!1?!1:!0)}else if((this.__t<3&&!this._mixed||1===this.__t)&&(this.remove(!0,!0,!1,!1,t),1===this.__t&&delete this.length),e!==this._val||this._ignoreValue)this._val=e,this.__t=3;else if(l!==!1)return this.__t=3,!1;if(c)!this._set||u===!1&&l!==!1||this._set(e,t,n,!1,o,s,d);else if(this._set){if(l)return!1;this._set(e,t,n,!1,o,s,d)}},c=0,l=function(e,t){for(var n,r=t.length-1;r>=0;r--)e&&void 0!==e[t[r]]&&(n="_"+t[r],i.define(this,n,e[t[r]]))};n.stamp=function(){return c++},n.set=s,a["new"]=function(e,t){var n=function(e,n,i){i&&(this._parent=i);var r;t&&(r=t.apply(this,arguments)),n&&this._hook&&this._hook(e,n),this._onConstruct&&this._onConstruct(e,n),void 0!==e&&r!==!1&&(this.val=e)},r=n.prototype=new this;return n["new"]=a["new"],n.inject=o,i.define(n,"_blacklist",r._blacklist.concat()),l.call(n,e,["mixed","merge"]),i.define(n,"_class",n),n},i.define(a,"_$setVal",s,"_blacklist",["_","__","__t","_val","length","_name","_parent","_contained","_removed","extensions","__cachedPath","_ignoreValue","_indexCache"],"_class",a,"stamp",a.stamp,"_get",function(){var e,t=this,n=t.__t;return 3>n?t:(e=t._val,4!==n?e:e&&e._get())},"val",{set:function(e){return this._$setVal(e)},get:function(){return this._get()}},"set",function(e,t,n,i,r,o){if(o=o&&this,!n&&this[e]instanceof a){if(this._$setVal.call(this[e],t,i,o,r)===!1&&i)return!1}else n?(this[e]&&this[e].remove(),this[e]=t,this[e]._name=e,this[e]._parent=this,r||t._update(t,i||this.stamp(),o,void 0,!0)):(this[e]=new this._class(void 0,!1,this),this[e]._name=e,this._$setVal.call(this[e],t,i,o,r,!0)),1===this.__t&&this._setArrayItem&&this._setArrayItem(this[e],t);return!0},"remove",function(e,t,n,r,o,s){e||(this._removed=!0);var c,l,u;o||(o=this.stamp()),e||(this._parent&&(this._parent[this._name]=null,
delete this._parent[this._name]),void 0!==this._val&&(this._val instanceof a&&this._val._contained&&this._val.remove(!1,!1,!1,r||this,o,s),u=this._val,this._val=null));for(l in this)n&&n[l]||i.checkArray(this._blacklist,l)||(this[l]instanceof a&&(c=!1,this[l].remove(!1,!1,!1,r||this,o,s)),this[l]=null,delete this[l]);if(!e){if(this._remove&&(this._remove(r,s?!1:r,o,u),!t))for(var p in this)void 0!==this[p]&&("_parent"!==p&&this[p]instanceof a&&this[p]._contained&&this[p].remove(),this[p]=null,delete this[p]);this._removed=!0}return c}),n.listen=e("./listen"),e("./array"),e("./util")},{"../":238,"../util":315,"../util/inject":316,"./array":299,"./listen":304,"./util":305}],304:[function(e,t,n){function i(e,t,n,i){n?e.addListener([t,n],!0,!1,!1,i):e.addListener(t,!1,!1,!1,i)}var r=e("../util"),o=e("./"),a=e("../"),s=e("vigour-js/browser/animation/raf"),c=e("promise"),l=n._update=function(e,t,n,i,r,a,s){var c,l,u=this._listeners;if(u)for(c=u.length;l=u[--c];)if(l instanceof o)l._lfrom=n||this,l._update(e,t,!1,i,r,a),l&&(l._lfrom=null);else if(l[0]){if(!s||!s(l))if(l.length>2){for(var p=l.length-2,f=arguments.length,d=[],h=-1,v=p+f;v>h;d[++h]=p>h?l[h+2]:h===p?this:arguments[h-p-1]);l[0].apply(l[1],d)}else l[0].call(l[1],this,e,t,n,i,r,a)}else l.call(this,e,t,n,i,r,a)};o.prototype._blacklist.push("_listeners","_listens","_lfrom","_listenMap"),r.define(o,"_set",function(e,t,n,i,r,o,a){r||this._update(e,t,n,i,o,a)},"is",function(e,t,n){if(t&&"function"==typeof t){var i=n?function(){var e=(r.arg(arguments),this);s(function(){t.call(e)})}:t;if("loaded"===e)this.$loaded||this.from.$loaded?i.call(this):this.once("loaded",i);else{var o;if(this.val==e)return i.call(this);if(o="function"==typeof e&&e.call(this))return o instanceof c?o:i.call(this);"function"==typeof e?this.once(e,i):this.once({$val:e},i)}return this}var a=this;return n=t,new c(function(t,n){a.is(e,function(){t.apply(this,arguments)})})},"__update",l,"_update",function(e,t,n,i,r,o,a){for(var s=this,c=!0;s;)s.__update(e,t,n||c!==!0?this:!1,i,r,o,a),s=n?!1:s._parent,c=!1,i&&(i=1)},"_remove",function(e,t,n,i){t!==!1&&this._update(null,n,e,!0,!1,i),this.removeListener();var r,o=this._listens;if(o)for(r=o.length-1;r>=0;o[r--].removeListener(this,void 0,!1,!0));},"_setvobj",function(e){e.addListener(this)},"_changevobj",function(e){if(4===this.__t){var t,n=this._listens,i=this._val;if(n)for(t=n.length;t>=0;n[--t]&&n[t].removeListener(this,this));i instanceof o&&i._contained&&i.remove()}},"addListener",function(e,t,n,i,a){var s,c,l=this._listeners||(this._listeners=[]);if(a&&(this._listenMap||(this._listenMap=[])),t){if(c=r.checkArray(l,e[1],1),!(c===!1||!i&&r.checkArray(l,e[0],0)===!1||t!==!0&&t.call(this,l[c],l,c,e)===!0))return l[c];a&&e!==orginal&&this._listenMap.push([orginal,e]),l.push(e)}else e.__t&&r.checkArray(l,e)||(a&&e!==a&&this._listenMap.push([a,e]),l.push(e));(t||e instanceof o)&&(s=t?e[1]:e,s instanceof o&&(_li=s._listens||(s._listens=[]),(n||!r.checkArray(_li,this))&&(a&&e!==a&&this._listenMap.push([a,e]),_li.push(this))))},"once",function(e,t,n){var i,r=function(){this.removeListener(i,n),i.apply(this,arguments)};return t?(i=t,this.on(e,r,!1,i)):(i=e,this.on(r,!1,!1,i)),this},"on",function(e,t,n,o){return a.Base&&t instanceof a.Base&&(n=t,t=null),o||(o=t),t?r.isObj(e)?e.$val?i(this,function(n){this.val===e.$val&&t.apply(this,arguments)},n,o):console.warn("this will become a condition later on for now its not supported!, conditions will be used eveyrwhere"):"function"==typeof e?i(this,function(n){e.apply(this,arguments)&&t.apply(this,arguments)},n,o):r.isObj(t)?(n=e,console.warn("untested -- add as mark"),i(this,function(e,n,i,r,o,a){r&&t.apply(this,arguments)},n,o)):"remove"===e?i(this,function(e,n,i,r,o,a){r&&t.apply(this,arguments)},n,o):"loaded"===e?i(this,function(e,n,i,r,o,a){(this.$loaded||this.from.$loaded)&&t.apply(this,arguments)},n,o):"added"===e?i(this,function(e,n,i,r,o,a){o&&t.apply(this,arguments)},n,o):"self"===e?i(this,function(n,i,r,o,a,s){(this._val===n||!e&&this._updateOrigin===this)&&t.apply(this,arguments)},n,o):i(this,function(n){(n===e||this.val===e||this._val===e)&&t.apply(this,arguments)},n,o):i(this,e,n,o),this},"removeListener",function(e,t,n,i){var r,a=this._listeners;if(a){for(r=a.length-1;r>=0;r--){var s=a[r];if(!t&&!e||e&&s===e||t!==!1&&s instanceof Array&&(t&&s[1]===t&&(!e||s[0]===e)||e&&s[1]===e)&&(!n||(n===!0?s[0]===e:n.call(this,s,t)))){var c=t?t:s instanceof o?s:s instanceof Array?s[1]:!1,l=c&&c._listens;if(l)for(var u=l.length-1;u>=0;u--)if(l[u]===this){l.splice(u,1),0===l.length&&(c._listens=null),4===c.__t&&s._val===this&&(s._val=void 0);break}if(a.splice(r,1),0===a.length&&(this._listeners=null),e&&!i)break}}if(this._listenMap&&e){for(var p,r=0,f=this._listenMap.length;f>r;r++)if(this._listenMap[r][0]===e){this.removeListener(this._listenMap[r][1]),p=r;break}void 0!==p&&(this._listenMap.splice(p,1),0===this._listenMap.length&&(this._listenMap=!1))}}})},{"../":238,"../util":315,"./":303,promise:272,"vigour-js/browser/animation/raf":200}],305:[function(e,t,n){{var i=e("../util"),r=e("./");e("../")}_c=i.checkArray;var o=r.set,a=this.from=function(e){for(var t,n=e;n instanceof r;)n._filter,t=n,n=n._val;return t!==e?t:!1},s=function(e){for(;e&&4===e.__t;){if(e._lfrom)return e._lfrom;e=e._val}},c=function(e,t){for(var n,r=this,o=[];r&&(void 0!==r._name||t);){if(n=r._lfrom||s(r)){var a=c.call(n),l=r.from._name;i.add(a,o),o=a,l&&(l=a.indexOf(l),a.splice(l,a.length-l))}r!==e?(o.push(r._name),r=r._parent):r=!1}return e?o.reverse():o};i.define(r,"toString",function(e){return e?JSON.stringify(this.raw):JSON.stringify(this.raw,!1,2)},"referenceLevel",function(e){for(var t=this,n=0;t&&t.__t;){if(t===e)return n;t=t._val,n++}return!1},"destroy",function(e,t,n,i,r,o){r||(r=this.stamp()),this._removed=!0,this.destroyReferences(e,t,n,i,r,o),this.remove(e,t,n,i,r,o)},"destroyReferences",function(e,t,n,i,o,a){o||(o=this.stamp());var s,c=this._listeners;if(c)for(var l,u=c.length;l=c[--u];)l instanceof r&&(s=l._parent,s&&1===s.__t?s.splice(l._name,1):l.remove(e,t,n,i,o,a))},"each",function(e,t,n){var r,o;if(void 0!==n){n=i.arg(arguments,2);for(r in this)if(!_c(this._blacklist,r)){if(o=this[r],e.apply(o,n))return!0;if(t&&(4!==o.__t||o._contained)&&o.each.apply(o,n))return!0}}else for(r in this)if(!_c(this._blacklist,r)){if(o=this[r],e.call(o,r))return!0;if(t&&(4!==o.__t||o._contained)&&o.each(e,t,n))return!0}},"_path",{get:function(){for(var e=this,t=[];e&&void 0!==e._name;)t.push(e._name),e=e._parent;return t.reverse()}},"_cachedPath",{get:function(){return this.__cachedPath||(this.__cachedPath=this._path.join("."))}},"updatePath",{get:function(){var e=c.call(this,this,!0),t=this._name;return void 0!==t&&e.unshift(t),e}},"keys",{get:function(){var e,t=[];for(e in this)_c(this._blacklist,e)||t.push(e);return t}},"_ancestor",function(e){for(var t=this;t;){if(e===t)return!0;t=t._parent}},"checkParent",i.checkParentFactory("_parent"),"convert",function(e){var t={},n=0;if((!e||e.val)&&(t.val=this._val),1===this.__t){t=[];for(var i=0;i<this.length;i++)n++,t[i]=this[i].convert()}else this.each(function(i){e&&void 0===e[i]||(n++,t[i]=this.convert())});if(e)for(var i in e)void 0===t[i]&&(t[i]=void 0),n++;return n||e&&!e.val||(t=t.val),t},"raw",{get:function(){var e,t,n,i=this,r=i._filter?2:i.__t;if(4===r)return i._val&&i._val.raw;if(3===r)return i.val;if(1===r)for(e=[],t=-1,n=i.length-1;n>t;i[++t]&&e.push(i[t].raw));else{e={};for(t in i)!_c(i._blacklist,t)&&i[t]&&(e[t]=i[t].raw)}return e}},"from",{set:function(e){var t=a(this);o.call(t||this,e)},get:function(){return a(this)||this}},"merge",function(e,t,n,r,a,s,c){var l,u,p,f,d,h,v,g=this._mergeArray;if(c||(v=!0,c=[]),n||(n=this.stamp()),1===this.__t)if(g)g(e,n,r);else for(var m in e)d=e[m],h=this[m],(m=Number(m))>-1&&(l=!0,h?h.merge(d,!1,n,!0,a,s,c):(m>this.length-1&&(this.length=m+1),this.set(m,d,!1,n,!0,!0)));else{for(u in e)p=!0,d=e[u],h=this[u],"val"===u||_c(this._blacklist,u)||(!t&&h&&i.isObj(d)?d.clear?(o.call(h,d,n,!1,!0),l=!0):(f=h.merge(d,!1,n,!0,a,s,c),l!==!0&&(l=f),f||(e[u]=void 0)):h&&h._val===d?(l!==!0&&(l=!1),e[u]=void 0):(null===d&&this[u]?this[u].remove(!1,!1,!1,void 0,n):(this.set(u,d,!1,n,!0),this[u]&&this[u]._listeners&&c.push([this[u],d])),l||(l=f),f||(l=!0)));e.val?(f=o.call(this,e.val,n,!1,!0),l||(l=f),f||(e.val=void 0)):p||l||(l=!1),l=l!==!1||l}if(l&&(a||(r?v?this._update(e,n):(this.__update(e,n),c.push([this,e])):this._update(e,n))),v&&c)for(var y in c)c[y][0]&&c[y][0].__update&&c[y][0].__update(c[y][1],n);return l},"clone",function(e,t,n,o){var a,s=new this._class,c=this._val;if(o&&(s._parent=o),s.__t=this.__t,1===this.__t&&(s.length=this.length),n)for(var l,u=n.length-1;u>=0;u--)l=n[u],l instanceof Array&&this[l[0]]?s[l[0]]=l[1]===!0?i.clone(this[l[0]],!1,!0):l[1]:this[l]&&(s[l]=this[l]);c&&c instanceof r&&c._contained?(s.val=c.clone(s,!1,n,s),s._val._contained=!0):r.set.call(s,c,!1,!1,!0);for(a in this)_c(this._blacklist,a)||(t?s.set(a,this[a],!1,!1,!0):this[a]instanceof r?s.set(a,this[a].clone(void 0,!1,n,s),!0,!1,!0):s[a]=i.clone(this[a]));return void 0!==e&&(i.isObj(e)?s.merge(e,t):r.set.call(s,e,!1,!1,!0)),s.__t=this.__t,s},"path",function(e,t,n,r,o,a,s,c){return e instanceof Array||(e=e.split(".")),i.path(this,e,t,n,r,o,a,s,c)},"get",function(e,t){return i.get(this,e,t)},"empty",{get:function(){return i.empty(this,this._blacklist)}},"$empty",function(e,t){var n=this;this.each(function(t){(e&&"string"!=typeof e?i.checkArray(e,t):t===e)||(this.remove?this.remove(!1,!1,!1,!1,!1,!0):n[t]=null)}),this.clearCache&&this.clearCache(),t&&this._update("empty")},"_updateOrigin",{get:function(){for(var e=this;e._lfrom;)e=e._lfrom;return e}},"_origin",{get:function(){for(var e=this;e&&4===e.__t;)e=e._val;return e}})},{"../":238,"../util":315,"./":303}],306:[function(e,t,n){(function(i){var r,o=e("../"),a="/package.json";t.exports=n=function(e,i,r,a){r=r||(o.isNode?{}:window["package"]);var s={},c=t.exports,l=e&&function(n){s=n.vigour,c.parse(s,r,c._checks),a||(t.exports=s),e(s)};return i?n.options[i]?n.options[i](s,l,!1,r):n.options.val(s,l,i,r):n.options.val(s,l,!1,r),s},o.isNode?n.options={val:function(e,t,n,i){t(i)}}:(r=e("../../browser/network/ajax"),n.options={val:function(e,t,n){if(window["package"])t&&t(window["package"]);else{var o=!window.cordova&&String(window.location).match(/https?:\/\/([^\/]+)/);o&&(o=o[0]),r({url:n&&n.url?n.url:o+a,fallback:[{url:a},n&&n.fallback?n.fallback:{url:i+a},{url:"../"+a},{url:"../../"+a},{url:"../../../"+a}],complete:function(e){window["package"]=e,t&&t(e)}})}}}),n.inject=function(){return n._checks=o.arg(arguments),n},n.loop=function(e,t,n,i,r,a){if(r){var s=t(e,n,i,a);s&&o.merge(e,s)}else for(var c in e[t])if(n===c){o.merge(e,i[c]);break}},n.parse=function(e,t,i,r){i instanceof Array||(i=[i]);for(var a in i)for(var s in i[a]){var c=o.get(t,s),l=i[a][s];n.loop(e,l,c,e[i[a][s]],"function"==typeof l,r)}return e}}).call(this,"/node_modules/vigour-js/util/config")},{"../":315,"../../browser/network/ajax":223}],307:[function(e,t,n){var i=e("../../browser/ua"),r=e("../"),o=e("../../data").inject(e("../../data/selection"));bla=n,n.parse=function(e,t,n,a){var s=i;a&&a.ua&&(s=i.parse(a.ua.toLowerCase(),{}));var c,l=new o({bla:r.clone(s)});if(e.ua)for(var u in e.ua){if(s.platform===u||s.device===u||s.browser===u)return e.ua[u];if(e.ua[u].condition&&(c?c.filter=e.ua[u]:c=new o(l,e.ua[u]),c.length))return delete e.ua[u].condition,c.remove(),e.ua[u]}delete e.subsObj,c&&c.remove()}},{"../":315,"../../browser/ua":233,"../../data":236,"../../data/selection":237}],308:[function(e,t,n){(function(i){function r(e,t,n){function i(){r.parentNode.removeChild(r)}var r=document.createElement("div"),o=document.createElement("p"),a=document.createElement("input"),s=document.createElement("button"),c=document.createElement("button");o.appendChild(document.createTextNode(e)),a.type="text",a.value=t,a.style.display="block",s.appendChild(document.createTextNode("OK")),c.appendChild(document.createTextNode("Cancel")),s.addEventListener("click",function(){i(),n(a.value)}),c.addEventListener("click",function(){i(),n(null)}),r.appendChild(o),r.appendChild(a),r.appendChild(s),r.appendChild(c),r.style.position="absolute",r.style.top="25px",r.style.left="50px",r.style.zIndex=1e3,r.style.fontSize="24px",r.style.backgroundColor="white",document.body.appendChild(r)}var o=n;DEBUG$=o;{var a=e("../"),s=a.isNode,c=(e("../../"),o.log=e("./log"));c.logger("DEBUG$","rainbow")}if(o.perf=o.performance=e("./performance"),s){var l=i.env.DEBUG;if(l){var u=l.split(",");for(var p in u){var f=u[p].split(":");DEBUG$.level[f[0]]=f[1]?Number(f[1]):3}}}else o.cases=e("../../browser/cases/"),n.body=document.body.base,Object.defineProperty(t.exports,"domain",{get:function(){return String(window.location).match(/https?:\/\/([^\/]+)/)[1].replace(/:.+/,"")}});n["int"]=function(e,t){function n(){return e=e||1e3,~~Math.floor(Math.random()*e)}return t?n():n},n.text=function(e,t,i,r,o){if(t)return function(){return n.text(Math.round(Math.random()*e)+1,!1,i,r,o)};var a=[".",".",".",";",","],s=["ab","able","zo","x","lax","bur","rem","lur","fur","jur","lex","rex","wurd","shur","burn","heps","a","i","y","u","e","p","l","splurf"],c="",l=0;i&&(s=i),i=function(){return s[Math.round(Math.random()*(s.length-1))]},e||(e=~~(101*Math.random()));for(var u,p=0;e>p;p++)if(o||c[c.length-1]&&"."!==c[c.length-2]&&"\n"!==c[c.length-2]?c+=i():(u=i(),c+=u[0].toUpperCase()+u.slice(1)),l++,!o&&~~(Math.random()*(l/2))){var f,d=!1;!r&&~~(21*Math.random())>17&&(f=a[~~(Math.random()*(a.length-1))],c+=f,"."===f&&~~(11*Math.random())>6&&(d=!0,c+="\n",~~(11*Math.random())>7&&(c+="\n"))),d||(c+=" "),l=0}return c},n.data=function(e,t,i,r,o){i||(i={}),r||(r=0),t||(t=0);for(var a in e)if(e[a]instanceof Object&&e[a].length&&e[a].val){if(e&&e[a]){i[a]=[];for(var s=0;s<e[a].length;s++)i[a][s]="function"==typeof e[a].val?e[a].val():n.data(e[a].val,t+1,!1,s+1,i)}}else e[a]instanceof Object&&"function"!=typeof e[a]?i[a]=n.data(e[a],t+1,i[a],!1,r,i):e&&e[a]&&(i[a]="function"==typeof e[a]?e[a].call(i,r,o):e[a]);return i},o.download=function(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.click()},o.remote=function(e){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src","http://jsconsole.com/remote.js?"+e),document.getElementsByTagName("head")[0].appendChild(t)},o.findScript=function(e,t,n){var i=e.childNodes,r=t.match(/\.([a-zA-Z0-9]{1,30})$/)[1],o=!n&&new RegExp(t+"$"),a="js"===r?"src":"href";for(var s in i)if(n?i[s][a]===t:o.test(i[s][a]))return i[s]},o["native"]=function(e,t,n,i){if(!document.getElementById("dev")){var o=document.createElement("div");o.id="dev",o.style.zIndex=9999999,o.style.position="absolute",o.style.left="2px",o.style.top="80px",o.style.padding="15px",o.style.backgroundColor="rgba(50,50,50,0.8)",o.style.borderRadius="50%",o.addEventListener("click",function(){r("IP",localStorage.getItem("devip")||e||"http://10.0.1.2:8080",function(e){e?(localStorage.setItem("devip",e),window.location.reload()):(localStorage.removeItem("devip"),window.location.reload())})}),document.body.appendChild(o)}return i||(i="build"),localStorage.getItem("devip")&&(DEBUG$.remoteResource(localStorage.getItem("devip")+"/bundle.css",i+".css",!1),DEBUG$.remoteResource(localStorage.getItem("devip")+"/bundle.js",i+".js",!1))?(document.getElementById("dev").style.backgroundColor="rgba(0,255,0,0.8)",n&&n(localStorage.getItem("devip")),!0):void 0},o.remoteResource=function(e,t,n){console.log("remote resource",e);var i,r,n=void 0!==n?n:!0,a=e.match(/\.([a-zA-Z0-9]{1,30})$/)[1],s=document.createElement("js"===a?"script":"link"),c=document.getElementsByTagName("head")[0],l=document.body;if(t||(n=!1,t=e.match("js"===a?/(\/)([a-zA-Z0-9-_+$]){0,30}\.js$/:/(\/)([a-zA-Z0-9-_+$]){0,30}\.css$/)[0].slice(1)),r=e+"?"+~~(9999999*Math.random()),"js"===a?(s.setAttribute("type","text/javascript"),s.setAttribute("src",r)):(s.setAttribute("type","text/css"),s.setAttribute("rel","stylesheet"),s.setAttribute("href",r),s.setAttribute("id",r)),i=o.findScript(c,t,n),i||(console.log(l,i,"!@!@#!@#JS"),i=o.findScript(l,t,n)),i){console.log("remote resource found:",i,i.src,r,e);var u=i.parentNode;if(String(i.src).indexOf(e)>-1)return;return u.removeChild(i),u.appendChild(s),!0}}}).call(this,e("_process"))},{"../":315,"../../":238,"../../browser/cases/":202,"./log":309,"./performance":310,_process:338}],309:[function(e,t,n){function i(e){e||(e=1);for(var t,n=(new Error).stack.split("\n"),i=3,r=[];e--;)line=n[i++],t=")"===line[line.length-1]?line.length-1:line.length,r.push(line.slice(line.indexOf("/"),t));return r.join("\n").grey}function r(e,t){void 0===s.level[e]&&(s.level[e]=t)}var o,a,s=e("./"),c=e("../"),l=c.isNode,a=(e("../../"),console,{green:"#56db68",red:"#ff0000",grey:"#ccc",yellow:"#e0e67c",cyan:"#00ffff",magenta:"#ff00ff",blue:"#1111ff",white:"#fff"});s.level={DEBUG$:1/0,test:2};var u,p,f,d,h,v;if(l){o=e("repl"),a=e("colors"),f="log  ".grey,d="info ".green,h="error".red,v="-----".grey,s.repl=function(){return o.start(">"),s},o.context&&(o.context.DEBUG$=DEBUG$),console.group=function(){console.log("\n____________________________________________________".grey)},console.groupEnd=function(){console.log("____________________________________________________\n".grey)};var g=e("util");p=function(e){return g.inspect(e,{colors:!0,depth:50})},u=function(e){console.log(p(e))}}else{f=":",d="::",h="ERREX!",v=":::";var m=function(e,t,n){this.color=(n?t:"color: "+t)+";",this.val=new String("%c"+e)};p=function(e){if("string"==typeof e)return e;var t="";for(var n in e)t+=n+" : "+("string"==typeof e[n]?e[n]:JSON.stringify(e[n],!1,2))+"\n";return t.inverse.green},u=function(e){console.log(p(e))}}c.define(Object,"DEBUG$log",function(e,t){console.group&&console.group(),e="string"==typeof e?e:!1;var n="JSON "+(e||" normal");return s.log.header(n),s.level.test>1&&console.log(JSON.stringify(this,!1,2)),t&&(console.log("\n"),s.log.fn.apply(this,c.arg(arguments,1))),console.group&&console.groupEnd(),JSON.stringify(this,!1,2)}),!l&&localStorage&&c.define(localStorage,"DEBUG$log",function(e,t){console.group&&console.group(),e="string"==typeof e?e:!1;var n="localStorage "+(e||" normal");s.log.header(n);var i={};for(var r in this)try{i[r]=JSON.parse(this[r])}catch(o){i[r]=this[r]}return s.level.test>1&&console.log(JSON.stringify(i,!1,2)),t&&(console.log("\n"),s.log.fn.apply(this,c.arg(arguments,1))),console.group&&console.groupEnd(),i});var y=t.exports=n={stack:!1,i:function(e){e=this.indent;var t="";for(var n in e)t+="  ";return t},parse:p,object:u,"default":function(e,t){if(e instanceof Object)for(var n in e)r(n,e[n]);else r(e,t)},logger:function(e,t,n){function r(){var t=void 0!==s.level.global?s.level.global:s.level[e];t>2&&y.stack&&console.log(i(y.stack).grey)}return y["default"](e,n||1),r.info=function(){var n=void 0!==s.level.global?s.level.global:s.level[e];n>1&&(console.log.apply(null,[e[t].bold,d].concat(c.arg(arguments))),y.stack&&console.log(i(y.stack).grey))},r.error=function(){var n=void 0!==s.level.global?s.level.global:s.level[e];n>0&&(console.log.apply(null,[e[t].bold,h].concat(c.arg(arguments))),y.stack&&console.log(i(y.stack).grey))},r.detail=function(){var n=void 0!==s.level.global?s.level.global:s.level[e];n>3&&(console.log.apply(null,[e[t].bold,v].concat(c.arg(arguments))),y.stack&&console.log(i(y.stack).grey))},r.parse=p,r},label:function(e,t,n){l?console.log.apply(null,n):console.log.apply(null,["%c "+e+" ",t].concat(n))},header:function(e){this._lh=e,console.log(e.inverse)},header2:function(e){this._lh=e,console.log(e.grey.inverse)},end:function(e){console.log(("end ["+e+"]").grey.inverse)},level:function(e,t){(e>=s.level.test||s.level[e]||t&&s.level[e]>=t)&&console.log.apply(this,c.arg(arguments,1))},fn:function(e){s.log.indent++,"function"==typeof e?e.call(this,c.arg(arguments,1)):console.log(arguments),s.log.indent--},indent:0};setTimeout(function(){},0),c.define(s,"localStorageSize",{get:function(){var e=0;for(var t in localStorage){var n=(t.length+localStorage[t].length)/1024;e+=n}return console.log("LOCAL STORAGE SIZE TOTAL".inverse.green,(e/1024).toFixed(5)+" MB"),1024*e}}),c.define(s,"localStorageKeysSize",{get:function(){var e=0;for(var t in localStorage){var n=t.length/1024;e+=n}return console.log("LOCAL STORAGE KEY SIZE TOTAL".inverse.green,(e/1024).toFixed(5)+" MB"),1024*e}})},{"../":315,"../../":238,"./":308,colors:239,repl:335,util:340}],310:[function(e,t,n){(function(i){function r(e,t,i,r,o,a){var s,l,u,p,f,d=n.now(),h=n.memory();return t||(t="TEST PERFORMANCE"),f=r?e.apply(r,o):e.apply(this,o),p=n.now(),s=n.memory(),l=s-h,u=p-d-(f||0),i?i(u/1e3,s-h):a||c.level.test>0&&console.log(t.inverse,"\nparse time: "+(p-d)/1e3+" sec"+(l?"\nmemory used (approximate): "+l+" bytes":"")),u}function o(e,t,i){e.complete?e.complete(t,i,e,n.average(t)[0],n.average(t)[1]):c.level.test>0&&console.log(e.name.inverse," n="+e.loop+"\nparse time:"+(e.extensive?" \n\n"+t.join(" sec\n")+" sec\n\n":"")+"average: "+n.average(t)[1]+" sec\ntotal: "+n.average(t)[0]+" sec")}var a,s=e("../"),c=e("./"),l=s.isNode;l?a=e("os"):console.log('DEBUG \n\nif you want to check memory usage start chrome using: \n\n open -a Google\\ Chrome --args --enable-memory-info --js-flags="--expose-gc"\n'.grey);var u=[];c.countNewListeners=function(e,t){t={val:0};var n=[];c.countListeners(e,t,n);var i=[];for(var r in n)s.checkArray(u,n[r])===!1&&i.push(n[r]);return u=n,{amount:t.val,newchecks:i}},c.countListeners=function(e,t,n){var t,n;if(n||(n=[]),s.checkArray(n,e)!==!1||!e)return t.val;if(n.push(e),t||(t={val:0}),e._listeners&&(t.val+=e._listeners.length),e.each)e.each(function(e){c.countListeners(this,t,n)});else if(e instanceof Object)for(var i in e)e[i]&&(e[i].__t||e[i]._from||e._from&&"cloud"===i)&&c.countListeners(e[i],t,n);return t.val},c.countSubs=function(e,t,n){var t;return t||(t={val:0}),e._subs&&(console.log("!!!!!SUB",e._path,e._subs),t.val+=e._subs.length),e.each||console.log("no EACH!",n),e.each(function(e){c.countSubs(this,t,e)}),t.val},t.exports=n=function(e,t){if(t&&"string"==typeof e)return r(t,e);if("function"==typeof e)return r(e);if(e instanceof Object){if(e.name||(e.name="performance test"),e.loop){var i=[],a=[],s=function(e,t){i.push(e),t&&a.push(t)};if(e.interval)var c=0,l=setInterval(function(){c++,c===e.loop-1?(clearInterval(l),o(e,i,a)):r(e.method,!1,s)},e.interval);else{for(var u=e.loop;u>0;u--)r(e.method,!1,s);o(e,i,a)}return n.average(i)}return r(e.method,e.name,e.complete,e.call,e.args,e.nolog)}},c.log&&c.log["default"]("test",4),n.now=function(){return l?1e3*i.hrtime()[0]+1e-6*i.hrtime()[1]:window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},n.memory=function(){return l?i.memoryUsage().heapUsed:window&&window.performance&&window.performance.memory?976562e-9*window.performance.memory.usedJSHeapSize:0},n.average=function(e){for(var t=0,n=e.length-1;n>=0;n--)t+=e[n];return[t,t/e.length]}}).call(this,e("_process"))},{"../":315,"./":308,_process:338,os:337}],311:[function(e,t,n){var i={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,r,o,a,s,c,l="",u=0;for(e=i._utf8_encode(e);u<e.length;)t=e.charCodeAt(u++),n=e.charCodeAt(u++),r=e.charCodeAt(u++),o=t>>2,a=(3&t)<<4|n>>4,s=(15&n)<<2|r>>6,c=63&r,isNaN(n)?s=c=64:isNaN(r)&&(c=64),l=l+this._keyStr.charAt(o)+this._keyStr.charAt(a)+this._keyStr.charAt(s)+this._keyStr.charAt(c);return l},decode:function(e){var t,n,r,o,a,s,c,l="",u=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<e.length;)o=this._keyStr.indexOf(e.charAt(u++)),a=this._keyStr.indexOf(e.charAt(u++)),s=this._keyStr.indexOf(e.charAt(u++)),c=this._keyStr.indexOf(e.charAt(u++)),t=o<<2|a>>4,n=(15&a)<<4|s>>2,r=(3&s)<<6|c,l+=String.fromCharCode(t),64!=s&&(l+=String.fromCharCode(n)),64!=c&&(l+=String.fromCharCode(r));return l=i._utf8_decode(l)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);128>i?t+=String.fromCharCode(i):i>127&&2048>i?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t},_utf8_decode:function(e){for(var t="",n=0,i=c1=c2=0;n<e.length;)i=e.charCodeAt(n),128>i?(t+=String.fromCharCode(i),n++):i>191&&224>i?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((31&i)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&i)<<12|(63&c2)<<6|63&c3),n+=3);return t}};t.exports=n=i},{}],312:[function(e,t,n){(function(e,n){function i(e,t,n,i,r){return e?void 0===n?i?e[i](t):e[t]:r?(e[r](t,n),n):e[t]=n:void 0}{var r="undefined"!=typeof window?window:"undefined"!=typeof n?n:!1,o="undefined"!=typeof localStorage,a="undefined"!=typeof e;t.exports={session:function(e,t){return i(r,e,t)},env:function(t,n){return o?i(localStorage,t,n,"getItem","setItem"):a?i(e.env,t,n):void 0}}}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:338}],313:[function(e,t,n){n=t.exports=function(e,t){var n,i,r,o,a,s,c,l;for(t=1,n=3&e.length,i=e.length-n,r=t,a=3432918353,s=461845907,l=0;i>l;)c=255&e.charCodeAt(l)|(255&e.charCodeAt(++l))<<8|(255&e.charCodeAt(++l))<<16|(255&e.charCodeAt(++l))<<24,++l,c=(65535&c)*a+(((c>>>16)*a&65535)<<16)&4294967295,c=c<<15|c>>>17,c=(65535&c)*s+(((c>>>16)*s&65535)<<16)&4294967295,r^=c,r=r<<13|r>>>19,o=5*(65535&r)+((5*(r>>>16)&65535)<<16)&4294967295,r=(65535&o)+27492+(((o>>>16)+58964&65535)<<16);switch(c=0,n){case 3:c^=(255&e.charCodeAt(l+2))<<16;case 2:c^=(255&e.charCodeAt(l+1))<<8;case 1:c^=255&e.charCodeAt(l),c=(65535&c)*a+(((c>>>16)*a&65535)<<16)&4294967295,c=c<<15|c>>>17,c=(65535&c)*s+(((c>>>16)*s&65535)<<16)&4294967295,r^=c}return r^=e.length,r^=r>>>16,r=2246822507*(65535&r)+((2246822507*(r>>>16)&65535)<<16)&4294967295,r^=r>>>13,r=3266489909*(65535&r)+((3266489909*(r>>>16)&65535)<<16)&4294967295,r^=r>>>16,(r>>>0).toString(36)},n.encode=function i(e,t){return t=t||"",~~e?i(e/62,String.fromCharCode(((e%=62)>9?e>35?29:87:48)+e)+t):t},n.decode=function(e,t,n,i){for(t=n=0;i=e.charCodeAt(n++);t=62*t+i-[,48,29,87][i>>5]);return t}},{}],314:[function(e,t,n){function i(){return Number(String(Math.random()).slice(2)).toString(36)}t.exports=function(e,t){var n=i();if(t)for(;t--;)n+=i();return e?e+n:n}},{}],315:[function(e,t,n){e("./object"),e("./prop"),n.isNode="undefined"==typeof window?!0:!1,n.add=function(e,t){return t&&e.push.apply(e,t),e},n.checkArray=function(e,t,i,r){var o=i instanceof Array;if(!e)return!1;for(var a,s=0,c=e.length;c>s;s++)if(a=e[s],void 0!==i){if(i===!0){if(a===t)return s}else if(o?n.path(a,i)===t:a[i]===t)return r?a:s}else if(a===t)return!0;return!1},n.arg=function(e,t){return Array.prototype.slice.call(e,t?t:0)},n.empty=function(e,t){for(var n in e)if(!t||!this.checkArray(t,n))return!1;return!0},n.inject=e("./inject")},{"./inject":316,"./object":317,"./prop":319}],316:[function(e,t,n){function i(e,t){if(a&&console.log("9",t,e),t.extend)a&&console.log("9.1",e),t.extend(e);else if(t instanceof Array){var n=t.concat(),i=n[0];n[0]=e,a&&console.log("9.2"),i.extend.apply(i,n)}}function r(){a&&console.log("5");for(var e,t,n=[],r=[this],s=0,c=arguments,l=c.length;l>s;s++)if(t=c[s],"function"==typeof t){e||(e=function(){for(var e=0,t=r.length;t>e;e++)r[e].apply(this,arguments)},o(e,this)),r.push(t);for(var u in t.prototype)if({}.hasOwnProperty.call(t.prototype,u)){if("constructor"===u)continue;e.prototype[u]=t.prototype[u]}}else a&&console.log("6"),e?(a&&console.log("7"),i(e,t)):n.push(t);e||(e=this);for(var p in n)i(e,n[p]);return e}function o(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}var a,s=e("../"),c=e("./");c.isNode||(a=window.$TEST),t.exports=n=function(e){var t=arguments;if(t[0]&&t[0].$TEST&&(a=window.$TEST=!0),"function"==typeof this||s.Base&&this instanceof s.Base||"object"==typeof this){if(!s.Base||!(this===s.Base||this.prototype instanceof s.Base||this instanceof s.Base))return r.apply(this,t);t=c.arg(t),t.unshift(this),e=this}for(var n=1;n<t.length;n++)i(e,t[n]);return e}},{"../":238,"./":315}],317:[function(e,t,n){function i(e){for(;e&&4===e.__t&&!e._filter;)e=e._val;return e}var r=t.exports=n=e("./"),o=e("../"),a=".";n.lookup=Object.__lookupSetter__||function(e){for(var t,n=this;n;){if(t=Object.getOwnPropertyDescriptor(n,e),t&&t.set)return!0;n=Object.getPrototypeOf(n)}return!1},n.set=function(e,t,n,i,r,a){return o.Object&&e instanceof o.Object?e.set(t,n,i,r,a):e[t]=n},n.path=function(e,t,i,r,o,a,s,c,l,u,p){p||(p=0);var f,d,h=t[p],v=!l&&e&&4===e.__t?e.from[h]:e&&e[h],g=p<t.length-1;return!g||v instanceof Object||(v=void 0),void 0!==i&&(void 0===v||!g&&r)&&(d=!0,n.set(e,h,g?{}:i,g?!1:a,s,c),v=e[h]),g?f=v?this.path(v,t,i,r,o,a,s,c,l,u,++p):v:(f=!l&&v&&4===v.__t?v.from:v,d&&o&&o(f)),f},n.dotField=function(e,t){if(~t.indexOf(a)){var n=t.split(a),i=n.shift(),r={};this.path(r,n,e[t]),delete e[t],e[i]=r,t=i}return t},n.compareArrays=function(e,t,n){var i=n?Object.keys(t).length:t.length;if(e.length!==i)return!1;for(var r=e.length-1;r>=0;r--)if(e[r]!=t[r])return!1;return!0},n.get=function(e,t,n){if(e&&t){if(n||4!==e.__t||e._filter||(e=e.from),!(t instanceof Array)){if(!~t.indexOf(a))return!n&&e[t]&&e[t].from||e[t];t=t.split(a)}return this.path(e,t,void 0,!1,!1,!1,!1,!1,n)}},n.isObj=function(e){return!(!(e instanceof Object&&"function"!=typeof e)||o.Object&&e instanceof o.Object||o.Base&&e instanceof o.Base)},n.clone=function(e,t,n){if(this.isObj(e)){var i=new e.constructor;for(var r in e)t&&t[r]||(i[r]=n?e[r]:this.clone(e[r],t));return i}return e},n.merge=function(e,t,n,i){for(var o in t){var a=r.isObj(e[o]),s=r.isObj(t[o]);a&&s?r.merge(e[o],t[o],n,i):n&&s?(e[o]=t[o]instanceof Array?[]:{},r.merge(e[o],t[o],n,i)):(void 0===i||!(o in e)||"function"==typeof i&&i(e[o],t[o]))&&(e[o]=t[o])}return e},n.resolve=function(e,t,i,r){var o=!0;if(t instanceof Object){for(var a in t)void 0!==e[a]&&n.resolve(e[a],t[a],void 0!==i&&null!==i?i[a]:t[a],a)?void 0!==i&&null!==i&&(null===i[a]?o=!1:delete i[a]):o=!1;if(o){if(!i||void 0===r)return!0;delete i[r]}return o}return e==t?(i&&void 0!==r&&delete i[r],!0):void 0},n.include=function(e,t,i,r){if(r&&t instanceof Array){for(var o=!1,a=0,s=t.length;s>a;a++)o=n.include(e,t[a],i);return o}var c,l,a=0,u=e.length;if(1===e.__t){for(;u>a;a++)if(c=l=e[a],4===l.__t&&(l=l.from),l===t||l.val===t)return i&&i(c),!1;return e.push(t),!0}if(e instanceof Array){for(;u>a;a++)if(e[a]===t)return!1;return e.push(t),!0}},n.changeType=function(e){var t;if(e instanceof Array){t={};for(var n=0,i=e.length;i>n;n++)t[n]=e[n]}else{t=[];for(var n in e)t.push(e[n])}return t},n.raw=function(e,t){if(e instanceof Object){if(e instanceof o.Object)return e.raw;var n;if(e instanceof Array){n=[];for(var i=0,r=e.length;r>i;i++)n[i]=this.raw(e[i],t)}else{n={};for(var a in e)n[a]=this.raw(e[a],t)}return n}return e},n.walk=function(e,t){for(var i in e)if(e[i]instanceof Object){if(t(i,e[i],e,!0))return!0;if(n.walk(e[i],t))return!0}else if(t(i,e[i],e))return!0},n.checkParentFactory=function(e){return function(t,i,r,a){i&&i!==!0&&(a=i,i=!1);for(var s,c=t instanceof o.Object?!1:t,l=this;l;){if(s=c===!1?l===t:n.get(l,c,!r)){if(!a)return!i&&c?l:s;if(a===s||s instanceof o.Object&&s.val===a)return!i&&c?l:s}l=l[e]}}},n.disjoin=function(e,t,n){var r="function"==typeof n;e=i(e),t=i(t),e.each(function(){var e,i=this,o=i.from;t.each(function(){var t=this,i=t.from;return e=r?n(o,i):n===!0?o===i:o[n]&&i[n]&&o[n].val===i[n].val}),e&&i.remove()})}},{"../":238,"./":315}],318:[function(e,t,n){e("../object");t.exports={}},{"../object":303}],319:[function(e,t,n){function i(e,t,n,i,a){if(window.$TEST&&console.log(12,e),e.extensions||(n?e.extensions=[]:o.Object&&e instanceof o.Object?r.define(e,"extensions",[]):r.define(e,"extensions",{val:[],setClass:!0})),r.checkArray(e.extensions,this)===!1){
a||(e.extensions=[this].concat(e.extensions));var s=r.arg(i);n&&!a&&(s[0]=n),window.$TEST&&console.error("??xxx?",s,t,this);var c=t.apply(this,s);if(window.$TEST,c)return c}else window.$TEST&&console.error("???")}var r=t.exports=n=e("./"),o=e("../");n.setstore=function(){this.__||(this.__={})},n.getStore=function(e){return this.__?void 0!==this.__[e]?this.__[e]:this._[e]:this._&&this._[e]},n.extend=function(){var e=r.arg(arguments);return function(t){window.$TEST&&console.log("10 --->",t);var n,a;"function"==typeof t?o.Base&&t.prototype instanceof o.Base?(n=t.base,a=!0):a=t.prototype:o.Base&&t instanceof o.Base&&(a=t);for(var s,c,l,u=r.arg(arguments),p=0,f=e.length;f>p;p++)e[p]instanceof Array?(c=e[p][0],l=r.arg(e[p],1),l.unshift(t)):(l=u,c=e[p]),window.$TEST&&console.log("11",c.extend?c:this,n||a),s=i.call(c.extend?c:this,n||a||t,c.extend||c,n,l,c.extend?!0:!1)||t;return s}},n.define=function(e,t,i,o,a,s){if("string"==typeof o)for(var c=r.arg(arguments),l=1,u=c.length;u>l;l+=2)n.define(e,c[l],c[l+1]);else if(t instanceof Array)for(var l=0,u=t.length;u>l;l++)n.define(e,t[l],i);else{if("function"==typeof i||i instanceof Array)i={enumerable:!1,value:i,configurable:!0};else if(i&&i instanceof Object&&!i.setClass)i.enumerable||(r.empty(i)&&(i.value={}),i.configurable=!0,i.enumerable=!1);else{i&&i.setClass&&(i=i.val);var p=e.prototype||e;s?(p.__||(p.__={}),p.__[t]=i):(p._||(p._={}),p._[t]=i);var f=function(e){n.setstore.call(this),(e||0===e||e===!1)&&(this.__[t]=e)},d=function(e){e=o.call(this,e),f.call(this,e)},h=function(){return n.getStore.call(this,t)},v=function(){var e=h.call(this);return a.call(this,e)};i={enumerable:!1,configurable:!0,get:a?v:h,set:o?d:f}}Object.defineProperty(e.prototype||e,t,i)}}},{"../":238,"./":315}],320:[function(e,t,n){function i(e,t,n,i){e&&(e._bind===i&&4===e.__t?e.val=t:e._bind||(4===e.__t&&e._val===n?(e.val=t,console.log("----------",e.__t)):t.addListener(e)))}var r=(e("../base"),e("./")),o=e("../object").set,a=e("../util");n.clonelist=[["_base",!1],"_caller","_prop","_name","_skip"],n.type={type:r,create:function(e,t,n,i){var a=new r;return a._base=this,a._caller=a._base,a._prop=n,o.call(a,e,!1,!1,!0),this._class&&(this._class.prototype._[n.name]=a),n.set&&(n._vset||(n._vset=function(e,t,i,r){n.set.call(this._caller||this._base||this,this,e,t,i,r)}),i||a._update(e)),a},set:function(e,t,o){if(t){if(t._caller=this,t._bind=!1,this!==t._base){var s,c=t._listeners,l=(t._base,this);if(a.setstore.call(this),n.clonelist[0][1]=this,void 0===e||e.clear){var u=new r;u._base=this,u._prop=o,u._caller=this,e&&delete e.clear,u.val=e,e=u}else e=t.clone(e,!1,n.clonelist);if(this.__[o.name]=e,this._class&&(this._class.prototype._[o.name]=e),t.each(function(n){if(this._listeners){for(s=this._listeners.length-1;s>=0;s--)i(this._listeners[s],e[n],t,l);e[n].val!==this.val}}),c)for(s=c.length-1;s>=0;s--)i(c[s],e,t,l);e=null,this[o.name]._update(e)}return e}},get:function(e,t){return e&&(e._caller=this),t.get?t.get.call(this,e):e}}},{"../base":195,"../object":303,"../util":315,"./":327}],321:[function(e,t,n){var i=t.exports=e("./"),r=e("../../util"),o=e("../../object"),a=function(e){return e.__&&e.__.model||(e.model={},e._.model||e._dListen()),e.model};i.data={useVal:!0,set:function(e,t,n){var i=this.checkParent("_prop.name"),o=i._prop.name,s=i._base,c=a(s);c.flags&&c.flags[o]?(c.flags[o]instanceof Array||(c.flags[o]=[c.flags[o]]),r.checkArray(c.flags[o],this)||c.flags[o].push(this)):(s.model.flags||(s.model.flags={}),s.model.flags[o]=this);var l=function(){var e=this._d;if(void 0===e)for(var t=this;void 0===e&&t;)t._d?e=this._dSet(t._d,!0):(t=t.node.parentNode,t&&(t=t.base));return e};if(e instanceof Object){var u=e.val||e;this._val=function(){var e=l.call(this);return e&&u.call(this,e)},e=e.listen||!0}else this._val=function(){var t,n=l.call(this);return n=e===!0?n:r.get(n,e),void 0!==n?(t=n.__t&&!n._filter&&n.val,t||0===t||""===t||(t=n)):t="",t};this._flag||(this._flag={}),this._flag.data=["data",this._val,e,o]},remove:function(){var e=this.checkParent("_prop.name"),t=a(e._base),n=this;if(t&&t.flags)for(var i in t.flags)if(i===e._prop.name){var s=t.flags[i];s instanceof o||1===s.length?(t.flags[i]=null,delete t.flags[i]):t.flags[i].splice(r.checkArray(s,n),1)}this._update(),setTimeout(function(){n._update()},0)}}},{"../../object":303,"../../util":315,"./":322}],322:[function(e,t,n){var i=e("../"),r=e("../base"),o=e("../../object/flags");r.clonelist.push(["_flag",!0]),o.extend(i),t.exports=i.flags},{"../":327,"../../object/flags":301,"../base":320}],323:[function(e,t,n){function i(e,t){e&&e.node&&(("x"===t||"y"===t)&&e.cleanCoordinates(t),e[t]&&e[t]._prop._vset.call(e[t]))}function r(e,t,n,r,o,a,s,c,l,u,p,f,d,h,v){if(v&&this.parent instanceof r||!v&&this.parent===r||h){var g,m=this._from.base.node&&this._from.base,y=t._prop.name;t._caller=this,e.call(t,c,l,u,s),m&&m[y]&&m[y+"__p"]!==c&&(t._caller=m,t._caller[y+"__p"]=c,e.call(t,c,l,u,s),t._caller=this,g=!0);for(var _ in t._listeners)t._listeners[_].pop&&"parent"===t._listeners[_][2]&&(t._listeners[_][1]._lstamp===c&&(t._listeners[_][1]._lstamp=null),t._listeners[_][0].call(t._listeners[_][1],n,this,m,a,s,c,l,u,p,f,!0));g&&i(m,y)}}function o(e,t,n,i,a,s,c,l,u,p,d,h){var v=this;this._parentStore[0]=t,this._update(a,c?this.stamp():s,c,l,u,p,!1,!1,function(){var g,m=this.checkParent("_prop._vset",!0),y=this.checkParent("_base",!0);t===y.parent&&c&&(g=!0),r.call(y,m,v,e,t,n,i,a,s,!1,l,u,p,!0,d),y.eachInstance(function(){r.call(this,m,v,e,t,n,i,a,s,!1,l,u,p,!1,g)},v._prop.name),f.prototype._update.call(this,a,s,!1,l,u,p,function(e){return"parent"===e[2]}),!h&&i._caller&&t!==i._caller&&o.call(this,e,i._caller,n,i,a,s,!1,l,u,p,d,!0)})}function a(e,t,n,r,a){var s,c,l=n._parentStore[0],u=r[2],p=e[u],d=this._from.base;p&&(p.addListener([o,n,"parent",e,this],function(t,i,r){t[3]!==e&&l!==e&&t[4]!==d&&(n._parentStore[0]=e,t[4]=d,s=!0)},!1,!0),(s||!l||l!==e&&l[u]!==p)&&(n._parentStore[0]=e,t||(n._caller=c=d.node&&d||n._base,n._prop._vset.call(n,n),n._caller=this,o.call(n,"parent",e,d,p,!1,f.stamp(),!1,!1,!1,!1,!0,!0),i(c,n._prop.name))))}function s(e,t,n){var i=this.parent;i&&a.call(this,i,!0,e,t,n)}function c(e){var t=this.parent||e.checkParent("_parentStore.0",!0);return t&&!e._flag.parent?void console.error("NO PARENT FLAG!"):t?t[e._flag.parent[2]].val:void 0}var l=t.exports=e("./"),u=e("../"),p=e("../../util"),f=e("../../object");u.prototype._blacklist.push("_parentStore"),l.parent={reset:!0,useVal:!0,set:function(e,t,n){var i=this.checkParent("_prop.name"),r=i._prop.name;this._flag||(this._flag={}),this._flag.parent=["parent",c,e,this],i._parentStore||(i._parentStore=[!1]),i._parentStore.push(this),i._caller.setSetting({name:r,parent:function(e){for(var t=this[r]._parentStore,n=t?t.length-1:0;n>0;n--)t[n]._flag.parent?a.call(this,e,!1,this[r],t[n]._flag.parent):console.error("2 NO PARENT FLAG!")}}),this._val=c,this._skip=!0,s.call(i._base,i,this._flag.parent,n),i._base.eachInstance(s,r,i,this._flag.parent)},remove:function(e){var t=this.checkParent("_prop.name"),n=t._base,i=t._listens,r=t._prop.name,o=e[2],a=t._parentStore,s=function(){var e=this.parent;if(e&&e[o]){if(!(i.length>0))return!0;p.checkArray(i,e[o])&&e[o].removeListener(!1,t)}};this._val=0,i&&!s.call(n)&&n.eachInstance(s,r),a.splice(p.checkArray(a,this,!0),1),1===a.length&&(n.removeSetting(r,"parent"),t._parentStore=null)}}},{"../":327,"../../object":303,"../../util":315,"./":322}],324:[function(e,t,n){var i=t.exports=e("./"),r=e("../../util/process"),o=e("../"),a=e("../../util"),s=e("../../browser/network/ajax"),c=e("../../object");n.create=function(e,t,n,s){s||(s=i),n||(n=o);var c,l,u="__temp"+e+"__",p="__inprogress"+e+"__",f=n.prototype._update,d=t&&t.once,h=t&&t.deferMethod,v={reset:!0,set:function(t,n,i){this._flag||(this._flag={}),this._flag[e]=[e,!1,t,this]},remove:function(){var t,n=this._flag&&this._flag[e];if(n&&n[1])if(t="string"==typeof n[2]?r[n[2]]:"function"!=typeof n[2]&&n[2],t&&t.removeListener)t.removeListener(n[1]);else if(t&&t!==!0)for(var i in t)t.removeListener(t[i])}};if(n.prototype._blacklist.push(u,p,"_history"),h&&(t.deferMethod=null),d&&(t.once=null,n.prototype._blacklist.push(d)),t)for(var g in t)"set"===g?(c=v.set,v.set=function(e,n,i){t.set.call(this,c,arguments)}):"remove"===g?(l=v.remove,v.remove=function(e,n,i){t.remove.call(this,l,arguments)}):v[g]=t[g];s[e]=v,a.define(n,"_update",function(t,i){if(!this._flag||!this._flag[e]||d&&this[d])f.apply(this,arguments);else{var o,s,c,l,v,g=this,m=g._flag&&g._flag[e],y=g[u];if(y){if(i&&y[0][1]!==i){var _=a.arg(arguments);for(var b in _)y[0][b]=_[b]}return}if(g[u]=y=[],o=!0,s=a.arg(arguments),y.push(s),o&&(c=h?h.call(g,s,m[2],u,f,n,p):"string"==typeof m[2]?r[m[2]]:m[2])){if(l=function(){d&&(g[d]=!0);for(var e=0;e<y.length;e++)f.apply(g,y[e]);this.removeListener&&this.removeListener(l),g[u]=null},"function"==typeof c)g[p]||(v=function(e){e!==!0&&g[p]&&g[p](),g[p]=null,g[u]=null},g[p]=l,c.call(this,v,s,y)===!0&&(g[u]=null,g[p]=null));else if(c===!0)this.val||0===this.val?(f.apply(g,s),g[u]=null):console.error("no value! from defer type:",e);else if(c.addListener)c.addListener(l);else for(var w in c)c[w].addListener(l);m[1]=l}}})},n.create("$bubble",{deferMethod:function(e,t,n,i){var r,o,a=this;a[n]=null,t?((o=t.references)?o instanceof Object?o.$lte&&a.referenceLevel(a._updateOrigin)<=o.$lte&&(r=!0):o>-1?a.referenceLevel(a._updateOrigin)===o&&(r=!0):o===!0&&a.referenceLevel(a._updateOrigin)!==!1&&(r=!0):t&&t.self===!0&&(void 0===e[2]||this._val===e[0]||!e[0]&&this._updateOrigin===this)&&(r=!0),r?i.apply(a,e):a.clearReferencesCache()):i.apply(a,e)}}),n.create("defer"),o.operators.responseData=function(e,t){return t===!1?e:t},n.create("ajax",{remove:function(e,t){e.apply(this,t)},set:function(e,t){this.loading||this.set("loading",!1,!1,!1,!0),e.apply(this,t)},deferMethod:function(e,t,n,i,r){var o=this;return t&&function(e,n){var i=e;if(e=function(e,t){o.clearCache(),o._skip=!0,o._ignoreValue=!0,e&&(n[0]=e,o._val instanceof c||(o.val=e)),o.loading&&(o.loading.val=!1),i(t),o._ignoreValue=null},"object"==typeof t){var a=t;t={};for(var l in a)if("defer"===l)t[l]=a[l];else if(!t[l]){if("complete"!==l&&"error"!==l&&"function"==typeof a[l]){if(t[l]=a[l].call(o,t,n[0],n),!t[l])return!0}else t[l]=a[l];t[l]instanceof c&&(t[l]=t[l].val)}}if("function"==typeof t&&(t=t.call(o,t,n[0],n),!t))return!0;if("string"==typeof t&&(t={url:t}),t.url instanceof c&&(t.url=t.url.val),!t||!t.url&&!t.api)return!0;var u=t.complete,p=t.error;t.complete=function(i){t.defer?t.defer.call(o,e,n,null,i,t):(o.responseData?o.responseData.merge(i):o.set("responseData",i),u&&u(i),e("success"))},t.error=function(i){t.defer?t.defer.call(o,e,n,i,t):(o.responseData&&o.responseData.each(function(e){r.operators[e]||r.flags[e]||this.remove()}),o.set("responseData",void 0),p&&p(data),e("error"))},o.loading&&(o.loading.val=!0),s(t)}}}),n.create("apiDefer",{remove:function(e,t){e.apply(this,t)},set:function(e,t){this.loading||this.set("loading",!1,!1,!1,!0),e.apply(this,t)},deferMethod:function(e,t,n,i,r,o){var a=this;return t&&function(e,n){if(!n[0]||n[0].apiDefer)return!0;var i=function(t,i){if(a.loading.val=!1,t&&t!==!0){a.val=n[0]=t;try{e(t)}catch(r){a.type=r,e("error")}a.clearCache(),a._val=!1}else e(t)};a.loading.val=!0;var r=a.checkParent("api",!0);r&&r.val!==!0?(r.once(function(e){"error"===e?(a.clearCache(),a.val=n[0]="error",a.type=this.type||"api",a.loading.val=!1,i()):e===!0&&t.call(a,i,n)}),r.val=!0):t.call(a,i,n)}}}),n.create("init",{set:function(e,t){this.initialised||e.apply(this,t)},remove:function(e,t){e.apply(this,t),this.initialised=null},once:"initialised"}),t.exports=n},{"../":327,"../../browser/network/ajax":223,"../../object":303,"../../util":315,"../../util/process":318,"./":322}],325:[function(e,t,n){var i=t.exports=e("./");i.self={reset:!0,useVal:!0,set:function(e,t,n){var i=this.checkParent("_prop.name");i._base&&i._base[e]&&(i._base[e].addListener(this),this._val=function(){return this[e]&&this[e].val},this._flag||(this._flag={}),this._flag.self=["self",this._val,e,this])}}},{"./":322}],326:[function(e,t,n){var i=t.exports=e("./");i.listen={reset:!0,set:function(e,t,n){if(!e)return void console.error("no val in flags listen!");if(this._flag||(this._flag={}),this._flag.listen=["listen",!1,e,this],e instanceof Array)for(var i=e.length-1;i>=0;e[i--].addListener(this));else{e.addListener(this)}},remove:function(){if(this._flag&&this._flag.listen){var e=this._flag.listen[2];if(e instanceof Array)for(var t=e.length-1;t>=0;e[t--].removeListener(this));else e.removeListener(this)}}}},{"./":322}],327:[function(e,t,n){var i=e("../object"),r=e("../util"),o=e("../");t.exports=n=o.Value=i["new"]({mixed:!0,merge:!0});var a=function(e,t,n,i,r,o){var a=i[n]._get(r,t,e);return void 0!==a&&null!==a&&(e=o[n](e||("string"==typeof a?"":0),a)),e};n.prototype._blacklist.push("_lstamp","_clearCache","_lval","__lval","___lval","_base","_caller","_bind","_prop","_instances","_skip","_overwrite"),r.define(n,"clearCache",function(){this.___lval=null,this.__lval=null,this._lval=null},"clearReferencesCache",function(){for(from=this._val;from;)from.clearCache&&from.clearCache(),from=from&&from._val?from._val:null},"ignoreCache",{get:function(){for(var e=this;e;){if(e._prop&&e._prop.cache===!1)return!0;e=e._parent}}},"_get",function(e,t,n){if(this._clearCache&&this.clearCache(),this._overwrite)return this._overwrite;if(!this._lval&&0!==this._lval||t){var r,o=this._val,s=this.operators;if(o instanceof i)o=o._get(this._bind||e,t,n);else if("function"==typeof o){var c=this;if(!e)for(;c._parent&&!c._caller;)c=c._parent;o=o.call(e||c._caller||c._base||this,this,n),r=!0}if(s)if(1===this.__t&&s[this._name]){o=0;for(var l=0,u=this.length;u>l;l++)this[l]&&(vj=this[l]._get(e,!1,(n||0)+o),vj||(vj=0),"string"==typeof vj&&0===o&&(o=""),o+=vj,this[l]._lval||(r=!0))}else{var p;for(var f in this)if(s[f])if(s[f].order)if(p){p.pop||(p=[p]);for(var d=s[f].order,h=p.length-1,v=0;v!==!0&&h>=v;v++)if(v===h){if(d<s[p[v]].order){var c=p[v];p[h]=f,p.push(c)}else p.push(f);v=!0}else v===h&&d>s[p[v]].order&&(p.push(f),v=!0)}else p=f;else t||this[f]._lstamp===this._lstamp||1!==this[f].__t||(t=!0),o=a(o,t,f,this,e,s),r||this[f]._lval||(r=!0);if(p){var g;for(f=p.pop?(g=1)&&p[0]:p;f&&this[f];)t||this[f]._lstamp===this._lstamp||1!==this[f].__t||(t=!0),o=a(o,t,f,this,e,s),r||this[f]._lval||(r=!0),f=p[g++]}}return r||t?this._base&&this._base.instances||(this.__lval=o):(this._lval=o,this.__lval=o),o}return this.__lval},"update",function(e,t,n,i,r,o,a){return this._update.call(this,void 0,i||this.stamp(),r,o,!1,!1,t,e,n),this},"_update",function(e,t,r,o,a,s,c,l,u){var p=this,f=p._base;if(e instanceof n&&!p._bind&&e._caller&&(p._bind=e._caller),(!p._lstamp||p._lstamp!==t)&&(p._lval=!1,f&&f.instances||p._skip||void 0===p.__lval||p.___lval!==p.val)){var d=p._prop,h=p._parent,v=d&&d._vset,g=p.operators;if((!r||!o)&&g&&(g[p._name]||h&&1===h.__t&&g[h._name]&&(!r||p._name==h.length-1))){for(var m=this._parent;g[m._name];)m._lval=!1,m=m._parent;m&&m._update(e,t,this,o,a,s,c,l,u)}u?u.call(p,e,t,r,o,a,s,c,l,u):(l&&(f=l),v&&(p._caller=f,v.call(p,t,r,o,e)),f&&v&&f.instances&&!c&&d.updateinstances!==!1&&(f.eachInstance(function(){p._caller=this,v.call(p,t,r,o,e)},d.name,p),p._caller=f),i.prototype._update.call(p,e,t,r||p,o,a,s)),p._lstamp=t}}),r.define(n,"operators",{value:n.operators=e("./operators")})},{"../":238,"../object":303,"../util":315,"./operators":330}],328:[function(e,t,n){function i(e){var t=new o({val:function(){return r(e)}});return e.on(function(e){t._update.apply(t,arguments)}),t}function r(e){return e?e._filter?e.length:4===e.__t?r(e._val):e.__t<3?e.keys.length:"string"==typeof e._val?e._val.length:0:0}var o=e("vigour-js/value"),a=e("vigour-js/util"),s=e("vigour-js/object");n.extend=a.extend(function(e){if(!(e.prototype instanceof s||e===s))throw new Error('cannot extend "$length" on non VObject Class');e.prototype._blacklist.push("_$length"),a.define(e,"$length",{get:function(){return a.include(this._blacklist,"_$length"),this._$length||(this._$length=i(this))}})})},{"vigour-js/object":303,"vigour-js/util":315,"vigour-js/value":327}],329:[function(e,t,n){var i=(e("./"),e("../util")),r=e("../base");n.extend=i.extend(function(e){if(!(e instanceof r))throw new Error('cannot extend "on" on non Base Class');e.extend({name:"on",set:function(e){},remove:function(e){this.on.$remove&&this.on.$remove.update()},"new":function(e){this.on.$new&&this.on.$new.update()},parent:function(e){this.on.$parent&&this.on.$parent.update()},render:function(e){this.on.$render&&this.on.$render.update()}})})},{"../base":195,"../util":315,"./":327}],330:[function(e,t,n){e("../util"),e("../");n.add=function(e,t){return e+t},n.sub=function(e,t){return e-t},n.multiply=function(e,t){return e*t},n.divide=function(e,t){return e/t},n.max=function(e,t){return e>t?t:e},n.min=function(e,t){return t>e?t:e},n.transform=function(e,t){return t===!1?e:t},n.abs=function(e,t){return t?Math.abs(e):e},n.floor=function(e,t){return 0|e},n.ceil=function(e,t){return Math.ceil(e)},n.$convertType=function(e,t){return"boolean"===t?e?!0:!1:"number"===t?Number(e):void 0},n["default"]=function(e,t){return!e&&0!==e||e._val===!1||"error"===e||"success"===e?t:e},n["default"].order=1e3},{"../":238,"../util":315}],331:[function(e,t,n){var i=function(){function e(e){return null==e?String(e):J[W.call(e)]||"object"}function t(t){return"function"==e(t)}function n(e){return null!=e&&e==e.window}function i(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function r(t){return"object"==e(t)}function o(e){return r(e)&&!n(e)&&Object.getPrototypeOf(e)==Object.prototype}function a(e){return"number"==typeof e.length}function s(e){return A.call(e,function(e){return null!=e})}function c(e){return e.length>0?x.fn.concat.apply([],e):e}function l(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function u(e){return e in P?P[e]:P[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function p(e,t){return"number"!=typeof t||L[l(e)]?t:t+"px"}function f(e){var t,n;return $[e]||(t=T.createElement(e),T.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),$[e]=n),$[e]}function d(e){return"children"in e?O.call(e.children):x.map(e.childNodes,function(e){return 1==e.nodeType?e:void 0})}function h(e,t,n){for(k in t)n&&(o(t[k])||K(t[k]))?(o(t[k])&&!o(e[k])&&(e[k]={}),K(t[k])&&!K(e[k])&&(e[k]=[]),h(e[k],t[k],n)):t[k]!==w&&(e[k]=t[k])}function v(e,t){return null==t?x(e):x(e).filter(t)}function g(e,n,i,r){return t(n)?n.call(e,i,r):n}function m(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function y(e,t){var n=e.className||"",i=n&&n.baseVal!==w;return t===w?i?n.baseVal:n:void(i?n.baseVal=t:e.className=t)}function _(e){try{return e?"true"==e||("false"==e?!1:"null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?x.parseJSON(e):e):e}catch(t){return e}}function b(e,t){t(e);for(var n=0,i=e.childNodes.length;i>n;n++)b(e.childNodes[n],t)}var w,k,x,j,C,S,E=[],O=E.slice,A=E.filter,T=window.document,$={},P={},L={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},R=/^\s*<(\w+|!)[^>]*>/,I=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,D=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,B=/^(?:body|html)$/i,N=/([A-Z])/g,M=["val","css","html","text","data","width","height","offset"],U=["after","prepend","before","append"],F=T.createElement("table"),q=T.createElement("tr"),z={tr:T.createElement("tbody"),tbody:F,thead:F,tfoot:F,td:q,th:q,"*":T.createElement("div")},H=/complete|loaded|interactive/,V=/^[\w-]*$/,J={},W=J.toString,G={},X=T.createElement("div"),Y={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},K=Array.isArray||function(e){return e instanceof Array};return G.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var i,r=e.parentNode,o=!r;return o&&(r=X).appendChild(e),i=~G.qsa(r,t).indexOf(e),o&&X.removeChild(e),i},C=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},S=function(e){return A.call(e,function(t,n){return e.indexOf(t)==n})},G.fragment=function(e,t,n){var i,r,a;return I.test(e)&&(i=x(T.createElement(RegExp.$1))),i||(e.replace&&(e=e.replace(D,"<$1></$2>")),t===w&&(t=R.test(e)&&RegExp.$1),t in z||(t="*"),a=z[t],a.innerHTML=""+e,i=x.each(O.call(a.childNodes),function(){a.removeChild(this)})),o(n)&&(r=x(i),x.each(n,function(e,t){M.indexOf(e)>-1?r[e](t):r.attr(e,t)})),i},G.Z=function(e,t){return e=e||[],e.__proto__=x.fn,e.selector=t||"",e},G.isZ=function(e){return e instanceof G.Z},G.init=function(e,n){var i;if(!e)return G.Z();if("string"==typeof e)if(e=e.trim(),"<"==e[0]&&R.test(e))i=G.fragment(e,RegExp.$1,n),e=null;else{if(n!==w)return x(n).find(e);i=G.qsa(T,e)}else{if(t(e))return x(T).ready(e);if(G.isZ(e))return e;if(K(e))i=s(e);else if(r(e))i=[e],e=null;else if(R.test(e))i=G.fragment(e.trim(),RegExp.$1,n),e=null;else{if(n!==w)return x(n).find(e);i=G.qsa(T,e)}}return G.Z(i,e)},x=function(e,t){return G.init(e,t)},x.extend=function(e){var t,n=O.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach(function(n){h(e,n,t)}),e},G.qsa=function(e,t){var n,r="#"==t[0],o=!r&&"."==t[0],a=r||o?t.slice(1):t,s=V.test(a);return i(e)&&s&&r?(n=e.getElementById(a))?[n]:[]:1!==e.nodeType&&9!==e.nodeType?[]:O.call(s&&!r?o?e.getElementsByClassName(a):e.getElementsByTagName(t):e.querySelectorAll(t))},x.contains=T.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},x.type=e,x.isFunction=t,x.isWindow=n,x.isArray=K,x.isPlainObject=o,x.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},x.inArray=function(e,t,n){return E.indexOf.call(t,e,n)},x.camelCase=C,x.trim=function(e){return null==e?"":String.prototype.trim.call(e)},x.uuid=0,x.support={},x.expr={},x.map=function(e,t){var n,i,r,o=[];if(a(e))for(i=0;i<e.length;i++)n=t(e[i],i),null!=n&&o.push(n);else for(r in e)n=t(e[r],r),null!=n&&o.push(n);return c(o)},x.each=function(e,t){var n,i;if(a(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(i in e)if(t.call(e[i],i,e[i])===!1)return e;return e},x.grep=function(e,t){return A.call(e,t)},window.JSON&&(x.parseJSON=JSON.parse),x.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){J["[object "+t+"]"]=t.toLowerCase()}),x.fn={forEach:E.forEach,reduce:E.reduce,push:E.push,sort:E.sort,indexOf:E.indexOf,concat:E.concat,map:function(e){return x(x.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return x(O.apply(this,arguments))},ready:function(e){return H.test(T.readyState)&&T.body?e(x):T.addEventListener("DOMContentLoaded",function(){e(x)},!1),this},get:function(e){return e===w?O.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return E.every.call(this,function(t,n){return e.call(t,n,t)!==!1}),this},filter:function(e){return t(e)?this.not(this.not(e)):x(A.call(this,function(t){return G.matches(t,e)}))},add:function(e,t){return x(S(this.concat(x(e,t))))},is:function(e){return this.length>0&&G.matches(this[0],e)},not:function(e){var n=[];if(t(e)&&e.call!==w)this.each(function(t){e.call(this,t)||n.push(this)});else{var i="string"==typeof e?this.filter(e):a(e)&&t(e.item)?O.call(e):x(e);this.forEach(function(e){i.indexOf(e)<0&&n.push(e)})}return x(n)},has:function(e){return this.filter(function(){return r(e)?x.contains(this,e):x(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!r(e)?e:x(e)},last:function(){var e=this[this.length-1];return e&&!r(e)?e:x(e)},find:function(e){var t,n=this;return t=e?"object"==typeof e?x(e).filter(function(){var e=this;return E.some.call(n,function(t){return x.contains(t,e)})}):1==this.length?x(G.qsa(this[0],e)):this.map(function(){return G.qsa(this,e)}):x()},closest:function(e,t){var n=this[0],r=!1;for("object"==typeof e&&(r=x(e));n&&!(r?r.indexOf(n)>=0:G.matches(n,e));)n=n!==t&&!i(n)&&n.parentNode;return x(n)},parents:function(e){for(var t=[],n=this;n.length>0;)n=x.map(n,function(e){return(e=e.parentNode)&&!i(e)&&t.indexOf(e)<0?(t.push(e),e):void 0});return v(t,e)},parent:function(e){return v(S(this.pluck("parentNode")),e)},children:function(e){return v(this.map(function(){return d(this)}),e)},contents:function(){return this.map(function(){return O.call(this.childNodes)})},siblings:function(e){return v(this.map(function(e,t){return A.call(d(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return x.map(this,function(t){return t[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=f(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var n=t(e);if(this[0]&&!n)var i=x(e).get(0),r=i.parentNode||this.length>1;return this.each(function(t){x(this).wrapAll(n?e.call(this,t):r?i.cloneNode(!0):i)})},wrapAll:function(e){if(this[0]){x(this[0]).before(e=x(e));for(var t;(t=e.children()).length;)e=t.first();x(e).append(this)}return this},wrapInner:function(e){var n=t(e);return this.each(function(t){var i=x(this),r=i.contents(),o=n?e.call(this,t):e;r.length?r.wrapAll(o):i.append(o)})},unwrap:function(){return this.parent().each(function(){x(this).replaceWith(x(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=x(this);(e===w?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(e){return x(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return x(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each(function(t){var n=this.innerHTML;x(this).empty().append(g(this,e,t,n))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(t){var n=g(this,e,t,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this[0].textContent:null},attr:function(e,t){var n;return"string"!=typeof e||1 in arguments?this.each(function(n){if(1===this.nodeType)if(r(e))for(k in e)m(this,k,e[k]);else m(this,e,g(this,t,n,this.getAttribute(e)))}):this.length&&1===this[0].nodeType?!(n=this[0].getAttribute(e))&&e in this[0]?this[0][e]:n:w},removeAttr:function(e){return this.each(function(){1===this.nodeType&&e.split(" ").forEach(function(e){m(this,e)},this)})},prop:function(e,t){return e=Y[e]||e,1 in arguments?this.each(function(n){this[e]=g(this,t,n,this[e])}):this[0]&&this[0][e]},data:function(e,t){var n="data-"+e.replace(N,"-$1").toLowerCase(),i=1 in arguments?this.attr(n,t):this.attr(n);return null!==i?_(i):w},val:function(e){return 0 in arguments?this.each(function(t){this.value=g(this,e,t,this.value)}):this[0]&&(this[0].multiple?x(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each(function(t){var n=x(this),i=g(this,e,t,n.offset()),r=n.offsetParent().offset(),o={top:i.top-r.top,left:i.left-r.left};"static"==n.css("position")&&(o.position="relative"),n.css(o)});if(!this.length)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(t,n){if(arguments.length<2){var i,r=this[0];if(!r)return;if(i=getComputedStyle(r,""),"string"==typeof t)return r.style[C(t)]||i.getPropertyValue(t);if(K(t)){var o={};return x.each(t,function(e,t){o[t]=r.style[C(t)]||i.getPropertyValue(t)}),o}}var a="";if("string"==e(t))n||0===n?a=l(t)+":"+p(t,n):this.each(function(){this.style.removeProperty(l(t))});else for(k in t)t[k]||0===t[k]?a+=l(k)+":"+p(k,t[k])+";":this.each(function(){this.style.removeProperty(l(k))});return this.each(function(){this.style.cssText+=";"+a})},index:function(e){return e?this.indexOf(x(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return e?E.some.call(this,function(e){return this.test(y(e))},u(e)):!1},addClass:function(e){return e?this.each(function(t){if("className"in this){j=[];var n=y(this),i=g(this,e,t,n);i.split(/\s+/g).forEach(function(e){x(this).hasClass(e)||j.push(e)},this),j.length&&y(this,n+(n?" ":"")+j.join(" "))}}):this},removeClass:function(e){return this.each(function(t){if("className"in this){if(e===w)return y(this,"");j=y(this),g(this,e,t,j).split(/\s+/g).forEach(function(e){j=j.replace(u(e)," ")}),y(this,j.trim())}})},toggleClass:function(e,t){return e?this.each(function(n){var i=x(this),r=g(this,e,n,y(this));r.split(/\s+/g).forEach(function(e){(t===w?!i.hasClass(e):t)?i.addClass(e):i.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return e===w?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return e===w?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),i=B.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(x(e).css("margin-top"))||0,n.left-=parseFloat(x(e).css("margin-left"))||0,i.top+=parseFloat(x(t[0]).css("border-top-width"))||0,i.left+=parseFloat(x(t[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||T.body;e&&!B.test(e.nodeName)&&"static"==x(e).css("position");)e=e.offsetParent;return e})}},x.fn.detach=x.fn.remove,["width","height"].forEach(function(e){var t=e.replace(/./,function(e){return e[0].toUpperCase()});x.fn[e]=function(r){var o,a=this[0];return r===w?n(a)?a["inner"+t]:i(a)?a.documentElement["scroll"+t]:(o=this.offset())&&o[e]:this.each(function(t){a=x(this),a.css(e,g(this,r,t,a[e]()))})}}),U.forEach(function(t,n){var i=n%2;x.fn[t]=function(){var t,r,o=x.map(arguments,function(n){return t=e(n),"object"==t||"array"==t||null==n?n:G.fragment(n)}),a=this.length>1;return o.length<1?this:this.each(function(e,t){r=i?t:t.parentNode,t=0==n?t.nextSibling:1==n?t.firstChild:2==n?t:null;var s=x.contains(T.documentElement,r);o.forEach(function(e){if(a)e=e.cloneNode(!0);else if(!r)return x(e).remove();r.insertBefore(e,t),s&&b(e,function(e){null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||window.eval.call(window,e.innerHTML)})})})},x.fn[i?t+"To":"insert"+(n?"Before":"After")]=function(e){return x(e)[t](this),this}}),G.Z.prototype=x.fn,G.uniq=S,G.deserializeValue=_,x.zepto=G,x}();window.Zepto=i,void 0===window.$&&(window.$=i),n.Zepto=window.Zepto,n.$=window.$,function(e){function t(e){return e._zid||(e._zid=f++)}function n(e,n,o,a){if(n=i(n),n.ns)var s=r(n.ns);return(g[t(e)]||[]).filter(function(e){return!(!e||n.e&&e.e!=n.e||n.ns&&!s.test(e.ns)||o&&t(e.fn)!==t(o)||a&&e.sel!=a)})}function i(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function r(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function o(e,t){return e.del&&!y&&e.e in _||!!t}function a(e){return b[e]||y&&_[e]||e}function s(n,r,s,c,u,f,d){var h=t(n),v=g[h]||(g[h]=[]);

r.split(/\s/).forEach(function(t){if("ready"==t)return e(document).ready(s);var r=i(t);r.fn=s,r.sel=u,r.e in b&&(s=function(t){var n=t.relatedTarget;return!n||n!==this&&!e.contains(this,n)?r.fn.apply(this,arguments):void 0}),r.del=f;var h=f||s;r.proxy=function(e){if(e=l(e),!e.isImmediatePropagationStopped()){e.data=c;var t=h.apply(n,e._args==p?[e]:[e].concat(e._args));return t===!1&&(e.preventDefault(),e.stopPropagation()),t}},r.i=v.length,v.push(r),"addEventListener"in n&&n.addEventListener(a(r.e),r.proxy,o(r,d))})}function c(e,i,r,s,c){var l=t(e);(i||"").split(/\s/).forEach(function(t){n(e,t,r,s).forEach(function(t){delete g[l][t.i],"removeEventListener"in e&&e.removeEventListener(a(t.e),t.proxy,o(t,c))})})}function l(t,n){return(n||!t.isDefaultPrevented)&&(n||(n=t),e.each(j,function(e,i){var r=n[e];t[e]=function(){return this[i]=w,r&&r.apply(n,arguments)},t[i]=k}),(n.defaultPrevented!==p?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())&&(t.isDefaultPrevented=w)),t}function u(e){var t,n={originalEvent:e};for(t in e)x.test(t)||e[t]===p||(n[t]=e[t]);return l(n,e)}var p,f=1,d=Array.prototype.slice,h=e.isFunction,v=function(e){return"string"==typeof e},g={},m={},y="onfocusin"in window,_={focus:"focusin",blur:"focusout"},b={mouseenter:"mouseover",mouseleave:"mouseout"};m.click=m.mousedown=m.mouseup=m.mousemove="MouseEvents",e.event={add:s,remove:c},e.proxy=function(n,i){var r=2 in arguments&&d.call(arguments,2);if(h(n)){var o=function(){return n.apply(i,r?r.concat(d.call(arguments)):arguments)};return o._zid=t(n),o}if(v(i))return r?(r.unshift(n[i],n),e.proxy.apply(null,r)):e.proxy(n[i],n);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,i){return this.on(e,t,n,i,1)};var w=function(){return!0},k=function(){return!1},x=/^([A-Z]|returnValue$|layer[XY]$)/,j={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,i,r,o){var a,l,f=this;return t&&!v(t)?(e.each(t,function(e,t){f.on(e,n,i,t,o)}),f):(v(n)||h(r)||r===!1||(r=i,i=n,n=p),(h(i)||i===!1)&&(r=i,i=p),r===!1&&(r=k),f.each(function(p,f){o&&(a=function(e){return c(f,e.type,r),r.apply(this,arguments)}),n&&(l=function(t){var i,o=e(t.target).closest(n,f).get(0);return o&&o!==f?(i=e.extend(u(t),{currentTarget:o,liveFired:f}),(a||r).apply(o,[i].concat(d.call(arguments,1)))):void 0}),s(f,t,r,i,n,l||a)}))},e.fn.off=function(t,n,i){var r=this;return t&&!v(t)?(e.each(t,function(e,t){r.off(e,n,t)}),r):(v(n)||h(i)||i===!1||(i=n,n=p),i===!1&&(i=k),r.each(function(){c(this,t,i,n)}))},e.fn.trigger=function(t,n){return t=v(t)||e.isPlainObject(t)?e.Event(t):l(t),t._args=n,this.each(function(){t.type in _&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)})},e.fn.triggerHandler=function(t,i){var r,o;return this.each(function(a,s){r=u(v(t)?e.Event(t):t),r._args=i,r.target=s,e.each(n(s,t.type||t),function(e,t){return o=t.proxy(r),r.isImmediatePropagationStopped()?!1:void 0})}),o},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}}),e.Event=function(e,t){v(e)||(t=e,e=t.type);var n=document.createEvent(m[e]||"Events"),i=!0;if(t)for(var r in t)"bubbles"==r?i=!!t[r]:n[r]=t[r];return n.initEvent(e,i,!0),l(n)}}(i),function(e){function t(t,n,i){var r=e.Event(n);return e(t).trigger(r,i),!r.isDefaultPrevented()}function n(e,n,i,r){return e.global?t(n||y,i,r):void 0}function i(t){t.global&&0===e.active++&&n(t,null,"ajaxStart")}function r(t){t.global&&!--e.active&&n(t,null,"ajaxStop")}function o(e,t){var i=t.context;return t.beforeSend.call(i,e,t)===!1||n(t,i,"ajaxBeforeSend",[e,t])===!1?!1:void n(t,i,"ajaxSend",[e,t])}function a(e,t,i,r){var o=i.context,a="success";i.success.call(o,e,a,t),r&&r.resolveWith(o,[e,a,t]),n(i,o,"ajaxSuccess",[t,i,e]),c(a,t,i)}function s(e,t,i,r,o){var a=r.context;r.error.call(a,i,t,e),o&&o.rejectWith(a,[i,t,e]),n(r,a,"ajaxError",[i,r,e||t]),c(t,i,r)}function c(e,t,i){var o=i.context;i.complete.call(o,t,e),n(i,o,"ajaxComplete",[t,i]),r(i)}function l(){}function u(e){return e&&(e=e.split(";",2)[0]),e&&(e==x?"html":e==k?"json":b.test(e)?"script":w.test(e)&&"xml")||"text"}function p(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function f(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()||(t.url=p(t.url,t.data),t.data=void 0)}function d(t,n,i,r){return e.isFunction(n)&&(r=i,i=n,n=void 0),e.isFunction(i)||(r=i,i=void 0),{url:t,data:n,success:i,dataType:r}}function h(t,n,i,r){var o,a=e.isArray(n),s=e.isPlainObject(n);e.each(n,function(n,c){o=e.type(c),r&&(n=i?r:r+"["+(s||"object"==o||"array"==o?n:"")+"]"),!r&&a?t.add(c.name,c.value):"array"==o||!i&&"object"==o?h(t,c,i,n):t.add(n,c)})}var v,g,m=0,y=window.document,_=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,b=/^(?:text|application)\/javascript/i,w=/^(?:text|application)\/xml/i,k="application/json",x="text/html",j=/^\s*$/,C=y.createElement("a");C.href=window.location.href,e.active=0,e.ajaxJSONP=function(t,n){if(!("type"in t))return e.ajax(t);var i,r,c=t.jsonpCallback,l=(e.isFunction(c)?c():c)||"jsonp"+ ++m,u=y.createElement("script"),p=window[l],f=function(t){e(u).triggerHandler("error",t||"abort")},d={abort:f};return n&&n.promise(d),e(u).on("load error",function(o,c){clearTimeout(r),e(u).off().remove(),"error"!=o.type&&i?a(i[0],d,t,n):s(null,c||"error",d,t,n),window[l]=p,i&&e.isFunction(p)&&p(i[0]),p=i=void 0}),o(d,t)===!1?(f("abort"),d):(window[l]=function(){i=arguments},u.src=t.url.replace(/\?(.+)=\?/,"?$1="+l),y.head.appendChild(u),t.timeout>0&&(r=setTimeout(function(){f("timeout")},t.timeout)),d)},e.ajaxSettings={type:"GET",beforeSend:l,success:l,error:l,complete:l,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:k,xml:"application/xml, text/xml",html:x,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},e.ajax=function(t){var n,r=e.extend({},t||{}),c=e.Deferred&&e.Deferred();for(v in e.ajaxSettings)void 0===r[v]&&(r[v]=e.ajaxSettings[v]);i(r),r.crossDomain||(n=y.createElement("a"),n.href=r.url,n.href=n.href,r.crossDomain=C.protocol+"//"+C.host!=n.protocol+"//"+n.host),r.url||(r.url=window.location.toString()),f(r);var d=r.dataType,h=/\?.+=\?/.test(r.url);if(h&&(d="jsonp"),r.cache!==!1&&(t&&t.cache===!0||"script"!=d&&"jsonp"!=d)||(r.url=p(r.url,"_="+Date.now())),"jsonp"==d)return h||(r.url=p(r.url,r.jsonp?r.jsonp+"=?":r.jsonp===!1?"":"callback=?")),e.ajaxJSONP(r,c);var m,_=r.accepts[d],b={},w=function(e,t){b[e.toLowerCase()]=[e,t]},k=/^([\w-]+:)\/\//.test(r.url)?RegExp.$1:window.location.protocol,x=r.xhr(),S=x.setRequestHeader;if(c&&c.promise(x),r.crossDomain||w("X-Requested-With","XMLHttpRequest"),w("Accept",_||"*/*"),(_=r.mimeType||_)&&(_.indexOf(",")>-1&&(_=_.split(",",2)[0]),x.overrideMimeType&&x.overrideMimeType(_)),(r.contentType||r.contentType!==!1&&r.data&&"GET"!=r.type.toUpperCase())&&w("Content-Type",r.contentType||"application/x-www-form-urlencoded"),r.headers)for(g in r.headers)w(g,r.headers[g]);if(x.setRequestHeader=w,x.onreadystatechange=function(){if(4==x.readyState){x.onreadystatechange=l,clearTimeout(m);var t,n=!1;if(x.status>=200&&x.status<300||304==x.status||0==x.status&&"file:"==k){d=d||u(r.mimeType||x.getResponseHeader("content-type")),t=x.responseText;try{"script"==d?(1,eval)(t):"xml"==d?t=x.responseXML:"json"==d&&(t=j.test(t)?null:e.parseJSON(t))}catch(i){n=i}n?s(n,"parsererror",x,r,c):a(t,x,r,c)}else s(x.statusText||null,x.status?"error":"abort",x,r,c)}},o(x,r)===!1)return x.abort(),s(null,"abort",x,r,c),x;if(r.xhrFields)for(g in r.xhrFields)x[g]=r.xhrFields[g];var E="async"in r?r.async:!0;x.open(r.type,r.url,E,r.username,r.password);for(g in b)S.apply(x,b[g]);return r.timeout>0&&(m=setTimeout(function(){x.onreadystatechange=l,x.abort(),s(null,"timeout",x,r,c)},r.timeout)),x.send(r.data?r.data:null),x},e.get=function(){return e.ajax(d.apply(null,arguments))},e.post=function(){var t=d.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=d.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,n,i){if(!this.length)return this;var r,o=this,a=t.split(/\s/),s=d(t,n,i),c=s.success;return a.length>1&&(s.url=a[0],r=a[1]),s.success=function(t){o.html(r?e("<div>").html(t.replace(_,"")).find(r):t),c&&c.apply(o,arguments)},e.ajax(s),this};var S=encodeURIComponent;e.param=function(t,n){var i=[];return i.add=function(t,n){e.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(S(t)+"="+S(n))},h(i,t,n),i.join("&").replace(/%20/g,"+")}}(i),function(e){e.fn.serializeArray=function(){var t,n,i=[],r=function(e){return e.forEach?e.forEach(r):void i.push({name:t,value:e})};return this[0]&&e.each(this[0].elements,function(i,o){n=o.type,t=o.name,t&&"fieldset"!=o.nodeName.toLowerCase()&&!o.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&"file"!=n&&("radio"!=n&&"checkbox"!=n||o.checked)&&r(e(o).val())}),i},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(0 in arguments)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(i),function(e){"__proto__"in{}||e.extend(e.zepto,{Z:function(t,n){return t=t||[],e.extend(t,e.fn),t.selector=n||"",t.__Z=!0,t},isZ:function(t){return"array"===e.type(t)&&"__Z"in t}});try{getComputedStyle(void 0)}catch(t){var n=getComputedStyle;window.getComputedStyle=function(e){try{return n(e)}catch(t){return null}}}}(i)},{}],332:[function(e,t,n){function i(){var t=window.innerWidth,n=window.innerHeight;t>n?o.set({message:new(r||(r=e("../components/rotate-message")))}):o.message&&o.message.remove()}var r,o=e("../app"),a=e("../components/switcher"),s=e("vigour-js/browser/cases");o.set({switcher:new a({on:{navigation:o.user.navigation,play:o.playing,receiver:o.user.receiver,favourites:o.user.favourites,usage:o.user.usage,content:o.content,highlight:o.user.highlight,search:o.user.search,scroll:o.user.scroll,carousel:o.user.carousel,volume:o.volume,notification:o.notification,usage:o.user.usage,watched:o.user.watched.from,state:o.state,popup:o.popup,overlay:o.overlay,loading:o.loading,profilepic:o.user.profilepic,activeClient:o.user.activeClient},display:"none"})}),o.ready.once(!0,function(){o.switcher.display="block"}),s.phone&&!s["native"]&&(o.w.on(i),i()),o.initialised.val=!0},{"../app":27,"../components/rotate-message":133,"../components/switcher":157,"vigour-js/browser/cases":202}],333:[function(e,t,n){{var i=e("../app"),r=e("../components/switcher");e("vigour-js/browser/cases")}i.state.val={defer:function(e,t){"first"===this._val&&(this._val="second"),e()}},i.set({switcher:new r({on:{navigation:i.user.navigation,play:i.playing,receiver:i.user.receiver,favourites:i.user.favourites,usage:i.user.usage,content:i.content,fullscreen:i.fullscreen,highlight:i.user.highlight,search:i.user.search,scroll:i.user.scroll,carousel:i.user.carousel,volume:i.volume,notification:i.notification,usage:i.user.usage,watched:i.user.watched.from,state:i.state,popup:i.popup,overlay:i.overlay,loading:i.loading,profilepic:i.user.profilepic,activeClient:i.user.activeClient}})}),i.initialised.val=!0},{"../app":27,"../components/switcher":157,"vigour-js/browser/cases":202}],334:[function(e,t,n){{var i=(e("vigour-js/app/ui/tv"),e("../app")),r=e("../components/switcher");e("vigour-js/browser/cases")}i.set({switcher:new r({on:{navigation:i.user.navigation,play:i.playing,receiver:i.user.receiver,favourites:i.user.favourites,usage:i.user.usage,content:i.content,fullscreen:i.fullscreen,highlight:i.user.highlight,search:i.user.search,scroll:i.user.scroll,carousel:i.user.carousel,volume:i.volume,notification:i.notification,usage:i.user.usage,watched:i.user.watched.from,state:i.state,popup:i.popup,overlay:i.overlay,loading:i.loading,profilepic:i.user.profilepic,activeClient:i.user.activeClient}})}),i.initialised.val=!0},{"../app":27,"../components/switcher":157,"vigour-js/app/ui/tv":180,"vigour-js/browser/cases":202}],335:[function(e,t,n){t.exports=e(42)},{"/Users/youzi/dev/mtv-play/components/button/style.less":42}],336:[function(e,t,n){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],337:[function(e,t,n){n.endianness=function(){return"LE"},n.hostname=function(){return"undefined"!=typeof location?location.hostname:""},n.loadavg=function(){return[]},n.uptime=function(){return 0},n.freemem=function(){return Number.MAX_VALUE},n.totalmem=function(){return Number.MAX_VALUE},n.cpus=function(){return[]},n.type=function(){return"Browser"},n.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},n.networkInterfaces=n.getNetworkInterfaces=function(){return{}},n.arch=function(){return"javascript"},n.platform=function(){return"browser"},n.tmpdir=n.tmpDir=function(){return"/tmp"},n.EOL="\n"},{}],338:[function(e,t,n){function i(){}var r=t.exports={};r.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var i=n.shift();i()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=i,r.addListener=i,r.once=i,r.off=i,r.removeListener=i,r.removeAllListeners=i,r.emit=i,r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],339:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],340:[function(e,t,n){(function(t,i){function r(e,t){var i={seen:[],stylize:a};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),v(t)?i.showHidden=t:t&&n._extend(i,t),w(i.showHidden)&&(i.showHidden=!1),w(i.depth)&&(i.depth=2),w(i.colors)&&(i.colors=!1),w(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),c(i,e,i.depth)}function o(e,t){var n=r.styles[t];return n?"["+r.colors[n][0]+"m"+e+"["+r.colors[n][1]+"m":e}function a(e,t){return e}function s(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function c(e,t,i){if(e.customInspect&&t&&S(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(i,e);return _(r)||(r=c(e,r,i)),r}var o=l(e,t);if(o)return o;var a=Object.keys(t),v=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),C(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return u(t);if(0===a.length){if(S(t)){var g=t.name?": "+t.name:"";return e.stylize("[Function"+g+"]","special")}if(k(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(j(t))return e.stylize(Date.prototype.toString.call(t),"date");if(C(t))return u(t)}var m="",y=!1,b=["{","}"];if(h(t)&&(y=!0,b=["[","]"]),S(t)){var w=t.name?": "+t.name:"";m=" [Function"+w+"]"}if(k(t)&&(m=" "+RegExp.prototype.toString.call(t)),j(t)&&(m=" "+Date.prototype.toUTCString.call(t)),C(t)&&(m=" "+u(t)),0===a.length&&(!y||0==t.length))return b[0]+m+b[1];if(0>i)return k(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var x;return x=y?p(e,t,i,v,a):a.map(function(n){return f(e,t,i,v,n,y)}),e.seen.pop(),d(x,m,b)}function l(e,t){if(w(t))return e.stylize("undefined","undefined");if(_(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):v(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,i,r){for(var o=[],a=0,s=t.length;s>a;++a)o.push($(t,String(a))?f(e,t,n,i,String(a),!0):"");return r.forEach(function(r){r.match(/^\d+$/)||o.push(f(e,t,n,i,r,!0))}),o}function f(e,t,n,i,r,o){var a,s,l;if(l=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]},l.get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),$(i,r)||(a="["+r+"]"),s||(e.seen.indexOf(l.value)<0?(s=g(n)?c(e,l.value,null):c(e,l.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),w(a)){if(o&&r.match(/^\d+$/))return s;a=JSON.stringify(""+r),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function d(e,t,n){var i=0,r=e.reduce(function(e,t){return i++,t.indexOf("\n")>=0&&i++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function h(e){return Array.isArray(e)}function v(e){return"boolean"==typeof e}function g(e){return null===e}function m(e){return null==e}function y(e){return"number"==typeof e}function _(e){return"string"==typeof e}function b(e){return"symbol"==typeof e}function w(e){return void 0===e}function k(e){return x(e)&&"[object RegExp]"===O(e)}function x(e){return"object"==typeof e&&null!==e}function j(e){return x(e)&&"[object Date]"===O(e)}function C(e){return x(e)&&("[object Error]"===O(e)||e instanceof Error)}function S(e){return"function"==typeof e}function E(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function O(e){return Object.prototype.toString.call(e)}function A(e){return 10>e?"0"+e.toString(10):e.toString(10)}function T(){var e=new Date,t=[A(e.getHours()),A(e.getMinutes()),A(e.getSeconds())].join(":");return[e.getDate(),I[e.getMonth()],t].join(" ")}function $(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var P=/%[sdj%]/g;n.format=function(e){if(!_(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(r(arguments[n]));return t.join(" ")}for(var n=1,i=arguments,o=i.length,a=String(e).replace(P,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return e}}),s=i[n];o>n;s=i[++n])a+=g(s)||!x(s)?" "+s:" "+r(s);return a},n.deprecate=function(e,r){function o(){if(!a){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),a=!0}return e.apply(this,arguments)}if(w(i.process))return function(){return n.deprecate(e,r).apply(this,arguments)};if(t.noDeprecation===!0)return e;var a=!1;return o};var L,R={};n.debuglog=function(e){if(w(L)&&(L=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!R[e])if(new RegExp("\\b"+e+"\\b","i").test(L)){var i=t.pid;R[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,i,t)}}else R[e]=function(){};return R[e]},n.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=h,n.isBoolean=v,n.isNull=g,n.isNullOrUndefined=m,n.isNumber=y,n.isString=_,n.isSymbol=b,n.isUndefined=w,n.isRegExp=k,n.isObject=x,n.isDate=j,n.isError=C,n.isFunction=S,n.isPrimitive=E,n.isBuffer=e("./support/isBuffer");var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",T(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!x(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":339,_process:338,inherits:336}]},{},[164]);/*2015/4/30 21:9:31*/